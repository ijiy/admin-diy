import{G as P,y as R,i as V,H as k,I as B}from"./element-plus-DV6F2B4w.js";import I from"./html2canvas-CBrSDip1.js";import{E as N}from"./jspdf-1ohzvNt5.js";import{d as $,ao as j,bK as z,o as w,c as v,a as e,Q as o,b as p,K as d,R as H,u as x,S as M,ag as W}from"./@vue-CMlG33N7.js";import"./lodash-es-ByZL8CPd.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-BLWlpg6_.js";import"./@element-plus-C3PuTle3.js";import"./@ctrl-r5W6hzzQ.js";import"./@sxzz-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@codemirror-D1iYbWyp.js";import"./@lezer-g9ZlY1HQ.js";import"./crelt-C8TCjufn.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";const q={class:"h-base"},F={class:"qp-box h-base"},G={class:"h-base"},K={class:"c-title"},A={class:"h-base"},J={class:"c-title"},Q={class:"qp-box h-base",ref:"ref_table_wrap"},U={class:"flex jb"},T="表格名称",ft=$({name:"NPdfConvert",__name:"index",setup(O){const f=[];let a;const b=new Date;for(a=1;a<27;a++)b.setDate(a),f.push({name:`${String.fromCodePoint(64+a)}${String.fromCodePoint(96+a)}`,createTime:b.toLocaleString("zh",{hour12:!1}),progress:`${a}%`});const n=j({loading:!1,dataList:f}),C=[{prop:"name",label:"姓名",align:"center"},{prop:"createTime",label:"时间",align:"center"},{prop:"progress",label:"进度",align:"center"}],E=z("ref_table_wrap");let m,g,c,s,u,_;const i=new N({unit:"px"}),D=async()=>{if(!n.loading){n.loading=!0;try{const r=await I(E.value,{logging:!1,scale:2*window.devicePixelRatio,ignoreElements:t=>t.getAttribute("be-ignore")!==null});for(_=r.toDataURL("image/jpeg"),m=i.internal.pageSize.getWidth(),g=i.internal.pageSize.getHeight(),u=r.height*m/r.width,c=Math.ceil(u/g),s=0;s<c;s++)i.addImage(_,"JPEG",0,0-s*g,m,u),s<c-1&&i.addPage();i.save(`${T}.pdf`),P.success("导出成功")}catch{}n.loading=!1}};return(r,t)=>{const h=R,S=V,y=k,L=B;return w(),v("div",q,[e("div",F,[e("ul",G,[e("li",null,[e("h2",K,[t[1]||(t[1]=o(" 插件: ")),p(h,null,{default:d(()=>t[0]||(t[0]=[o("html2canvas")])),_:1})])]),t[2]||(t[2]=e("li",null,"作用: 将HTML转成图片",-1)),t[3]||(t[3]=e("li",{class:"h-base"},[e("div",null,[o(" 对比: "),e("strong",null,"html-to-image")]),e("ul",{class:"h-base"},[e("li",null,"优点: 可以指定忽略元素, 克隆处理元素"),e("li",null,"缺点: 较低的还原度, 需要2倍(scale)放大")])],-1))]),e("ul",A,[e("li",null,[e("h2",J,[t[5]||(t[5]=o(" 插件: ")),p(h,null,{default:d(()=>t[4]||(t[4]=[o("jspdf")])),_:1})])]),t[6]||(t[6]=e("li",null,"作用: 将图片转成PDF",-1))])]),e("div",Q,[e("div",U,[e("h2",{class:"c-title"},H(T)),p(S,{"be-ignore":"",loading:x(n).loading,type:"primary",onClick:D},{default:d(()=>t[7]||(t[7]=[o(" 导出图片 ")])),_:1},8,["loading"])]),p(L,{stripe:"",data:x(n).dataList},{default:d(()=>[(w(),v(M,null,W(C,l=>p(y,{key:l.prop,prop:l.prop,label:l.label,align:l.align,width:l.width,"min-width":l.minWidth,formatter:l.formatter},null,8,["prop","label","align","width","min-width","formatter"])),64))]),_:1},8,["data"])],512)])}}});export{ft as default};
