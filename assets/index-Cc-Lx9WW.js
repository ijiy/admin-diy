const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TapCaptcha-BVl322E1.js","assets/element-plus-rtZK4mjR.js","assets/@vue-Bu2ox0Ej.js","assets/lodash-es-CbX0-HeL.js","assets/async-validator-DKvM95Vc.js","assets/@vueuse-BI9iYFro.js","assets/@element-plus-BaPZHkdt.js","assets/@ctrl-r5W6hzzQ.js","assets/@sxzz-D9SI2xQl.js","assets/element-plus-CNO2kctf.css","assets/close-CHuxsR2e.js","assets/index-BJH4a_tv.js","assets/@codemirror-C6X7y8Au.js","assets/pinia-BMu_gUya.js","assets/vue-demi-Dq6ymT-8.js","assets/vue-router-Q6gHvPgm.js","assets/vue-i18n-BXMOD-z5.js","assets/@intlify-7FzvKZLA.js","assets/vue-CDKdorV-.js","assets/pinia-plugin-persistedstate-RV7uh3T-.js","assets/index-BZS-3KZs.css","assets/plugin-vueexport-helper-DlAUqK2U.js","assets/TapCaptcha-DpNk8Yuu.css"])))=>i.map(i=>d[i]);
import{_ as W}from"./@codemirror-C6X7y8Au.js";import{b as j,e as z,f as H,g as O,h as Q,i as X}from"./element-plus-rtZK4mjR.js";import{_ as G,a as J}from"./lock-Cg97dXVU.js";import{_ as Y,a as Z}from"./index-DvFUMEgh.js";import{d as ee,al as V,X as oe,B as x,s as I,E as ae,W as te,c as se,a as L,b as o,K as r,u as a,ag as ne,o as le,Q as ie,R as re,aM as ce}from"./@vue-Bu2ox0Ej.js";import{u as E,i as pe,f as n,l as B}from"./index-BJH4a_tv.js";import{_ as me}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./lodash-es-CbX0-HeL.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-BI9iYFro.js";import"./@element-plus-BaPZHkdt.js";import"./@ctrl-r5W6hzzQ.js";import"./@sxzz-D9SI2xQl.js";import"./pinia-BMu_gUya.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-Q6gHvPgm.js";import"./vue-i18n-BXMOD-z5.js";import"./@intlify-7FzvKZLA.js";import"./vue-CDKdorV-.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";const de={class:"v100 flex ac"},_e={class:"qv-tool flex ac pd-base"},ue={class:"flex jc f1 p-r no-evt"},fe=ee({__name:"index",setup(ge){const{setLogout:C,staticUser:S}=E(),U=ce(()=>W(()=>import("./TapCaptcha-BVl322E1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),{t:l}=pe.global,{setToken:R,setDynamicUser:T,userInfo:$,showWelcome:M}=E(),m=V({loginLoading:!1}),t=V({username:"admin",password:"123456",keep:!1,captchaId:"",captchaInfo:""}),q=oe({username:[{required:!0,message:x(()=>l("login.请输入账号"))}],password:[{required:!0,message:x(()=>l("login.请输入密码"))}]}),f=I(),g=I();let h,i,c;const _=async()=>{n.show(l("加载中"));try{await T(!0),S.welcomeHasEnter=!0,$.id&&M()}catch{n.hide()}},w=async(e="",s="")=>{n.show(l("login.登录中")),t.captchaInfo=e,t.captchaId=s;try{const{data:d}=await B("post",t);R(d.userInfo.token),await _()}catch{n.hide()}},y=async()=>{var e;h?(n.hide(),(e=g.value)==null||e.show()):await w()},v=async()=>{try{const{data:e}=await B("get");h=e.captcha,c&&await y(),i="success"}catch(e){e.code===303?(c&&n.hide(),!c&&window.app_entry.split("?redirectPath=")[0]==="/login"?(i=void 0,await _()):j.confirm(`${e.msg}${l("login.确认将继续登录, 取消将退出登录")}`,l("温馨提示")).then(async()=>{i=void 0,await _()}).catch(async()=>{i="fail",await C(!1)})):(i="fail",n.hide()),c=!1}},b=async()=>{var e;m.loginLoading=!0;try{await((e=f.value)==null?void 0:e.validate()),i!=="success"?(c=!0,n.show(l("login.确认中")),i==="fail"&&await v()):await y()}catch{}m.loginLoading=!1};return ae(()=>{v()}),te(()=>{n.hide()}),(e,s)=>{const d=Y,D=Z,F=G,k=H,u=O,K=J,N=Q,P=X,A=z;return le(),se("div",de,[L("div",_e,[o(d),o(D,{class:"ml-base"})]),L("div",ue,[o(A,{ref_key:"ref_form",ref:f,rules:a(q),model:a(t),class:"qv-form",size:"large",onKeyup:ne(b,["enter"])},{default:r(()=>[o(u,{prop:"username"},{default:r(()=>[o(k,{modelValue:a(t).username,"onUpdate:modelValue":s[0]||(s[0]=p=>a(t).username=p),modelModifiers:{trim:!0},clearable:"",placeholder:e.$t("login.请输入账号"),maxlength:"30"},{prefix:r(()=>[o(F)]),_:1},8,["modelValue","placeholder"])]),_:1}),o(u,{prop:"password"},{default:r(()=>[o(k,{modelValue:a(t).password,"onUpdate:modelValue":s[1]||(s[1]=p=>a(t).password=p),modelModifiers:{trim:!0},type:"password",placeholder:e.$t("login.请输入密码"),"show-password":"",maxlength:"30"},{prefix:r(()=>[o(K)]),_:1},8,["modelValue","placeholder"])]),_:1}),o(N,{modelValue:a(t).keep,"onUpdate:modelValue":s[2]||(s[2]=p=>a(t).keep=p),label:e.$t("login.保持会话")},null,8,["modelValue","label"]),o(u,null,{default:r(()=>[o(P,{round:"",class:"w-full",type:"primary","auto-insert-space":"",loading:a(m).loginLoading,onClick:b},{default:r(()=>[ie(re(e.$t(a(m).loginLoading?"login.登录中":"login.登录")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["rules","model"])]),o(a(U),{ref_key:"ref_tap_captcha",ref:g,onSucceed:w},null,512)])}}}),De=me(fe,[["__scopeId","data-v-bc14d7a5"]]);export{De as default};
