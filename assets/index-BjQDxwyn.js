import{bf as de,A as oe,O as ue,d as M,B as fe,X as Y,cc as pe,c as F,cd as ge,m as u,e as b,g as j,D as w,F as k,j as e,t as V,h as A,w as g,J as L,T as me,U as ve,H as P,G as K,z as te,ce as he,P as G,b9 as se,ar as ye,aL as be,y as J,Q as B,cf as Ce,cg as _e,C as we,ch as ke,S as X,ao as $e,W as Se,Y as De,ag as Z,aH as Ie,ba as Ee,bm as Te,x as Be,V as Fe,ad as le,ci as Ae,cj as Re,$ as Le,ck as Pe,ae as Me,a1 as Oe,aT as ze,cl as Ne,I as Ve,s as ae,i as je,a as Ue,af as H,n as Q,az as W,aC as qe,cm as xe,cn as He,f as ee,co as Ke,b0 as Ye}from"./index-D1zNGLi-.js";import{E as Ge}from"./el-link-B1R-0Km-.js";import{_ as Je}from"./close-BacSsnzu.js";import{i as Xe,E as Ze}from"./el-popper-BdRYDWVf.js";import{_ as Qe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./tinymce-rRFwJXCQ.js";const We=(...t)=>n=>{t.forEach(p=>{de(p)?p(n):p.value=n})},ne=Symbol("dialogInjectionKey"),ie=oe({center:Boolean,alignCenter:Boolean,closeIcon:{type:ue},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),eo={close:()=>!0},oo=["aria-level"],to=["aria-label"],so=["id"],lo=M({name:"ElDialogContent"}),ao=M({...lo,props:ie,emits:eo,setup(t){const n=t,{t:p}=fe(),{Close:$}=he,{dialogRef:c,headerRef:f,bodyId:o,ns:i,style:m}=Y(ne),{focusTrapRef:s}=Y(pe),v=F(()=>[i.b(),i.is("fullscreen",n.fullscreen),i.is("draggable",n.draggable),i.is("align-center",n.alignCenter),{[i.m("center")]:n.center}]),h=We(s,c),l=F(()=>n.draggable),d=F(()=>n.overflow);return ge(c,f,l,d),(r,S)=>(u(),b("div",{ref:e(h),class:k(e(v)),style:K(e(m)),tabindex:"-1"},[j("header",{ref_key:"headerRef",ref:f,class:k([e(i).e("header"),{"show-close":r.showClose}])},[w(r.$slots,"header",{},()=>[j("span",{role:"heading","aria-level":r.ariaLevel,class:k(e(i).e("title"))},V(r.title),11,oo)]),r.showClose?(u(),b("button",{key:0,"aria-label":e(p)("el.dialog.close"),class:k(e(i).e("headerbtn")),type:"button",onClick:S[0]||(S[0]=R=>r.$emit("close"))},[A(e(ve),{class:k(e(i).e("close"))},{default:g(()=>[(u(),L(me(r.closeIcon||e($))))]),_:1},8,["class"])],10,to)):P("v-if",!0)],2),j("div",{id:e(o),class:k(e(i).e("body"))},[w(r.$slots,"default")],10,so),r.$slots.footer?(u(),b("footer",{key:0,class:k(e(i).e("footer"))},[w(r.$slots,"footer")],2)):P("v-if",!0)],6))}});var no=te(ao,[["__file","dialog-content.vue"]]);const io=oe({...ie,appendToBody:Boolean,appendTo:{type:G(String),default:"body"},beforeClose:{type:G(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),ro={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[se]:t=>ye(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},co=(t,n)=>{var p;const c=De().emit,{nextZIndex:f}=be();let o="";const i=J(),m=J(),s=B(!1),v=B(!1),h=B(!1),l=B((p=t.zIndex)!=null?p:f());let d,r;const S=Ce("namespace",_e),R=F(()=>{const y={},T=`--${S.value}-dialog`;return t.fullscreen||(t.top&&(y[`${T}-margin-top`]=t.top),t.width&&(y[`${T}-width`]=we(t.width))),y}),O=F(()=>t.alignCenter?{display:"flex"}:{});function C(){c("opened")}function _(){c("closed"),c(se,!1),t.destroyOnClose&&(h.value=!1)}function U(){c("close")}function q(){r==null||r(),d==null||d(),t.openDelay&&t.openDelay>0?{stop:d}=Z(()=>x(),t.openDelay):x()}function z(){d==null||d(),r==null||r(),t.closeDelay&&t.closeDelay>0?{stop:r}=Z(()=>a(),t.closeDelay):a()}function N(){function y(T){T||(v.value=!0,s.value=!1)}t.beforeClose?t.beforeClose(y):z()}function D(){t.closeOnClickModal&&N()}function x(){Ie&&(s.value=!0)}function a(){s.value=!1}function I(){c("openAutoFocus")}function E(){c("closeAutoFocus")}function re(y){var T;((T=y.detail)==null?void 0:T.focusReason)==="pointer"&&y.preventDefault()}t.lockScroll&&ke(s);function ce(){t.closeOnPressEscape&&N()}return X(()=>t.modelValue,y=>{y?(v.value=!1,q(),h.value=!0,l.value=Xe(t.zIndex)?f():l.value++,$e(()=>{c("open"),n.value&&(n.value.scrollTop=0)})):s.value&&z()}),X(()=>t.fullscreen,y=>{n.value&&(y?(o=n.value.style.transform,n.value.style.transform=""):n.value.style.transform=o)}),Se(()=>{t.modelValue&&(s.value=!0,h.value=!0,q())}),{afterEnter:C,afterLeave:_,beforeLeave:U,handleClose:N,onModalClick:D,close:z,doClose:a,onOpenAutoFocus:I,onCloseAutoFocus:E,onCloseRequested:ce,onFocusoutPrevented:re,titleId:i,bodyId:m,closed:v,style:R,overlayDialogStyle:O,rendered:h,visible:s,zIndex:l}},uo=["aria-label","aria-labelledby","aria-describedby"],fo=M({name:"ElDialog",inheritAttrs:!1}),po=M({...fo,props:io,emits:ro,setup(t,{expose:n}){const p=t,$=Ee();Te({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},F(()=>!!$.title));const c=Be("dialog"),f=B(),o=B(),i=B(),{visible:m,titleId:s,bodyId:v,style:h,overlayDialogStyle:l,rendered:d,zIndex:r,afterEnter:S,afterLeave:R,beforeLeave:O,handleClose:C,onModalClick:_,onOpenAutoFocus:U,onCloseAutoFocus:q,onCloseRequested:z,onFocusoutPrevented:N}=co(p,f);Fe(ne,{dialogRef:f,headerRef:o,bodyId:v,ns:c,rendered:d,style:h});const D=Ne(_),x=F(()=>p.draggable&&!p.fullscreen);return n({visible:m,dialogContentRef:i}),(a,I)=>(u(),L(ze,{to:a.appendTo,disabled:a.appendTo!=="body"?!1:!a.appendToBody},[A(Oe,{name:"dialog-fade",onAfterEnter:e(S),onAfterLeave:e(R),onBeforeLeave:e(O),persisted:""},{default:g(()=>[le(A(e(Ae),{"custom-mask-event":"",mask:a.modal,"overlay-class":a.modalClass,"z-index":e(r)},{default:g(()=>[j("div",{role:"dialog","aria-modal":"true","aria-label":a.title||void 0,"aria-labelledby":a.title?void 0:e(s),"aria-describedby":e(v),class:k(`${e(c).namespace.value}-overlay-dialog`),style:K(e(l)),onClick:I[0]||(I[0]=(...E)=>e(D).onClick&&e(D).onClick(...E)),onMousedown:I[1]||(I[1]=(...E)=>e(D).onMousedown&&e(D).onMousedown(...E)),onMouseup:I[2]||(I[2]=(...E)=>e(D).onMouseup&&e(D).onMouseup(...E))},[A(e(Re),{loop:"",trapped:e(m),"focus-start-el":"container",onFocusAfterTrapped:e(U),onFocusAfterReleased:e(q),onFocusoutPrevented:e(N),onReleaseRequested:e(z)},{default:g(()=>[e(d)?(u(),L(no,Le({key:0,ref_key:"dialogContentRef",ref:i},a.$attrs,{center:a.center,"align-center":a.alignCenter,"close-icon":a.closeIcon,draggable:e(x),overflow:a.overflow,fullscreen:a.fullscreen,"show-close":a.showClose,title:a.title,"aria-level":a.headerAriaLevel,onClose:e(C)}),Pe({header:g(()=>[a.$slots.title?w(a.$slots,"title",{key:1}):w(a.$slots,"header",{key:0,close:e(C),titleId:e(s),titleClass:e(c).e("title")})]),default:g(()=>[w(a.$slots,"default")]),_:2},[a.$slots.footer?{name:"footer",fn:g(()=>[w(a.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):P("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,uo)]),_:3},8,["mask","overlay-class","z-index"]),[[Me,e(m)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var go=te(po,[["__file","dialog.vue"]]);const mo=Ve(go),vo=M({__name:"index",props:{showClose:{type:Boolean,default:!1}},emits:["closed"],setup(t,{expose:n,emit:p}){const $=t,c=p,f=ae({isShow:!1});return n({hide:()=>{f.isShow=!1},show:()=>{f.isShow=!0}}),(m,s)=>{const v=Je,h=Ge,l=mo;return u(),L(l,{modelValue:e(f).isShow,"onUpdate:modelValue":s[1]||(s[1]=d=>e(f).isShow=d),draggable:"","align-center":"",class:"global-dialog","show-close":!1,onClosed:s[2]||(s[2]=d=>c("closed"))},{header:g(()=>[w(m.$slots,"header")]),footer:g(()=>[w(m.$slots,"footer")]),default:g(()=>[$.showClose?(u(),L(h,{key:0,underline:!1,class:"ani-rotate-icon",onClick:s[0]||(s[0]=d=>e(f).isShow=!1)},{default:g(()=>[A(v)]),_:1})):P("",!0),w(m.$slots,"default")]),_:3},8,["modelValue"])}}}),ho={class:"icon-base",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},yo=j("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"},null,-1),bo=[yo];function Co(t,n){return u(),b("svg",ho,[...bo])}const _o={name:"ep-refresh",render:Co},wo={key:1,class:"flex ac jc"},ko={class:"qv-box no-select pr"},$o=["src"],So=["onClick"],Do=M({__name:"index",emits:["succeed"],setup(t,{expose:n,emit:p}){const $=p,{t:c}=je.global,f=Ue(),o=ae({loading:!1,dots:[],tip:"",id:"",text:"",base64:""}),i=async()=>{if(!o.loading){o.loading=!0;try{const{data:l}=await xe(He("captcha"));o.dots=[],o.id=l.id,o.text=l.text,o.base64=l.base64}catch{}o.tip="",o.loading=!1}},m=()=>{var l;i(),(l=f.value)==null||l.show()};let s;const v=l=>{s=[...o.dots],s.splice(l,1),o.dots=s},h=async l=>{if(o.dots.length<o.text.length&&(s=[...o.dots],s.push(`${l.offsetX},${l.offsetY}`),o.dots=s,o.dots.length===o.text.length)){const d=[o.dots.join("-"),l.target.width,l.target.height].join(";");ee.show(c("login.确认中"));try{await Ke(o.id,d),o.tip=c("login.验证成功"),$("succeed",d,o.id)}catch{o.tip=c("login.验证失败"),setTimeout(()=>{i()},500),ee.hide()}}};return n({show:m}),(l,d)=>{const r=_o,S=Ze,R=vo,O=Ye;return u(),L(R,{ref_key:"ref_dialog",ref:f},{header:g(()=>[e(o).tip?(u(),b(H,{key:0},[Q(V(e(o).tip),1)],64)):e(o).text?(u(),b("div",wo,[Q(V(l.$t("login.请依次点击"))+" ",1),(u(!0),b(H,null,W(e(o).text,(C,_)=>(u(),b("span",{key:_,class:k(["qv-text ml-half fw-b",e(o).dots.length>_?"is-active":""])},V(C),3))),128)),A(S,{content:"刷新",placement:"top"},{default:g(()=>[A(r,{class:"ml-base cp",onClick:i})]),_:1})])):P("",!0)]),default:g(()=>[le((u(),b("div",ko,[e(o).base64?(u(),b("img",{key:0,class:"h100",src:e(o).base64,alt:"加载中",onClick:d[0]||(d[0]=qe(C=>h(C),["prevent"]))},null,8,$o)):P("",!0),(u(!0),b(H,null,W(e(o).dots,(C,_)=>(u(),b("div",{key:_,class:"qv-dot fw-b cp flex ac jc",style:K(`left: ${parseFloat(C.split(",")[0])-10}px; top: ${parseFloat(C.split(",")[1])-10}px;`),onClick:U=>v(_)},V(_+1),13,So))),128))])),[[O,e(o).loading]])]),_:1},512)}}}),Ro=Qe(Do,[["__scopeId","data-v-9337ce00"]]);export{Ro as default};
