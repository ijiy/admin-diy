import{t as sb}from"./tinymce-rRFwJXCQ.js";import{d as vG,av as yG,cn as wG,S as cD,W as SG,m as xG,e as CG,j as TG}from"./index-B0Zwk6Q1.js";(function(){const ac=Object.getPrototypeOf,qs=(e,t,o)=>{var n;return o(e,t.prototype)?!0:((n=e.constructor)===null||n===void 0?void 0:n.name)===t.name},is=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&qs(e,String,(o,n)=>n.isPrototypeOf(o))?"string":t},xn=e=>t=>is(t)===e,un=e=>t=>typeof t===e,ts=e=>t=>e===t,dn=(e,t)=>At(e)&&qs(e,t,(o,n)=>ac(o)===n),Xe=xn("string"),At=xn("object"),Eo=e=>dn(e,Object),Vo=xn("array"),Go=ts(null),Jo=un("boolean"),Mn=ts(void 0),us=e=>e==null,oo=e=>!us(e),Ae=un("function"),So=un("number"),st=(e,t)=>{if(Vo(e)){for(let o=0,n=e.length;o<n;++o)if(!t(e[o]))return!1;return!0}return!1},X=()=>{},Re=e=>()=>e(),ur=(e,t)=>(...o)=>e(t.apply(null,o)),Qo=(e,t)=>o=>e(t(o)),I=e=>()=>e,xt=e=>e,Tr=(e,t)=>e===t;function go(e,...t){return(...o)=>{const n=t.concat(o);return e.apply(null,n)}}const wt=e=>t=>!e(t),q=e=>()=>{throw new Error(e)},En=e=>e(),Ht=I(!1),io=I(!0);class v{constructor(t,o){this.tag=t,this.value=o}static some(t){return new v(!0,t)}static none(){return v.singletonNone}fold(t,o){return this.tag?o(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?v.some(t(this.value)):v.none()}bind(t){return this.tag?t(this.value):v.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:v.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return oo(t)?v.some(t):v.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}v.singletonNone=new v(!1);const Wt=Array.prototype.slice,xo=Array.prototype.indexOf,An=Array.prototype.push,Ue=(e,t)=>xo.call(e,t),pt=(e,t)=>{const o=Ue(e,t);return o===-1?v.none():v.some(o)},Xt=(e,t)=>Ue(e,t)>-1,fn=(e,t)=>{for(let o=0,n=e.length;o<n;o++){const r=e[o];if(t(r,o))return!0}return!1},we=(e,t)=>{const o=[];for(let n=0;n<e;n++)o.push(t(n));return o},et=(e,t)=>{const o=[];for(let n=0;n<e.length;n+=t){const r=Wt.call(e,n,n+t);o.push(r)}return o},ue=(e,t)=>{const o=e.length,n=new Array(o);for(let r=0;r<o;r++){const a=e[r];n[r]=t(a,r)}return n},ye=(e,t)=>{for(let o=0,n=e.length;o<n;o++){const r=e[o];t(r,o)}},zt=(e,t)=>{for(let o=e.length-1;o>=0;o--){const n=e[o];t(n,o)}},en=(e,t)=>{const o=[],n=[];for(let r=0,a=e.length;r<a;r++){const l=e[r];(t(l,r)?o:n).push(l)}return{pass:o,fail:n}},Ct=(e,t)=>{const o=[];for(let n=0,r=e.length;n<r;n++){const a=e[n];t(a,n)&&o.push(a)}return o},Jt=(e,t,o)=>(zt(e,(n,r)=>{o=t(o,n,r)}),o),Ut=(e,t,o)=>(ye(e,(n,r)=>{o=t(o,n,r)}),o),kr=(e,t,o)=>{for(let n=0,r=e.length;n<r;n++){const a=e[n];if(t(a,n))return v.some(a);if(o(a,n))break}return v.none()},Qt=(e,t)=>kr(e,t,Ht),ds=(e,t)=>{for(let o=0,n=e.length;o<n;o++){const r=e[o];if(t(r,o))return v.some(o)}return v.none()},Rt=e=>{const t=[];for(let o=0,n=e.length;o<n;++o){if(!Vo(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);An.apply(t,e[o])}return t},uo=(e,t)=>Rt(ue(e,t)),Et=(e,t)=>{for(let o=0,n=e.length;o<n;++o){const r=e[o];if(t(r,o)!==!0)return!1}return!0},tn=e=>{const t=Wt.call(e,0);return t.reverse(),t},Pn=(e,t)=>Ct(e,o=>!Xt(t,o)),dr=(e,t)=>{const o={};for(let n=0,r=e.length;n<r;n++){const a=e[n];o[String(a)]=t(a,n)}return o},mo=e=>[e],ws=(e,t)=>{const o=Wt.call(e,0);return o.sort(t),o},Ss=(e,t)=>t>=0&&t<e.length?v.some(e[t]):v.none(),bn=e=>Ss(e,0),Fc=e=>Ss(e,e.length-1),Vr=Ae(Array.from)?Array.from:e=>Wt.call(e),Vn=(e,t)=>{for(let o=0;o<e.length;o++){const n=t(e[o],o);if(n.isSome())return n}return v.none()},Ro=Object.keys,lc=Object.hasOwnProperty,ho=(e,t)=>{const o=Ro(e);for(let n=0,r=o.length;n<r;n++){const a=o[n],l=e[a];t(l,a)}},yo=(e,t)=>Tc(e,(o,n)=>({k:n,v:t(o,n)})),Tc=(e,t)=>{const o={};return ho(e,(n,r)=>{const a=t(n,r);o[a.k]=a.v}),o},Gt=e=>(t,o)=>{e[o]=t},jo=(e,t,o,n)=>{ho(e,(r,a)=>{(t(r,a)?o:n)(r,a)})},Or=(e,t)=>{const o={},n={};return jo(e,t,Gt(o),Gt(n)),{t:o,f:n}},ic=(e,t)=>{const o={};return jo(e,t,Gt(o),X),o},Nr=(e,t)=>{const o=[];return ho(e,(n,r)=>{o.push(t(n,r))}),o},Dn=(e,t)=>{const o=Ro(e);for(let n=0,r=o.length;n<r;n++){const a=o[n],l=e[a];if(t(l,a,e))return v.some(l)}return v.none()},uc=e=>Nr(e,xt),He=(e,t)=>Ft(e,t)?v.from(e[t]):v.none(),Ft=(e,t)=>lc.call(e,t),Cn=(e,t)=>Ft(e,t)&&e[t]!==void 0&&e[t]!==null,xs=(e,t,o=Tr)=>e.exists(n=>o(n,t)),mr=(e,t,o=Tr)=>Ks(e,t,o).getOr(e.isNone()&&t.isNone()),os=e=>{const t=[],o=n=>{t.push(n)};for(let n=0;n<e.length;n++)e[n].each(o);return t},wo=e=>{const t=[];for(let o=0;o<e.length;o++){const n=e[o];if(n.isSome())t.push(n.getOrDie());else return v.none()}return v.some(t)},Ks=(e,t,o)=>e.isSome()&&t.isSome()?v.some(o(e.getOrDie(),t.getOrDie())):v.none(),gr=(e,t,o,n)=>e.isSome()&&t.isSome()&&o.isSome()?v.some(n(e.getOrDie(),t.getOrDie(),o.getOrDie())):v.none(),Kc=(e,t)=>e!=null?v.some(t(e)):v.none(),Cs=(e,t)=>e?v.some(t):v.none(),qn=(e,t)=>e+t,Ys=(e,t)=>e.substring(t),zr=(e,t,o)=>t===""||e.length>=t.length&&e.substr(o,o+t.length)===t,kc=(e,t)=>on(e,t)?Ys(e,t.length):e,Tn=(e,t)=>Xs(e,t)?e:qn(e,t),mn=(e,t,o=0,n)=>{const r=e.indexOf(t,o);return r!==-1?Mn(n)?!0:r+t.length<=n:!1},on=(e,t)=>zr(e,t,0),Xs=(e,t)=>zr(e,t,e.length-t.length),$n=(e=>t=>t.replace(e,""))(/^\s+|\s+$/g),V=e=>e.length>0,F=e=>!V(e),ne=e=>e.style!==void 0&&Ae(e.style.getPropertyValue),ce=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,e),new Error(r)}return vt(n.childNodes[0])},Ve=(e,t)=>{const n=(t||document).createElement(e);return vt(n)},Ge=(e,t)=>{const n=(t||document).createTextNode(e);return vt(n)},vt=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},U={fromHtml:ce,fromTag:Ve,fromText:Ge,fromDom:vt,fromPoint:(e,t,o)=>v.from(e.dom.elementFromPoint(t,o)).map(vt)},ft=typeof window<"u"?window:Function("return this;")(),gn=(e,t)=>{let o=t??ft;for(let n=0;n<e.length&&o!==void 0&&o!==null;++n)o=o[e[n]];return o},hn=(e,t)=>{const o=e.split(".");return gn(o,t)},Kn=(e,t)=>hn(e,t),Kt=(e,t)=>{const o=Kn(e,t);if(o==null)throw new Error(e+" not available on this browser");return o},Oc=Object.getPrototypeOf,Js=e=>Kt("HTMLElement",e),ns=e=>{const t=hn("ownerDocument.defaultView",e);return At(e)&&(Js(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Oc(e).constructor.name))},Rn=9,nn=11,Yn=1,Xn=3,ms=e=>e.dom.nodeName.toLowerCase(),Yc=e=>e.dom.nodeType,Pc=e=>t=>Yc(t)===e,dc=e=>Co(e)&&ns(e.dom),Co=Pc(Yn),Qs=Pc(Xn),gs=Pc(Rn),Sa=Pc(nn),Rs=e=>t=>Co(t)&&ms(t)===e,kn=(e,t)=>{const o=e.dom;if(o.nodeType!==Yn)return!1;{const n=o;if(n.matches!==void 0)return n.matches(t);if(n.msMatchesSelector!==void 0)return n.msMatchesSelector(t);if(n.webkitMatchesSelector!==void 0)return n.webkitMatchesSelector(t);if(n.mozMatchesSelector!==void 0)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},bo=e=>e.nodeType!==Yn&&e.nodeType!==Rn&&e.nodeType!==nn||e.childElementCount===0,Ts=(e,t)=>{const o=t===void 0?document:t.dom;return bo(o)?[]:ue(o.querySelectorAll(e),U.fromDom)},Xc=(e,t)=>{const o=t===void 0?document:t.dom;return bo(o)?v.none():v.from(o.querySelector(e)).map(U.fromDom)},eo=(e,t)=>e.dom===t.dom,Nn=(e,t)=>{const o=e.dom,n=t.dom;return o===n?!1:o.contains(n)},ks=e=>U.fromDom(e.dom.ownerDocument),On=e=>gs(e)?e:ks(e),_r=e=>U.fromDom(On(e).dom.documentElement),Zr=e=>U.fromDom(On(e).dom.defaultView),ss=e=>v.from(e.dom.parentNode).map(U.fromDom),Ur=e=>ss(e),Wr=e=>v.from(e.dom.parentElement).map(U.fromDom),vl=(e,t)=>{const o=Ae(t)?t:Ht;let n=e.dom;const r=[];for(;n.parentNode!==null&&n.parentNode!==void 0;){const a=n.parentNode,l=U.fromDom(a);if(r.push(l),o(l)===!0)break;n=a}return r},Mr=e=>v.from(e.dom.offsetParent).map(U.fromDom),xa=e=>v.from(e.dom.nextSibling).map(U.fromDom),Hs=e=>ue(e.dom.childNodes,U.fromDom),_c=(e,t)=>{const o=e.dom.childNodes;return v.from(o[t]).map(U.fromDom)},Jc=e=>_c(e,0),Ca=(e,t)=>({element:e,offset:t}),yl=(e,t)=>{const o=Hs(e);return o.length>0&&t<o.length?Ca(o[t],0):Ca(e,t)},D=e=>Sa(e)&&oo(e.dom.host),N=Ae(Element.prototype.attachShadow)&&Ae(Node.prototype.getRootNode),K=I(N),te=N?e=>U.fromDom(e.dom.getRootNode()):On,be=e=>D(e)?e:U.fromDom(On(e).dom.body),Je=e=>ro(e).isSome(),ro=e=>{const t=te(e);return D(t)?v.some(t):v.none()},vn=e=>U.fromDom(e.dom.host),co=e=>{if(K()&&oo(e.target)){const t=U.fromDom(e.target);if(Co(t)&&Ho(t)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return bn(o)}}return v.from(e.target)},Ho=e=>oo(e.dom.shadowRoot),ao=e=>{const t=Qs(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const o=t.ownerDocument;return ro(U.fromDom(t)).fold(()=>o.body.contains(t),Qo(ao,vn))},rs=()=>mc(U.fromDom(document)),mc=e=>{const t=e.dom.body;if(t==null)throw new Error("Body is not available yet");return U.fromDom(t)},Ta=(e,t,o)=>{if(Xe(o)||Jo(o)||So(o))e.setAttribute(t,o+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},at=(e,t,o)=>{Ta(e.dom,t,o)},Vi=(e,t)=>{const o=e.dom;ho(t,(n,r)=>{Ta(o,r,n)})},qo=(e,t)=>{const o=e.dom.getAttribute(t);return o===null?void 0:o},C=(e,t)=>v.from(qo(e,t)),R=(e,t)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(t):!1},B=(e,t)=>{e.dom.removeAttribute(t)},oe=e=>Ut(e.dom.attributes,(t,o)=>(t[o.name]=o.value,t),{}),_e=(e,t,o)=>{if(!Xe(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);ne(e)&&e.style.setProperty(t,o)},Tt=(e,t)=>{ne(e)&&e.style.removeProperty(t)},Ie=(e,t,o)=>{const n=e.dom;_e(n,t,o)},Ao=(e,t)=>{const o=e.dom;ho(t,(n,r)=>{_e(o,r,n)})},Er=(e,t)=>{const o=e.dom;ho(t,(n,r)=>{n.fold(()=>{Tt(o,r)},a=>{_e(o,r,a)})})},No=(e,t)=>{const o=e.dom,r=window.getComputedStyle(o).getPropertyValue(t);return r===""&&!ao(e)?er(o,t):r},er=(e,t)=>ne(e)?e.style.getPropertyValue(t):"",zo=(e,t)=>{const o=e.dom,n=er(o,t);return v.from(n).filter(r=>r.length>0)},Ga=e=>{const t={},o=e.dom;if(ne(o))for(let n=0;n<o.style.length;n++){const r=o.style.item(n);t[r]=o.style[r]}return t},Mc=(e,t,o)=>{const n=U.fromTag(e);return Ie(n,t,o),zo(n,t).isSome()},jt=(e,t)=>{const o=e.dom;Tt(o,t),xs(C(e,"style").map($n),"")&&B(e,"style")},Is=e=>e.dom.offsetWidth,Io=(e,t)=>{const o=(d,m)=>{if(!So(m)&&!m.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+m);const f=d.dom;ne(f)&&(f.style[e]=m+"px")},n=d=>{const m=t(d);if(m<=0||m===null){const f=No(d,e);return parseFloat(f)||0}return m},r=n,a=(d,m)=>Ut(m,(f,w)=>{const x=No(d,w),O=x===void 0?0:parseInt(x,10);return isNaN(O)?f:f+O},0);return{set:o,get:n,getOuter:r,aggregate:a,max:(d,m,f)=>{const w=a(d,f);return m>w?m-w:0}}},Qc=Io("height",e=>{const t=e.dom;return ao(e)?t.getBoundingClientRect().height:t.offsetHeight}),Zo=e=>Qc.get(e),wl=e=>Qc.getOuter(e),vd=(e,t)=>{const o=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],n=Qc.max(e,t,o);Ie(e,"max-height",n+"px")},Hm=(e,t)=>({left:e,top:t,translate:(n,r)=>Hm(e+n,t+r)}),Ko=Hm,ea=e=>{const t=e.getBoundingClientRect();return Ko(t.left,t.top)},Os=(e,t)=>e!==void 0?e:t!==void 0?t:0,Bs=e=>{const t=e.dom.ownerDocument,o=t.body,n=t.defaultView,r=t.documentElement;if(o===e.dom)return Ko(o.offsetLeft,o.offsetTop);const a=Os(n==null?void 0:n.pageYOffset,r.scrollTop),l=Os(n==null?void 0:n.pageXOffset,r.scrollLeft),d=Os(r.clientTop,o.clientTop),m=Os(r.clientLeft,o.clientLeft);return Gr(e).translate(l-m,a-d)},Gr=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?Ko(n.offsetLeft,n.offsetTop):ao(e)?ea(t):Ko(0,0)},wu=Io("width",e=>e.dom.offsetWidth),Ni=(e,t)=>wu.set(e,t),Ar=e=>wu.get(e),Dr=e=>wu.getOuter(e),ja=(e,t)=>{const o=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],n=wu.max(e,t,o);Ie(e,"max-width",n+"px")},ta=e=>{let t=!1,o;return(...n)=>(t||(t=!0,o=e.apply(null,n)),o)},Im=(e,t,o,n)=>{const r=e.isiOS()&&/ipad/i.test(o)===!0,a=e.isiOS()&&!r,l=e.isiOS()||e.isAndroid(),d=l||n("(pointer:coarse)"),m=r||!a&&l&&n("(min-device-width:768px)"),f=a||l&&!m,w=t.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,x=!f&&!m&&!w;return{isiPad:I(r),isiPhone:I(a),isTablet:I(m),isPhone:I(f),isTouch:I(d),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:I(w),isDesktop:I(x)}},hs=(e,t)=>{for(let o=0;o<e.length;o++){const n=e[o];if(n.test(t))return n}},si=(e,t)=>{const o=hs(e,t);if(!o)return{major:0,minor:0};const n=r=>Number(t.replace(o,"$"+r));return ri(n(1),n(2))},qa=(e,t)=>{const o=String(t).toLowerCase();return e.length===0?zi():si(e,o)},zi=()=>ri(0,0),ri=(e,t)=>({major:e,minor:t}),hr={nu:ri,detect:qa,unknown:zi},yd=(e,t)=>Vn(t.brands,o=>{const n=o.brand.toLowerCase();return Qt(e,r=>{var a;return n===((a=r.brand)===null||a===void 0?void 0:a.toLowerCase())}).map(r=>({current:r.name,version:hr.nu(parseInt(o.version,10),0)}))}),Vc=(e,t)=>{const o=String(t).toLowerCase();return Qt(e,n=>n.search(o))},Su=(e,t)=>Vc(e,t).map(o=>{const n=hr.detect(o.versionRegexes,t);return{current:o.name,version:n}}),Ls=(e,t)=>Vc(e,t).map(o=>{const n=hr.detect(o.versionRegexes,t);return{current:o.name,version:n}}),xu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,jr=e=>t=>mn(t,e),Ka=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>mn(e,"edge/")&&mn(e,"chrome")&&mn(e,"safari")&&mn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,xu],search:e=>mn(e,"chrome")&&!mn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>mn(e,"msie")||mn(e,"trident")},{name:"Opera",versionRegexes:[xu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:jr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:jr("firefox")},{name:"Safari",versionRegexes:[xu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(mn(e,"safari")||mn(e,"mobile/"))&&mn(e,"applewebkit")}],Zi=[{name:"Windows",search:jr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>mn(e,"iphone")||mn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:jr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:jr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:jr("linux"),versionRegexes:[]},{name:"Solaris",search:jr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:jr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:jr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ya={browsers:I(Ka),oses:I(Zi)},Sl="Edge",Xa="Chromium",Cu="IE",Ja="Opera",Ec="Firefox",Fs="Safari",Tu=()=>ci({current:void 0,version:hr.unknown()}),ci=e=>{const t=e.current,o=e.version,n=r=>()=>t===r;return{current:t,version:o,isEdge:n(Sl),isChromium:n(Xa),isIE:n(Cu),isOpera:n(Ja),isFirefox:n(Ec),isSafari:n(Fs)}},xl={unknown:Tu,nu:ci,edge:I(Sl),chromium:I(Xa),ie:I(Cu),opera:I(Ja),firefox:I(Ec),safari:I(Fs)},ku="Windows",Ui="iOS",Ou="Android",Qa="Linux",_u="macOS",Mu="Solaris",wd="FreeBSD",Sd="ChromeOS",Wi=()=>ai({current:void 0,version:hr.unknown()}),ai=e=>{const t=e.current,o=e.version,n=r=>()=>t===r;return{current:t,version:o,isWindows:n(ku),isiOS:n(Ui),isAndroid:n(Ou),isMacOS:n(_u),isLinux:n(Qa),isSolaris:n(Mu),isFreeBSD:n(wd),isChromeOS:n(Sd)}},ka={unknown:Wi,nu:ai,windows:I(ku),ios:I(Ui),android:I(Ou),linux:I(Qa),macos:I(_u),solaris:I(Mu),freebsd:I(wd),chromeos:I(Sd)},xd={detect:(e,t,o)=>{const n=Ya.browsers(),r=Ya.oses(),a=t.bind(m=>yd(n,m)).orThunk(()=>Su(n,e)).fold(xl.unknown,xl.nu),l=Ls(r,e).fold(ka.unknown,ka.nu),d=Im(l,a,e,o);return{browser:a,os:l,deviceType:d}}},li=e=>window.matchMedia(e).matches;let Cd=ta(()=>xd.detect(navigator.userAgent,v.from(navigator.userAgentData),li));const Ac=()=>Cd(),qr=(e,t,o,n,r,a,l)=>({target:e,x:t,y:o,stop:n,prevent:r,kill:a,raw:l}),el=e=>{const t=U.fromDom(co(e).getOr(e.target)),o=()=>e.stopPropagation(),n=()=>e.preventDefault(),r=ur(n,o);return qr(t,e.clientX,e.clientY,o,n,r,e)},tl=(e,t)=>o=>{e(o)&&t(el(o))},Oa=(e,t,o,n,r)=>{const a=tl(o,n);return e.dom.addEventListener(t,a,r),{unbind:go(kd,e,t,a,r)}},_a=(e,t,o,n)=>Oa(e,t,o,n,!1),Td=(e,t,o,n)=>Oa(e,t,o,n,!0),kd=(e,t,o,n)=>{e.dom.removeEventListener(t,o,n)},ol=(e,t)=>{ss(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},nl=(e,t)=>{xa(e).fold(()=>{ss(e).each(r=>{pr(r,t)})},n=>{ol(n,t)})},Od=(e,t)=>{Jc(e).fold(()=>{pr(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},pr=(e,t)=>{e.dom.appendChild(t.dom)},Gi=(e,t,o)=>{_c(e,o).fold(()=>{pr(e,t)},n=>{ol(n,t)})},Au=(e,t)=>{ye(t,o=>{pr(e,o)})},ji=e=>{e.dom.textContent="",ye(Hs(e),t=>{Nc(t)})},Nc=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Ps=e=>{const t=e!==void 0?e.dom:document,o=t.body.scrollLeft||t.documentElement.scrollLeft,n=t.body.scrollTop||t.documentElement.scrollTop;return Ko(o,n)},qi=(e,t,o)=>{const r=(o!==void 0?o.dom:document).defaultView;r&&r.scrollTo(e,t)},_d=e=>{const t=e===void 0?window:e;return Ac().browser.isFirefox()?v.none():v.from(t.visualViewport)},Du=(e,t,o,n)=>({x:e,y:t,width:o,height:n,right:e+o,bottom:t+n}),ii=e=>{const t=e===void 0?window:e,o=t.document,n=Ps(U.fromDom(o));return _d(t).fold(()=>{const r=t.document.documentElement,a=r.clientWidth,l=r.clientHeight;return Du(n.left,n.top,a,l)},r=>Du(Math.max(r.pageLeft,n.left),Math.max(r.pageTop,n.top),r.width,r.height))},Cl=()=>U.fromDom(document),Md=(e,t)=>e.view(t).fold(I([]),n=>{const r=e.owner(n),a=Md(e,r);return[n].concat(a)}),Ed=(e,t)=>{const o=t.owner(e),n=Md(t,o);return v.some(n)};var $u=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?v.none():v.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(U.fromDom)},owner:e=>ks(e)});const ui=e=>{const t=Cl(),o=Ps(t);return Ed(e,$u).fold(go(Bs,e),r=>{const a=Gr(e),l=Jt(r,(d,m)=>{const f=Gr(m);return{left:d.left+f.left,top:d.top+f.top}},{left:0,top:0});return Ko(l.left+a.left+o.left,l.top+a.top+o.top)})},Ki=(e,t,o)=>({point:e,width:t,height:o}),Dd=(e,t,o,n)=>({x:e,y:t,width:o,height:n}),yn=(e,t,o,n)=>({x:e,y:t,width:o,height:n,right:e+o,bottom:t+n}),Jn=e=>{const t=Bs(e),o=Dr(e),n=wl(e);return yn(t.left,t.top,o,n)},fr=e=>{const t=ui(e),o=Dr(e),n=wl(e);return yn(t.left,t.top,o,n)},Ru=(e,t)=>{const o=Math.max(e.x,t.x),n=Math.max(e.y,t.y),r=Math.min(e.right,t.right),a=Math.min(e.bottom,t.bottom),l=r-o,d=a-n;return yn(o,n,l,d)},$d=(e,t)=>Ut(t,(o,n)=>Ru(o,n),e),ps=()=>ii(window);var Yi=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Xi=e=>{const t=a=>a(e),o=I(e),n=()=>r,r={tag:!0,inner:e,fold:(a,l)=>l(e),isValue:io,isError:Ht,map:a=>St.value(a(e)),mapError:n,bind:t,exists:t,forall:t,getOr:o,or:n,getOrThunk:o,orThunk:n,getOrDie:o,each:a=>{a(e)},toOptional:()=>v.some(e)};return r},Hu=e=>{const t=()=>o,o={tag:!1,inner:e,fold:(n,r)=>n(e),isValue:Ht,isError:io,map:t,mapError:n=>St.error(n(e)),bind:t,exists:Ht,forall:io,getOr:xt,or:xt,getOrThunk:En,orThunk:En,getOrDie:q(String(e)),each:X,toOptional:v.none};return o},St={value:Xi,error:Hu,fromOption:(e,t)=>e.fold(()=>Hu(t),Xi)};var br;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(br||(br={}));const Iu=(e,t,o)=>e.stype===br.Error?t(e.serror):o(e.svalue),Bu=e=>{const t=[],o=[];return ye(e,n=>{Iu(n,r=>o.push(r),r=>t.push(r))}),{values:t,errors:o}},Ji=(e,t)=>e.stype===br.Error?{stype:br.Error,serror:t(e.serror)}:e,di=(e,t)=>e.stype===br.Value?{stype:br.Value,svalue:t(e.svalue)}:e,Tl=(e,t)=>e.stype===br.Value?t(e.svalue):e,Lu=(e,t)=>e.stype===br.Error?t(e.serror):e,Kr=e=>({stype:br.Value,svalue:e}),vr=e=>({stype:br.Error,serror:e}),pn={fromResult:e=>e.fold(vr,Kr),toResult:e=>Iu(e,St.error,St.value),svalue:Kr,partition:Bu,serror:vr,bind:Tl,bindError:Lu,map:di,mapError:Ji,fold:Iu},mi=(e,t,o,n)=>({tag:"field",key:e,newKey:t,presence:o,prop:n}),Lm=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),Dc=(e,t,o)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},Fu=(e,t)=>t,Fm=(e,t)=>Eo(e)&&Eo(t)?Oo(e,t):t,Rd=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const o={};for(let n=0;n<t.length;n++){const r=t[n];for(const a in r)Ft(r,a)&&(o[a]=e(o[a],r[a]))}return o},Oo=Rd(Fm),gi=Rd(Fu),Rr=()=>({tag:"required",process:{}}),oa=e=>({tag:"defaultedThunk",process:e}),na=e=>oa(I(e)),sl=()=>({tag:"option",process:{}}),kl=e=>({tag:"mergeWithThunk",process:e}),Pu=e=>kl(I(e)),Dt=(e,t)=>e.length>0?pn.svalue(Oo(t,gi.apply(void 0,e))):pn.svalue(t),hi=e=>ur(pn.serror,Rt)(e),Vu={consolidateObj:(e,t)=>{const o=pn.partition(e);return o.errors.length>0?hi(o.errors):Dt(o.values,t)},consolidateArr:e=>{const t=pn.partition(e);return t.errors.length>0?hi(t.errors):pn.svalue(t.values)}},Ol=e=>At(e)&&Ro(e).length>100?" removed due to size":JSON.stringify(e,null,2),Fg=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:I("... (only showing first ten failures)")}]):e;return ue(t,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},h=(e,t)=>pn.serror([{path:e,getErrorInfo:t}]),S=(e,t,o)=>h(e,()=>'Could not find valid *required* value for "'+t+'" in '+Ol(o)),_=(e,t)=>h(e,()=>'Choice schema did not contain choice key: "'+t+'"'),P=(e,t,o)=>h(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+Ol(t)),Z=(e,t)=>h(e,()=>"There are unsupported fields: ["+t.join(", ")+"] specified"),ge=(e,t)=>h(e,I(t)),ze=e=>{const t=(n,r)=>pn.bindError(e(r),a=>ge(n,a)),o=I("val");return{extract:t,toString:o}},lt=ze(pn.svalue),it=(e,t,o,n)=>He(t,o).fold(()=>S(e,o,t),n),nt=(e,t,o,n)=>{const r=He(e,t).getOrThunk(()=>o(e));return n(r)},sn=(e,t,o)=>o(He(e,t)),cs=(e,t,o,n)=>{const r=He(e,t).map(a=>a===!0?o(e):a);return n(r)},Yr=(e,t,o,n,r)=>{const a=d=>r.extract(t.concat([n]),d),l=d=>d.fold(()=>pn.svalue(v.none()),m=>{const f=r.extract(t.concat([n]),m);return pn.map(f,v.some)});switch(e.tag){case"required":return it(t,o,n,a);case"defaultedThunk":return nt(o,n,e.process,a);case"option":return sn(o,n,l);case"defaultedOptionThunk":return cs(o,n,e.process,l);case"mergeWithThunk":return nt(o,n,I({}),d=>{const m=Oo(e.process(o),d);return a(m)})}},sa=(e,t,o)=>{const n={},r=[];for(const a of o)Dc(a,(l,d,m,f)=>{const w=Yr(m,e,t,l,f);pn.fold(w,x=>{r.push(...x)},x=>{n[d]=x})},(l,d)=>{n[l]=d(t)});return r.length>0?pn.serror(r):pn.svalue(n)},Vm=e=>({extract:(n,r)=>e().extract(n,r),toString:()=>e().toString()}),Pg=e=>Ro(ic(e,oo)),Xr=e=>{const t=tt(e),o=Jt(e,(r,a)=>Dc(a,l=>Oo(r,{[l]:!0}),I(r)),{});return{extract:(r,a)=>{const l=Jo(a)?[]:Pg(a),d=Ct(l,m=>!Cn(o,m));return d.length===0?t.extract(r,a):Z(r,d)},toString:t.toString}},tt=e=>({extract:(n,r)=>sa(n,r,e),toString:()=>`obj{
`+ue(e,r=>Dc(r,(a,l,d,m)=>a+" -> "+m.toString(),(a,l)=>"state("+a+")")).join(`
`)+"}"}),pi=e=>({extract:(n,r)=>{const a=ue(r,(l,d)=>e.extract(n.concat(["["+d+"]"]),l));return Vu.consolidateArr(a)},toString:()=>"array("+e.toString()+")"}),Id=(e,t)=>{const o=t!==void 0?t:xt;return{extract:(a,l)=>{const d=[];for(const m of e){const f=m.extract(a,l);if(f.stype===br.Value)return{stype:br.Value,svalue:o(f.svalue)};d.push(f)}return Vu.consolidateArr(d)},toString:()=>"oneOf("+ue(e,a=>a.toString()).join(", ")+")"}},Cp=(e,t)=>{const o=(a,l)=>pi(ze(e)).extract(a,l);return{extract:(a,l)=>{const d=Ro(l),m=o(a,d);return pn.bind(m,f=>{const w=ue(f,x=>mi(x,x,Rr(),t));return tt(w).extract(a,l)})},toString:()=>"setOf("+t.toString()+")"}},fi=(e,t)=>{const o=ta(t);return{extract:(a,l)=>o().extract(a,l),toString:()=>o().toString()}},Bd=ur(pi,tt),ra=I(lt),bi=(e,t)=>ze(o=>{const n=typeof o;return e(o)?pn.svalue(o):pn.serror(`Expected type: ${t} but got: ${n}`)}),rl=bi(So,"number"),fs=bi(Xe,"string"),Nu=bi(Jo,"boolean"),Nm=bi(Ae,"function"),Vg=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every(t=>Vg(e[t]));default:return!1}},Ng=ze(e=>Vg(e)?pn.svalue(e):pn.serror("Expected value to be acceptable for sending via postMessage")),Tp=(e,t,o,n)=>He(o,n).fold(()=>P(e,o,n),a=>a.extract(e.concat(["branch: "+n]),t)),vi=(e,t)=>({extract:(r,a)=>He(a,e).fold(()=>_(r,e),d=>Tp(r,a,t,d)),toString:()=>"chooseOn("+e+"). Possible values: "+Ro(t)}),kp=()=>pi(lt),Qi=e=>ze(t=>e(t).fold(pn.serror,pn.svalue)),zm=(e,t)=>Cp(o=>pn.fromResult(e(o)),t),zg=(e,t,o)=>{const n=t.extract([e],o);return pn.mapError(n,r=>({input:o,errors:r}))},rn=(e,t,o)=>pn.toResult(zg(e,t,o)),ca=e=>e.fold(t=>{throw new Error(eu(t))},xt),Hr=(e,t,o)=>ca(rn(e,t,o)),eu=e=>`Errors: 
`+Fg(e.errors).join(`
`)+`

Input object: `+Ol(e.input),Jr=(e,t)=>vi(e,yo(t,tt)),Zg=(e,t)=>fi(e,t),bs=mi,tr=Lm,_l=e=>Qi(t=>Xt(e,t)?St.value(t):St.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),me=e=>bs(e,e,Rr(),ra()),gc=(e,t)=>bs(e,e,Rr(),t),Ug=e=>gc(e,rl),Zn=e=>gc(e,fs),cl=(e,t)=>bs(e,e,Rr(),_l(t)),Wg=e=>gc(e,Nu),$c=e=>gc(e,Nm),Op=(e,t)=>bs(e,e,sl(),ze(o=>pn.serror("The field: "+e+" is forbidden. "+t))),al=(e,t)=>bs(e,e,Rr(),tt(t)),Zm=(e,t)=>bs(e,e,Rr(),Bd(t)),hc=(e,t)=>bs(e,e,Rr(),pi(t)),no=e=>bs(e,e,sl(),ra()),Ma=(e,t)=>bs(e,e,sl(),t),zu=e=>Ma(e,rl),or=e=>Ma(e,fs),Gg=(e,t)=>Ma(e,_l(t)),Ml=e=>Ma(e,Nm),jg=(e,t)=>Ma(e,pi(t)),Ir=(e,t)=>Ma(e,tt(t)),Ld=(e,t)=>Ma(e,Xr(t)),J=(e,t)=>bs(e,e,na(t),ra()),Rc=(e,t,o)=>bs(e,e,na(t),o),Fd=(e,t)=>Rc(e,t,rl),pc=(e,t)=>Rc(e,t,fs),fc=(e,t,o)=>Rc(e,t,_l(o)),Vs=(e,t)=>Rc(e,t,Nu),Un=(e,t)=>Rc(e,t,Nm),Pd=(e,t)=>Rc(e,t,Ng),Ea=(e,t,o)=>Rc(e,t,pi(o)),Vd=(e,t,o)=>Rc(e,t,tt(o)),We=e=>{let t=e;return{get:()=>t,set:r=>{t=r}}},g={generate:e=>{if(!Vo(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],o={};return ye(e,(n,r)=>{const a=Ro(n);if(a.length!==1)throw new Error("one and only one name per case");const l=a[0],d=n[l];if(o[l]!==void 0)throw new Error("duplicate key detected:"+l);if(l==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Vo(d))throw new Error("case arguments must be an array");t.push(l),o[l]=(...m)=>{const f=m.length;if(f!==d.length)throw new Error("Wrong number of arguments to case "+l+". Expected "+d.length+" ("+d+"), got "+f);return{fold:(...x)=>{if(x.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+x.length);return x[r].apply(null,m)},match:x=>{const O=Ro(x);if(t.length!==O.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+O.join(","));if(!Et(t,A=>Xt(O,A)))throw new Error("Not all branches were specified when using match. Specified: "+O.join(", ")+`
Required: `+t.join(", "));return x[l].apply(null,m)},log:x=>{console.log(x,{constructors:t,constructor:l,params:m})}}}}),o}};g.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const b=e=>{const t=[],o=[];return ye(e,n=>{n.fold(r=>{t.push(r)},r=>{o.push(r)})}),{errors:t,values:o}},k=(e,t)=>{const o={};return ho(e,(n,r)=>{Xt(t,r)||(o[r]=n)}),o},$=(e,t)=>({[e]:t}),G=e=>{const t={};return ye(e,o=>{t[o.key]=o.value}),t},re=(e,t)=>k(e,t),ve=(e,t)=>$(e,t),De=e=>G(e),gt=(e,t)=>e.length===0?St.value(t):St.value(Oo(t,gi.apply(void 0,e))),kt=e=>St.error(Rt(e)),Do=(e,t)=>{const o=b(e);return o.errors.length>0?kt(o.errors):gt(o.values,t)},lo=e=>Ae(e)?e:Ht,Bo=(e,t,o)=>{let n=e.dom;const r=lo(o);for(;n.parentNode;){n=n.parentNode;const a=U.fromDom(n),l=t(a);if(l.isSome())return l;if(r(a))break}return v.none()},nr=(e,t,o)=>{const n=t(e),r=lo(o);return n.orThunk(()=>r(e)?v.none():Bo(e,t,r))},aa=(e,t)=>eo(e.element,t.event.target),Qr={can:io,abort:Ht,run:X},Zc=e=>{if(!Cn(e,"can")&&!Cn(e,"abort")&&!Cn(e,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return{...Qr,...e}},Um=(e,t)=>(...o)=>Ut(e,(n,r)=>n&&t(r).apply(void 0,o),!0),Nd=(e,t)=>(...o)=>Ut(e,(n,r)=>n||t(r).apply(void 0,o),!1),tu=e=>Ae(e)?{can:io,abort:Ht,run:e}:e,ou=e=>{const t=Um(e,r=>r.can),o=Nd(e,r=>r.abort);return{can:t,abort:o,run:(...r)=>{ye(e,a=>{a.run.apply(void 0,r)})}}},Qn=I,Uc=Qn("touchstart"),El=Qn("touchmove"),ll=Qn("touchend"),zd=Qn("touchcancel"),Ot=Qn("mousedown"),Uo=Qn("mousemove"),Ns=Qn("mouseout"),ec=Qn("mouseup"),Aa=Qn("mouseover"),Wc=Qn("focusin"),yi=Qn("focusout"),tc=Qn("keydown"),oy=Qn("keyup"),Zu=Qn("input"),Da=Qn("change"),nu=Qn("click"),cb=Qn("transitioncancel"),Wm=Qn("transitionend"),ny=Qn("transitionstart"),sy=Qn("selectstart"),Bn=e=>I("alloy."+e),ry={tap:Bn("tap")},wi=Bn("focus"),Uu=Bn("blur.post"),qg=Bn("paste.post"),su=Bn("receive"),bc=Bn("execute"),ru=Bn("focus.item"),Al=ry.tap,Gm=Bn("longpress"),Kg=Bn("sandbox.close"),Yg=Bn("typeahead.cancel"),Xg=Bn("system.init"),cy=Bn("system.touchmove"),ay=Bn("system.touchend"),_p=Bn("system.scroll"),jm=Bn("system.resize"),Hc=Bn("system.attached"),Dl=Bn("system.detached"),$l=Bn("system.dismissRequested"),Wu=Bn("system.repositionRequested"),Rl=Bn("focusmanager.shifted"),Zd=Bn("slotcontainer.visibility"),Mp=Bn("system.external.element.scroll"),Ep=Bn("change.tab"),Ap=Bn("dismiss.tab"),Dp=Bn("highlight"),$p=Bn("dehighlight"),Pt=(e,t)=>{Hp(e,e.element,t,{})},je=(e,t,o)=>{Hp(e,e.element,t,o)},Si=e=>{Pt(e,bc())},Rp=(e,t,o)=>{Hp(e,t,o,{})},Hp=(e,t,o,n)=>{const r={target:t,...n};e.getSystem().triggerEvent(o,t,r)},ly=(e,t,o,n)=>{const r={...n,target:t};e.getSystem().triggerEvent(o,t,r)},ab=(e,t,o,n)=>{e.getSystem().triggerEvent(o,t,n.event)},Lo=e=>De(e),lb=(e,t)=>({key:e,value:Zc({abort:t})}),iy=(e,t)=>({key:e,value:Zc({can:t})}),Ip=e=>({key:e,value:Zc({run:(t,o)=>{o.event.prevent()}})}),le=(e,t)=>({key:e,value:Zc({run:t})}),Bp=(e,t,o)=>({key:e,value:Zc({run:(n,r)=>{t.apply(void 0,[n,r].concat(o))}})}),uy=e=>t=>le(e,t),Ud=e=>t=>({key:e,value:Zc({run:(o,n)=>{aa(o,n)&&t(o,n)}})}),dy=(e,t)=>le(e,(o,n)=>{o.getSystem().getByUid(t).each(r=>{ab(r,r.element,e,n)})}),xi=(e,t,o)=>{const n=t.partUids[o];return dy(e,n)},Lp=(e,t)=>le(e,(o,n)=>{const r=n.event,a=o.getSystem().getByDom(r.target).getOrThunk(()=>nr(r.target,d=>o.getSystem().getByDom(d).toOptional(),Ht).getOr(o));t(o,a,n)}),Hl=e=>le(e,(t,o)=>{o.cut()}),my=e=>le(e,(t,o)=>{o.stop()}),Wd=(e,t)=>Ud(e)(t),cn=Ud(Hc()),Il=Ud(Dl()),gy=Ud(Xg()),Ci=uy(bc()),hy=(e,t)=>{const n=(t||document).createElement("div");return n.innerHTML=e,Hs(U.fromDom(n))},Fp=e=>e.dom.innerHTML,Gu=(e,t)=>{const n=ks(e).dom,r=U.fromDom(n.createDocumentFragment()),a=hy(t,n);Au(r,a),ji(e),pr(e,r)},Pp=e=>{const t=U.fromTag("div"),o=U.fromDom(e.dom.cloneNode(!0));return pr(t,o),Fp(t)},ib=(e,t)=>U.fromDom(e.dom.cloneNode(t)),Vp=e=>ib(e,!1),Jg=e=>ib(e,!0),Np=e=>{if(D(e))return"#shadow-root";{const t=Vp(e);return Pp(t)}},cu=e=>Np(e),ub=(e,t,o)=>eo(t,e.element)&&!eo(t,o),py=Lo([iy(wi(),(e,t)=>{const o=t.event,n=o.originator,r=o.target;return ub(e,n,r)?(console.warn(wi()+` did not get interpreted by the desired target. 
Originator: `+cu(n)+`
Target: `+cu(r)+`
Check the `+wi()+" event handlers"),!1):!0})]);var fy=Object.freeze({__proto__:null,events:py});let zp=0;const Le=e=>{const o=new Date().getTime(),n=Math.floor(Math.random()*1e9);return zp++,e+"_"+n+zp+String(o)},db=I("alloy-id-"),by=I("data-alloy-id"),vy=db(),qm=by(),yy=(e,t)=>{const o=Le(vy+e);return Zp(t,o),o},Zp=(e,t)=>{Object.defineProperty(e.dom,qm,{value:t,writable:!0})},ju=e=>{const t=Co(e)?e.dom[qm]:null;return v.from(t)},Gd=e=>Le(e),Up=xt,Qg=e=>{const t=r=>`The component must be in a context to execute: ${r}`+(e?`
`+cu(e().element)+" is not in context.":""),o=r=>()=>{throw new Error(t(r))},n=r=>()=>{console.warn(t(r))};return{debugInfo:I("fake"),triggerEvent:n("triggerEvent"),triggerFocus:n("triggerFocus"),triggerEscape:n("triggerEscape"),broadcast:n("broadcast"),broadcastOn:n("broadcastOn"),broadcastEvent:n("broadcastEvent"),build:o("build"),buildOrPatch:o("buildOrPatch"),addToWorld:o("addToWorld"),removeFromWorld:o("removeFromWorld"),addToGui:o("addToGui"),removeFromGui:o("removeFromGui"),getByUid:o("getByUid"),getByDom:o("getByDom"),isConnected:Ht}},wy=Qg(),qu=(e,t,o)=>{const n=o.toString(),r=n.indexOf(")")+1,a=n.indexOf("("),l=n.substring(a+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:jd(l.slice(0,1).concat(l.slice(3)))}),e},jd=e=>ue(e,t=>Xs(t,"/*")?t.substring(0,t.length-2):t),Wp=(e,t)=>{const o=e.toString(),n=o.indexOf(")")+1,r=o.indexOf("("),a=o.substring(r+1,n-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:jd(a)}),e},Sy=(e,t)=>{const o=t.toString(),n=o.indexOf(")")+1,r=o.indexOf("("),a=o.substring(r+1,n-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:jd(a.slice(1))}),e},eh=Le("alloy-premade"),Gp=e=>(Object.defineProperty(e.element.dom,eh,{value:e.uid,writable:!0}),ve(eh,e)),xy=e=>Ft(e.dom,eh),th=e=>He(e,eh),la=e=>Sy((t,...o)=>e(t.getApis(),t,...o),e),il={init:()=>Gc({readState:I("No State required")})},Gc=e=>e,Cy=(e,t)=>{const o=ue(t,r=>Ir(r.name(),[me("config"),J("state",il)])),n=rn("component.behaviours",tt(o),e.behaviours).fold(r=>{throw new Error(eu(r)+`
Complete spec:
`+JSON.stringify(e,null,2))},xt);return{list:t,data:yo(n,r=>{const a=r.map(l=>({config:l.config,state:l.state.init(l.config)}));return I(a)})}},Ty=e=>e.list,ky=e=>e.data,qd=(e,t)=>{const o={};return ho(e,(n,r)=>{ho(n,(a,l)=>{const d=He(o,l).getOr([]);o[l]=d.concat([t(r,a)])})}),o},ia=e=>({classes:Mn(e.classes)?[]:e.classes,attributes:Mn(e.attributes)?{}:e.attributes,styles:Mn(e.styles)?{}:e.styles}),mb=(e,t)=>({...e,attributes:{...e.attributes,...t.attributes},styles:{...e.styles,...t.styles},classes:e.classes.concat(t.classes)}),gb=(e,t,o,n)=>{const r={...t};ye(o,w=>{r[w.name()]=w.exhibit(e,n)});const a=qd(r,(w,x)=>({name:w,modification:x})),l=w=>Jt(w,(x,O)=>({...O.modification,...x}),{}),d=Jt(a.classes,(w,x)=>x.modification.concat(w),[]),m=l(a.attributes),f=l(a.styles);return ia({classes:d,attributes:m,styles:f})},Oy=(e,t,o,n)=>{try{const r=ws(o,(a,l)=>{const d=a[t],m=l[t],f=n.indexOf(d),w=n.indexOf(m);if(f===-1)throw new Error("The ordering for "+e+" does not have an entry for "+d+`.
Order specified: `+JSON.stringify(n,null,2));if(w===-1)throw new Error("The ordering for "+e+" does not have an entry for "+m+`.
Order specified: `+JSON.stringify(n,null,2));return f<w?-1:w<f?1:0});return St.value(r)}catch(r){return St.error([r])}},_y=(e,t)=>({handler:e,purpose:t}),My=(e,t)=>({cHandler:e,purpose:t}),Ey=(e,t)=>My(go.apply(void 0,[e.handler].concat(t)),e.purpose),Kd=e=>e.cHandler,hb=(e,t)=>({name:e,handler:t}),pb=(e,t)=>{const o={};return ye(e,n=>{o[n.name()]=n.handlers(t)}),o},oh=(e,t,o)=>{const n={...o,...pb(t,e)};return qd(n,hb)},Ay=(e,t,o,n)=>{const r=oh(e,o,n);return sh(r,t)},fb=e=>{const t=tu(e);return(o,n,...r)=>{const a=[o,n].concat(r);t.abort.apply(void 0,a)?n.stop():t.can.apply(void 0,a)&&t.run.apply(void 0,a)}},jp=(e,t)=>St.error(["The event ("+e+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(ue(t,o=>o.name),null,2)]),nh=(e,t,o)=>{const n=t[o];return n?Oy("Event: "+o,"name",e,n).map(r=>{const a=ue(r,l=>l.handler);return ou(a)}):jp(o,e)},sh=(e,t)=>{const o=Nr(e,(n,r)=>(n.length===1?St.value(n[0].handler):nh(n,t,r)).map(l=>{const d=fb(l),m=n.length>1?Ct(t[r],f=>fn(n,w=>w.name===f)).join(" > "):n[0].name;return ve(r,_y(d,m))}));return Do(o,{})},Bl="alloy.base.behaviour",Dy=tt([bs("dom","dom",Rr(),tt([me("tag"),J("styles",{}),J("classes",[]),J("attributes",{}),no("value"),no("innerHtml")])),me("components"),me("uid"),J("events",{}),J("apis",{}),bs("eventOrder","eventOrder",Pu({[bc()]:["disabling",Bl,"toggling","typeaheadevents"],[wi()]:[Bl,"focusing","keying"],[Xg()]:[Bl,"disabling","toggling","representing"],[Zu()]:[Bl,"representing","streaming","invalidating"],[Dl()]:[Bl,"representing","item-events","toolbar-button-events","tooltipping"],[Ot()]:["focusing",Bl,"item-type-events"],[Uc()]:["focusing",Bl,"item-type-events"],[Aa()]:["item-type-events","tooltipping"],[su()]:["receiving","reflecting","tooltipping"]}),ra()),no("domModification")]),bb=e=>rn("custom.definition",Dy,e),qp=e=>({...e.dom,uid:e.uid,domChildren:ue(e.components,t=>t.element)}),$y=e=>e.domModification.fold(()=>ia({}),ia),Ry=e=>e.events,Km=(e,t)=>{const o=qo(e,t);return o===void 0||o===""?[]:o.split(" ")},Kp=(e,t,o)=>{const r=Km(e,t).concat([o]);return at(e,t,r.join(" ")),!0},vb=(e,t,o)=>{const n=Ct(Km(e,t),r=>r!==o);return n.length>0?at(e,t,n.join(" ")):B(e,t),!1},Ku=e=>e.dom.classList!==void 0,rh=e=>Km(e,"class"),Hy=(e,t)=>Kp(e,"class",t),Iy=(e,t)=>vb(e,"class",t),Ym=(e,t)=>Xt(rh(e),t)?Iy(e,t):Hy(e,t),wn=(e,t)=>{Ku(e)?e.dom.classList.add(t):Hy(e,t)},Yp=e=>{(Ku(e)?e.dom.classList:rh(e)).length===0&&B(e,"class")},Hn=(e,t)=>{Ku(e)?e.dom.classList.remove(t):Iy(e,t),Yp(e)},By=(e,t)=>{const o=Ku(e)?e.dom.classList.toggle(t):Ym(e,t);return Yp(e),o},vc=(e,t)=>Ku(e)&&e.dom.classList.contains(t),Yu=(e,t)=>{ye(t,o=>{wn(e,o)})},$a=(e,t)=>{ye(t,o=>{Hn(e,o)})},yb=(e,t)=>{ye(t,o=>{By(e,o)})},Ly=(e,t)=>Et(t,o=>vc(e,o)),Fy=e=>{const t=e.dom.classList,o=new Array(t.length);for(let n=0;n<t.length;n++){const r=t.item(n);r!==null&&(o[n]=r)}return o},Yd=e=>Ku(e)?Fy(e):rh(e),Ti=e=>e.dom.value,Ll=(e,t)=>{if(t===void 0)throw new Error("Value.set was undefined");e.dom.value=t},Xp=(e,t,o)=>_c(e,t).map(r=>{if(o.exists(l=>!eo(l,r))){const l=o.map(ms).getOr("span"),d=U.fromTag(l);return ol(r,d),d}else return r}),ch=(e,t,o)=>{o.fold(()=>pr(e,t),n=>{eo(n,t)||(ol(n,t),Nc(n))})},zs=(e,t,o)=>{const n=ue(t,o),r=Hs(e);return ye(r.slice(n.length),Nc),n},wb=(e,t,o,n)=>{const r=_c(e,t),a=n(o,r),l=Xp(e,t,r);return ch(e,a.element,l),a},Jp=(e,t,o)=>zs(e,t,(n,r)=>wb(e,r,n,o)),Py=(e,t)=>zs(e,t,(o,n)=>{const r=_c(e,n);return ch(e,o,r),o}),Sb=(e,t)=>{const o=Ro(e),n=Ro(t),r=Pn(n,o),a=Or(e,(l,d)=>!Ft(t,d)||l!==t[d]).t;return{toRemove:r,toSet:a}},ki=(e,t)=>{const{class:o,style:n,...r}=oe(t),{toSet:a,toRemove:l}=Sb(e.attributes,r),d=()=>{ye(l,j=>B(t,j)),Vi(t,a)},m=Ga(t),{toSet:f,toRemove:w}=Sb(e.styles,m),x=()=>{ye(w,j=>jt(t,j)),Ao(t,f)},O=Yd(t),M=Pn(O,e.classes),A=Pn(e.classes,O),L=()=>{Yu(t,A),$a(t,M)},ee=j=>{Gu(t,j)},W=()=>{const j=e.domChildren;Py(t,j)},Y=()=>{const j=t,de=e.value.getOrUndefined();de!==Ti(j)&&Ll(j,de??"")};return d(),L(),x(),e.innerHtml.fold(W,ee),Y(),t},Oi=e=>{const t=U.fromTag(e.tag);Vi(t,e.attributes),Yu(t,e.classes),Ao(t,e.styles),e.innerHtml.each(n=>Gu(t,n));const o=e.domChildren;return Au(t,o),e.value.each(n=>{Ll(t,n)}),t},Vy=(e,t)=>{try{const o=ki(e,t);return v.some(o)}catch{return v.none()}},xb=e=>e.innerHtml.isSome()&&e.domChildren.length>0,Ny=(e,t)=>{const o=r=>ms(r)===e.tag&&!xb(e)&&!xy(r),n=t.filter(o).bind(r=>Vy(e,r)).getOrThunk(()=>Oi(e));return Zp(n,e.uid),n},zy=e=>{const t=He(e,"behaviours").getOr({});return uo(Ro(t),o=>{const n=t[o];return oo(n)?[n.me]:[]})},Zy=(e,t)=>Cy(e,t),Cb=e=>{const t=zy(e);return Zy(e,t)},Uy=(e,t,o)=>{const n=qp(e),r=$y(e),a={"alloy.base.modification":r},l=t.length>0?gb(o,a,t,n):r;return mb(n,l)},Wy=(e,t,o)=>{const n={"alloy.base.behaviour":Ry(e)};return Ay(o,e.eventOrder,t,n).getOrDie()},Gy=(e,t)=>{const o=()=>j,n=We(wy),r=ca(bb(e)),a=Cb(e),l=Ty(a),d=ky(a),m=Uy(r,l,d),f=Ny(m,t),w=Wy(r,l,d),x=We(r.components),O=de=>{n.set(de)},M=()=>{n.set(Qg(o))},A=()=>{const de=Hs(f),ie=uo(de,he=>n.get().getByDom(he).fold(()=>[],mo));x.set(ie)},L=de=>{const ie=d;return(Ae(ie[de.name()])?ie[de.name()]:()=>{throw new Error("Could not find "+de.name()+" in "+JSON.stringify(e,null,2))})()},ee=de=>Ae(d[de.name()]),W=()=>r.apis,Y=de=>d[de]().map(ie=>ie.state.readState()).getOr("not enabled"),j={uid:e.uid,getSystem:n.get,config:L,hasConfigured:ee,spec:e,readState:Y,getApis:W,connect:O,disconnect:M,element:f,syncComponents:A,components:x.get,events:w};return j},Tb=(e,t)=>{const o=He(e,"components").getOr([]);return t.fold(()=>ue(o,Zs),n=>ue(o,(r,a)=>ah(r,_c(n,a))))},kb=(e,t)=>{const{events:o,...n}=Up(e),r=Tb(n,t),a={...n,events:{...fy,...o},components:r};return St.value(Gy(a,t))},Ln=e=>{const t=U.fromText(e);return Xm({element:t})},Xm=e=>{const t=Hr("external.component",Xr([me("element"),no("uid")]),e),o=We(Qg()),n=d=>{o.set(d)},r=()=>{o.set(Qg(()=>l))},a=t.uid.getOrThunk(()=>Gd("external"));Zp(t.element,a);const l={uid:a,getSystem:o.get,config:v.none,hasConfigured:Ht,connect:n,disconnect:r,getApis:()=>({}),element:t.element,spec:e,readState:I("No state"),syncComponents:X,components:I([]),events:{}};return Gp(l)},jy=Gd,Ob=e=>Ft(e,"uid"),ah=(e,t)=>th(e).getOrThunk(()=>{const o=Ob(e)?e:{uid:jy(""),...e};return kb(o,t).getOrDie()}),Zs=e=>ah(e,v.none()),ua=Gp;var _b=(e,t,o,n,r)=>e(o,n)?v.some(o):Ae(r)&&r(o)?v.none():t(o,n,r);const Mb=(e,t,o)=>{let n=e.dom;const r=Ae(o)?o:Ht;for(;n.parentNode;){n=n.parentNode;const a=U.fromDom(n);if(t(a))return v.some(a);if(r(a))break}return v.none()},Xd=(e,t,o)=>_b((r,a)=>a(r),Mb,e,t,o),qy=(e,t)=>{const o=e.dom;return o.parentNode?Eb(U.fromDom(o.parentNode),n=>!eo(e,n)&&t(n)):v.none()},Eb=(e,t)=>{const o=r=>t(U.fromDom(r));return Qt(e.dom.childNodes,o).map(U.fromDom)},Ky=(e,t)=>{const o=n=>{for(let r=0;r<n.childNodes.length;r++){const a=U.fromDom(n.childNodes[r]);if(t(a))return v.some(a);const l=o(n.childNodes[r]);if(l.isSome())return l}return v.none()};return o(e.dom)},Qp=(e,t,o)=>Xd(e,t,o).isSome(),Yy=e=>Xc(e),_i=(e,t,o)=>Mb(e,n=>kn(n,t),o),Ab=(e,t)=>qy(e,o=>kn(o,t)),ef=(e,t)=>Eb(e,o=>kn(o,t)),Yo=(e,t)=>Xc(t,e),Fl=(e,t,o)=>_b((r,a)=>kn(r,a),_i,e,t,o),Jd="aria-controls",Xy=e=>Xd(e,o=>{if(!Co(o))return!1;const n=qo(o,"id");return n!==void 0&&n.indexOf(Jd)>-1}).bind(o=>{const n=qo(o,"id"),r=te(o);return Yo(r,`[${Jd}="${n}"]`)}),Db=()=>{const e=Le(Jd);return{id:e,link:n=>{at(n,Jd,e)},unlink:n=>{B(n,Jd)}}},Jy=(e,t)=>Xy(t).exists(o=>Xu(e,o)),Xu=(e,t)=>Qp(t,o=>eo(o,e.element),Ht)||Jy(e,t),tf="unknown";var Qd;(function(e){e[e.STOP=0]="STOP",e[e.NORMAL=1]="NORMAL",e[e.LOGGING=2]="LOGGING"})(Qd||(Qd={}));const of=We({}),$b=(e,t)=>{const o=[],n=new Date().getTime();return{logEventCut:(r,a,l)=>{o.push({outcome:"cut",target:a,purpose:l})},logEventStopped:(r,a,l)=>{o.push({outcome:"stopped",target:a,purpose:l})},logNoParent:(r,a,l)=>{o.push({outcome:"no-parent",target:a,purpose:l})},logEventNoHandlers:(r,a)=>{o.push({outcome:"no-handlers-left",target:a})},logEventResponse:(r,a,l)=>{o.push({outcome:"response",purpose:l,target:a})},write:()=>{const r=new Date().getTime();Xt(["mousemove","mouseover","mouseout",Xg()],e)||console.log(e,{event:e,time:r-n,target:t.dom,sequence:ue(o,a=>Xt(["cut","stopped","response"],a.outcome)?"{"+a.purpose+"} "+a.outcome+" at ("+cu(a.target)+")":a.outcome)})}}},Qy=(e,t,o)=>{switch(He(of.get(),e).orThunk(()=>{const r=Ro(of.get());return Vn(r,a=>e.indexOf(a)>-1?v.some(of.get()[a]):v.none())}).getOr(Qd.NORMAL)){case Qd.NORMAL:return o(tw());case Qd.LOGGING:{const r=$b(e,t),a=o(r);return r.write(),a}case Qd.STOP:return!0}},ew=["alloy/data/Fields","alloy/debugging/Debugging"],Rb=()=>{const e=new Error;if(e.stack!==void 0){const t=e.stack.split(`
`);return Qt(t,o=>o.indexOf("alloy")>0&&!fn(ew,n=>o.indexOf(n)>-1)).getOr(tf)}else return tf},nf={logEventCut:X,logEventStopped:X,logNoParent:X,logEventNoHandlers:X,logEventResponse:X,write:X},lh=(e,t,o)=>Qy(e,t,o),tw=I(nf),sf=I([me("menu"),me("selectedMenu")]),rf=I([me("item"),me("selectedItem")]);I(tt(rf().concat(sf())));const Hb=I(tt(rf())),R3=al("initSize",[me("numColumns"),me("numRows")]),Ju=()=>gc("markers",Hb()),cf=()=>al("markers",[me("backgroundMenu")].concat(sf()).concat(rf())),Ra=e=>al("markers",ue(e,me)),ih=(e,t,o)=>(Rb(),bs(t,t,o,Qi(n=>St.value((...r)=>n.apply(void 0,r))))),Zt=e=>ih("onHandler",e,na(X)),Ic=e=>ih("onKeyboardHandler",e,na(v.none)),Qu=e=>ih("onHandler",e,Rr()),af=e=>ih("onKeyboardHandler",e,Rr()),Xo=(e,t)=>tr(e,I(t)),Ib=e=>tr(e,xt),Bb=I(R3),_s=(e,t,o,n,r,a,l,d=!1)=>({x:e,y:t,bubble:o,direction:n,placement:r,restriction:a,label:`${l}-${r}`,alwaysFit:d}),Mi=g.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Lb=(e,t,o,n,r,a,l,d,m)=>e.fold(t,o,n,r,a,l,d,m),ow=(e,t,o,n)=>e.fold(t,t,n,n,t,n,o,o),nw=(e,t,o,n)=>e.fold(t,n,t,n,o,o,t,n),Ei=Mi.southeast,uh=Mi.southwest,dh=Mi.northeast,mh=Mi.northwest,Fb=Mi.south,Pb=Mi.north,Vb=Mi.east,lf=Mi.west,Jm=(e,t,o,n)=>{const r=e+t;return r>n?o:r<o?n:r},In=(e,t,o)=>Math.min(Math.max(e,t),o),sw=(e,t)=>{switch(t){case 1:return e.x;case 0:return e.x+e.width;case 2:return e.y;case 3:return e.y+e.height}},sr=(e,t)=>dr(["left","right","top","bottom"],o=>He(t,o).map(n=>sw(e,n))),rw=(e,t,o)=>{const n=(m,f)=>t[m].map(w=>{const x=m==="top"||m==="bottom",O=x?o.top:o.left,A=(m==="left"||m==="top"?Math.max:Math.min)(w,f)+O;return x?In(A,e.y,e.bottom):In(A,e.x,e.right)}).getOr(f),r=n("left",e.x),a=n("top",e.y),l=n("right",e.right),d=n("bottom",e.bottom);return yn(r,a,l-r,d-a)},au="layout",gh=e=>e.x,hh=(e,t)=>e.x+e.width/2-t.width/2,Nb=(e,t)=>e.x+e.width-t.width,uf=(e,t)=>e.y-t.height,df=e=>e.y+e.height,mf=(e,t)=>e.y+e.height/2-t.height/2,zb=e=>e.x+e.width,ph=(e,t)=>e.x-t.width,as=(e,t,o)=>_s(gh(e),df(e),o.southeast(),Ei(),"southeast",sr(e,{left:1,top:3}),au),ls=(e,t,o)=>_s(Nb(e,t),df(e),o.southwest(),uh(),"southwest",sr(e,{right:0,top:3}),au),Fo=(e,t,o)=>_s(gh(e),uf(e,t),o.northeast(),dh(),"northeast",sr(e,{left:1,bottom:2}),au),vs=(e,t,o)=>_s(Nb(e,t),uf(e,t),o.northwest(),mh(),"northwest",sr(e,{right:0,bottom:2}),au),Ms=(e,t,o)=>_s(hh(e,t),uf(e,t),o.north(),Pb(),"north",sr(e,{bottom:2}),au),Wn=(e,t,o)=>_s(hh(e,t),df(e),o.south(),Fb(),"south",sr(e,{top:3}),au),gf=(e,t,o)=>_s(zb(e),mf(e,t),o.east(),Vb(),"east",sr(e,{left:0}),au),hf=(e,t,o)=>_s(ph(e,t),mf(e,t),o.west(),lf(),"west",sr(e,{right:1}),au),Zb=()=>[as,ls,Fo,vs,Wn,Ms,gf,hf],Ub=()=>[ls,as,vs,Fo,Wn,Ms,gf,hf],Wb=()=>[Fo,vs,as,ls,Ms,Wn],Gb=()=>[vs,Fo,ls,as,Ms,Wn],Qm=()=>[as,ls,Fo,vs,Wn,Ms],pf=()=>[ls,as,vs,Fo,Wn,Ms],cw=(e,t)=>t.universal?e:Ct(e,o=>Xt(t.channels,o));var aw=Object.freeze({__proto__:null,events:e=>Lo([le(su(),(t,o)=>{const n=e.channels,r=Ro(n),a=o,l=cw(r,a);ye(l,d=>{const m=n[d],f=m.schema,w=Hr("channel["+d+`] data
Receiver: `+cu(t.element),f,a.data);m.onReceive(t,w)})})])}),lw=[gc("channels",zm(St.value,Xr([Qu("onReceive"),J("schema",ra())])))];const iw=(e,t,o)=>Ci(n=>{o(n,e,t)}),ff=(e,t,o)=>gy((n,r)=>{o(n,e,t)}),uw=(e,t,o,n,r,a)=>{const l=Xr(e),d=Ir(t,[Ld("config",e)]);return jb(l,d,t,o,n,r,a)},fh=(e,t,o,n,r,a)=>{const l=e,d=Ir(t,[Ma("config",e)]);return jb(l,d,t,o,n,r,a)},dw=(e,t,o)=>qu((r,...a)=>{const l=[r].concat(a);return r.config({name:I(e)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+e+". Using API: "+o)},d=>{const m=Array.prototype.slice.call(l,1);return t.apply(void 0,[r,d.config,d.state].concat(m))})},o,t),mw=e=>({key:e,value:void 0}),jb=(e,t,o,n,r,a,l)=>{const d=x=>Cn(x,o)?x[o]():v.none(),m=yo(r,(x,O)=>dw(o,x,O)),w={...yo(a,(x,O)=>Wp(x,O)),...m,revoke:go(mw,o),config:x=>{const O=Hr(o+"-config",e,x);return{key:o,value:{config:O,me:w,configAsRaw:ta(()=>Hr(o+"-config",e,x)),initialConfig:x,state:l}}},schema:I(t),exhibit:(x,O)=>Ks(d(x),He(n,"exhibit"),(M,A)=>A(O,M.config,M.state)).getOrThunk(()=>ia({})),name:I(o),handlers:x=>d(x).map(O=>He(n,"events").getOr(()=>({}))(O.config,O.state)).getOr({})};return w},xe=e=>De(e),gw=Xr([me("fields"),me("name"),J("active",{}),J("apis",{}),J("state",il),J("extra",{})]),Us=e=>{const t=Hr("Creating behaviour: "+e.name,gw,e);return uw(t.fields,t.name,t.active,t.apis,t.extra,t.state)},hw=Xr([me("branchKey"),me("branches"),me("name"),J("active",{}),J("apis",{}),J("state",il),J("extra",{})]),bh=e=>{const t=Hr("Creating behaviour: "+e.name,hw,e);return fh(Jr(t.branchKey,t.branches),t.name,t.active,t.apis,t.extra,t.state)},bf=I(void 0),yc=Us({fields:lw,name:"receiving",active:aw});var qb=Object.freeze({__proto__:null,exhibit:(e,t)=>ia({classes:[],styles:t.useFixed()?{}:{position:"relative"}})});const da=(e,t=!1)=>e.dom.focus({preventScroll:t}),vh=e=>e.dom.blur(),em=e=>{const t=te(e).dom;return e.dom===t.activeElement},Ha=(e=Cl())=>v.from(e.dom.activeElement).map(U.fromDom),rr=e=>Ha(te(e)).filter(t=>e.dom.contains(t.dom)),vf=(e,t)=>{const o=te(t),n=Ha(o).bind(a=>{const l=d=>eo(a,d);return l(t)?v.some(t):Ky(t,l)}),r=e(t);return n.each(a=>{Ha(o).filter(l=>eo(l,a)).fold(()=>{da(a)},X)}),r},Ia=(e,t,o,n,r)=>{const a=l=>l+"px";return{position:e,left:t.map(a),top:o.map(a),right:n.map(a),bottom:r.map(a)}},fw=e=>({...e,position:v.some(e.position)}),Kb=(e,t)=>{Er(e,fw(t))},yf=g.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Yb=(e,t,o,n,r,a)=>{const l=t.rect,d=l.x-o,m=l.y-n,f=l.width,w=l.height,x=r-(d+f),O=a-(m+w),M=v.some(d),A=v.some(m),L=v.some(x),ee=v.some(O),W=v.none();return Lb(t.direction,()=>Ia(e,M,A,W,W),()=>Ia(e,W,A,L,W),()=>Ia(e,M,W,W,ee),()=>Ia(e,W,W,L,ee),()=>Ia(e,M,A,W,W),()=>Ia(e,M,W,W,ee),()=>Ia(e,M,A,W,W),()=>Ia(e,W,A,L,W))},Xb=(e,t)=>e.fold(()=>{const o=t.rect;return Ia("absolute",v.some(o.x),v.some(o.y),v.none(),v.none())},(o,n,r,a)=>Yb("absolute",t,o,n,r,a),(o,n,r,a)=>Yb("fixed",t,o,n,r,a)),wf=(e,t)=>{const o=go(ui,t),n=e.fold(o,o,()=>{const l=Ps();return ui(t).translate(-l.left,-l.top)}),r=Dr(t),a=wl(t);return yn(n.left,n.top,r,a)},bw=(e,t)=>t.fold(()=>e.fold(ps,ps,yn),o=>e.fold(I(o),I(o),()=>{const n=Jb(e,o.x,o.y);return yn(n.left,n.top,o.width,o.height)})),Jb=(e,t,o)=>{const n=Ko(t,o),r=()=>{const a=Ps();return n.translate(-a.left,-a.top)};return e.fold(I(n),I(n),r)},vw=(e,t,o,n)=>e.fold(t,o,n);yf.none;const yw=yf.relative,ww=yf.fixed,Sw=(e,t)=>({anchorBox:e,origin:t}),xw=(e,t)=>Sw(e,t),Sf="data-alloy-placement",Cw=(e,t)=>{at(e,Sf,t)},Qb=e=>C(e,Sf),Tw=e=>B(e,Sf),yh=g.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),kw=(e,t)=>{const{x:o,y:n,right:r,bottom:a}=t,{x:l,y:d,right:m,bottom:f,width:w,height:x}=e,O=l>=o&&l<=r,M=d>=n&&d<=a,A=O&&M,L=m<=r&&m>=o,ee=f<=a&&f>=n,W=L&&ee,Y=Math.min(w,l>=o?r-l:m-o),j=Math.min(x,d>=n?a-d:f-n);return{originInBounds:A,sizeInBounds:W,visibleW:Y,visibleH:j}},Ow=(e,t)=>{const{x:o,y:n,right:r,bottom:a}=t,{x:l,y:d,width:m,height:f}=e,w=Math.max(o,r-m),x=Math.max(n,a-f),O=In(l,o,w),M=In(d,n,x),A=Math.min(O+m,r)-O,L=Math.min(M+f,a)-M;return yn(O,M,A,L)},_w=(e,t,o)=>{const n=I(t.bottom-o.y),r=I(o.bottom-t.y),a=ow(e,r,r,n),l=I(t.right-o.x),d=I(o.right-t.x);return{maxWidth:nw(e,d,d,l),maxHeight:a}},e0=(e,t,o,n)=>{const r=e.bubble,a=r.offset,l=rw(n,e.restriction,a),d=e.x+a.left,m=e.y+a.top,f=yn(d,m,t,o),{originInBounds:w,sizeInBounds:x,visibleW:O,visibleH:M}=kw(f,l),A=w&&x,L=A?f:Ow(f,l),ee=L.width>0&&L.height>0,{maxWidth:W,maxHeight:Y}=_w(e.direction,L,n),j={rect:L,maxHeight:Y,maxWidth:W,direction:e.direction,placement:e.placement,classes:{on:r.classesOn,off:r.classesOff},layout:e.label,testY:m};return A||e.alwaysFit?yh.fit(j):yh.nofit(j,O,M,ee)},t0=(e,t,o,n,r,a)=>{const l=n.width,d=n.height,m=(w,x,O,M,A)=>{const L=w(o,n,r,e,a),ee=e0(L,l,d,a);return ee.fold(I(ee),(W,Y,j,de)=>(A===de?j>M||Y>O:!A&&de)?ee:yh.nofit(x,O,M,A))};return Ut(t,(w,x)=>{const O=go(m,x);return w.fold(I(w),O)},yh.nofit({rect:o,maxHeight:n.height,maxWidth:n.width,direction:Ei(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:o.y},-1,-1,!1)).fold(xt,xt)},Ai=e=>{const t=We(v.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(v.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:d=>{o(),t.set(v.some(d))}}},Mw=()=>Ai(e=>e.destroy()),tm=()=>Ai(e=>e.unbind()),Wo=()=>{const e=Ai(X);return{...e,on:o=>e.get().each(o)}},o0=io,cr=(e,t,o)=>_a(e,t,o0,o),ys=(e,t,o)=>Td(e,t,o0,o),n0=el,xf=["top","bottom","right","left"],wh="data-alloy-transition-timer",s0=(e,t)=>Ly(e,t.classes),r0=(e,t,o)=>o.exists(n=>{const r=e.mode;return r==="all"?!0:n[r]!==t[r]}),Ew=(e,t)=>{const o=n=>parseFloat(n).toFixed(3);return Dn(t,(n,r)=>{const a=e[r].map(o),l=n.map(o);return!mr(a,l)}).isSome()},Aw=e=>{const t=a=>{const d=No(e,a).split(/\s*,\s*/);return Ct(d,V)},o=a=>{if(Xe(a)&&/^[\d.]+/.test(a)){const l=parseFloat(a);return Xs(a,"ms")?l:l*1e3}else return 0},n=t("transition-delay"),r=t("transition-duration");return Ut(r,(a,l,d)=>{const m=o(n[d])+o(l);return Math.max(a,m)},0)},Dw=(e,t)=>{const o=tm(),n=tm();let r;const a=f=>{var w;const x=(w=f.raw.pseudoElement)!==null&&w!==void 0?w:"";return eo(f.target,e)&&F(x)&&Xt(xf,f.raw.propertyName)},l=f=>{if(us(f)||a(f)){o.clear(),n.clear();const w=f==null?void 0:f.raw.type;(us(w)||w===Wm())&&(clearTimeout(r),B(e,wh),$a(e,t.classes))}},d=cr(e,ny(),f=>{a(f)&&(d.unbind(),o.set(cr(e,Wm(),l)),n.set(cr(e,cb(),l)))}),m=Aw(e);requestAnimationFrame(()=>{r=setTimeout(l,m+17),at(e,wh,r)})},$w=(e,t)=>{Yu(e,t.classes),C(e,wh).each(o=>{clearTimeout(parseInt(o,10)),B(e,wh)}),Dw(e,t)},eg=(e,t,o,n,r,a)=>{const l=r0(n,r,a);if(l||s0(e,n)){Ie(e,"position",o.position);const d=wf(t,e),m=Xb(t,{...r,rect:d}),f=dr(xf,w=>m[w]);Ew(o,f)&&(Er(e,f),l&&$w(e,n),Is(e))}else $a(e,n.classes)},c0=e=>({width:Dr(e),height:wl(e)}),I3=(e,t,o,n)=>{jt(t,"max-height"),jt(t,"max-width");const r=c0(t);return t0(t,n.preference,e,r,o,n.bounds)},ed=(e,t)=>{const o=t.classes;$a(e,o.off),Yu(e,o.on)},Rw=(e,t,o)=>{const n=o.maxHeightFunction;n(e,t.maxHeight)},Hw=(e,t,o)=>{const n=o.maxWidthFunction;n(e,t.maxWidth)},Iw=(e,t,o)=>{const n=Xb(o.origin,t);o.transition.each(r=>{eg(e,o.origin,n,r,t,o.lastPlacement)}),Kb(e,n)},Bw=(e,t)=>{Cw(e,t.placement)},Cf=(e,t)=>{vd(e,Math.floor(t))},Tf=I((e,t)=>{Cf(e,t),Ao(e,{"overflow-x":"hidden","overflow-y":"auto"})}),om=I((e,t)=>{Cf(e,t)}),a0=(e,t,o)=>e[t]===void 0?o:e[t],Lw=(e,t,o,n,r,a,l,d)=>{const m=a0(l,"maxHeightFunction",Tf()),f=a0(l,"maxWidthFunction",X),w=e.anchorBox,x=e.origin,O={bounds:bw(x,a),origin:x,preference:n,maxHeightFunction:m,maxWidthFunction:f,lastPlacement:r,transition:d};return Fw(w,t,o,O)},Fw=(e,t,o,n)=>{const r=I3(e,t,o,n);return Iw(t,r,n),Bw(t,r),ed(t,r),Rw(t,r,n),Hw(t,r,n),{layout:r.layout,placement:r.placement}},Pw=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Ba=(e,t,o,n=1)=>{const r=e*n,a=t*n,l=m=>He(o,m).getOr([]),d=(m,f,w)=>{const x=Pn(Pw,w);return{offset:Ko(m,f),classesOn:uo(w,l),classesOff:uo(x,l)}};return{southeast:()=>d(-e,t,["top","alignLeft"]),southwest:()=>d(e,t,["top","alignRight"]),south:()=>d(-e/2,t,["top","alignCentre"]),northeast:()=>d(-e,-t,["bottom","alignLeft"]),northwest:()=>d(e,-t,["bottom","alignRight"]),north:()=>d(-e/2,-t,["bottom","alignCentre"]),east:()=>d(e,-t/2,["valignCentre","left"]),west:()=>d(-e,-t/2,["valignCentre","right"]),insetNortheast:()=>d(r,a,["top","alignLeft","inset"]),insetNorthwest:()=>d(-r,a,["top","alignRight","inset"]),insetNorth:()=>d(-r/2,a,["top","alignCentre","inset"]),insetSoutheast:()=>d(r,-a,["bottom","alignLeft","inset"]),insetSouthwest:()=>d(-r,-a,["bottom","alignRight","inset"]),insetSouth:()=>d(-r/2,-a,["bottom","alignCentre","inset"]),insetEast:()=>d(-r,-a/2,["valignCentre","right","inset"]),insetWest:()=>d(r,-a/2,["valignCentre","left","inset"])}},Sh=()=>Ba(0,0,{}),xh=xt,tg=(e,t)=>o=>l0(o)==="rtl"?t:e,l0=e=>No(e,"direction")==="rtl"?"rtl":"ltr";var Pl;(function(e){e.TopToBottom="toptobottom",e.BottomToTop="bottomtotop"})(Pl||(Pl={}));const Ch="data-alloy-vertical-dir",og=e=>Qp(e,t=>Co(t)&&qo(t,"data-alloy-vertical-dir")===Pl.BottomToTop),La=()=>Ir("layouts",[me("onLtr"),me("onRtl"),no("onBottomLtr"),no("onBottomRtl")]),nm=(e,t,o,n,r,a,l)=>{const d=l.map(og).getOr(!1),m=t.layouts.map(M=>M.onLtr(e)),f=t.layouts.map(M=>M.onRtl(e)),w=d?t.layouts.bind(M=>M.onBottomLtr.map(A=>A(e))).or(m).getOr(r):m.getOr(o),x=d?t.layouts.bind(M=>M.onBottomRtl.map(A=>A(e))).or(f).getOr(a):f.getOr(n);return tg(w,x)(e)},Vw=(e,t,o)=>{const n=t.hotspot,r=wf(o,n.element),a=nm(e.element,t,Qm(),pf(),Wb(),Gb(),v.some(t.hotspot.element));return v.some(xh({anchorBox:r,bubble:t.bubble.getOr(Sh()),overrides:t.overrides,layouts:a}))};var i0=[me("hotspot"),no("bubble"),J("overrides",{}),La(),Xo("placement",Vw)];const Nw=(e,t,o)=>{const n=Jb(o,t.x,t.y),r=yn(n.left,n.top,t.width,t.height),a=nm(e.element,t,Zb(),Ub(),Zb(),Ub(),v.none());return v.some(xh({anchorBox:r,bubble:t.bubble,overrides:t.overrides,layouts:a}))};var zw=[me("x"),me("y"),J("height",0),J("width",0),J("bubble",Sh()),J("overrides",{}),La(),Xo("placement",Nw)];const u0=g.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Zw=e=>e.fold(xt,(t,o,n)=>t.translate(-o,-n)),Uw=e=>e.fold(xt,xt),d0=e=>Ut(e,(t,o)=>t.translate(o.left,o.top),Ko(0,0)),m0=e=>{const t=ue(e,Zw);return d0(t)},g0=e=>{const t=ue(e,Uw);return d0(t)},Ww=u0.screen,Gw=u0.absolute,jw=(e,t,o)=>{const n=Zr(o.root).dom,r=a=>{const l=ks(a),d=ks(e.element);return eo(l,d)};return v.from(n.frameElement).map(U.fromDom).filter(r).map(Bs)},h0=(e,t,o)=>{const n=ks(e.element),r=Ps(n),a=jw(e,t,o).getOr(r);return Gw(a,r.left,r.top)},kf=(e,t,o,n)=>{const r=Ww(Ko(e,t));return v.some(Ki(r,o,n))},p0=(e,t,o,n,r)=>e.map(a=>{const l=[t,a.point],d=vw(n,()=>g0(l),()=>g0(l),()=>m0(l)),m=Dd(d.left,d.top,a.width,a.height),f=o.showAbove?Wb():Qm(),w=o.showAbove?Gb():pf(),x=nm(r,o,f,w,f,w,v.none());return xh({anchorBox:m,bubble:o.bubble.getOr(Sh()),overrides:o.overrides,layouts:x})}),qw=(e,t,o)=>{const n=h0(e,o,t);return t.node.filter(ao).bind(r=>{const a=r.dom.getBoundingClientRect(),l=kf(a.left,a.top,a.width,a.height),d=t.node.getOr(e.element);return p0(l,n,t,o,d)})};var Kw=[me("node"),me("root"),no("bubble"),La(),J("overrides",{}),J("showAbove",!1),Xo("placement",qw)];const Th="\uFEFF",f0="",sm={create:(e,t,o,n)=>({start:e,soffset:t,finish:o,foffset:n})},kh=g.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Of=(e,t,o,n)=>e.fold(t,o,n),v0=e=>e.fold(xt,xt,xt),y0=kh.before,w0=kh.on,Yw=kh.after,S0={before:y0,on:w0,after:Yw,cata:Of,getStart:v0},ng=g.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Xw=e=>ng.exact(e.start,e.soffset,e.finish,e.foffset),_f=e=>e.match({domRange:t=>U.fromDom(t.startContainer),relative:(t,o)=>S0.getStart(t),exact:(t,o,n,r)=>t}),Jw=ng.domRange,Qw=ng.relative,eS=ng.exact,Mf=e=>{const t=_f(e);return Zr(t)},tS=sm.create,sg={domRange:Jw,relative:Qw,exact:eS,exactFromRange:Xw,getWin:Mf,range:tS},oS=(e,t)=>{t.fold(o=>{e.setStartBefore(o.dom)},(o,n)=>{e.setStart(o.dom,n)},o=>{e.setStartAfter(o.dom)})},nS=(e,t)=>{t.fold(o=>{e.setEndBefore(o.dom)},(o,n)=>{e.setEnd(o.dom,n)},o=>{e.setEndAfter(o.dom)})},x0=(e,t,o)=>{const n=e.document.createRange();return oS(n,t),nS(n,o),n},Br=(e,t,o,n,r)=>{const a=e.document.createRange();return a.setStart(t.dom,o),a.setEnd(n.dom,r),a},sS=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),rm=e=>{const t=e.getClientRects(),o=t.length>0?t[0]:e.getBoundingClientRect();return o.width>0||o.height>0?v.some(o).map(sS):v.none()},rS=e=>{const t=e.getBoundingClientRect();return t.width>0||t.height>0?v.some(t).map(sS):v.none()},rg=g.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),C0=(e,t,o)=>t(U.fromDom(o.startContainer),o.startOffset,U.fromDom(o.endContainer),o.endOffset),cS=(e,t)=>t.match({domRange:o=>({ltr:I(o),rtl:v.none}),relative:(o,n)=>({ltr:ta(()=>x0(e,o,n)),rtl:ta(()=>v.some(x0(e,n,o)))}),exact:(o,n,r,a)=>({ltr:ta(()=>Br(e,o,n,r,a)),rtl:ta(()=>v.some(Br(e,r,a,o,n)))})}),aS=(e,t)=>{const o=t.ltr();return o.collapsed?t.rtl().filter(r=>r.collapsed===!1).map(r=>rg.rtl(U.fromDom(r.endContainer),r.endOffset,U.fromDom(r.startContainer),r.startOffset)).getOrThunk(()=>C0(e,rg.ltr,o)):C0(e,rg.ltr,o)},T0=(e,t)=>{const o=cS(e,t);return aS(e,o)},Oh=(e,t)=>T0(e,t).match({ltr:(n,r,a,l)=>{const d=e.document.createRange();return d.setStart(n.dom,r),d.setEnd(a.dom,l),d},rtl:(n,r,a,l)=>{const d=e.document.createRange();return d.setStart(a.dom,l),d.setEnd(n.dom,r),d}});rg.ltr,rg.rtl;const k0=(e,t,o)=>Ct(vl(e,o),t),oc=(e,t)=>Ts(t,e),cg=(e,t,o,n)=>{const a=ks(e).dom.createRange();return a.setStart(e.dom,t),a.setEnd(o.dom,n),a},O0=(e,t,o,n)=>{const r=cg(e,t,o,n),a=eo(e,o)&&t===n;return r.collapsed&&!a},lS=e=>v.from(e.getSelection()),_0=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),o=e.getRangeAt(e.rangeCount-1);return v.some(sm.create(U.fromDom(t.startContainer),t.startOffset,U.fromDom(o.endContainer),o.endOffset))}else return v.none()},M0=e=>{if(e.anchorNode===null||e.focusNode===null)return _0(e);{const t=U.fromDom(e.anchorNode),o=U.fromDom(e.focusNode);return O0(t,e.anchorOffset,o,e.focusOffset)?v.some(sm.create(t,e.anchorOffset,o,e.focusOffset)):_0(e)}},Ef=e=>lS(e).filter(t=>t.rangeCount>0).bind(M0),iS=(e,t)=>{const o=Oh(e,t);return rm(o)},ag=(e,t)=>{const o=Oh(e,t);return rS(o)},E0=((e,t)=>{const o=a=>{if(!e(a))throw new Error("Can only get "+t+" value of a "+t+" node");return n(a).getOr("")},n=a=>e(a)?v.from(a.dom.nodeValue):v.none();return{get:o,getOption:n,set:(a,l)=>{if(!e(a))throw new Error("Can only set raw "+t+" value of a "+t+" node");a.dom.nodeValue=l}}})(Qs,"text"),A0=e=>E0.get(e),td=(e,t)=>({element:e,offset:t}),uS=(e,t)=>{const o=Hs(e);if(o.length===0)return td(e,t);if(t<o.length)return td(o[t],0);{const n=o[o.length-1],r=Qs(n)?A0(n).length:Hs(n).length;return td(n,r)}},Af=(e,t)=>Qs(e)?td(e,t):uS(e,t),Df=e=>e.foffset!==void 0,_h=(e,t)=>t.getSelection.getOrThunk(()=>()=>Ef(e))().map(n=>{if(Df(n)){const r=Af(n.start,n.soffset),a=Af(n.finish,n.foffset);return sg.range(r.element,r.offset,a.element,a.offset)}else return n}),D0=(e,t,o)=>{const n=Zr(t.root).dom,r=h0(e,o,t),a=_h(n,t).bind(m=>{if(Df(m))return ag(n,sg.exactFromRange(m)).orThunk(()=>{const w=U.fromText(Th);ol(m.start,w);const x=iS(n,sg.exact(w,0,w,1));return Nc(w),x}).bind(w=>kf(w.left,w.top,w.width,w.height));{const f=yo(m,x=>x.dom.getBoundingClientRect()),w={left:Math.min(f.firstCell.left,f.lastCell.left),right:Math.max(f.firstCell.right,f.lastCell.right),top:Math.min(f.firstCell.top,f.lastCell.top),bottom:Math.max(f.firstCell.bottom,f.lastCell.bottom)};return kf(w.left,w.top,w.right-w.left,w.bottom-w.top)}}),d=_h(n,t).bind(m=>Df(m)?Co(m.start)?v.some(m.start):Wr(m.start):v.some(m.firstCell)).getOr(e.element);return p0(a,r,t,o,d)};var cm=[no("getSelection"),me("root"),no("bubble"),La(),J("overrides",{}),J("showAbove",!1),Xo("placement",D0)];const lu="link-layout",$0=e=>e.x+e.width,$f=(e,t)=>e.x-t.width,dS=(e,t)=>e.y-t.height+e.height,mS=e=>e.y,Rf=(e,t,o)=>_s($0(e),mS(e),o.southeast(),Ei(),"southeast",sr(e,{left:0,top:2}),lu),Mh=(e,t,o)=>_s($f(e,t),mS(e),o.southwest(),uh(),"southwest",sr(e,{right:1,top:2}),lu),R0=(e,t,o)=>_s($0(e),dS(e,t),o.northeast(),dh(),"northeast",sr(e,{left:0,bottom:3}),lu),H0=(e,t,o)=>_s($f(e,t),dS(e,t),o.northwest(),mh(),"northwest",sr(e,{right:1,bottom:3}),lu),Hf=()=>[Rf,Mh,R0,H0],I0=()=>[Mh,Rf,H0,R0],gS=(e,t,o)=>{const n=wf(o,t.item.element),r=nm(e.element,t,Hf(),I0(),Hf(),I0(),v.none());return v.some(xh({anchorBox:n,bubble:Sh(),overrides:t.overrides,layouts:r}))};var B0=[me("item"),La(),J("overrides",{}),Xo("placement",gS)],L0=Jr("type",{selection:cm,node:Kw,hotspot:i0,submenu:B0,makeshift:zw});const Eh=[hc("classes",fs),fc("mode","all",["all","layout","placement"])],F0=[J("useFixed",Ht),no("getBounds")],P0=[gc("anchor",L0),Ir("transition",Eh)],hS=()=>{const e=document.documentElement;return ww(0,0,e.clientWidth,e.clientHeight)},pS=e=>{const t=Bs(e.element),o=e.element.dom.getBoundingClientRect();return yw(t.left,t.top,o.width,o.height)},fS=(e,t,o,n,r,a)=>{const l=xw(t.anchorBox,e);return Lw(l,n.element,t.bubble,t.layouts,r,o,t.overrides,a)},Ah=(e,t,o,n,r)=>{const a=v.none();V0(e,t,o,n,r,a)},V0=(e,t,o,n,r,a)=>{const l=Hr("placement.info",tt(P0),r),d=l.anchor,m=n.element,f=o.get(n.uid);vf(()=>{Ie(m,"position","fixed");const w=zo(m,"visibility");Ie(m,"visibility","hidden");const x=t.useFixed()?hS():pS(e);d.placement(e,d,x).each(O=>{const M=a.orThunk(()=>t.getBounds.map(En)),A=fS(x,O,M,n,f,l.transition);o.set(n.uid,A)}),w.fold(()=>{jt(m,"visibility")},O=>{Ie(m,"visibility",O)}),zo(m,"left").isNone()&&zo(m,"top").isNone()&&zo(m,"right").isNone()&&zo(m,"bottom").isNone()&&xs(zo(m,"position"),"fixed")&&jt(m,"position")},m)};var L3=Object.freeze({__proto__:null,position:Ah,positionWithinBounds:V0,getMode:(e,t,o)=>t.useFixed()?"fixed":"absolute",reset:(e,t,o,n)=>{const r=n.element;ye(["position","left","right","top","bottom"],a=>jt(r,a)),Tw(r),o.clear(n.uid)}}),bS=Object.freeze({__proto__:null,init:()=>{let e={};return Gc({readState:()=>e,clear:r=>{oo(r)?delete e[r]:e={}},set:(r,a)=>{e[r]=a},get:r=>He(e,r)})}});const yr=Us({fields:F0,name:"positioning",active:qb,apis:L3,state:bS}),If=e=>e.getSystem().isConnected(),od=e=>{Pt(e,Dl());const t=e.components();ye(t,od)},nd=e=>{const t=e.components();ye(t,nd),Pt(e,Hc())},N0=(e,t)=>{e.getSystem().addToWorld(t),ao(e.element)&&nd(t)},Bf=e=>{od(e),e.getSystem().removeFromWorld(e)},z0=(e,t)=>{pr(e.element,t.element)},vS=e=>{ye(e.components(),t=>Nc(t.element)),ji(e.element),e.syncComponents()},yS=(e,t,o)=>{const n=e.components();vS(e);const r=o(t),a=Pn(n,r);ye(a,l=>{od(l),e.getSystem().removeFromWorld(l)}),ye(r,l=>{If(l)?z0(e,l):(e.getSystem().addToWorld(l),z0(e,l),ao(e.element)&&nd(l))}),e.syncComponents()},Dh=(e,t,o)=>{const n=e.components(),r=uo(t,d=>th(d).toArray());ye(n,d=>{Xt(r,d)||Bf(d)});const a=o(t),l=Pn(n,a);ye(l,d=>{If(d)&&Bf(d)}),ye(a,d=>{If(d)||N0(e,d)}),e.syncComponents()},Vl=(e,t)=>{Lf(e,t,pr)},Lf=(e,t,o)=>{e.getSystem().addToWorld(t),o(e.element,t.element),ao(e.element)&&nd(t),e.syncComponents()},Z0=e=>{od(e),Nc(e.element),e.getSystem().removeFromWorld(e)},Di=e=>{const t=ss(e.element).bind(o=>e.getSystem().getByDom(o).toOptional());Z0(e),t.each(o=>{o.syncComponents()})},U0=e=>{const t=e.components();ye(t,Z0),ji(e.element),e.syncComponents()},am=(e,t)=>{Ff(e,t,pr)},ig=(e,t)=>{Ff(e,t,nl)},Ff=(e,t,o)=>{o(e,t.element);const n=Hs(t.element);ye(n,r=>{t.getByDom(r).each(nd)})},W0=e=>{const t=Hs(e.element);ye(t,o=>{e.getByDom(o).each(od)}),Nc(e.element)},iu=(e,t,o,n)=>{o.get().each(l=>{U0(e)});const r=t.getAttachPoint(e);Vl(r,e);const a=e.getSystem().build(n);return Vl(e,a),o.set(a),a},G0=(e,t,o,n)=>{const r=iu(e,t,o,n);return t.onOpen(e,r),r},Nl=(e,t,o,n)=>o.get().map(()=>iu(e,t,o,n)),wS=(e,t,o,n,r)=>{q0(e,t),G0(e,t,o,n),r(),K0(e,t)},Pf=(e,t,o)=>{o.get().each(n=>{U0(e),Di(e),t.onClose(e,n),o.clear()})},j0=(e,t,o)=>o.isOpen(),F3=(e,t,o,n)=>j0(e,t,o)&&o.get().exists(r=>t.isPartOf(e,r,n)),SS=(e,t,o)=>o.get(),xS=(e,t,o,n)=>{zo(e.element,t).fold(()=>{B(e.element,o)},r=>{at(e.element,o,r)}),Ie(e.element,t,n)},CS=(e,t,o)=>{C(e.element,o).fold(()=>jt(e.element,t),n=>Ie(e.element,t,n))},q0=(e,t,o)=>{const n=t.getAttachPoint(e);Ie(e.element,"position",yr.getMode(n)),xS(e,"visibility",t.cloakVisibilityAttr,"hidden")},Vf=e=>fn(["top","left","right","bottom"],t=>zo(e,t).isSome()),K0=(e,t,o)=>{Vf(e.element)||jt(e.element,"position"),CS(e,"visibility",t.cloakVisibilityAttr)};var Y0=Object.freeze({__proto__:null,cloak:q0,decloak:K0,open:G0,openWhileCloaked:wS,close:Pf,isOpen:j0,isPartOf:F3,getState:SS,setContent:Nl}),TS=Object.freeze({__proto__:null,events:(e,t)=>Lo([le(Kg(),(o,n)=>{Pf(o,e,t)})])}),kS=[Zt("onOpen"),Zt("onClose"),me("isPartOf"),me("getAttachPoint"),J("cloakVisibilityAttr","data-precloak-visibility")],Q0=Object.freeze({__proto__:null,init:()=>{const e=Wo(),t=I("not-implemented");return Gc({readState:t,isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})}});const Vt=Us({fields:kS,name:"sandboxing",active:TS,apis:Y0,state:Q0}),uu=I("dismiss.popups"),lm=I("reposition.popups"),Nf=I("mouse.released"),ev=Xr([J("isExtraPart",Ht),Ir("fireEventInstead",[J("event",$l())])]),$h=e=>{const t=Hr("Dismissal",ev,e);return{[uu()]:{schema:Xr([me("target")]),onReceive:(o,n)=>{Vt.isOpen(o)&&(Vt.isPartOf(o,n.target)||t.isExtraPart(o,n.target)||t.fireEventInstead.fold(()=>Vt.close(o),a=>Pt(o,a.event)))}}}},OS=Xr([Ir("fireEventInstead",[J("event",Wu())]),$c("doReposition")]),zf=e=>{const t=Hr("Reposition",OS,e);return{[lm()]:{onReceive:o=>{Vt.isOpen(o)&&t.fireEventInstead.fold(()=>t.doReposition(o),n=>Pt(o,n.event))}}}},Rh=(e,t,o)=>{t.store.manager.onLoad(e,t,o)},Hh=(e,t,o)=>{t.store.manager.onUnload(e,t,o)};var MS=Object.freeze({__proto__:null,onLoad:Rh,onUnload:Hh,setValue:(e,t,o,n)=>{t.store.manager.setValue(e,t,o,n)},getValue:(e,t,o)=>t.store.manager.getValue(e,t,o),getState:(e,t,o)=>o}),tv=Object.freeze({__proto__:null,events:(e,t)=>{const o=e.resetOnDom?[cn((n,r)=>{Rh(n,e,t)}),Il((n,r)=>{Hh(n,e,t)})]:[ff(e,t,Rh)];return Lo(o)}});const Uf=()=>{const e=We(null),t=()=>({mode:"memory",value:e.get()}),o=()=>e.get()===null,n=()=>{e.set(null)};return Gc({set:e.set,get:e.get,isNotSet:o,clear:n,readState:t})},im=()=>Gc({readState:X}),Ih=()=>{const e=We({}),t=We({});return Gc({readState:()=>({mode:"dataset",dataByValue:e.get(),dataByText:t.get()}),lookup:l=>He(e.get(),l).orThunk(()=>He(t.get(),l)),update:l=>{const d=e.get(),m=t.get(),f={},w={};ye(l,x=>{f[x.value]=x,He(x,"meta").each(O=>{He(O,"text").each(M=>{w[M]=x})})}),e.set({...d,...f}),t.set({...m,...w})},clear:()=>{e.set({}),t.set({})}})};var um=Object.freeze({__proto__:null,memory:Uf,dataset:Ih,manual:im,init:e=>e.store.manager.state(e)});const ov=(e,t,o,n)=>{const r=t.store;o.update([n]),r.setValue(e,n),t.onSetValue(e,n)},ES=(e,t,o)=>{const n=t.store,r=n.getDataKey(e);return o.lookup(r).getOrThunk(()=>n.getFallbackEntry(r))},AS=(e,t,o)=>{t.store.initialValue.each(r=>{ov(e,t,o,r)})},DS=(e,t,o)=>{o.clear()};var Bh=[no("initialValue"),me("getFallbackEntry"),me("getDataKey"),me("setValue"),Xo("manager",{setValue:ov,getValue:ES,onLoad:AS,onUnload:DS,state:Ih})];const $S=(e,t,o)=>t.store.getValue(e),RS=(e,t,o,n)=>{t.store.setValue(e,n),t.onSetValue(e,n)},HS=(e,t,o)=>{t.store.initialValue.each(n=>{t.store.setValue(e,n)})};var IS=[me("getValue"),J("setValue",X),no("initialValue"),Xo("manager",{setValue:RS,getValue:$S,onLoad:HS,onUnload:X,state:il.init})];const BS=(e,t,o,n)=>{o.set(n),t.onSetValue(e,n)},LS=(e,t,o)=>o.get(),FS=(e,t,o)=>{t.store.initialValue.each(n=>{o.isNotSet()&&o.set(n)})},dm=(e,t,o)=>{o.clear()};var PS=[no("initialValue"),Xo("manager",{setValue:BS,getValue:LS,onLoad:FS,onUnload:dm,state:Uf})],VS=[Rc("store",{mode:"memory"},Jr("mode",{memory:PS,manual:IS,dataset:Bh})),Zt("onSetValue"),J("resetOnDom",!1)];const Ee=Us({fields:VS,name:"representing",active:tv,apis:MS,extra:{setValueFrom:(e,t)=>{const o=Ee.getValue(t);Ee.setValue(e,o)}},state:um}),Es=(e,t)=>Vd(e,{},ue(t,o=>Op(o.name(),"Cannot configure "+o.name()+" for "+e)).concat([tr("dump",xt)])),sd=e=>e.dump,Ws=(e,t)=>({...xe(t),...e.dump}),Fa={field:Es,augment:Ws,get:sd},nv="placeholder",Lh=g.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),mm=e=>Ft(e,"uiType"),sv=(e,t,o,n)=>e.exists(r=>r!==o.owner)?Lh.single(!0,I(o)):He(n,o.name).fold(()=>{throw new Error("Unknown placeholder component: "+o.name+`
Known: [`+Ro(n)+`]
Namespace: `+e.getOr("none")+`
Spec: `+JSON.stringify(o,null,2))},r=>r.replace()),Gf=(e,t,o,n)=>mm(o)&&o.uiType===nv?sv(e,t,o,n):Lh.single(!1,I(o)),rv=(e,t,o,n)=>Gf(e,t,o,n).fold((a,l)=>{const d=mm(o)?l(t,o.config,o.validated):l(t),m=He(d,"components").getOr([]),f=uo(m,w=>rv(e,t,w,n));return[{...d,components:f}]},(a,l)=>{if(mm(o)){const d=l(t,o.config,o.validated);return o.validated.preprocess.getOr(xt)(d)}else return l(t)}),cv=(e,t,o,n)=>uo(o,r=>rv(e,t,r,n)),av=(e,t)=>{let o=!1;const n=()=>o,r=()=>{if(o)throw new Error("Trying to use the same placeholder more than once: "+e);return o=!0,t},a=()=>t.fold((l,d)=>l,(l,d)=>l);return{name:I(e),required:a,used:n,replace:r}},lv=(e,t,o,n)=>{const r=yo(n,(l,d)=>av(d,l)),a=cv(e,t,o,r);return ho(r,l=>{if(l.used()===!1&&l.required())throw new Error("Placeholder: "+l.name()+` was not found in components list
Namespace: `+e.getOr("none")+`
Components: `+JSON.stringify(t.components,null,2))}),a},jf=Lh.single,NS=Lh.multiple,qf=I(nv),Fh=g.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),ug=J("factory",{sketch:xt}),Kf=J("schema",[]),Ph=me("name"),Yf=bs("pname","pname",oa(e=>"<alloy."+Le(e.name)+">"),ra()),Xf=tr("schema",()=>[no("preprocess")]),$i=J("defaults",I({})),Vh=J("overrides",I({})),iv=tt([ug,Kf,Ph,Yf,$i,Vh]),Jf=tt([ug,Kf,Ph,$i,Vh]),zS=tt([ug,Kf,Ph,Yf,$i,Vh]),ZS=tt([ug,Xf,Ph,me("unit"),Yf,$i,Vh]),Nh=e=>e.fold(v.some,v.none,v.some,v.some),uv=e=>{const t=o=>o.name;return e.fold(t,t,t,t)},US=e=>e.fold(xt,xt,xt,xt),rd=(e,t)=>o=>{const n=Hr("Converting part type",t,o);return e(n)},wr=rd(Fh.required,iv),Pa=rd(Fh.external,Jf),ma=rd(Fh.optional,zS),Va=rd(Fh.group,ZS),Qf=I("entirety");var WS=Object.freeze({__proto__:null,required:wr,external:Pa,optional:ma,group:Va,asNamedPart:Nh,name:uv,asCommon:US,original:Qf});const dg=(e,t,o,n)=>Oo(t.defaults(e,o,n),o,{uid:e.partUids[t.name]},t.overrides(e,o,n)),GS=(e,t,o)=>{const n={},r={};return ye(o,a=>{a.fold(l=>{n[l.pname]=jf(!0,(d,m,f)=>l.factory.sketch(dg(d,l,m,f)))},l=>{const d=t.parts[l.name];r[l.name]=I(l.factory.sketch(dg(t,l,d[Qf()]),d))},l=>{n[l.pname]=jf(!1,(d,m,f)=>l.factory.sketch(dg(d,l,m,f)))},l=>{n[l.pname]=NS(!0,(d,m,f)=>{const w=d[l.name];return ue(w,x=>l.factory.sketch(Oo(l.defaults(d,x,f),x,l.overrides(d,x))))})})}),{internals:I(n),externals:I(r)}},e1=(e,t)=>{const o={};return ye(t,n=>{Nh(n).each(r=>{const a=jS(e,r.pname);o[r.name]=l=>{const d=Hr("Part: "+r.name+" in "+e,tt(r.schema),l);return{...a,config:l,validated:d}}})}),o},jS=(e,t)=>({uiType:qf(),owner:e,name:t}),dv=(e,t,o)=>({uiType:qf(),owner:e,name:t,config:o,validated:{}}),qS=e=>uo(e,t=>t.fold(v.none,v.some,v.none,v.none).map(o=>al(o.name,o.schema.concat([Ib(Qf())]))).toArray()),mv=e=>ue(e,uv),t1=(e,t,o)=>GS(e,t,o),o1=(e,t,o)=>lv(v.some(e),t,t.components,o),_o=(e,t,o)=>{const n=t.partUids[o];return e.getSystem().getByUid(n).toOptional()},du=(e,t,o)=>_o(e,t,o).getOrDie("Could not find part: "+o),gv=(e,t,o)=>{const n={},r=t.partUids,a=e.getSystem();return ye(o,l=>{n[l]=I(a.getByUid(r[l]))}),n},hv=(e,t)=>{const o=e.getSystem();return yo(t.partUids,(n,r)=>I(o.getByUid(n)))},pv=e=>Ro(e.partUids),n1=(e,t,o)=>{const n={},r=t.partUids,a=e.getSystem();return ye(o,l=>{n[l]=I(a.getByUid(r[l]).getOrDie())}),n},fv=(e,t)=>{const o=mv(t);return De(ue(o,n=>({key:n,value:e+"-"+n})))},zh=e=>bs("partUids","partUids",kl(t=>fv(t.uid,e)),ra());var KS=Object.freeze({__proto__:null,generate:e1,generateOne:dv,schemas:qS,names:mv,substitutes:t1,components:o1,defaultUids:fv,defaultUidsSchema:zh,getAllParts:hv,getAllPartNames:pv,getPart:_o,getPartOrDie:du,getParts:gv,getPartsOrDie:n1});const YS=(e,t)=>(e.length>0?[al("parts",e)]:[]).concat([me("uid"),J("dom",{}),J("components",[]),Ib("originalSpec"),J("debug.sketcher",{})]).concat(t),bv=(e,t,o,n,r)=>{const a=YS(n,r);return Hr(e+" [SpecSchema]",Xr(a.concat(t)),o)},XS=(e,t,o,n)=>{const r=hm(n),a=bv(e,t,r,[],[]);return o(a,r)},s1=(e,t,o,n,r)=>{const a=hm(r),l=qS(o),d=zh(o),m=bv(e,t,a,l,[d]),f=t1(e,m,o),w=o1(e,m,f.internals());return n(m,w,a,f.externals())},gm=e=>Ft(e,"uid"),hm=e=>gm(e)?e:{...e,uid:Gd("uid")},r1=e=>e.uid!==void 0,JS=Xr([me("name"),me("factory"),me("configFields"),J("apis",{}),J("extraApis",{})]),Na=Xr([me("name"),me("factory"),me("configFields"),me("partFields"),J("apis",{}),J("extraApis",{})]),ar=e=>{const t=Hr("Sketcher for "+e.name,JS,e),o=a=>XS(t.name,t.configFields,t.factory,a),n=yo(t.apis,la),r=yo(t.extraApis,(a,l)=>Wp(a,l));return{name:t.name,configFields:t.configFields,sketch:o,...n,...r}},Lr=e=>{const t=Hr("Sketcher for "+e.name,Na,e),o=l=>s1(t.name,t.configFields,t.partFields,t.factory,l),n=e1(t.name,t.partFields),r=yo(t.apis,la),a=yo(t.extraApis,(l,d)=>Wp(l,d));return{name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:o,parts:n,...r,...a}},zl=e=>Rs("input")(e)&&qo(e,"type")!=="radio"||Rs("textarea")(e);var QS=Object.freeze({__proto__:null,getCurrent:(e,t,o)=>t.find(e)});const ex=[me("find")],It=Us({fields:ex,name:"composing",apis:QS}),tx=["input","button","textarea","select"],vv=(e,t,o)=>{(t.disabled()?l1:i1)(e,t)},c1=(e,t)=>t.useNative===!0&&Xt(tx,ms(e.element)),ox=e=>R(e.element,"disabled"),a1=e=>{at(e.element,"disabled","disabled")},nx=e=>{B(e.element,"disabled")},sx=e=>qo(e.element,"aria-disabled")==="true",rx=e=>{at(e.element,"aria-disabled","true")},cx=e=>{at(e.element,"aria-disabled","false")},l1=(e,t,o)=>{t.disableClass.each(r=>{wn(e.element,r)}),(c1(e,t)?a1:rx)(e),t.onDisabled(e)},i1=(e,t,o)=>{t.disableClass.each(r=>{Hn(e.element,r)}),(c1(e,t)?nx:cx)(e),t.onEnabled(e)},yv=(e,t)=>c1(e,t)?ox(e):sx(e);var z3=Object.freeze({__proto__:null,enable:i1,disable:l1,isDisabled:yv,onLoad:vv,set:(e,t,o,n)=>{(n?l1:i1)(e,t)}}),U3=Object.freeze({__proto__:null,exhibit:(e,t)=>ia({classes:t.disabled()?t.disableClass.toArray():[]}),events:(e,t)=>Lo([lb(bc(),(o,n)=>yv(o,e)),ff(e,t,vv)])}),W3=[Un("disabled",Ht),J("useNative",!0),no("disableClass"),Zt("onDisabled"),Zt("onEnabled")];const rt=Us({fields:W3,name:"disabling",active:U3,apis:z3}),ix=(e,t,o,n)=>{const r=oc(e.element,"."+t.highlightClass);ye(r,a=>{fn(n,d=>eo(d.element,a))||(Hn(a,t.highlightClass),e.getSystem().getByDom(a).each(d=>{t.onDehighlight(e,d),Pt(d,$p())}))})},ux=(e,t,o)=>ix(e,t,o,[]),dx=(e,t,o,n)=>{u1(e,t,o,n)&&(Hn(n.element,t.highlightClass),t.onDehighlight(e,n),Pt(n,$p()))},Zh=(e,t,o,n)=>{ix(e,t,o,[n]),u1(e,t,o,n)||(wn(n.element,t.highlightClass),t.onHighlight(e,n),Pt(n,Dp()))},Uh=(e,t,o)=>{m1(e,t).each(n=>{Zh(e,t,o,n)})},mx=(e,t,o)=>{g1(e,t).each(n=>{Zh(e,t,o,n)})},gx=(e,t,o,n)=>{wv(e,t,o,n).fold(r=>{throw r},r=>{Zh(e,t,o,r)})},hx=(e,t,o,n)=>{const r=p1(e,t);Qt(r,n).each(l=>{Zh(e,t,o,l)})},u1=(e,t,o,n)=>vc(n.element,t.highlightClass),d1=(e,t,o)=>Yo(e.element,"."+t.highlightClass).bind(n=>e.getSystem().getByDom(n).toOptional()),wv=(e,t,o,n)=>{const r=oc(e.element,"."+t.itemClass);return v.from(r[n]).fold(()=>St.error(new Error("No element found with index "+n)),e.getSystem().getByDom)},m1=(e,t,o)=>Yo(e.element,"."+t.itemClass).bind(n=>e.getSystem().getByDom(n).toOptional()),g1=(e,t,o)=>{const n=oc(e.element,"."+t.itemClass);return(n.length>0?v.some(n[n.length-1]):v.none()).bind(a=>e.getSystem().getByDom(a).toOptional())},Sv=(e,t,o,n)=>{const r=oc(e.element,"."+t.itemClass);return ds(r,l=>vc(l,t.highlightClass)).bind(l=>{const d=Jm(l,n,0,r.length-1);return e.getSystem().getByDom(r[d]).toOptional()})},px=(e,t,o)=>Sv(e,t,o,-1),h1=(e,t,o)=>Sv(e,t,o,1),p1=(e,t,o)=>{const n=oc(e.element,"."+t.itemClass);return os(ue(n,r=>e.getSystem().getByDom(r).toOptional()))};var fx=Object.freeze({__proto__:null,dehighlightAll:ux,dehighlight:dx,highlight:Zh,highlightFirst:Uh,highlightLast:mx,highlightAt:gx,highlightBy:hx,isHighlighted:u1,getHighlighted:d1,getFirst:m1,getLast:g1,getPrevious:px,getNext:h1,getCandidates:p1}),bx=[me("highlightClass"),me("itemClass"),Zt("onHighlight"),Zt("onDehighlight")];const to=Us({fields:bx,name:"highlighting",apis:fx}),f1=[8],Zl=[9],Ul=[13],Wh=[27],Bc=[32],Gh=[37],mg=[38],jh=[39],gg=[40],vx=(e,t,o)=>{const n=tn(e.slice(0,t)),r=tn(e.slice(t+1));return Qt(n.concat(r),o)},G3=(e,t,o)=>{const n=tn(e.slice(0,t));return Qt(n,o)},j3=(e,t,o)=>{const n=e.slice(0,t),r=e.slice(t+1);return Qt(r.concat(n),o)},q3=(e,t,o)=>{const n=e.slice(t+1);return Qt(n,o)},Bt=e=>t=>{const o=t.raw;return Xt(e,o.which)},ul=e=>t=>Et(e,o=>o(t)),cd=e=>e.raw.shiftKey===!0,yx=e=>e.raw.ctrlKey===!0,pm=wt(cd),Nt=(e,t)=>({matches:e,classification:t}),wx=(e,t)=>Qt(e,n=>n.matches(t)).map(n=>n.classification),xv=(e,t,o)=>{t.exists(r=>o.exists(a=>eo(a,r)))||je(e,Rl(),{prevFocus:t,newFocus:o})},b1=()=>{const e=o=>rr(o.element);return{get:e,set:(o,n)=>{const r=e(o);o.getSystem().triggerFocus(n,o.element);const a=e(o);xv(o,r,a)}}},Sx=()=>{const e=o=>to.getHighlighted(o).map(n=>n.element);return{get:e,set:(o,n)=>{const r=e(o);o.getSystem().getByDom(n).fold(X,l=>{to.highlight(o,l)});const a=e(o);xv(o,r,a)}}};var fm;(function(e){e.OnFocusMode="onFocus",e.OnEnterOrSpaceMode="onEnterOrSpace",e.OnApiMode="onApi"})(fm||(fm={}));const ad=(e,t,o,n,r)=>{const a=()=>e.concat([J("focusManager",b1()),Rc("focusInside","onFocus",Qi(f=>Xt(["onFocus","onEnterOrSpace","onApi"],f)?St.value(f):St.error("Invalid value for focusInside"))),Xo("handler",m),Xo("state",t),Xo("sendFocusIn",r)]),l=(f,w,x,O,M)=>{const A=x(f,w,O,M);return wx(A,w.event).bind(L=>L(f,w,O,M))},m={schema:a,processKey:l,toEvents:(f,w)=>{const x=f.focusInside!==fm.OnFocusMode?v.none():r(f).map(A=>le(wi(),(L,ee)=>{A(L,f,w),ee.stop()})),O=(A,L)=>{const ee=Bt(Bc.concat(Ul))(L.event);f.focusInside===fm.OnEnterOrSpaceMode&&ee&&aa(A,L)&&r(f).each(W=>{W(A,f,w),L.stop()})},M=[le(tc(),(A,L)=>{l(A,L,o,f,w).fold(()=>{O(A,L)},ee=>{L.stop()})}),le(oy(),(A,L)=>{l(A,L,n,f,w).each(ee=>{L.stop()})})];return Lo(x.toArray().concat(M))}};return m},Cv=e=>{const t=[no("onEscape"),no("onEnter"),J("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),J("firstTabstop",0),J("useTabstopAt",io),no("visibilitySelector")].concat([e]),o=(W,Y)=>{const j=W.visibilitySelector.bind(de=>Fl(Y,de)).getOr(Y);return Zo(j)>0},n=(W,Y)=>{const j=oc(W.element,Y.selector),de=Ct(j,ie=>o(Y,ie));return v.from(de[Y.firstTabstop])},r=(W,Y)=>Y.focusManager.get(W).bind(j=>Fl(j,Y.selector)),a=(W,Y)=>o(W,Y)&&W.useTabstopAt(Y),l=(W,Y,j)=>{n(W,Y).each(de=>{Y.focusManager.set(W,de)})},d=(W,Y,j,de,ie)=>ie(Y,j,he=>a(de,he)).fold(()=>de.cyclic?v.some(!0):v.none(),he=>(de.focusManager.set(W,he),v.some(!0))),m=(W,Y,j,de)=>{const ie=oc(W.element,j.selector);return r(W,j).bind(he=>ds(ie,go(eo,he)).bind(ae=>d(W,ie,ae,j,de)))},f=(W,Y,j)=>{const de=j.cyclic?vx:G3;return m(W,Y,j,de)},w=(W,Y,j)=>{const de=j.cyclic?j3:q3;return m(W,Y,j,de)},x=W=>Ur(W).bind(Jc).exists(Y=>eo(Y,W)),O=(W,Y,j)=>r(W,j).filter(de=>!j.useTabstopAt(de)).bind(de=>(x(de)?f:w)(W,Y,j)),M=(W,Y,j)=>j.onEnter.bind(de=>de(W,Y)),A=(W,Y,j)=>j.onEscape.bind(de=>de(W,Y)),L=I([Nt(ul([cd,Bt(Zl)]),f),Nt(Bt(Zl),w),Nt(ul([pm,Bt(Ul)]),M)]),ee=I([Nt(Bt(Wh),A),Nt(Bt(Zl),O)]);return ad(t,il.init,L,ee,()=>v.some(l))};var xx=Cv(tr("cyclic",Ht)),s=Cv(tr("cyclic",io));const c=(e,t,o)=>(Rp(e,o,bc()),v.some(!0)),i=(e,t,o)=>zl(o)&&Bt(Bc)(t.event)?v.none():c(e,t,o),u=(e,t)=>v.some(!0),p=[J("execute",i),J("useSpace",!1),J("useEnter",!0),J("useControlEnter",!1),J("useDown",!1)],y=(e,t,o)=>o.execute(e,t,e.element),T=(e,t,o,n)=>{const r=o.useSpace&&!zl(e.element)?Bc:[],a=o.useEnter?Ul:[],l=o.useDown?gg:[],d=r.concat(a).concat(l);return[Nt(Bt(d),y)].concat(o.useControlEnter?[Nt(ul([yx,Bt(Ul)]),y)]:[])},E=(e,t,o,n)=>o.useSpace&&!zl(e.element)?[Nt(Bt(Bc),u)]:[];var H=ad(p,il.init,T,E,()=>v.none());const z=()=>{const e=Wo();return Gc({readState:()=>e.get().map(r=>({numRows:String(r.numRows),numColumns:String(r.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(r,a)=>{e.set({numRows:r,numColumns:a})},getNumRows:()=>e.get().map(r=>r.numRows),getNumColumns:()=>e.get().map(r=>r.numColumns)})};var fe=Object.freeze({__proto__:null,flatgrid:z,init:e=>e.state(e)});const Me=e=>(t,o,n,r)=>{const a=e(t.element);return pe(a,t,o,n,r)},Oe=(e,t)=>{const o=tg(e,t);return Me(o)},Te=(e,t)=>{const o=tg(t,e);return Me(o)},Fe=e=>(t,o,n,r)=>pe(e,t,o,n,r),pe=(e,t,o,n,r)=>n.focusManager.get(t).bind(l=>e(t.element,l,n,r)).map(l=>(n.focusManager.set(t,l),!0)),Ce=Fe,qe=Fe,ot=Fe,so=e=>e.offsetWidth<=0&&e.offsetHeight<=0,an=e=>!so(e.dom),ln=(e,t)=>ds(e,t).map(o=>({index:o,candidates:e})),lr=(e,t,o)=>{const n=l=>eo(l,t),r=oc(e,o),a=Ct(r,an);return ln(a,n)},ga=(e,t)=>ds(e,o=>eo(t,o)),mu=(e,t,o,n)=>{const r=Math.floor(t/o),a=t%o;return n(r,a).bind(l=>{const d=l.row*o+l.column;return d>=0&&d<e.length?v.some(e[d]):v.none()})},hg=(e,t,o,n,r)=>mu(e,t,n,(a,l)=>{const m=a===o-1?e.length-a*n:n,f=Jm(l,r,0,m-1);return v.some({row:a,column:f})}),qh=(e,t,o,n,r)=>mu(e,t,n,(a,l)=>{const d=Jm(a,r,0,o-1),f=d===o-1?e.length-d*n:n,w=In(l,0,f-1);return v.some({row:d,column:w})}),Mo=(e,t,o,n)=>hg(e,t,o,n,1),nc=(e,t,o,n)=>hg(e,t,o,n,-1),sc=(e,t,o,n)=>qh(e,t,o,n,-1),za=(e,t,o,n)=>qh(e,t,o,n,1),ha=[me("selector"),J("execute",i),Ic("onEscape"),J("captureTab",!1),Bb()],bm=(e,t,o)=>{Yo(e.element,t.selector).each(n=>{t.focusManager.set(e,n)})},rc=(e,t)=>t.focusManager.get(e).bind(o=>Fl(o,t.selector)),v1=(e,t,o,n)=>rc(e,o).bind(r=>o.execute(e,t,r)),gu=e=>(t,o,n,r)=>lr(t,o,n.selector).bind(a=>e(a.candidates,a.index,r.getNumRows().getOr(n.initSize.numRows),r.getNumColumns().getOr(n.initSize.numColumns))),dl=(e,t,o)=>o.captureTab?v.some(!0):v.none(),Sr=(e,t,o)=>o.onEscape(e,t),Tv=gu(nc),kv=gu(Mo),Cx=gu(sc),Tx=gu(za),kx=I([Nt(Bt(Gh),Oe(Tv,kv)),Nt(Bt(jh),Te(Tv,kv)),Nt(Bt(mg),Ce(Cx)),Nt(Bt(gg),qe(Tx)),Nt(ul([cd,Bt(Zl)]),dl),Nt(ul([pm,Bt(Zl)]),dl),Nt(Bt(Bc.concat(Ul)),v1)]),y1=I([Nt(Bt(Wh),Sr),Nt(Bt(Bc),u)]);var Ox=ad(ha,z,kx,y1,()=>v.some(bm));const vm=(e,t,o,n,r)=>{const a=d=>ms(d)==="button"&&qo(d,"disabled")==="disabled",l=(d,m,f)=>r(d,m,n,0,f.length-1,f[m],w=>a(f[w])?l(d,w,f):v.from(f[w]));return lr(e,o,t).bind(d=>{const m=d.index,f=d.candidates;return l(m,m,f)})},K3=(e,t,o,n)=>vm(e,t,o,n,(r,a,l,d,m,f,w)=>{const x=In(a+l,d,m);return x===r?v.from(f):w(x)}),Ov=(e,t,o,n)=>vm(e,t,o,n,(r,a,l,d,m,f,w)=>{const x=Jm(a,l,d,m);return x===r?v.none():w(x)}),iD=[me("selector"),J("getInitial",v.none),J("execute",i),Ic("onEscape"),J("executeOnMove",!1),J("allowVertical",!0),J("allowHorizontal",!0),J("cycles",!0)],uD=(e,t)=>t.focusManager.get(e).bind(o=>Fl(o,t.selector)),_x=(e,t,o)=>uD(e,o).bind(n=>o.execute(e,t,n)),dD=(e,t,o)=>{t.getInitial(e).orThunk(()=>Yo(e.element,t.selector)).each(n=>{t.focusManager.set(e,n)})},Y3=(e,t,o)=>(o.cycles?Ov:K3)(e,o.selector,t,-1),X3=(e,t,o)=>(o.cycles?Ov:K3)(e,o.selector,t,1),J3=e=>(t,o,n,r)=>e(t,o,n,r).bind(()=>n.executeOnMove?_x(t,o,n):v.some(!0)),mD=(e,t,o)=>o.onEscape(e,t),gD=(e,t,o,n)=>{const r=[...o.allowHorizontal?Gh:[]].concat(o.allowVertical?mg:[]),a=[...o.allowHorizontal?jh:[]].concat(o.allowVertical?gg:[]);return[Nt(Bt(r),J3(Oe(Y3,X3))),Nt(Bt(a),J3(Te(Y3,X3))),Nt(Bt(Ul),_x),Nt(Bt(Bc),_x)]},hD=I([Nt(Bt(Bc),u),Nt(Bt(Wh),mD)]);var pD=ad(iD,il.init,gD,hD,()=>v.some(dD));const _v=(e,t,o)=>v.from(e[t]).bind(n=>v.from(n[o]).map(r=>({rowIndex:t,columnIndex:o,cell:r}))),Q3=(e,t,o,n)=>{const a=e[t].length,l=Jm(o,n,0,a-1);return _v(e,t,l)},eT=(e,t,o,n)=>{const r=Jm(o,n,0,e.length-1),a=e[r].length,l=In(t,0,a-1);return _v(e,r,l)},tT=(e,t,o,n)=>{const a=e[t].length,l=In(o+n,0,a-1);return _v(e,t,l)},oT=(e,t,o,n)=>{const r=In(o+n,0,e.length-1),a=e[r].length,l=In(t,0,a-1);return _v(e,r,l)},fD=(e,t,o)=>Q3(e,t,o,1),bD=(e,t,o)=>Q3(e,t,o,-1),vD=(e,t,o)=>eT(e,o,t,-1),yD=(e,t,o)=>eT(e,o,t,1),wD=(e,t,o)=>tT(e,t,o,-1),SD=(e,t,o)=>tT(e,t,o,1),xD=(e,t,o)=>oT(e,o,t,-1),CD=(e,t,o)=>oT(e,o,t,1),TD=[al("selectors",[me("row"),me("cell")]),J("cycles",!0),J("previousSelector",v.none),J("execute",i)],kD=(e,t,o)=>{t.previousSelector(e).orThunk(()=>{const r=t.selectors;return Yo(e.element,r.cell)}).each(r=>{t.focusManager.set(e,r)})},OD=(e,t,o)=>rr(e.element).bind(n=>o.execute(e,t,n)),_D=(e,t)=>ue(e,o=>oc(o,t.selectors.cell)),Mv=(e,t)=>(o,n,r)=>{const a=r.cycles?e:t;return Fl(n,r.selectors.row).bind(l=>{const d=oc(l,r.selectors.cell);return ga(d,n).bind(m=>{const f=oc(o,r.selectors.row);return ga(f,l).bind(w=>{const x=_D(f,r);return a(x,w,m).map(O=>O.cell)})})})},nT=Mv(bD,wD),sT=Mv(fD,SD),MD=Mv(vD,xD),ED=Mv(yD,CD),AD=I([Nt(Bt(Gh),Oe(nT,sT)),Nt(Bt(jh),Te(nT,sT)),Nt(Bt(mg),Ce(MD)),Nt(Bt(gg),qe(ED)),Nt(Bt(Bc.concat(Ul)),OD)]),DD=I([Nt(Bt(Bc),u)]);var $D=ad(TD,il.init,AD,DD,()=>v.some(kD));const RD=[me("selector"),J("execute",i),J("moveOnTab",!1)],rT=(e,t,o)=>o.focusManager.get(e).bind(n=>o.execute(e,t,n)),HD=(e,t,o)=>{Yo(e.element,t.selector).each(n=>{t.focusManager.set(e,n)})},cT=(e,t,o)=>Ov(e,o.selector,t,-1),aT=(e,t,o)=>Ov(e,o.selector,t,1),ID=(e,t,o,n)=>o.moveOnTab?ot(cT)(e,t,o,n):v.none(),BD=(e,t,o,n)=>o.moveOnTab?ot(aT)(e,t,o,n):v.none(),LD=I([Nt(Bt(mg),ot(cT)),Nt(Bt(gg),ot(aT)),Nt(ul([cd,Bt(Zl)]),ID),Nt(ul([pm,Bt(Zl)]),BD),Nt(Bt(Ul),rT),Nt(Bt(Bc),rT)]),FD=I([Nt(Bt(Bc),u)]);var PD=ad(RD,il.init,LD,FD,()=>v.some(HD));const VD=[Ic("onSpace"),Ic("onEnter"),Ic("onShiftEnter"),Ic("onLeft"),Ic("onRight"),Ic("onTab"),Ic("onShiftTab"),Ic("onUp"),Ic("onDown"),Ic("onEscape"),J("stopSpaceKeyup",!1),no("focusIn")],ND=(e,t,o)=>[Nt(Bt(Bc),o.onSpace),Nt(ul([pm,Bt(Ul)]),o.onEnter),Nt(ul([cd,Bt(Ul)]),o.onShiftEnter),Nt(ul([cd,Bt(Zl)]),o.onShiftTab),Nt(ul([pm,Bt(Zl)]),o.onTab),Nt(Bt(mg),o.onUp),Nt(Bt(gg),o.onDown),Nt(Bt(Gh),o.onLeft),Nt(Bt(jh),o.onRight),Nt(Bt(Bc),o.onSpace)],zD=(e,t,o)=>[...o.stopSpaceKeyup?[Nt(Bt(Bc),u)]:[],Nt(Bt(Wh),o.onEscape)];var ZD=ad(VD,il.init,ND,zD,e=>e.focusIn);const UD=xx.schema(),WD=s.schema(),GD=pD.schema(),jD=Ox.schema(),qD=$D.schema(),KD=H.schema(),YD=PD.schema(),XD=ZD.schema();var JD=Object.freeze({__proto__:null,acyclic:UD,cyclic:WD,flow:GD,flatgrid:jD,matrix:qD,execution:KD,menu:YD,special:XD});const QD=e=>Cn(e,"setGridSize"),Ke=bh({branchKey:"mode",branches:JD,name:"keying",active:{events:(e,t)=>e.handler.toEvents(e,t)},apis:{focusIn:(e,t,o)=>{t.sendFocusIn(t).fold(()=>{e.getSystem().triggerFocus(e.element,e.element)},n=>{n(e,t,o)})},setGridSize:(e,t,o,n,r)=>{QD(o)?o.setGridSize(n,r):console.error("Layout does not support setGridSize")}},state:fe}),lT=(e,t)=>{vf(()=>{yS(e,t,()=>ue(t,e.getSystem().build))},e.element)},iT=(e,t)=>{vf(()=>{Dh(e,t,()=>Jp(e.element,t,e.getSystem().buildOrPatch))},e.element)},e6=(e,t,o,n)=>{Bf(t);const r=wb(e.element,o,n,e.getSystem().buildOrPatch);N0(e,r),e.syncComponents()},Mx=(e,t,o)=>{const n=e.getSystem().build(o);Lf(e,n,t)},t6=(e,t,o,n)=>{Di(t),Mx(e,(r,a)=>Gi(r,a,o),n)},o6=(e,t,o,n)=>(t.reuseDom?iT:lT)(e,n),n6=(e,t,o,n)=>{Mx(e,pr,n)},s6=(e,t,o,n)=>{Mx(e,Od,n)},r6=(e,t,o,n)=>{const r=Ev(e);Qt(r,l=>eo(n.element,l.element)).each(Di)},Ev=(e,t)=>e.components(),uT=(e,t,o,n,r)=>{const a=Ev(e);return v.from(a[n]).map(l=>(r.fold(()=>Di(l),d=>{(t.reuseDom?e6:t6)(e,l,n,d)}),l))};var c6=Object.freeze({__proto__:null,append:n6,prepend:s6,remove:r6,replaceAt:uT,replaceBy:(e,t,o,n,r)=>{const a=Ev(e);return ds(a,n).bind(l=>uT(e,t,o,l,r))},set:o6,contents:Ev});const bt=Us({fields:[Vs("reuseDom",!0)],name:"replacing",apis:c6}),a6=(e,t)=>{const o=Lo(t);return Us({fields:[me("enabled")],name:e,active:{events:I(o)}})},yt=(e,t)=>{const o=a6(e,t);return{key:e,value:{config:{},me:o,configAsRaw:I({}),initialConfig:{},state:il}}},dT=(e,t)=>{t.ignore||(da(e.element),t.onFocus(e))};var l6=Object.freeze({__proto__:null,focus:dT,blur:(e,t)=>{t.ignore||vh(e.element)},isFocused:e=>em(e.element)}),i6=Object.freeze({__proto__:null,exhibit:(e,t)=>{const o=t.ignore?{}:{attributes:{tabindex:"-1"}};return ia(o)},events:e=>Lo([le(wi(),(t,o)=>{dT(t,e),o.stop()})].concat(e.stopMousedown?[le(Ot(),(t,o)=>{o.event.prevent()})]:[]))}),u6=[Zt("onFocus"),J("stopMousedown",!1),J("ignore",!1)];const ut=Us({fields:u6,name:"focusing",active:i6,apis:l6}),d6=e=>({init:()=>{const o=We(e);return{get:()=>o.get(),set:d=>o.set(d),clear:()=>o.set(e),readState:()=>o.get()}}}),m6=(e,t,o)=>{const n=t.aria;n.update(e,n,o.get())},g6=(e,t,o)=>{t.toggleClass.each(n=>{o.get()?wn(e.element,n):Hn(e.element,n)})},w1=(e,t,o,n)=>{const r=o.get();o.set(n),g6(e,t,o),m6(e,t,o),r!==n&&t.onToggled(e,n)},mT=(e,t,o)=>{w1(e,t,o,!o.get())},h6=(e,t,o)=>{w1(e,t,o,!0)},p6=(e,t,o)=>{w1(e,t,o,!1)},f6=(e,t,o)=>o.get(),gT=(e,t,o)=>{w1(e,t,o,t.selected)};var b6=Object.freeze({__proto__:null,onLoad:gT,toggle:mT,isOn:f6,on:h6,off:p6,set:w1}),v6=Object.freeze({__proto__:null,exhibit:()=>ia({}),events:(e,t)=>{const o=iw(e,t,mT),n=ff(e,t,gT);return Lo(Rt([e.toggleOnExecute?[o]:[],[n]]))}});const y6=(e,t,o)=>{at(e.element,"aria-pressed",o),t.syncWithExpanded&&hT(e,t,o)},w6=(e,t,o)=>{at(e.element,"aria-selected",o)},S6=(e,t,o)=>{at(e.element,"aria-checked",o)},hT=(e,t,o)=>{at(e.element,"aria-expanded",o)};var x6=[J("selected",!1),no("toggleClass"),J("toggleOnExecute",!0),Zt("onToggled"),Rc("aria",{mode:"none"},Jr("mode",{pressed:[J("syncWithExpanded",!1),Xo("update",y6)],checked:[Xo("update",S6)],expanded:[Xo("update",hT)],selected:[Xo("update",w6)],none:[Xo("update",X)]}))];const _t=Us({fields:x6,name:"toggling",active:v6,apis:b6,state:d6(!1)}),pT=()=>{const e=(t,o)=>{o.stop(),Si(t)};return[le(nu(),e),le(Al(),e),Hl(Uc()),Hl(Ot())]},Av=e=>{const t=o=>Ci((n,r)=>{o(n),r.stop()});return Lo(Rt([e.map(t).toArray(),pT()]))},fT="alloy.item-hover",bT="alloy.item-focus",vT="alloy.item-toggled",yT=e=>{(rr(e.element).isNone()||ut.isFocused(e))&&(ut.isFocused(e)||ut.focus(e),je(e,fT,{item:e}))},wT=e=>{je(e,bT,{item:e})},C6=(e,t)=>{je(e,vT,{item:e,state:t})},ST=I(fT),T6=I(bT),k6=I(vT),O6=e=>e.toggling.map(t=>t.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),_6=e=>({aria:{mode:"checked"},...ic(e,(t,o)=>o!=="exclusive"),onToggled:(t,o)=>{Ae(e.onToggled)&&e.onToggled(t,o),C6(t,o)}}),M6=e=>({dom:e.dom,domModification:{...e.domModification,attributes:{role:O6(e),...e.domModification.attributes,"aria-haspopup":e.hasSubmenu,...e.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Fa.augment(e.itemBehaviours,[e.toggling.fold(_t.revoke,t=>_t.config(_6(t))),ut.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:t=>{wT(t)}}),Ke.config({mode:"execution"}),Ee.config({store:{mode:"memory",initialValue:e.data}}),yt("item-type-events",[...pT(),le(Aa(),yT),le(ru(),ut.focus)])]),components:e.components,eventOrder:e.eventOrder}),E6=[me("data"),me("components"),me("dom"),J("hasSubmenu",!1),no("toggling"),Fa.field("itemBehaviours",[_t,ut,Ke,Ee]),J("ignoreFocus",!1),J("domModification",{}),Xo("builder",M6),J("eventOrder",{})],A6=e=>({dom:e.dom,components:e.components,events:Lo([my(ru())])}),D6=[me("dom"),me("components"),Xo("builder",A6)],Ex=I("item-widget"),Ax=I([wr({name:"widget",overrides:e=>({behaviours:xe([Ee.config({store:{mode:"manual",getValue:t=>e.data,setValue:X}})])})})]),$6=e=>{const t=t1(Ex(),e,Ax()),o=o1(Ex(),e,t.internals()),n=a=>_o(a,e,"widget").map(l=>(Ke.focusIn(l),l)),r=(a,l)=>zl(l.event.target)?v.none():(e.autofocus&&l.setSource(a.element),v.none());return{dom:e.dom,components:o,domModification:e.domModification,events:Lo([Ci((a,l)=>{n(a).each(d=>{l.stop()})}),le(Aa(),yT),le(ru(),(a,l)=>{e.autofocus?n(a):ut.focus(a)})]),behaviours:Fa.augment(e.widgetBehaviours,[Ee.config({store:{mode:"memory",initialValue:e.data}}),ut.config({ignore:e.ignoreFocus,onFocus:a=>{wT(a)}}),Ke.config({mode:"special",focusIn:e.autofocus?a=>{n(a)}:bf(),onLeft:r,onRight:r,onEscape:(a,l)=>!ut.isFocused(a)&&!e.autofocus?(ut.focus(a),v.some(!0)):(e.autofocus&&l.setSource(a.element),v.none())})])}},R6=[me("uid"),me("data"),me("components"),me("dom"),J("autofocus",!1),J("ignoreFocus",!1),Fa.field("widgetBehaviours",[Ee,ut,Ke]),J("domModification",{}),zh(Ax()),Xo("builder",$6)],H6=Jr("type",{widget:R6,item:E6,separator:D6}),I6=(e,t)=>({mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager}),B6=(e,t)=>({mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},previousSelector:t.previousSelector,focusManager:e.focusManager}),L6=(e,t)=>({mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager}),F6=I([Va({factory:{sketch:e=>{const t=Hr("menu.spec item",H6,e);return t.builder(t)}},name:"items",unit:"item",defaults:(e,t)=>Ft(t,"uid")?t:{...t,uid:Gd("item")},overrides:(e,t)=>({type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}})})]),P6=I([me("value"),me("items"),me("dom"),me("components"),J("eventOrder",{}),Es("menuBehaviours",[to,Ee,It,Ke]),Rc("movement",{mode:"menu",moveOnTab:!0},Jr("mode",{grid:[Bb(),Xo("config",I6)],matrix:[Xo("config",B6),me("rowSelector"),J("previousSelector",v.none)],menu:[J("moveOnTab",!0),Xo("config",L6)]})),Ju(),J("fakeFocus",!1),J("focusManager",b1()),Zt("onHighlight"),Zt("onDehighlight")]),xT=I("alloy.menu-focus"),V6=(e,t)=>{const o=oc(e.element,'[role="menuitemradio"][aria-checked="true"]');ye(o,n=>{eo(n,t.element)||e.getSystem().getByDom(n).each(r=>{_t.off(r)})})},N6=(e,t,o,n)=>({uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Ws(e.menuBehaviours,[to.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight,onDehighlight:e.onDehighlight}),Ee.config({store:{mode:"memory",initialValue:e.value}}),It.config({find:v.some}),Ke.config(e.movement.config(e,e.movement))]),events:Lo([le(T6(),(r,a)=>{const l=a.event;r.getSystem().getByDom(l.target).each(d=>{to.highlight(r,d),a.stop(),je(r,xT(),{menu:r,item:d})})}),le(ST(),(r,a)=>{const l=a.event.item;to.highlight(r,l)}),le(k6(),(r,a)=>{const{item:l,state:d}=a.event;d&&qo(l.element,"role")==="menuitemradio"&&V6(r,l)})]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}}),pg=Lr({name:"Menu",configFields:P6(),partFields:F6(),factory:N6}),z6=e=>Tc(e,(t,o)=>({k:t,v:o})),CT=(e,t,o,n)=>He(o,n).bind(r=>He(e,r).bind(a=>{const l=CT(e,t,o,a);return v.some([a].concat(l))})).getOr([]),Z6=(e,t)=>{const o={};ho(e,(l,d)=>{ye(l,m=>{o[m]=d})});const n=t,r=z6(t),a=yo(r,(l,d)=>[d].concat(CT(o,n,r,d)));return yo(o,l=>He(a,l).getOr([l]))},U6=()=>{const e=We({}),t=We({}),o=We({}),n=Wo(),r=We({}),a=()=>{e.set({}),t.set({}),o.set({}),n.clear()},l=()=>n.get().isNone(),d=(ie,he)=>{t.set({...t.get(),[ie]:{type:"prepared",menu:he}})},m=(ie,he,ke,ae)=>{n.set(ie),e.set(ke),t.set(he),r.set(ae);const ct=Z6(ae,ke);o.set(ct)},f=ie=>Dn(e.get(),(he,ke)=>he===ie),w=(ie,he,ke)=>L(ie).bind(ae=>f(ie).bind(ct=>he(ct).map($e=>({triggeredMenu:ae,triggeringItem:$e,triggeringPath:ke})))),x=(ie,he)=>{const ke=Ct(W(ie).toArray(),ae=>L(ae).isSome());return He(o.get(),ie).bind(ae=>{const ct=tn(ke.concat(ae)),$e=uo(ct,(Ye,Ne)=>w(Ye,he,ct.slice(0,Ne+1)).fold(()=>xs(n.get(),Ye)?[]:[v.none()],qt=>[v.some(qt)]));return wo($e)})},O=ie=>He(e.get(),ie).map(he=>{const ke=He(o.get(),ie).getOr([]);return[he].concat(ke)}),M=ie=>He(o.get(),ie).bind(he=>he.length>1?v.some(he.slice(1)):v.none()),A=ie=>He(o.get(),ie),L=ie=>ee(ie).bind(TT),ee=ie=>He(t.get(),ie),W=ie=>He(e.get(),ie);return{setMenuBuilt:d,setContents:m,expand:O,refresh:A,collapse:M,lookupMenu:ee,lookupItem:W,otherMenus:ie=>{const he=r.get();return Pn(Ro(he),ie)},getPrimary:()=>n.get().bind(L),getMenus:()=>t.get(),clear:a,isClear:l,getTriggeringPath:x}},TT=e=>e.type==="prepared"?v.some(e.menu):v.none(),kT={init:U6,extractPreparedMenu:TT},OT=Le("tiered-menu-item-highlight"),_T=Le("tiered-menu-item-dehighlight");var Lc;(function(e){e[e.HighlightMenuAndItem=0]="HighlightMenuAndItem",e[e.HighlightJustMenu=1]="HighlightJustMenu",e[e.HighlightNone=2]="HighlightNone"})(Lc||(Lc={}));const W6=(e,t)=>{const o=Wo(),n=(Se,Be,ht)=>yo(ht,(Qe,Ze)=>{const mt=()=>pg.sketch({...Qe,value:Ze,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:(vo,Yt)=>{je(vo,OT,{menuComp:vo,itemComp:Yt})},onDehighlight:(vo,Yt)=>{je(vo,_T,{menuComp:vo,itemComp:Yt})},focusManager:e.fakeFocus?Sx():b1()});return Ze===Be?{type:"prepared",menu:Se.getSystem().build(mt())}:{type:"notbuilt",nbMenu:mt}}),r=kT.init(),a=Se=>{const Be=n(Se,e.data.primary,e.data.menus),ht=m();return r.setContents(e.data.primary,Be,e.data.expansions,ht),r.getPrimary()},l=Se=>Ee.getValue(Se).value,d=(Se,Be,ht)=>Vn(Be,Qe=>{if(!Qe.getSystem().isConnected())return v.none();const Ze=to.getCandidates(Qe);return Qt(Ze,mt=>l(mt)===ht)}),m=Se=>yo(e.data.menus,(Be,ht)=>uo(Be.items,Qe=>Qe.type==="separator"?[]:[Qe.data.value])),f=to.highlight,w=(Se,Be)=>{f(Se,Be),to.getHighlighted(Be).orThunk(()=>to.getFirst(Be)).each(ht=>{e.fakeFocus?to.highlight(Be,ht):Rp(Se,ht.element,ru())})},x=(Se,Be)=>os(ue(Be,ht=>Se.lookupMenu(ht).bind(Qe=>Qe.type==="prepared"?v.some(Qe.menu):v.none()))),O=(Se,Be,ht)=>{const Qe=x(Be,Be.otherMenus(ht));ye(Qe,Ze=>{$a(Ze.element,[e.markers.backgroundMenu]),e.stayInDom||bt.remove(Se,Ze)})},M=Se=>o.get().getOrThunk(()=>{const Be={},ht=oc(Se.element,`.${e.markers.item}`),Qe=Ct(ht,Ze=>qo(Ze,"aria-haspopup")==="true");return ye(Qe,Ze=>{Se.getSystem().getByDom(Ze).each(mt=>{const vo=l(mt);Be[vo]=mt})}),o.set(Be),Be}),A=(Se,Be)=>{const ht=M(Se);ho(ht,(Qe,Ze)=>{const mt=Xt(Be,Ze);at(Qe.element,"aria-expanded",mt)})},L=(Se,Be,ht)=>v.from(ht[0]).bind(Qe=>Be.lookupMenu(Qe).bind(Ze=>{if(Ze.type==="notbuilt")return v.none();{const mt=Ze.menu,vo=x(Be,ht.slice(1));return ye(vo,Yt=>{wn(Yt.element,e.markers.backgroundMenu)}),ao(mt.element)||bt.append(Se,ua(mt)),$a(mt.element,[e.markers.backgroundMenu]),w(Se,mt),O(Se,Be,ht),v.some(mt)}}));let ee;(function(Se){Se[Se.HighlightSubmenu=0]="HighlightSubmenu",Se[Se.HighlightParent=1]="HighlightParent"})(ee||(ee={}));const W=(Se,Be,ht)=>{if(ht.type==="notbuilt"){const Qe=Se.getSystem().build(ht.nbMenu());return r.setMenuBuilt(Be,Qe),Qe}else return ht.menu},Y=(Se,Be,ht=ee.HighlightSubmenu)=>{if(Be.hasConfigured(rt)&&rt.isDisabled(Be))return v.some(Be);{const Qe=l(Be);return r.expand(Qe).bind(Ze=>(A(Se,Ze),v.from(Ze[0]).bind(mt=>r.lookupMenu(mt).bind(vo=>{const Yt=W(Se,mt,vo);return ao(Yt.element)||bt.append(Se,ua(Yt)),e.onOpenSubmenu(Se,Be,Yt,tn(Ze)),ht===ee.HighlightSubmenu?(to.highlightFirst(Yt),L(Se,r,Ze)):(to.dehighlightAll(Yt),v.some(Be))}))))}},j=(Se,Be)=>{const ht=l(Be);return r.collapse(ht).bind(Qe=>(A(Se,Qe),L(Se,r,Qe).map(Ze=>(e.onCollapseMenu(Se,Be,Ze),Ze))))},de=(Se,Be)=>{const ht=l(Be);return r.refresh(ht).bind(Qe=>(A(Se,Qe),L(Se,r,Qe)))},ie=(Se,Be)=>zl(Be.element)?v.none():Y(Se,Be,ee.HighlightSubmenu),he=(Se,Be)=>zl(Be.element)?v.none():j(Se,Be),ke=(Se,Be)=>j(Se,Be).orThunk(()=>e.onEscape(Se,Be).map(()=>Se)),ae=Se=>(Be,ht)=>Fl(ht.getSource(),`.${e.markers.item}`).bind(Qe=>Be.getSystem().getByDom(Qe).toOptional().bind(Ze=>Se(Be,Ze).map(io))),ct=Lo([le(xT(),(Se,Be)=>{const ht=Be.event.item;r.lookupItem(l(ht)).each(()=>{const Qe=Be.event.menu;to.highlight(Se,Qe);const Ze=l(Be.event.item);r.refresh(Ze).each(mt=>O(Se,r,mt))})}),Ci((Se,Be)=>{const ht=Be.event.target;Se.getSystem().getByDom(ht).each(Qe=>{l(Qe).indexOf("collapse-item")===0&&j(Se,Qe),Y(Se,Qe,ee.HighlightSubmenu).fold(()=>{e.onExecute(Se,Qe)},X)})}),cn((Se,Be)=>{a(Se).each(ht=>{bt.append(Se,ua(ht)),e.onOpenMenu(Se,ht),e.highlightOnOpen===Lc.HighlightMenuAndItem?w(Se,ht):e.highlightOnOpen===Lc.HighlightJustMenu&&f(Se,ht)})}),le(OT,(Se,Be)=>{e.onHighlightItem(Se,Be.event.menuComp,Be.event.itemComp)}),le(_T,(Se,Be)=>{e.onDehighlightItem(Se,Be.event.menuComp,Be.event.itemComp)}),...e.navigateOnHover?[le(ST(),(Se,Be)=>{const ht=Be.event.item;de(Se,ht),Y(Se,ht,ee.HighlightParent),e.onHover(Se,ht)})]:[]]),$e=Se=>to.getHighlighted(Se).bind(to.getHighlighted),Ye=Se=>{$e(Se).each(Be=>{j(Se,Be)})},Ne=Se=>{r.getPrimary().each(Be=>{w(Se,Be)})},qt=Se=>v.from(Se.components()[0]).filter(Be=>qo(Be.element,"role")==="menu"),Mt={collapseMenu:Ye,highlightPrimary:Ne,repositionMenus:Se=>{r.getPrimary().bind(ht=>$e(Se).bind(Qe=>{const Ze=l(Qe),mt=uc(r.getMenus()),vo=os(ue(mt,kT.extractPreparedMenu));return r.getTriggeringPath(Ze,Yt=>d(Se,vo,Yt))}).map(Qe=>({primary:ht,triggeringPath:Qe}))).fold(()=>{qt(Se).each(ht=>{e.onRepositionMenu(Se,ht,[])})},({primary:ht,triggeringPath:Qe})=>{e.onRepositionMenu(Se,ht,Qe)})}};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Ws(e.tmenuBehaviours,[Ke.config({mode:"special",onRight:ae(ie),onLeft:ae(he),onEscape:ae(ke),focusIn:(Se,Be)=>{r.getPrimary().each(ht=>{Rp(Se,ht.element,ru())})}}),to.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),It.config({find:Se=>to.getHighlighted(Se)}),bt.config({})]),eventOrder:e.eventOrder,apis:Mt,events:ct}},G6=I("collapse-item"),j6=(e,t,o)=>({primary:e,menus:t,expansions:o}),q6=(e,t)=>({primary:e,menus:ve(e,t),expansions:{}}),K6=e=>({value:Le(G6()),meta:{text:e}}),fg=ar({name:"TieredMenu",configFields:[af("onExecute"),af("onEscape"),Qu("onOpenMenu"),Qu("onOpenSubmenu"),Zt("onRepositionMenu"),Zt("onCollapseMenu"),J("highlightOnOpen",Lc.HighlightMenuAndItem),al("data",[me("primary"),me("menus"),me("expansions")]),J("fakeFocus",!1),Zt("onHighlightItem"),Zt("onDehighlightItem"),Zt("onHover"),cf(),me("dom"),J("navigateOnHover",!0),J("stayInDom",!1),Es("tmenuBehaviours",[Ke,to,It,bt]),J("eventOrder",{})],apis:{collapseMenu:(e,t)=>{e.collapseMenu(t)},highlightPrimary:(e,t)=>{e.highlightPrimary(t)},repositionMenus:(e,t)=>{e.repositionMenus(t)}},factory:W6,extraApis:{tieredData:j6,singleData:q6,collapseItem:K6}}),Y6=(e,t,o,n,r)=>{const a=()=>e.lazySink(t),l=n.type==="horizontal"?{layouts:{onLtr:()=>Qm(),onRtl:()=>pf()}}:{},d=f=>f.length===2,m=f=>d(f)?l:{};return fg.sketch({dom:{tag:"div"},data:n.data,markers:n.menu.markers,highlightOnOpen:n.menu.highlightOnOpen,fakeFocus:n.menu.fakeFocus,onEscape:()=>(Vt.close(t),e.onEscape.map(f=>f(t)),v.some(!0)),onExecute:()=>v.some(!0),onOpenMenu:(f,w)=>{yr.positionWithinBounds(a().getOrDie(),w,o,r())},onOpenSubmenu:(f,w,x,O)=>{const M=a().getOrDie();yr.position(M,x,{anchor:{type:"submenu",item:w,...m(O)}})},onRepositionMenu:(f,w,x)=>{const O=a().getOrDie();yr.positionWithinBounds(O,w,o,r()),ye(x,M=>{const A=m(M.triggeringPath);yr.position(O,M.triggeredMenu,{anchor:{type:"submenu",item:M.triggeringItem,...A}})})}})},X6=(e,t)=>{const o=(O,M)=>e.getRelated(O).exists(L=>Xu(L,M)),n=(O,M)=>{Vt.setContent(O,M)},r=(O,M,A)=>{const L=v.none;a(O,M,A,L)},a=(O,M,A,L)=>{const ee=e.lazySink(O).getOrDie();Vt.openWhileCloaked(O,M,()=>yr.positionWithinBounds(ee,O,A,L())),Ee.setValue(O,v.some({mode:"position",config:A,getBounds:L}))},l=(O,M,A)=>{d(O,M,A,v.none)},d=(O,M,A,L)=>{const ee=Y6(e,O,M,A,L);Vt.open(O,ee),Ee.setValue(O,v.some({mode:"menu",menu:ee}))},m=O=>{Vt.isOpen(O)&&(Ee.setValue(O,v.none()),Vt.close(O))},f=O=>Vt.getState(O),w=O=>{Vt.isOpen(O)&&Ee.getValue(O).each(M=>{switch(M.mode){case"menu":Vt.getState(O).each(fg.repositionMenus);break;case"position":const A=e.lazySink(O).getOrDie();yr.positionWithinBounds(A,O,M.config,M.getBounds());break}})},x={setContent:n,showAt:r,showWithinBounds:a,showMenuAt:l,showMenuWithinBounds:d,hide:m,getContent:f,reposition:w,isOpen:Vt.isOpen};return{uid:e.uid,dom:e.dom,behaviours:Ws(e.inlineBehaviours,[Vt.config({isPartOf:(O,M,A)=>Xu(M,A)||o(O,A),getAttachPoint:O=>e.lazySink(O).getOrDie(),onOpen:O=>{e.onShow(O)},onClose:O=>{e.onHide(O)}}),Ee.config({store:{mode:"memory",initialValue:v.none()}}),yc.config({channels:{...$h({isExtraPart:t.isExtraPart,...e.fireDismissalEventInstead.map(O=>({fireEventInstead:{event:O.event}})).getOr({})}),...zf({...e.fireRepositionEventInstead.map(O=>({fireEventInstead:{event:O.event}})).getOr({}),doReposition:w})}})]),eventOrder:e.eventOrder,apis:x}},_n=ar({name:"InlineView",configFields:[me("lazySink"),Zt("onShow"),Zt("onHide"),Ml("onEscape"),Es("inlineBehaviours",[Vt,Ee,yc]),Ir("fireDismissalEventInstead",[J("event",$l())]),Ir("fireRepositionEventInstead",[J("event",Wu())]),J("getRelated",v.none),J("isExtraPart",Ht),J("eventOrder",v.none)],factory:X6,apis:{showAt:(e,t,o,n)=>{e.showAt(t,o,n)},showWithinBounds:(e,t,o,n,r)=>{e.showWithinBounds(t,o,n,r)},showMenuAt:(e,t,o,n)=>{e.showMenuAt(t,o,n)},showMenuWithinBounds:(e,t,o,n,r)=>{e.showMenuWithinBounds(t,o,n,r)},hide:(e,t)=>{e.hide(t)},isOpen:(e,t)=>e.isOpen(t),getContent:(e,t)=>e.getContent(t),setContent:(e,t,o)=>{e.setContent(t,o)},reposition:(e,t)=>{e.reposition(t)}}});var Dv=tinymce.util.Tools.resolve("tinymce.util.Delay");const xr=ar({name:"Button",factory:e=>{const t=Av(e.action),o=e.dom.tag,n=a=>He(e.dom,"attributes").bind(l=>He(l,a)),r=()=>{if(o==="button"){const a=n("type").getOr("button"),l=n("role").map(d=>({role:d})).getOr({});return{type:a,...l}}else return{role:e.role.getOr(n("role").getOr("button"))}};return{uid:e.uid,dom:e.dom,components:e.components,events:t,behaviours:Fa.augment(e.buttonBehaviours,[ut.config({}),Ke.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:r()},eventOrder:e.eventOrder}},configFields:[J("uid",void 0),me("dom"),J("components",[]),Fa.field("buttonBehaviours",[ut,Ke]),no("action"),no("role"),J("eventOrder",{})]}),J6=e=>{const t=e.dom.attributes!==void 0?e.dom.attributes:[];return Ut(t,(o,n)=>n.name==="class"?o:{...o,[n.name]:n.value},{})},Q6=e=>Array.prototype.slice.call(e.dom.classList,0),ld=e=>{const t=U.fromHtml(e),o=Hs(t),n=J6(t),r=Q6(t),a=o.length===0?{}:{innerHtml:Fp(t)};return{tag:ms(t),classes:r,attributes:n,...a}},po=e=>{const t=r1(e)&&Cn(e,"uid")?e.uid:Gd("memento");return{get:a=>a.getSystem().getByUid(t).getOrDie(),getOpt:a=>a.getSystem().getByUid(t).toOptional(),asSpec:()=>({...e,uid:t})}},{entries:MT,setPrototypeOf:ET,isFrozen:e7,getPrototypeOf:t7,getOwnPropertyDescriptor:o7}=Object;let{freeze:pa,seal:Ri,create:n7}=Object,{apply:Dx,construct:$x}=typeof Reflect<"u"&&Reflect;Dx||(Dx=function(t,o,n){return t.apply(o,n)}),pa||(pa=function(t){return t}),Ri||(Ri=function(t){return t}),$x||($x=function(t,o){return new t(...o)});const s7=Wl(Array.prototype.forEach),r7=Wl(Array.prototype.pop),S1=Wl(Array.prototype.push),$v=Wl(String.prototype.toLowerCase),Rx=Wl(String.prototype.toString),c7=Wl(String.prototype.match),Hi=Wl(String.prototype.replace),a7=Wl(String.prototype.indexOf),l7=Wl(String.prototype.trim),ml=Wl(RegExp.prototype.test),x1=i7(TypeError);function Wl(e){return function(t){for(var o=arguments.length,n=new Array(o>1?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];return Dx(e,t,n)}}function i7(e){return function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return $x(e,o)}}function To(e,t,o){var n;o=(n=o)!==null&&n!==void 0?n:$v,ET&&ET(e,null);let r=t.length;for(;r--;){let a=t[r];if(typeof a=="string"){const l=o(a);l!==a&&(e7(t)||(t[r]=l),a=l)}e[a]=!0}return e}function Kh(e){const t=n7(null);for(const[o,n]of MT(e))t[o]=n;return t}function Rv(e,t){for(;e!==null;){const n=o7(e,t);if(n){if(n.get)return Wl(n.get);if(typeof n.value=="function")return Wl(n.value)}e=t7(e)}function o(n){return console.warn("fallback value for",n),null}return o}const AT=pa(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Hx=pa(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ix=pa(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),u7=pa(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Bx=pa(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),d7=pa(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),DT=pa(["#text"]),$T=pa(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Lx=pa(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),RT=pa(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Hv=pa(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),m7=Ri(/\{\{[\w\W]*|[\w\W]*\}\}/gm),g7=Ri(/<%[\w\W]*|[\w\W]*%>/gm),h7=Ri(/\${[\w\W]*}/gm),p7=Ri(/^data-[\-\w.\u00B7-\uFFFF]/),f7=Ri(/^aria-[\-\w]+$/),HT=Ri(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),b7=Ri(/^(?:\w+script|data):/i),v7=Ri(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),IT=Ri(/^html$/i);var BT=Object.freeze({__proto__:null,MUSTACHE_EXPR:m7,ERB_EXPR:g7,TMPLIT_EXPR:h7,DATA_ATTR:p7,ARIA_ATTR:f7,IS_ALLOWED_URI:HT,IS_SCRIPT_OR_DATA:b7,ATTR_WHITESPACE:v7,DOCTYPE_NAME:IT});const y7=()=>typeof window>"u"?null:window,w7=function(t,o){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";o&&o.hasAttribute(r)&&(n=o.getAttribute(r));const a="dompurify"+(n?"#"+n:"");try{return t.createPolicy(a,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}};function LT(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y7();const t=$t=>LT($t);if(t.version="3.0.5",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;const o=e.document,n=o.currentScript;let{document:r}=e;const{DocumentFragment:a,HTMLTemplateElement:l,Node:d,Element:m,NodeFilter:f,NamedNodeMap:w=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:x,DOMParser:O,trustedTypes:M}=e,A=m.prototype,L=Rv(A,"cloneNode"),ee=Rv(A,"nextSibling"),W=Rv(A,"childNodes"),Y=Rv(A,"parentNode");if(typeof l=="function"){const $t=r.createElement("template");$t.content&&$t.content.ownerDocument&&(r=$t.content.ownerDocument)}let j,de="";const{implementation:ie,createNodeIterator:he,createDocumentFragment:ke,getElementsByTagName:ae}=r,{importNode:ct}=o;let $e={};t.isSupported=typeof MT=="function"&&typeof Y=="function"&&ie&&ie.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Ye,ERB_EXPR:Ne,TMPLIT_EXPR:qt,DATA_ATTR:Lt,ARIA_ATTR:Mt,IS_SCRIPT_OR_DATA:Se,ATTR_WHITESPACE:Be}=BT;let{IS_ALLOWED_URI:ht}=BT,Qe=null;const Ze=To({},[...AT,...Hx,...Ix,...Bx,...DT]);let mt=null;const vo=To({},[...$T,...Lx,...RT,...Hv]);let Yt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Cr=null,jc=null,bl=!0,ir=!0,qc=!1,wa=!0,Sc=!1,ti=!1,pd=!1,tb=!1,Rm=!1,vp=!1,X2=!1,UA=!0,WA=!1;const lG="user-content-";let O3=!0,ob=!1,yp={},wp=null;const GA=To({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let jA=null;const qA=To({},["audio","video","img","source","image","track"]);let _3=null;const KA=To({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),J2="http://www.w3.org/1998/Math/MathML",Q2="http://www.w3.org/2000/svg",fd="http://www.w3.org/1999/xhtml";let Sp=fd,M3=!1,E3=null;const iG=To({},[J2,Q2,fd],Rx);let Bg;const uG=["application/xhtml+xml","text/html"],dG="text/html";let xc,xp=null;const mG=r.createElement("form"),YA=function(se){return se instanceof RegExp||se instanceof Function},A3=function(se){if(!(xp&&xp===se)){if((!se||typeof se!="object")&&(se={}),se=Kh(se),Bg=uG.indexOf(se.PARSER_MEDIA_TYPE)===-1?Bg=dG:Bg=se.PARSER_MEDIA_TYPE,xc=Bg==="application/xhtml+xml"?Rx:$v,Qe="ALLOWED_TAGS"in se?To({},se.ALLOWED_TAGS,xc):Ze,mt="ALLOWED_ATTR"in se?To({},se.ALLOWED_ATTR,xc):vo,E3="ALLOWED_NAMESPACES"in se?To({},se.ALLOWED_NAMESPACES,Rx):iG,_3="ADD_URI_SAFE_ATTR"in se?To(Kh(KA),se.ADD_URI_SAFE_ATTR,xc):KA,jA="ADD_DATA_URI_TAGS"in se?To(Kh(qA),se.ADD_DATA_URI_TAGS,xc):qA,wp="FORBID_CONTENTS"in se?To({},se.FORBID_CONTENTS,xc):GA,Cr="FORBID_TAGS"in se?To({},se.FORBID_TAGS,xc):{},jc="FORBID_ATTR"in se?To({},se.FORBID_ATTR,xc):{},yp="USE_PROFILES"in se?se.USE_PROFILES:!1,bl=se.ALLOW_ARIA_ATTR!==!1,ir=se.ALLOW_DATA_ATTR!==!1,qc=se.ALLOW_UNKNOWN_PROTOCOLS||!1,wa=se.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Sc=se.SAFE_FOR_TEMPLATES||!1,ti=se.WHOLE_DOCUMENT||!1,Rm=se.RETURN_DOM||!1,vp=se.RETURN_DOM_FRAGMENT||!1,X2=se.RETURN_TRUSTED_TYPE||!1,tb=se.FORCE_BODY||!1,UA=se.SANITIZE_DOM!==!1,WA=se.SANITIZE_NAMED_PROPS||!1,O3=se.KEEP_CONTENT!==!1,ob=se.IN_PLACE||!1,ht=se.ALLOWED_URI_REGEXP||HT,Sp=se.NAMESPACE||fd,Yt=se.CUSTOM_ELEMENT_HANDLING||{},se.CUSTOM_ELEMENT_HANDLING&&YA(se.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Yt.tagNameCheck=se.CUSTOM_ELEMENT_HANDLING.tagNameCheck),se.CUSTOM_ELEMENT_HANDLING&&YA(se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Yt.attributeNameCheck=se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),se.CUSTOM_ELEMENT_HANDLING&&typeof se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Yt.allowCustomizedBuiltInElements=se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Sc&&(ir=!1),vp&&(Rm=!0),yp&&(Qe=To({},[...DT]),mt=[],yp.html===!0&&(To(Qe,AT),To(mt,$T)),yp.svg===!0&&(To(Qe,Hx),To(mt,Lx),To(mt,Hv)),yp.svgFilters===!0&&(To(Qe,Ix),To(mt,Lx),To(mt,Hv)),yp.mathMl===!0&&(To(Qe,Bx),To(mt,RT),To(mt,Hv))),se.ADD_TAGS&&(Qe===Ze&&(Qe=Kh(Qe)),To(Qe,se.ADD_TAGS,xc)),se.ADD_ATTR&&(mt===vo&&(mt=Kh(mt)),To(mt,se.ADD_ATTR,xc)),se.ADD_URI_SAFE_ATTR&&To(_3,se.ADD_URI_SAFE_ATTR,xc),se.FORBID_CONTENTS&&(wp===GA&&(wp=Kh(wp)),To(wp,se.FORBID_CONTENTS,xc)),O3&&(Qe["#text"]=!0),ti&&To(Qe,["html","head","body"]),Qe.table&&(To(Qe,["tbody"]),delete Cr.tbody),se.TRUSTED_TYPES_POLICY){if(typeof se.TRUSTED_TYPES_POLICY.createHTML!="function")throw x1('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof se.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw x1('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');j=se.TRUSTED_TYPES_POLICY,de=j.createHTML("")}else j===void 0&&(j=w7(M,n)),j!==null&&typeof de=="string"&&(de=j.createHTML(""));pa&&pa(se),xp=se}},XA=To({},["mi","mo","mn","ms","mtext"]),JA=To({},["foreignobject","desc","title","annotation-xml"]),gG=To({},["title","style","font","a","script"]),ey=To({},Hx);To(ey,Ix),To(ey,u7);const D3=To({},Bx);To(D3,d7);const hG=function(se){let Pe=Y(se);(!Pe||!Pe.tagName)&&(Pe={namespaceURI:Sp,tagName:"template"});const dt=$v(se.tagName),jn=$v(Pe.tagName);return E3[se.namespaceURI]?se.namespaceURI===Q2?Pe.namespaceURI===fd?dt==="svg":Pe.namespaceURI===J2?dt==="svg"&&(jn==="annotation-xml"||XA[jn]):!!ey[dt]:se.namespaceURI===J2?Pe.namespaceURI===fd?dt==="math":Pe.namespaceURI===Q2?dt==="math"&&JA[jn]:!!D3[dt]:se.namespaceURI===fd?Pe.namespaceURI===Q2&&!JA[jn]||Pe.namespaceURI===J2&&!XA[jn]?!1:!D3[dt]&&(gG[dt]||!ey[dt]):!!(Bg==="application/xhtml+xml"&&E3[se.namespaceURI]):!1},Lg=function(se){S1(t.removed,{element:se});try{se.parentNode.removeChild(se)}catch{se.remove()}},nb=function(se,Pe){try{S1(t.removed,{attribute:Pe.getAttributeNode(se),from:Pe})}catch{S1(t.removed,{attribute:null,from:Pe})}if(Pe.removeAttribute(se),se==="is"&&!mt[se])if(Rm||vp)try{Lg(Pe)}catch{}else try{Pe.setAttribute(se,"")}catch{}},QA=function(se){let Pe,dt;if(tb)se="<remove></remove>"+se;else{const oi=c7(se,/^[\r\n\t ]+/);dt=oi&&oi[0]}Bg==="application/xhtml+xml"&&Sp===fd&&(se='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+se+"</body></html>");const jn=j?j.createHTML(se):se;if(Sp===fd)try{Pe=new O().parseFromString(jn,Bg)}catch{}if(!Pe||!Pe.documentElement){Pe=ie.createDocument(Sp,"template",null);try{Pe.documentElement.innerHTML=M3?de:jn}catch{}}const Cc=Pe.body||Pe.documentElement;return se&&dt&&Cc.insertBefore(r.createTextNode(dt),Cc.childNodes[0]||null),Sp===fd?ae.call(Pe,ti?"html":"body")[0]:ti?Pe.documentElement:Cc},eD=function(se){return he.call(se.ownerDocument||se,se,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT,null,!1)},pG=function(se){return se instanceof x&&(typeof se.nodeName!="string"||typeof se.textContent!="string"||typeof se.removeChild!="function"||!(se.attributes instanceof w)||typeof se.removeAttribute!="function"||typeof se.setAttribute!="function"||typeof se.namespaceURI!="string"||typeof se.insertBefore!="function"||typeof se.hasChildNodes!="function")},ty=function(se){return typeof d=="object"?se instanceof d:se&&typeof se=="object"&&typeof se.nodeType=="number"&&typeof se.nodeName=="string"},bd=function(se,Pe,dt){$e[se]&&s7($e[se],jn=>{jn.call(t,Pe,dt,xp)})},tD=function(se){let Pe;if(bd("beforeSanitizeElements",se,null),pG(se))return Lg(se),!0;const dt=xc(se.nodeName);if(bd("uponSanitizeElement",se,{tagName:dt,allowedTags:Qe}),se.hasChildNodes()&&!ty(se.firstElementChild)&&(!ty(se.content)||!ty(se.content.firstElementChild))&&ml(/<[/\w]/g,se.innerHTML)&&ml(/<[/\w]/g,se.textContent))return Lg(se),!0;if(!Qe[dt]||Cr[dt]){if(!Cr[dt]&&nD(dt)&&(Yt.tagNameCheck instanceof RegExp&&ml(Yt.tagNameCheck,dt)||Yt.tagNameCheck instanceof Function&&Yt.tagNameCheck(dt)))return!1;if(O3&&!wp[dt]){const jn=Y(se)||se.parentNode,Cc=W(se)||se.childNodes;if(Cc&&jn){const oi=Cc.length;for(let js=oi-1;js>=0;--js)jn.insertBefore(L(Cc[js],!0),ee(se))}}return Lg(se),!0}return se instanceof m&&!hG(se)||(dt==="noscript"||dt==="noembed"||dt==="noframes")&&ml(/<\/no(script|embed|frames)/i,se.innerHTML)?(Lg(se),!0):(Sc&&se.nodeType===3&&(Pe=se.textContent,Pe=Hi(Pe,Ye," "),Pe=Hi(Pe,Ne," "),Pe=Hi(Pe,qt," "),se.textContent!==Pe&&(S1(t.removed,{element:se.cloneNode()}),se.textContent=Pe)),bd("afterSanitizeElements",se,null),!1)},oD=function(se,Pe,dt){if(UA&&(Pe==="id"||Pe==="name")&&(dt in r||dt in mG))return!1;if(!(ir&&!jc[Pe]&&ml(Lt,Pe))){if(!(bl&&ml(Mt,Pe))){if(!mt[Pe]||jc[Pe]){if(!(nD(se)&&(Yt.tagNameCheck instanceof RegExp&&ml(Yt.tagNameCheck,se)||Yt.tagNameCheck instanceof Function&&Yt.tagNameCheck(se))&&(Yt.attributeNameCheck instanceof RegExp&&ml(Yt.attributeNameCheck,Pe)||Yt.attributeNameCheck instanceof Function&&Yt.attributeNameCheck(Pe))||Pe==="is"&&Yt.allowCustomizedBuiltInElements&&(Yt.tagNameCheck instanceof RegExp&&ml(Yt.tagNameCheck,dt)||Yt.tagNameCheck instanceof Function&&Yt.tagNameCheck(dt))))return!1}else if(!_3[Pe]){if(!ml(ht,Hi(dt,Be,""))){if(!((Pe==="src"||Pe==="xlink:href"||Pe==="href")&&se!=="script"&&a7(dt,"data:")===0&&jA[se])){if(!(qc&&!ml(Se,Hi(dt,Be,"")))){if(dt)return!1}}}}}}return!0},nD=function(se){return se.indexOf("-")>0},sD=function(se){let Pe,dt,jn,Cc;bd("beforeSanitizeAttributes",se,null);const{attributes:oi}=se;if(!oi)return;const js={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:mt};for(Cc=oi.length;Cc--;){Pe=oi[Cc];const{name:ni,namespaceURI:$3}=Pe;dt=ni==="value"?Pe.value:l7(Pe.value);const bG=dt;if(jn=xc(ni),js.attrName=jn,js.attrValue=dt,js.keepAttr=!0,js.forceKeepAttr=void 0,bd("uponSanitizeAttribute",se,js),dt=js.attrValue,js.forceKeepAttr)continue;if(!js.keepAttr){nb(ni,se);continue}if(!wa&&ml(/\/>/i,dt)){nb(ni,se);continue}Sc&&(dt=Hi(dt,Ye," "),dt=Hi(dt,Ne," "),dt=Hi(dt,qt," "));const rD=xc(se.nodeName);if(!oD(rD,jn,dt)){nb(ni,se);continue}if(WA&&(jn==="id"||jn==="name")&&(nb(ni,se),dt=lG+dt),j&&typeof M=="object"&&typeof M.getAttributeType=="function"&&!$3)switch(M.getAttributeType(rD,jn)){case"TrustedHTML":{dt=j.createHTML(dt);break}case"TrustedScriptURL":{dt=j.createScriptURL(dt);break}}if(dt!==bG)try{$3?se.setAttributeNS($3,ni,dt):se.setAttribute(ni,dt)}catch{nb(ni,se)}}bd("afterSanitizeAttributes",se,null)},fG=function $t(se){let Pe;const dt=eD(se);for(bd("beforeSanitizeShadowDOM",se,null);Pe=dt.nextNode();)bd("uponSanitizeShadowNode",Pe,null),!tD(Pe)&&(Pe.content instanceof a&&$t(Pe.content),sD(Pe));bd("afterSanitizeShadowDOM",se,null)};return t.sanitize=function($t){let se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pe,dt,jn,Cc;if(M3=!$t,M3&&($t="<!-->"),typeof $t!="string"&&!ty($t))if(typeof $t.toString=="function"){if($t=$t.toString(),typeof $t!="string")throw x1("dirty is not a string, aborting")}else throw x1("toString is not a function");if(!t.isSupported)return $t;if(pd||A3(se),t.removed=[],typeof $t=="string"&&(ob=!1),ob){if($t.nodeName){const ni=xc($t.nodeName);if(!Qe[ni]||Cr[ni])throw x1("root node is forbidden and cannot be sanitized in-place")}}else if($t instanceof d)Pe=QA("<!---->"),dt=Pe.ownerDocument.importNode($t,!0),dt.nodeType===1&&dt.nodeName==="BODY"||dt.nodeName==="HTML"?Pe=dt:Pe.appendChild(dt);else{if(!Rm&&!Sc&&!ti&&$t.indexOf("<")===-1)return j&&X2?j.createHTML($t):$t;if(Pe=QA($t),!Pe)return Rm?null:X2?de:""}Pe&&tb&&Lg(Pe.firstChild);const oi=eD(ob?$t:Pe);for(;jn=oi.nextNode();)tD(jn)||(jn.content instanceof a&&fG(jn.content),sD(jn));if(ob)return $t;if(Rm){if(vp)for(Cc=ke.call(Pe.ownerDocument);Pe.firstChild;)Cc.appendChild(Pe.firstChild);else Cc=Pe;return(mt.shadowroot||mt.shadowrootmode)&&(Cc=ct.call(o,Cc,!0)),Cc}let js=ti?Pe.outerHTML:Pe.innerHTML;return ti&&Qe["!doctype"]&&Pe.ownerDocument&&Pe.ownerDocument.doctype&&Pe.ownerDocument.doctype.name&&ml(IT,Pe.ownerDocument.doctype.name)&&(js="<!DOCTYPE "+Pe.ownerDocument.doctype.name+`>
`+js),Sc&&(js=Hi(js,Ye," "),js=Hi(js,Ne," "),js=Hi(js,qt," ")),j&&X2?j.createHTML(js):js},t.setConfig=function($t){A3($t),pd=!0},t.clearConfig=function(){xp=null,pd=!1},t.isValidAttribute=function($t,se,Pe){xp||A3({});const dt=xc($t),jn=xc(se);return oD(dt,jn,Pe)},t.addHook=function($t,se){typeof se=="function"&&($e[$t]=$e[$t]||[],S1($e[$t],se))},t.removeHook=function($t){if($e[$t])return r7($e[$t])},t.removeHooks=function($t){$e[$t]&&($e[$t]=[])},t.removeAllHooks=function(){$e={}},t}var S7=LT();const FT=e=>S7().sanitize(e);var Za=tinymce.util.Tools.resolve("tinymce.util.I18n");const x7={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},PT="temporary-placeholder",Fx=e=>()=>He(e,PT).getOr("!not found!"),Px=(e,t)=>{const o=e.toLowerCase();if(Za.isRtl()){const n=Tn(o,"-rtl");return Ft(t,n)?n:o}else return o},VT=(e,t)=>He(t,Px(e,t)),NT=(e,t)=>{const o=t();return VT(e,o).getOrThunk(Fx(o))},C7=(e,t,o)=>{const n=t();return VT(e,n).or(o).getOrThunk(Fx(n))},T7=e=>Za.isRtl()?Ft(x7,e):!1,Vx=()=>yt("add-focusable",[cn(e=>{ef(e.element,"svg").each(t=>at(t,"focusable","false"))})]),zT=(e,t,o,n)=>{var r,a;const l=T7(t)?["tox-icon--flip"]:[],d=He(o,Px(t,o)).or(n).getOrThunk(Fx(o));return{dom:{tag:e.tag,attributes:(r=e.attributes)!==null&&r!==void 0?r:{},classes:e.classes.concat(l),innerHtml:d},behaviours:xe([...(a=e.behaviours)!==null&&a!==void 0?a:[],Vx()])}},Gl=(e,t,o,n=v.none())=>zT(t,e,o(),n),k7=(e,t,o)=>{const n=o(),r=Qt(e,a=>Ft(n,Px(a,n)));return zT(t,r.getOr(PT),n,v.none())},O7={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Nx=ar({name:"Notification",factory:e=>{const t=po({dom:ld(`<p>${FT(e.translationProvider(e.text))}</p>`),behaviours:xe([bt.config({})])}),o=M=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${M}%`}}}),n=M=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${M}%`}}),r=po({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[o(0)]},n(0)],behaviours:xe([bt.config({})])}),d={updateProgress:(M,A)=>{M.getSystem().isConnected()&&r.getOpt(M).each(L=>{bt.set(L,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[o(A)]},n(A)])})},updateText:(M,A)=>{if(M.getSystem().isConnected()){const L=t.get(M);bt.set(L,[Ln(A)])}}},m=Rt([e.icon.toArray(),e.level.toArray(),e.level.bind(M=>v.from(O7[M])).toArray()]),f=po(xr.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Gl("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":e.translationProvider("Close")}},e.iconProvider)],action:M=>{e.onAction(M)}})),w=k7(m,{tag:"div",classes:["tox-notification__icon"]},e.iconProvider),x={dom:{tag:"div",classes:["tox-notification__body"]},components:[t.asSpec()],behaviours:xe([bt.config({})])},O=[w,x];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map(M=>["tox-notification","tox-notification--in",`tox-notification--${M}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:xe([ut.config({}),yt("notification-events",[le(Wc(),M=>{f.getOpt(M).each(ut.focus)})])]),components:O.concat(e.progress?[r.asSpec()]:[]).concat([f.asSpec()]),apis:d}},configFields:[no("level"),me("progress"),no("icon"),me("onAction"),me("text"),me("iconProvider"),me("translationProvider")],apis:{updateProgress:(e,t,o)=>{e.updateProgress(t,o)},updateText:(e,t,o)=>{e.updateText(t,o)}}});var _7=(e,t,o)=>{const n=t.backstage.shared,r=()=>{const m=Jn(U.fromDom(e.getContentAreaContainer())),f=ps(),w=In(f.x,m.x,m.right),x=In(f.y,m.y,m.bottom),O=Math.max(m.right,f.right),M=Math.max(m.bottom,f.bottom);return v.some(yn(w,x,O-w,M-x))};return{open:(m,f)=>{const w=()=>{f(),_n.hide(O)},x=Zs(Nx.sketch({text:m.text,level:Xt(["success","error","warning","warn","info"],m.type)?m.type:void 0,progress:m.progressBar===!0,icon:m.icon,onAction:w,iconProvider:n.providers.icons,translationProvider:n.providers.translate})),O=Zs(_n.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:n.getSink,fireDismissalEventInstead:{},...n.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));o.add(O),So(m.timeout)&&m.timeout>0&&Dv.setEditorTimeout(e,()=>{w()},m.timeout);const A={close:w,reposition:()=>{const L=ua(x),ee={maxHeightFunction:om()},W=e.notificationManager.getNotifications();if(W[0]===A){const Y={...n.anchors.banner(),overrides:ee};_n.showWithinBounds(O,L,{anchor:Y},r)}else pt(W,A).each(Y=>{const j=W[Y-1].getEl(),de={type:"node",root:rs(),node:v.some(U.fromDom(j)),overrides:ee,layouts:{onRtl:()=>[Wn],onLtr:()=>[Wn]}};_n.showWithinBounds(O,L,{anchor:de},r)})},text:L=>{Nx.updateText(x,L)},settings:m,getEl:()=>x.element.dom,progressBar:{value:L=>{Nx.updateProgress(x,L)}}};return A},close:m=>{m.close()},getArgs:m=>m.settings}},Yh=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),M7=tinymce.util.Tools.resolve("tinymce.EditorManager"),Xh=tinymce.util.Tools.resolve("tinymce.Env"),gl;(function(e){e.default="wrap",e.floating="floating",e.sliding="sliding",e.scrolling="scrolling"})(gl||(gl={}));var C1;(function(e){e.auto="auto",e.top="top",e.bottom="bottom"})(C1||(C1={}));const $o=e=>t=>t.options.get(e),T1=e=>t=>v.from(e(t)),ZT=e=>{const t=Xh.deviceType.isPhone(),o=Xh.deviceType.isTablet()||t,n=e.options.register,r=l=>Xe(l)||l===!1,a=l=>Xe(l)||So(l);n("skin",{processor:l=>Xe(l)||l===!1,default:"oxide"}),n("skin_url",{processor:"string"}),n("height",{processor:a,default:Math.max(e.getElement().offsetHeight,400)}),n("width",{processor:a,default:Yh.DOM.getStyle(e.getElement(),"width")}),n("min_height",{processor:"number",default:100}),n("min_width",{processor:"number"}),n("max_height",{processor:"number"}),n("max_width",{processor:"number"}),n("style_formats",{processor:"object[]"}),n("style_formats_merge",{processor:"boolean",default:!1}),n("style_formats_autohide",{processor:"boolean",default:!1}),n("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),n("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),n("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),n("font_size_input_default_unit",{processor:"string",default:"pt"}),n("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),n("content_langs",{processor:"object[]"}),n("removed_menuitems",{processor:"string",default:""}),n("menubar",{processor:l=>Xe(l)||Jo(l),default:!t}),n("menu",{processor:"object",default:{}}),n("toolbar",{processor:l=>Jo(l)||Xe(l)||Vo(l)?{value:l,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),we(9,l=>{n("toolbar"+(l+1),{processor:"string"})}),n("toolbar_mode",{processor:"string",default:o?"scrolling":"floating"}),n("toolbar_groups",{processor:"object",default:{}}),n("toolbar_location",{processor:"string",default:C1.auto}),n("toolbar_persist",{processor:"boolean",default:!1}),n("toolbar_sticky",{processor:"boolean",default:e.inline}),n("toolbar_sticky_offset",{processor:"number",default:0}),n("fixed_toolbar_container",{processor:"string",default:""}),n("fixed_toolbar_container_target",{processor:"object"}),n("ui_mode",{processor:"string",default:"combined"}),n("file_picker_callback",{processor:"function"}),n("file_picker_validator_handler",{processor:"function"}),n("file_picker_types",{processor:"string"}),n("typeahead_urls",{processor:"boolean",default:!0}),n("anchor_top",{processor:r,default:"#top"}),n("anchor_bottom",{processor:r,default:"#bottom"}),n("draggable_modal",{processor:"boolean",default:!1}),n("statusbar",{processor:"boolean",default:!0}),n("elementpath",{processor:"boolean",default:!0}),n("branding",{processor:"boolean",default:!0}),n("promotion",{processor:"boolean",default:!0}),n("resize",{processor:l=>l==="both"||Jo(l),default:!Xh.deviceType.isTouch()}),n("sidebar_show",{processor:"string"}),n("help_accessibility",{processor:"boolean",default:e.hasPlugin("help")}),n("default_font_stack",{processor:"string[]",default:[]})},UT=$o("readonly"),zx=$o("height"),Zx=$o("width"),Ux=T1($o("min_width")),Wx=T1($o("min_height")),Iv=T1($o("max_width")),Gx=T1($o("max_height")),WT=T1($o("style_formats")),GT=$o("style_formats_merge"),jT=$o("style_formats_autohide"),qT=$o("content_langs"),KT=$o("removed_menuitems"),Jh=$o("toolbar_mode"),YT=$o("toolbar_groups"),jx=$o("toolbar_location"),E7=$o("fixed_toolbar_container"),A7=$o("fixed_toolbar_container_target"),XT=$o("toolbar_persist"),JT=$o("toolbar_sticky_offset"),QT=$o("menubar"),Bv=$o("toolbar"),e5=$o("file_picker_callback"),t5=$o("file_picker_validator_handler"),o5=$o("font_size_input_default_unit"),n5=$o("file_picker_types"),s5=$o("typeahead_urls"),r5=$o("anchor_top"),c5=$o("anchor_bottom"),a5=$o("draggable_modal"),l5=$o("statusbar"),i5=$o("elementpath"),qx=$o("branding"),u5=$o("resize"),d5=$o("paste_as_text"),m5=$o("sidebar_show"),g5=$o("promotion"),h5=$o("help_accessibility"),p5=$o("default_font_stack"),Kx=e=>e.options.get("skin")===!1,Lv=e=>e.options.get("menubar")!==!1,Fv=e=>{const t=e.options.get("skin_url");if(Kx(e))return t;if(t)return e.documentBaseURI.toAbsolute(t);{const o=e.options.get("skin");return M7.baseURL+"/skins/ui/"+o}},Pv=e=>v.from(e.options.get("skin_url")),f5=e=>e.options.get("line_height_formats").split(" "),Vv=e=>{const t=Bv(e),o=Xe(t),n=Vo(t)&&t.length>0;return!k1(e)&&(n||o||t===!0)},Yx=e=>{const t=we(9,n=>e.options.get("toolbar"+(n+1))),o=Ct(t,Xe);return Cs(o.length>0,o)},k1=e=>Yx(e).fold(()=>{const t=Bv(e);return st(t,Xe)&&t.length>0},io),Xx=e=>jx(e)===C1.bottom,b5=e=>{var t;if(!e.inline)return v.none();const o=(t=E7(e))!==null&&t!==void 0?t:"";if(o.length>0)return Yo(rs(),o);const n=A7(e);return oo(n)?v.some(U.fromDom(n)):v.none()},Qh=e=>e.inline&&b5(e).isSome(),Jx=e=>b5(e).getOrThunk(()=>be(te(U.fromDom(e.getElement())))),Qx=e=>e.inline&&!Lv(e)&&!Vv(e)&&!k1(e),O1=e=>(e.options.get("toolbar_sticky")||e.inline)&&!Qh(e)&&!Qx(e),ym=e=>!Qh(e)&&e.options.get("ui_mode")==="split",v5=e=>{const t=e.options.get("menu");return yo(t,o=>({...o,items:o.items}))};var D7=Object.freeze({__proto__:null,get ToolbarMode(){return gl},get ToolbarLocation(){return C1},register:ZT,getSkinUrl:Fv,getSkinUrlOption:Pv,isReadOnly:UT,isSkinDisabled:Kx,getHeightOption:zx,getWidthOption:Zx,getMinWidthOption:Ux,getMinHeightOption:Wx,getMaxWidthOption:Iv,getMaxHeightOption:Gx,getUserStyleFormats:WT,shouldMergeStyleFormats:GT,shouldAutoHideStyleFormats:jT,getLineHeightFormats:f5,getContentLanguages:qT,getRemovedMenuItems:KT,isMenubarEnabled:Lv,isMultipleToolbars:k1,isToolbarEnabled:Vv,isToolbarPersist:XT,getMultipleToolbarsOption:Yx,getUiContainer:Jx,useFixedContainer:Qh,isSplitUiMode:ym,getToolbarMode:Jh,isDraggableModal:a5,isDistractionFree:Qx,isStickyToolbar:O1,getStickyToolbarOffset:JT,getToolbarLocation:jx,isToolbarLocationBottom:Xx,getToolbarGroups:YT,getMenus:v5,getMenubar:QT,getToolbar:Bv,getFilePickerCallback:e5,getFilePickerTypes:n5,useTypeaheadUrls:s5,getAnchorTop:r5,getAnchorBottom:c5,getFilePickerValidatorHandler:t5,getFontSizeInputDefaultUnit:o5,useStatusBar:l5,useElementPath:i5,promotionEnabled:g5,useBranding:qx,getResize:u5,getPasteAsText:d5,getSidebarShow:m5,useHelpAccessibility:h5,getDefaultFontStack:p5});const $7={setup:(e,t)=>{const o=(r,a)=>{je(r,tc(),{raw:a})},n=()=>e.getMenu().bind(to.getHighlighted);t.on("keydown",r=>{const a=r.which;e.isActive()&&(e.isMenuOpen()?a===13?(n().each(Si),r.preventDefault()):a===40?(n().fold(()=>{e.getMenu().each(to.highlightFirst)},l=>{o(l,r)}),r.preventDefault(),r.stopImmediatePropagation()):(a===37||a===38||a===39)&&n().each(l=>{o(l,r),r.preventDefault(),r.stopImmediatePropagation()}):(a===13||a===38||a===40)&&e.cancelIfNecessary())}),t.on("NodeChange",()=>{e.isActive()&&!e.isProcessingAction()&&!t.queryCommandState("mceAutoCompleterInRange")&&e.cancelIfNecessary()})}};var e4;(function(e){e[e.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",e[e.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(e4||(e4={}));var Ii=e4;const t4="tox-menu-nav__js",Nv="tox-collection__item",o4="tox-swatch",R7={normal:t4,color:o4},y5="tox-collection__item--enabled",H7="tox-collection__group-heading",w5="tox-collection__item-icon",n4="tox-collection__item-label",I7="tox-collection__item-accessory",S5="tox-collection__item-caret",B7="tox-collection__item-checkmark",bg="tox-collection__item--active",x5="tox-collection__item-container",L7="tox-collection__item-container--column",C5="tox-collection__item-container--row",F7="tox-collection__item-container--align-right",P7="tox-collection__item-container--align-left",V7="tox-collection__item-container--valign-top",N7="tox-collection__item-container--valign-middle",z7="tox-collection__item-container--valign-bottom",T5=e=>He(R7,e).getOr(t4),Z7=e=>e==="color"?"tox-swatches":"tox-menu",s4=e=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:Z7(e),tieredMenu:"tox-tiered-menu"}),vg=e=>{const t=s4(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:T5(e)}},U7=(e,t,o)=>{const n=s4(o);return{tag:"div",classes:Rt([[n.menu,`tox-menu-${t}-column`],e?[n.hasIcons]:[]])}},W7=[pg.parts.items({})],zv=(e,t,o)=>{const n=s4(o);return{dom:{tag:"div",classes:Rt([[n.tieredMenu]])},markers:vg(o)}},k5=I([no("data"),J("inputAttributes",{}),J("inputStyles",{}),J("tag","input"),J("inputClasses",[]),Zt("onSetValue"),J("styles",{}),J("eventOrder",{}),Es("inputBehaviours",[Ee,ut]),J("selectOnFocus",!0)]),O5=e=>xe([ut.config({onFocus:e.selectOnFocus?t=>{const o=t.element,n=Ti(o);o.dom.setSelectionRange(0,n.length)}:X})]),G7=e=>({...O5(e),...Ws(e.inputBehaviours,[Ee.config({store:{mode:"manual",...e.data.map(t=>({initialValue:t})).getOr({}),getValue:t=>Ti(t.element),setValue:(t,o)=>{Ti(t.element)!==o&&Ll(t.element,o)}},onSetValue:e.onSetValue})])}),_5=e=>({tag:e.tag,attributes:{type:"text",...e.inputAttributes},styles:e.inputStyles,classes:e.inputClasses}),j7=(e,t)=>({uid:e.uid,dom:_5(e),components:[],behaviours:G7(e),eventOrder:e.eventOrder}),yg=ar({name:"Input",configFields:k5(),factory:j7}),M5=Le("refetch-trigger-event"),E5=Le("redirect-menu-item-interaction"),A5="tox-menu__searcher",Zv=e=>Yo(e.element,`.${A5}`).bind(t=>e.getSystem().getByDom(t).toOptional()),D5=Zv,q7=(e,t)=>{Ee.setValue(e,t.fetchPattern),e.element.dom.selectionStart=t.selectionStart,e.element.dom.selectionEnd=t.selectionEnd},$5=e=>{const t=Ee.getValue(e),o=e.element.dom.selectionStart,n=e.element.dom.selectionEnd;return{fetchPattern:t,selectionStart:o,selectionEnd:n}},K7=(e,t)=>{C(t.element,"id").each(o=>at(e.element,"aria-activedescendant",o))},Y7=e=>{const t=(r,a)=>(a.cut(),v.none()),o=(r,a)=>{const l={interactionEvent:a.event,eventType:a.event.raw.type};return je(r,E5,l),v.some(!0)},n="searcher-events";return{dom:{tag:"div",classes:[Nv]},components:[yg.sketch({inputClasses:[A5,"tox-textfield"],inputAttributes:{...e.placeholder.map(r=>({placeholder:e.i18n(r)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:xe([yt(n,[le(Zu(),r=>{Pt(r,M5)}),le(tc(),(r,a)=>{a.event.raw.key==="Escape"&&a.stop()})]),Ke.config({mode:"special",onLeft:t,onRight:t,onSpace:t,onEnter:o,onEscape:o,onUp:o,onDown:o})]),eventOrder:{keydown:[n,Ke.name()]}})]}},Uv="tox-collection--results__js",R5=e=>{var t;return e.dom?{...e,dom:{...e.dom,attributes:{...(t=e.dom.attributes)!==null&&t!==void 0?t:{},id:Le("aria-item-search-result-id"),"aria-selected":"false"}}}:e},r4=(e,t)=>o=>{const n=et(o,t);return ue(n,r=>({dom:e,components:r}))},X7=e=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[pg.parts.items({preprocess:e!=="auto"?r4({tag:"div",classes:["tox-swatches__row"]},e):xt})]}]}),J7=e=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[pg.parts.items({preprocess:r4({tag:"div",classes:["tox-collection__group"]},e)})]}),H5=(e,t)=>{const o=[];let n=[];return ye(e,(r,a)=>{t(r,a)?(n.length>0&&o.push(n),n=[],(Ft(r.dom,"innerHtml")||r.components&&r.components.length>0)&&n.push(r)):n.push(r)}),n.length>0&&o.push(n),ue(o,r=>({dom:{tag:"div",classes:["tox-collection__group"]},components:r}))},c4=(e,t,o)=>pg.parts.items({preprocess:n=>{const r=ue(n,o);return e!=="auto"&&e>1?r4({tag:"div",classes:["tox-collection__group"]},e)(r):H5(r,(a,l)=>t[l].type==="separator")}}),I5=(e,t,o=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(e===1?["tox-collection--list"]:["tox-collection--grid"])},components:[c4(e,t,xt)]}),Q7=(e,t,o=!0)=>{const n=Le("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Uv].concat(e===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:n}},components:[c4(e,t,R5)]}},e8=(e,t,o)=>{const n=Le("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(e===1?["tox-collection--list"]:["tox-collection--grid"])},components:[Y7({i18n:Za.translate,placeholder:o.placeholder}),{dom:{tag:"div",classes:[...e===1?["tox-collection--list"]:["tox-collection--grid"],Uv],attributes:{id:n}},components:[c4(e,t,R5)]}]}},t8=(e,t=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[pg.parts.items({preprocess:o=>H5(o,(n,r)=>e[r].type==="separator")})]}),Wv=e=>fn(e,t=>"icon"in t&&t.icon!==void 0),id=e=>(console.error(eu(e)),console.log(e),v.none()),o8=(e,t,o,n,r)=>{const a=t8(o);return{value:e,dom:a.dom,components:a.components,items:o}},a4=(e,t,o,n,r)=>{const a=()=>r.menuType!=="searchable"?I5(n,o):r.searchMode.searchMode==="search-with-field"?e8(n,o,r.searchMode):Q7(n,o);if(r.menuType==="color"){const l=X7(n);return{value:e,dom:l.dom,components:l.components,items:o}}else if(r.menuType==="normal"&&n==="auto"){const l=I5(n,o);return{value:e,dom:l.dom,components:l.components,items:o}}else if(r.menuType==="normal"||r.menuType==="searchable"){const l=a();return{value:e,dom:l.dom,components:l.components,items:o}}else if(r.menuType==="listpreview"&&n!=="auto"){const l=J7(n);return{value:e,dom:l.dom,components:l.components,items:o}}else return{value:e,dom:U7(t,n,r.menuType),components:W7,items:o}},es=Zn("type"),l4=Zn("name"),i4=Zn("label"),ud=Zn("text"),B5=Zn("title"),L5=Zn("icon"),_1=Zn("value"),n8=$c("fetch"),s8=$c("getSubmenuItems"),ep=$c("onAction"),r8=$c("onItemAction"),wg=Un("onSetup",()=>X),c8=or("name"),wm=or("text"),hl=or("icon"),M1=or("tooltip"),u4=or("label"),d4=or("shortcut"),a8=Ml("select"),Gv=Vs("active",!1),l8=Vs("borderless",!1),jl=Vs("enabled",!0),jv=Vs("primary",!1),F5=e=>J("columns",e),m4=J("meta",{}),g4=Un("onAction",X),Sg=e=>pc("type",e),h4=e=>bs("name","name",oa(()=>Le(`${e}-name`)),fs),i8=e=>bs("value","value",oa(()=>Le(`${e}-value`)),ra()),P5=tt([es,wm]),u8=e=>rn("separatormenuitem",P5,e),d8=tt([Sg("autocompleteitem"),Gv,jl,m4,_1,wm,hl]),m8=e=>rn("Autocompleter.Separator",P5,e),g8=e=>rn("Autocompleter.Item",d8,e),E1=[jl,M1,hl,wm,wg],h8=tt([es,ep,d4].concat(E1)),V5=e=>rn("toolbarbutton",h8,e),p4=[Gv].concat(E1),p8=tt(p4.concat([es,ep,d4])),N5=e=>rn("ToggleButton",p8,e),z5=[Un("predicate",Ht),fc("scope","node",["node","editor"]),fc("position","selection",["node","selection","line"])],f8=E1.concat([Sg("contextformbutton"),jv,ep,tr("original",xt)]),b8=p4.concat([Sg("contextformbutton"),jv,ep,tr("original",xt)]),v8=E1.concat([Sg("contextformbutton")]),y8=p4.concat([Sg("contextformtogglebutton")]),w8=Jr("type",{contextformbutton:f8,contextformtogglebutton:b8}),S8=tt([Sg("contextform"),Un("initValue",I("")),u4,hc("commands",w8),Ma("launch",Jr("type",{contextformbutton:v8,contextformtogglebutton:y8}))].concat(z5)),x8=e=>rn("ContextForm",S8,e),C8=tt([Sg("contexttoolbar"),Zn("items")].concat(z5)),T8=e=>rn("ContextToolbar",C8,e),k8=[es,Zn("src"),or("alt"),Ea("classes",[],fs)],O8=tt(k8),_8=[es,ud,c8,Ea("classes",["tox-collection__item-label"],fs)],M8=tt(_8),Z5=Vm(()=>vi("type",{cardimage:O8,cardtext:M8,cardcontainer:E8})),E8=tt([es,pc("direction","horizontal"),pc("align","left"),pc("valign","middle"),hc("items",Z5)]),tp=[jl,wm,d4,i8("menuitem"),m4],A8=tt([es,u4,hc("items",Z5),wg,g4].concat(tp)),D8=e=>rn("cardmenuitem",A8,e),$8=tt([es,Gv,hl].concat(tp)),R8=e=>rn("choicemenuitem",$8,e),U5=[es,Zn("fancytype"),g4],H8=[J("initData",{})].concat(U5),I8=[Ml("select"),Vd("initData",{},[Vs("allowCustomColors",!0),pc("storageKey","default"),jg("colors",ra())])].concat(U5),B8=Jr("fancytype",{inserttable:H8,colorswatch:I8}),L8=e=>rn("fancymenuitem",B8,e),F8=tt([es,wg,g4,hl].concat(tp)),P8=e=>rn("menuitem",F8,e),V8=tt([es,s8,wg,hl].concat(tp)),N8=e=>rn("nestedmenuitem",V8,e),z8=tt([es,hl,Gv,wg,ep].concat(tp)),Z8=e=>rn("togglemenuitem",z8,e),f4=(e,t,o)=>{const n=oc(e.element,"."+o);if(n.length>0){const r=ds(n,a=>{const l=a.dom.getBoundingClientRect().top,d=n[0].dom.getBoundingClientRect().top;return Math.abs(l-d)>t}).getOr(n.length);return v.some({numColumns:r,numRows:Math.ceil(n.length/r)})}else return v.none()},W5=(e,t)=>xe([yt(e,t)]),A1={namedEvents:W5,unnamedEvents:e=>W5(Le("unnamed-events"),e)},G5=Le("tooltip.exclusive"),D1=Le("tooltip.show"),$1=Le("tooltip.hide"),qv=Le("tooltip.immediateHide"),Kv=Le("tooltip.immediateShow"),j5=(e,t,o)=>{e.getSystem().broadcastOn([G5],{})};var U8=Object.freeze({__proto__:null,hideAllExclusive:j5,setComponents:(e,t,o,n)=>{o.getTooltip().each(r=>{r.getSystem().isConnected()&&bt.set(r,n)})}}),W8=Object.freeze({__proto__:null,events:(e,t)=>{const o=l=>{t.getTooltip().each(d=>{d.getSystem().isConnected()&&(Di(d),e.onHide(l,d),t.clearTooltip())}),t.clearTimer()},n=l=>{if(!t.isShowing()){j5(l);const d=e.lazySink(l).getOrDie(),m=l.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:Lo(e.mode==="normal"?[le(Aa(),f=>{Pt(l,D1)}),le(Ns(),f=>{Pt(l,$1)})]:[]),behaviours:xe([bt.config({})])});t.setTooltip(m),Vl(d,m),e.onShow(l,m),yr.position(d,m,{anchor:e.anchor(l)})}},r=l=>{t.getTooltip().each(d=>{const m=e.lazySink(l).getOrDie();yr.position(m,d,{anchor:e.anchor(l)})})},a=()=>{switch(e.mode){case"normal":return[le(Wc(),l=>{Pt(l,Kv)}),le(Uu(),l=>{Pt(l,qv)}),le(Aa(),l=>{Pt(l,D1)}),le(Ns(),l=>{Pt(l,$1)})];case"follow-highlight":return[le(Dp(),(l,d)=>{Pt(l,D1)}),le($p(),l=>{Pt(l,$1)})];case"children-normal":return[le(Wc(),(l,d)=>{rr(l.element).each(m=>{kn(d.event.target,"[data-mce-tooltip]")&&t.getTooltip().fold(()=>{Pt(l,Kv)},f=>{t.isShowing()&&(e.onShow(l,f),r(l))})})}),le(Uu(),l=>{rr(l.element).fold(()=>{Pt(l,qv)},X)}),le(Aa(),l=>{Yo(l.element,"[data-mce-tooltip]:hover").each(d=>{t.getTooltip().fold(()=>{Pt(l,D1)},m=>{t.isShowing()&&(e.onShow(l,m),r(l))})})}),le(Ns(),l=>{Yo(l.element,"[data-mce-tooltip]:hover").fold(()=>{Pt(l,$1)},X)})];default:return[le(Wc(),(l,d)=>{rr(l.element).each(m=>{kn(d.event.target,"[data-mce-tooltip]")&&t.getTooltip().fold(()=>{Pt(l,Kv)},f=>{t.isShowing()&&(e.onShow(l,f),r(l))})})}),le(Uu(),l=>{rr(l.element).fold(()=>{Pt(l,qv)},X)})]}};return Lo(Rt([[le(D1,l=>{t.resetTimer(()=>{n(l)},e.delayForShow())}),le($1,l=>{t.resetTimer(()=>{o(l)},e.delayForHide())}),le(Kv,l=>{t.resetTimer(()=>{n(l)},0)}),le(qv,l=>{t.resetTimer(()=>{o(l)},0)}),le(su(),(l,d)=>{const m=d;m.universal||Xt(m.channels,G5)&&o(l)}),Il(l=>{o(l)})],a()]))}}),G8=[me("lazySink"),me("tooltipDom"),J("exclusive",!0),J("tooltipComponents",[]),Un("delayForShow",I(300)),Un("delayForHide",I(300)),fc("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),J("anchor",e=>({type:"hotspot",hotspot:e,layouts:{onLtr:I([Wn,Ms,as,Fo,ls,vs]),onRtl:I([Wn,Ms,as,Fo,ls,vs])},bubble:Ba(0,-2,{})})),Zt("onHide"),Zt("onShow")],j8=Object.freeze({__proto__:null,init:()=>{const e=Wo(),t=Wo(),o=()=>{e.on(clearTimeout)},n=(a,l)=>{o(),e.set(setTimeout(a,l))},r=I("not-implemented");return Gc({getTooltip:t.get,isShowing:t.isSet,setTooltip:t.set,clearTooltip:t.clear,clearTimer:o,resetTimer:n,readState:r})}});const Fr=Us({fields:G8,name:"tooltipping",active:W8,state:j8,apis:U8}),q8=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),q5="silver.readonly",K8=tt([Wg("readonly")]),Yv=(e,t)=>{const n=e.mainUi.outerContainer.element,r=[e.mainUi.mothership,...e.uiMotherships];t&&ye(r,a=>{a.broadcastOn([uu()],{target:n})}),ye(r,a=>{a.broadcastOn([q5],{readonly:t})})},K5=(e,t)=>{e.on("init",()=>{e.mode.isReadOnly()&&Yv(t,!0)}),e.on("SwitchMode",()=>Yv(t,e.mode.isReadOnly())),UT(e)&&e.mode.set("readonly")},As=()=>yc.config({channels:{[q5]:{schema:K8,onReceive:(e,t)=>{rt.set(e,t.readonly)}}}}),ql={item:e=>rt.config({disabled:e,disableClass:"tox-collection__item--state-disabled"}),button:e=>rt.config({disabled:e}),splitButton:e=>rt.config({disabled:e,disableClass:"tox-tbtn--disabled"}),toolbarButton:e=>rt.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1})},Xv=(e,t)=>{const o=e.getApi(t);return n=>{n(o)}},Sm=(e,t)=>cn(o=>{Xv(e,o)(r=>{const a=e.onSetup(r);Ae(a)&&t.set(a)})}),xm=(e,t)=>Il(o=>Xv(e,o)(t.get())),Y8=(e,t)=>Ci((o,n)=>{Xv(e,o)(e.onAction),!e.triggersSubmenu&&t===Ii.CLOSE_ON_EXECUTE&&(o.getSystem().isConnected()&&Pt(o,Kg()),n.stop())}),X8={[bc()]:["disabling","alloy.base.behaviour","toggling","item-events"]},op=os,np=(e,t,o,n)=>{const r=We(X);return{type:"item",dom:t.dom,components:op(t.optComponents),data:e.data,eventOrder:X8,hasSubmenu:e.triggersSubmenu,itemBehaviours:xe([yt("item-events",[Y8(e,o),Sm(e,r),xm(e,r)]),ql.item(()=>!e.enabled||n.isDisabled()),As(),bt.config({})].concat(e.itemBehaviours))}},sp=e=>({value:e.value,meta:{text:e.text.getOr(""),...e.meta}}),b4=e=>{const t=Xh.os.isMacOS()||Xh.os.isiOS(),r=t?{alt:"",ctrl:"",shift:"",meta:"",access:""}:{meta:"Ctrl",access:"Shift+Alt"},a=e.split("+"),l=ue(a,d=>{const m=d.toLowerCase().trim();return Ft(r,m)?r[m]:d});return t?l.join(""):l.join("+")},v4=(e,t,o=[w5])=>Gl(e,{tag:"div",classes:o},t),Y5=e=>({dom:{tag:"div",classes:[n4]},components:[Ln(Za.translate(e))]}),X5=(e,t)=>({dom:{tag:"div",classes:t,innerHtml:e}}),J8=(e,t)=>({dom:{tag:"div",classes:[n4]},components:[{dom:{tag:e.tag,styles:e.styles},components:[Ln(Za.translate(t))]}]}),Q8=e=>({dom:{tag:"div",classes:[I7]},components:[Ln(b4(e))]}),J5=e=>v4("checkmark",e,[B7]),e$=e=>v4("chevron-right",e,[S5]),t$=e=>v4("chevron-down",e,[S5]),o$=(e,t)=>{const o=e.direction==="vertical"?L7:C5,n=e.align==="left"?P7:F7;return{dom:{tag:"div",classes:[x5,o,n,(()=>{switch(e.valign){case"top":return V7;case"middle":return N7;case"bottom":return z7}})()]},components:t}},n$=(e,t,o)=>({dom:{tag:"img",classes:t,attributes:{src:e,alt:o.getOr("")}}}),s$=(e,t,o)=>{const n="custom",r="remove",a=e.value,l=e.iconContent.map(f=>C7(f,t.icons,o)),d=e.ariaLabel.map(f=>({"aria-label":t.translate(f),"data-mce-name":f})).getOr({});return{dom:(()=>{const f=o4,w=l.getOr(""),x={tag:"div",attributes:d,classes:[f]};return a===n?{...x,tag:"button",classes:[...x.classes,"tox-swatches__picker-btn"],innerHtml:w}:a===r?{...x,classes:[...x.classes,"tox-swatch--remove"],innerHtml:w}:oo(a)?{...x,attributes:{...x.attributes,"data-mce-color":a},styles:{"background-color":a},innerHtml:w}:x})(),optComponents:[]}},Q5=e=>{const t=e.map(o=>({attributes:{id:Le("menu-item"),"aria-label":Za.translate(o)}})).getOr({});return{tag:"div",classes:[t4,Nv],...t}},r$=(e,t,o,n)=>{const r={tag:"div",classes:[w5]},a=O=>Gl(O,r,t.icons,n),l=()=>v.some({dom:r}),d=o?e.iconContent.map(a).orThunk(l):v.none(),m=e.checkMark,f=v.from(e.meta).fold(()=>Y5,O=>Ft(O,"style")?go(J8,O.style):Y5),w=e.htmlContent.fold(()=>e.textContent.map(f),O=>v.some(X5(O,[n4])));return{dom:Q5(e.ariaLabel),optComponents:[d,w,e.shortcutContent.map(Q8),m,e.caret]}},R1=(e,t,o,n=v.none())=>e.presets==="color"?s$(e,t,n):r$(e,t,o,n),ek=(e,t,o)=>He(e,"tooltipWorker").map(n=>[Fr.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:r=>({type:"submenu",item:r,overrides:{maxHeightFunction:om}}),mode:"follow-highlight",onShow:(r,a)=>{n(l=>{Fr.setComponents(r,[Xm({element:U.fromDom(l)})])})}})]).getOrThunk(()=>o.map(n=>[Fr.config({...t.providers.tooltips.getConfig({tooltipText:n}),mode:"follow-highlight"})]).getOr([])),c$=e=>Yh.DOM.encode(e),tk=(e,t)=>{const o=Za.translate(e),n=c$(o);if(t.length>0){const r=new RegExp(q8(t),"gi");return n.replace(r,a=>`<span class="tox-autocompleter-highlight">${a}</span>`)}else return n},a$=(e,t,o,n,r,a,l,d=!0)=>{const m=R1({presets:n,textContent:v.none(),htmlContent:o?e.text.map(w=>tk(w,t)):v.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:v.none(),checkMark:v.none(),caret:v.none(),value:e.value},l.providers,d,e.icon),f=e.text.filter(w=>!o&&w!=="");return np({data:sp(e),enabled:e.enabled,getApi:I({}),onAction:w=>r(e.value,e.meta),onSetup:I(X),triggersSubmenu:!1,itemBehaviours:ek(e,l,f)},m,a,l.providers)},ok=(e,t)=>ue(e,o=>{switch(o.type){case"cardcontainer":return o$(o,ok(o.items,t));case"cardimage":return n$(o.src,o.classes,o.alt);case"cardtext":const r=o.name.exists(a=>Xt(t.cardText.highlightOn,a))?v.from(t.cardText.matchText).getOr(""):"";return X5(tk(o.text,r),o.classes)}}),l$=(e,t,o,n)=>{const r=l=>({isEnabled:()=>!rt.isDisabled(l),setEnabled:d=>{rt.set(l,!d),ye(oc(l.element,"*"),m=>{l.getSystem().getByDom(m).each(f=>{f.hasConfigured(rt)&&rt.set(f,!d)})})}}),a={dom:Q5(e.label),optComponents:[v.some({dom:{tag:"div",classes:[x5,C5]},components:ok(e.items,n)})]};return np({data:sp({text:v.none(),...e}),enabled:e.enabled,getApi:r,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:v.from(n.itemBehaviours).getOr([])},a,t,o.providers)},i$=(e,t,o,n,r,a,l,d=!0)=>{const m=x=>({setActive:O=>{_t.set(x,O)},isActive:()=>_t.isOn(x),isEnabled:()=>!rt.isDisabled(x),setEnabled:O=>rt.set(x,!O)}),f=R1({presets:o,textContent:t?e.text:v.none(),htmlContent:v.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:v.none(),checkMark:t?v.some(J5(l.icons)):v.none(),caret:v.none(),value:e.value},l,d),w=e.text.filter(I(!t)).map(x=>Fr.config(l.tooltips.getConfig({tooltipText:l.translate(x)})));return Oo(np({data:sp(e),enabled:e.enabled,getApi:m,onAction:x=>n(e.value),onSetup:x=>(x.setActive(r),X),triggersSubmenu:!1,itemBehaviours:[...w.toArray()]},f,a,l),{toggling:{toggleClass:y5,toggleOnExecute:!1,selected:e.active,exclusive:!0}})},nk=e1(Ex(),Ax()),sk=e=>({value:lk(e)}),rk=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,ck=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ak=e=>rk.test(e)||ck.test(e),lk=e=>kc(e,"#").toUpperCase(),u$=e=>ak(e)?v.some({value:lk(e)}):v.none(),d$=e=>({value:e.value.replace(rk,(o,n,r,a)=>n+n+r+r+a+a)}),m$=e=>{const t=d$(e),o=ck.exec(t.value);return o===null?["FFFFFF","FF","FF","FF"]:o},y4=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},H1=e=>{const t=y4(e.red)+y4(e.green)+y4(e.blue);return sk(t)},ik=Math.min,uk=Math.max,Jv=Math.round,g$=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,h$=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Cm=(e,t,o,n)=>({red:e,green:t,blue:o,alpha:n}),w4=e=>{const t=parseInt(e,10);return t.toString()===e&&t>=0&&t<=255},dk=e=>{let t,o,n;const r=(e.hue||0)%360;let a=e.saturation/100,l=e.value/100;if(a=uk(0,ik(a,1)),l=uk(0,ik(l,1)),a===0)return t=o=n=Jv(255*l),Cm(t,o,n,1);const d=r/60,m=l*a,f=m*(1-Math.abs(d%2-1)),w=l-m;switch(Math.floor(d)){case 0:t=m,o=f,n=0;break;case 1:t=f,o=m,n=0;break;case 2:t=0,o=m,n=f;break;case 3:t=0,o=f,n=m;break;case 4:t=f,o=0,n=m;break;case 5:t=m,o=0,n=f;break;default:t=o=n=0}return t=Jv(255*(t+w)),o=Jv(255*(o+w)),n=Jv(255*(n+w)),Cm(t,o,n,1)},I1=e=>{const t=m$(e),o=parseInt(t[1],16),n=parseInt(t[2],16),r=parseInt(t[3],16);return Cm(o,n,r,1)},mk=(e,t,o,n)=>{const r=parseInt(e,10),a=parseInt(t,10),l=parseInt(o,10),d=parseFloat(n);return Cm(r,a,l,d)},S4=e=>{if(e==="transparent")return v.some(Cm(0,0,0,0));const t=g$.exec(e);if(t!==null)return v.some(mk(t[1],t[2],t[3],"1"));const o=h$.exec(e);return o!==null?v.some(mk(o[1],o[2],o[3],o[4])):v.none()},gk=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,hk=Cm(255,0,0,1),p$=e=>{e.dispatch("SkinLoaded")},f$=(e,t)=>{e.dispatch("SkinLoadError",t)},b$=e=>{e.dispatch("ResizeEditor")},x4=(e,t)=>{e.dispatch("ResizeContent",t)},v$=(e,t)=>{e.dispatch("ScrollContent",t)},pk=(e,t)=>{e.dispatch("TextColorChange",t)},y$=(e,t)=>{e.dispatch("AfterProgressState",{state:t})},w$=(e,t)=>e.dispatch("ResolveName",{name:t.nodeName.toLowerCase(),target:t}),S$=(e,t)=>{e.dispatch("ToggleToolbarDrawer",{state:t})},x$=(e,t)=>{e.dispatch("StylesTextUpdate",t)},C$=(e,t)=>{e.dispatch("AlignTextUpdate",t)},T$=(e,t)=>{e.dispatch("FontSizeTextUpdate",t)},k$=(e,t)=>{e.dispatch("FontSizeInputTextUpdate",t)},O$=(e,t)=>{e.dispatch("BlocksTextUpdate",t)},_$=(e,t)=>{e.dispatch("FontFamilyTextUpdate",t)},Qv=(e,t)=>()=>{e(),t()},wc=e=>xg(e,"NodeChange",t=>{t.setEnabled(e.selection.isEditable())}),M$=(e,t)=>o=>{const n=tm(),r=()=>{o.setActive(e.formatter.match(t));const a=e.formatter.formatChanged(t,o.setActive);n.set(a)};return e.initialized?r():e.once("init",r),()=>{e.off("init",r),n.clear()}},e2=(e,t)=>o=>{const n=wc(e)(o),r=M$(e,t)(o);return()=>{n(),r()}},xg=(e,t,o)=>n=>{const r=()=>o(n),a=()=>{o(n),e.on(t,r)};return e.initialized?a():e.once("init",a),()=>{e.off("init",a),e.off(t,r)}},fk=e=>t=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("mceToggleFormat",!1,t.format)})},fa=(e,t)=>()=>e.execCommand(t);var Cg=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const bk={},E$=(e,t=10)=>{const o=Cg.getItem(e),n=Xe(o)?JSON.parse(o):[],a=(f=>t-f.length<0?f.slice(0,t):f)(n),l=f=>{pt(a,f).each(d),a.unshift(f),a.length>t&&a.pop(),Cg.setItem(e,JSON.stringify(a))},d=f=>{a.splice(f,1)};return{add:l,state:()=>a.slice(0)}},vk=e=>He(bk,e).getOrThunk(()=>{const t=`tinymce-custom-colors-${e}`,o=Cg.getItem(t);if(us(o)){const r=Cg.getItem("tinymce-custom-colors");Cg.setItem(t,oo(r)?r:"[]")}const n=E$(t,10);return bk[e]=n,n}),A$=e=>ue(vk(e).state(),t=>({type:"choiceitem",text:t,icon:"checkmark",value:t})),yk=(e,t)=>{vk(e).add(t)},B1=(e,t,o)=>({hue:e,saturation:t,value:o}),C4=e=>{let t=0,o=0,n=0;const r=e.red/255,a=e.green/255,l=e.blue/255,d=Math.min(r,Math.min(a,l)),m=Math.max(r,Math.max(a,l));if(d===m)return n=d,B1(0,0,n*100);const f=r===d?a-l:l===d?r-a:l-r;return t=r===d?3:l===d?1:5,t=60*(t-f/(m-d)),o=(m-d)/m,n=m,B1(Math.round(t),Math.round(o*100),Math.round(n*100))},D$=e=>C4(I1(e)),wk=e=>H1(dk(e)),$$=e=>u$(e).orThunk(()=>S4(e).map(H1)).getOrThunk(()=>{const t=document.createElement("canvas");t.height=1,t.width=1;const o=t.getContext("2d");o.clearRect(0,0,t.width,t.height),o.fillStyle="#FFFFFF",o.fillStyle=e,o.fillRect(0,0,1,1);const n=o.getImageData(0,0,1,1).data,r=n[0],a=n[1],l=n[2],d=n[3];return H1(Cm(r,a,l,d))}),T4="forecolor",k4="hilitecolor",R$=5,H$=e=>{const t=[];for(let o=0;o<e.length;o+=2)t.push({text:e[o+1],value:"#"+$$(e[o]).value,icon:"checkmark",type:"choiceitem"});return t},hu=e=>t=>t.options.get(e),O4="#000000",I$=e=>{const t=e.options.register,o=r=>st(r,Xe)?{value:H$(r),valid:!0}:{valid:!1,message:"Must be an array of strings."},n=r=>So(r)&&r>0?{value:r,valid:!0}:{valid:!1,message:"Must be a positive number."};t("color_map",{processor:o,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),t("color_map_background",{processor:o}),t("color_map_foreground",{processor:o}),t("color_cols",{processor:n,default:_4(e)}),t("color_cols_foreground",{processor:n,default:Sk(e,T4)}),t("color_cols_background",{processor:n,default:Sk(e,k4)}),t("custom_colors",{processor:"boolean",default:!0}),t("color_default_foreground",{processor:"string",default:O4}),t("color_default_background",{processor:"string",default:O4})},t2=(e,t)=>t===T4&&e.options.isSet("color_map_foreground")?hu("color_map_foreground")(e):t===k4&&e.options.isSet("color_map_background")?hu("color_map_background")(e):hu("color_map")(e),_4=(e,t="default")=>Math.max(R$,Math.ceil(Math.sqrt(t2(e,t).length))),Sk=(e,t)=>{const o=hu("color_cols")(e),n=_4(e,t);return o===_4(e)?n:o},xk=(e,t="default")=>Math.round(t===T4?hu("color_cols_foreground")(e):t===k4?hu("color_cols_background")(e):hu("color_cols")(e)),Ck=hu("custom_colors"),B$=hu("color_default_foreground"),L$=hu("color_default_background"),F$="rgba(0, 0, 0, 0)",P$=e=>S4(e).exists(t=>t.alpha!==0),V$=e=>nr(e,t=>{if(Co(t)){const o=No(t,"background-color");return Cs(P$(o),o)}else return v.none()}).getOr(F$),Tk=(e,t)=>{const o=U.fromDom(e.selection.getStart()),n=t==="hilitecolor"?V$(o):No(o,"color");return S4(n).map(r=>"#"+H1(r).value)},N$=(e,t,o)=>{e.undoManager.transact(()=>{e.focus(),e.formatter.apply(t,{value:o}),e.nodeChanged()})},z$=(e,t)=>{e.undoManager.transact(()=>{e.focus(),e.formatter.remove(t,{value:null},void 0,!0),e.nodeChanged()})},Z$=e=>{e.addCommand("mceApplyTextcolor",(t,o)=>{N$(e,t,o)}),e.addCommand("mceRemoveTextcolor",t=>{z$(e,t)})},kk=e=>{const t="choiceitem",o={type:t,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[o,{type:t,text:"Custom color",icon:"color-picker",value:"custom"}]:[o]},M4=(e,t,o,n)=>{o==="custom"?Dk(e)(a=>{a.each(l=>{yk(t,l),e.execCommand("mceApplyTextcolor",t,l),n(l)})},Tk(e,t).getOr(O4)):o==="remove"?(n(""),e.execCommand("mceRemoveTextcolor",t)):(n(o),e.execCommand("mceApplyTextcolor",t,o))},E4=(e,t,o)=>e.concat(A$(t).concat(kk(o))),Ok=(e,t,o)=>n=>{n(E4(e,t,o))},A4=(e,t,o)=>{const n=t==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";e.setIconFill(n,o)},_k=(e,t)=>{e.setTooltip(t)},Mk=(e,t)=>o=>{const n=Tk(e,t);return xs(n,o.toUpperCase())},D4=(e,t,o)=>{if(F(o))return t==="forecolor"?"Text color":"Background color";const n=t==="forecolor"?"Text color {0}":"Background color {0}",r=E4(t2(e,t),t,!1),a=Qt(r,l=>l.value===o).getOr({text:""}).text;return e.translate([n,e.translate(a)])},Ek=(e,t,o,n)=>{e.ui.registry.addSplitButton(t,{tooltip:D4(e,o,n.get()),presets:"color",icon:t==="forecolor"?"text-color":"highlight-bg-color",select:Mk(e,o),columns:xk(e,o),fetch:Ok(t2(e,o),o,Ck(e)),onAction:r=>{M4(e,o,n.get(),X)},onItemAction:(r,a)=>{M4(e,o,a,l=>{n.set(l),pk(e,{name:t,color:l})})},onSetup:r=>{A4(r,t,n.get());const a=l=>{l.name===t&&(A4(r,l.name,l.color),_k(r,D4(e,o,l.color)))};return e.on("TextColorChange",a),Qv(wc(e)(r),()=>{e.off("TextColorChange",a)})}})},Ak=(e,t,o,n,r)=>{e.ui.registry.addNestedMenuItem(t,{text:n,icon:t==="forecolor"?"text-color":"highlight-bg-color",onSetup:a=>(_k(a,D4(e,o,r.get())),A4(a,t,r.get()),wc(e)(a)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:Mk(e,o),initData:{storageKey:o},onAction:a=>{M4(e,o,a.value,l=>{r.set(l),pk(e,{name:t,color:l})})}}]})},Dk=e=>(t,o)=>{let n=!1;const r=d=>{const f=d.getData().colorpicker;n?(t(v.from(f)),d.close()):e.windowManager.alert(e.translate(["Invalid hex color code: {0}",f]))},a=(d,m)=>{m.name==="hex-valid"&&(n=m.value)},l={colorpicker:o};e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:l,onAction:a,onSubmit:r,onClose:X,onCancel:()=>{t(v.none())}})},U$=e=>{Z$(e);const t=B$(e),o=L$(e),n=We(t),r=We(o);Ek(e,"forecolor","forecolor",n),Ek(e,"backcolor","hilitecolor",r),Ak(e,"forecolor","forecolor","Text color",n),Ak(e,"backcolor","hilitecolor","Background color",r)},$4=(e,t,o,n,r,a,l,d)=>{const m=Wv(t),w=W$(t,o,n,r!=="color"?"normal":"color",a,l,d);return a4(e,m,w,n,{menuType:r})},W$=(e,t,o,n,r,a,l)=>os(ue(e,d=>d.type==="choiceitem"?R8(d).fold(id,m=>v.some(i$(m,o===1,n,t,a(m.value),r,l,Wv(e)))):v.none())),o2=(e,t)=>{const o=vg(t);return e===1?{mode:"menu",moveOnTab:!0}:e==="auto"?{mode:"grid",selector:"."+o.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(t==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:r=>t==="color"?Yo(r.element,"[aria-checked=true]"):v.none()}},G$=(e,t)=>e===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:e==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:t==="color"?".tox-swatches__row":".tox-collection__group",cell:t==="color"?`.${o4}`:`.${Nv}`}},j$=(e,t)=>{const o=q$(e,t),n=t.colorinput.getColorCols(e.initData.storageKey),r="color",l={...$4(Le("menu-value"),o,d=>{e.onAction({value:d})},n,r,Ii.CLOSE_ON_EXECUTE,e.select.getOr(Ht),t.shared.providers),markers:vg(r),movement:o2(n,r)};return{type:"widget",data:{value:Le("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[nk.widget(pg.sketch(l))]}},q$=(e,t)=>{const o=e.initData.allowCustomColors&&t.colorinput.hasCustomColors();return e.initData.colors.fold(()=>E4(t.colorinput.getColors(e.initData.storageKey),e.initData.storageKey,o),n=>n.concat(kk(o)))},$k=Le("cell-over"),Rk=Le("cell-execute"),K$=e=>(t,o)=>e.shared.providers.translate(["{0} columns, {1} rows",o,t]),Y$=(e,t,o)=>{const n=l=>je(l,$k,{row:e,col:t}),r=l=>je(l,Rk,{row:e,col:t}),a=(l,d)=>{d.stop(),r(l)};return Zs({dom:{tag:"div",attributes:{role:"button","aria-label":o}},behaviours:xe([yt("insert-table-picker-cell",[le(Aa(),ut.focus),le(bc(),r),le(nu(),a),le(Al(),a)]),_t.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),ut.config({onFocus:n})])})},X$=(e,t,o)=>{const n=[];for(let r=0;r<t;r++){const a=[];for(let l=0;l<o;l++){const d=e(r+1,l+1);a.push(Y$(r,l,d))}n.push(a)}return n},J$=(e,t,o,n,r)=>{for(let a=0;a<n;a++)for(let l=0;l<r;l++)_t.set(e[a][l],a<=t&&l<=o)},Q$=e=>uo(e,t=>ue(t,ua)),Hk=(e,t)=>Ln(`${t}x${e}`),eR={inserttable:(e,t)=>{const r=K$(t),a=X$(r,10,10),l=Hk(0,0),d=po({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[l],behaviours:xe([bt.config({})])});return{type:"widget",data:{value:Le("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[nk.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:Q$(a).concat(d.asSpec()),behaviours:xe([yt("insert-table-picker",[cn(m=>{bt.set(d.get(m),[l])}),Lp($k,(m,f,w)=>{const{row:x,col:O}=w.event;J$(a,x,O,10,10),bt.set(d.get(m),[Hk(x+1,O+1)])}),Lp(Rk,(m,f,w)=>{const{row:x,col:O}=w.event;e.onAction({numRows:x+1,numColumns:O+1}),Pt(m,Kg())})]),Ke.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:j$},tR=(e,t)=>He(eR,e.fancytype).map(o=>o(e,t)),oR=(e,t,o,n=!0,r=!1)=>{const a=r?t$(o.icons):e$(o.icons),l=m=>({isEnabled:()=>!rt.isDisabled(m),setEnabled:f=>rt.set(m,!f),setIconFill:(f,w)=>{Yo(m.element,`svg path[class="${f}"], rect[class="${f}"]`).each(x=>{at(x,"fill",w)})},setTooltip:f=>{const w=o.translate(f);at(m.element,"aria-label",w)}}),d=R1({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:v.none(),ariaLabel:e.text,caret:v.some(a),checkMark:v.none(),shortcutContent:e.shortcut},o,n);return np({data:sp(e),getApi:l,enabled:e.enabled,onAction:X,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},d,t,o)},nR=(e,t,o,n=!0)=>{const r=l=>({isEnabled:()=>!rt.isDisabled(l),setEnabled:d=>rt.set(l,!d)}),a=R1({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:v.none(),ariaLabel:e.text,caret:v.none(),checkMark:v.none(),shortcutContent:e.shortcut},o,n);return np({data:sp(e),getApi:r,enabled:e.enabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},a,t,o)},sR=e=>({type:"separator",dom:{tag:"div",classes:[Nv,H7]},components:e.text.map(Ln).toArray()}),rR=(e,t,o,n=!0)=>{const r=l=>({setActive:d=>{_t.set(l,d)},isActive:()=>_t.isOn(l),isEnabled:()=>!rt.isDisabled(l),setEnabled:d=>rt.set(l,!d)}),a=R1({iconContent:e.icon,textContent:e.text,htmlContent:v.none(),ariaLabel:e.text,checkMark:v.some(J5(o.icons)),caret:v.none(),shortcutContent:e.shortcut,presets:"normal",meta:e.meta},o,n);return Oo(np({data:sp(e),enabled:e.enabled,getApi:r,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},a,t,o),{toggling:{toggleClass:y5,toggleOnExecute:!1,selected:e.active}})},cR=a$,Ik=sR,aR=nR,lR=oR,iR=rR,uR=tR,dR=l$;var mR=Object.freeze({__proto__:null,getCoupled:(e,t,o,n)=>o.getOrCreate(e,t,n),getExistingCoupled:(e,t,o,n)=>o.getExisting(e,t,n)}),gR=[gc("others",zm(St.value,ra()))],hR=Object.freeze({__proto__:null,init:()=>{const e={},t=(a,l)=>{if(Ro(a.others).length===0)throw new Error("Cannot find any known coupled components");return He(e,l)},o=(a,l,d)=>t(l,d).getOrThunk(()=>{const f=He(l.others,d).getOrDie("No information found for coupled component: "+d)(a),w=a.getSystem().build(f);return e[d]=w,w}),n=(a,l,d)=>t(l,d).orThunk(()=>(He(l.others,d).getOrDie("No information found for coupled component: "+d),v.none())),r=I({});return Gc({readState:r,getExisting:n,getOrCreate:o})}});const Fn=Us({fields:gR,name:"coupling",apis:mR,state:hR}),R4=e=>{let t=v.none(),o=[];const n=f=>R4(w=>{r(x=>{w(f(x))})}),r=f=>{l()?m(f):o.push(f)},a=f=>{l()||(t=v.some(f),d(o),o=[])},l=()=>t.isSome(),d=f=>{ye(f,m)},m=f=>{t.each(w=>{setTimeout(()=>{f(w)},0)})};return e(a),{get:r,map:n,isReady:l}},pR={nu:R4,pure:e=>R4(t=>{t(e)})},fR=e=>{setTimeout(()=>{throw e},0)},rp=e=>{const t=m=>{e().then(m,fR)};return{map:m=>rp(()=>e().then(m)),bind:m=>rp(()=>e().then(f=>m(f).toPromise())),anonBind:m=>rp(()=>e().then(()=>m.toPromise())),toLazy:()=>pR.nu(t),toCached:()=>{let m=null;return rp(()=>(m===null&&(m=e()),m))},toPromise:e,get:t}},Pr={nu:e=>rp(()=>new Promise(e)),pure:e=>rp(()=>Promise.resolve(e))},Bk=I("sink"),Lk=I(ma({name:Bk(),overrides:I({dom:{tag:"div"},behaviours:xe([yr.config({useFixed:io})]),events:Lo([Hl(tc()),Hl(Ot()),Hl(nu())])})})),Fk=(e,t)=>{const o=e.getHotspot(t).getOr(t),n="hotspot",r=e.getAnchorOverrides();return e.layouts.fold(()=>({type:n,hotspot:o,overrides:r}),a=>({type:n,hotspot:o,overrides:r,layouts:a}))},bR=(e,t,o)=>{const n=e.fetch;return n(o).map(t)},vR=(e,t,o,n,r,a,l)=>{const d=bR(e,t,n),m=Pk(n,e);return d.map(f=>f.bind(w=>v.from(fg.sketch({...a.menu(),uid:Gd(""),data:w,highlightOnOpen:l,onOpenMenu:(x,O)=>{const M=m().getOrDie();yr.position(M,O,{anchor:o}),Vt.decloak(r)},onOpenSubmenu:(x,O,M)=>{const A=m().getOrDie();yr.position(A,M,{anchor:{type:"submenu",item:O}}),Vt.decloak(r)},onRepositionMenu:(x,O,M)=>{const A=m().getOrDie();yr.position(A,O,{anchor:o}),ye(M,L=>{yr.position(A,L.triggeredMenu,{anchor:{type:"submenu",item:L.triggeringItem}})})},onEscape:()=>(ut.focus(n),Vt.close(r),v.some(!0))}))))},n2=(e,t,o,n,r,a,l)=>{const d=Fk(e,o);return vR(e,t,d,o,n,r,l).map(f=>(f.fold(()=>{Vt.isOpen(n)&&Vt.close(n)},w=>{Vt.cloak(n),Vt.open(n,w),a(n)}),n))},yR=(e,t,o,n,r,a,l)=>(Vt.close(n),Pr.pure(n)),H4=(e,t,o,n,r,a)=>{const l=Fn.getCoupled(o,"sandbox");return(Vt.isOpen(l)?yR:n2)(e,t,o,l,n,r,a)},wR=(e,t,o)=>{const n=It.getCurrent(t).getOr(t),r=Ar(e.element);o?Ie(n.element,"min-width",r+"px"):Ni(n.element,r)},Pk=(e,t)=>e.getSystem().getByUid(t.uid+"-"+Bk()).map(o=>()=>St.value(o)).getOrThunk(()=>t.lazySink.fold(()=>()=>St.error(new Error("No internal sink is specified, nor could an external sink be found")),o=>()=>o(e))),Vk=e=>{Vt.getState(e).each(t=>{fg.repositionMenus(t)})},I4=(e,t,o)=>{const n=Db(),r=(d,m)=>{const f=Fk(e,t);n.link(t.element),e.matchWidth&&wR(f.hotspot,m,e.useMinWidth),e.onOpen(f,d,m),o!==void 0&&o.onOpen!==void 0&&o.onOpen(d,m)},a=(d,m)=>{n.unlink(t.element),l().getOr(m).element.dom.dispatchEvent(new window.FocusEvent("focusout")),o!==void 0&&o.onClose!==void 0&&o.onClose(d,m)},l=Pk(t,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:n.id,role:"listbox"}},behaviours:Fa.augment(e.sandboxBehaviours,[Ee.config({store:{mode:"memory",initialValue:t}}),Vt.config({onOpen:r,onClose:a,isPartOf:(d,m,f)=>Xu(m,f)||Xu(t,f),getAttachPoint:()=>l().getOrDie()}),It.config({find:d=>Vt.getState(d).bind(m=>It.getCurrent(m))}),yc.config({channels:{...$h({isExtraPart:Ht}),...zf({doReposition:Vk})}})])}},Nk=e=>{const t=Fn.getCoupled(e,"sandbox");Vk(t)},B4=()=>[J("sandboxClasses",[]),Fa.field("sandboxBehaviours",[It,yc,Vt,Ee])],SR=I([me("dom"),me("fetch"),Zt("onOpen"),Ic("onExecute"),J("getHotspot",v.some),J("getAnchorOverrides",I({})),La(),Es("dropdownBehaviours",[_t,Fn,Ke,ut]),me("toggleClass"),J("eventOrder",{}),no("lazySink"),J("matchWidth",!1),J("useMinWidth",!1),no("role")].concat(B4())),xR=I([Pa({schema:[cf(),J("fakeFocus",!1)],name:"menu",defaults:e=>({onExecute:e.onExecute})}),Lk()]),CR=(e,t,o,n)=>{const r=w=>He(e.dom,"attributes").bind(x=>He(x,w)),a=w=>{Vt.getState(w).each(x=>{fg.highlightPrimary(x)})},l=(w,x,O)=>H4(e,xt,w,n,x,O),d=w=>{l(w,a,Lc.HighlightMenuAndItem).get(X)},m={expand:w=>{_t.isOn(w)||l(w,X,Lc.HighlightNone).get(X)},open:w=>{_t.isOn(w)||l(w,X,Lc.HighlightMenuAndItem).get(X)},refetch:w=>Fn.getExistingCoupled(w,"sandbox").fold(()=>l(w,X,Lc.HighlightMenuAndItem).map(X),O=>n2(e,xt,w,O,n,X,Lc.HighlightMenuAndItem).map(X)),isOpen:_t.isOn,close:w=>{_t.isOn(w)&&l(w,X,Lc.HighlightMenuAndItem).get(X)},repositionMenus:w=>{_t.isOn(w)&&Nk(w)}},f=(w,x)=>(Si(w),v.some(!0));return{uid:e.uid,dom:e.dom,components:t,behaviours:Ws(e.dropdownBehaviours,[_t.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),Fn.config({others:{sandbox:w=>I4(e,w,{onOpen:()=>_t.on(w),onClose:()=>_t.off(w)})}}),Ke.config({mode:"special",onSpace:f,onEnter:f,onDown:(w,x)=>{if(pl.isOpen(w)){const O=Fn.getCoupled(w,"sandbox");a(O)}else pl.open(w);return v.some(!0)},onEscape:(w,x)=>pl.isOpen(w)?(pl.close(w),v.some(!0)):v.none()}),ut.config({})]),events:Av(v.some(d)),eventOrder:{...e.eventOrder,[bc()]:["disabling","toggling","alloy.base.behaviour"]},apis:m,domModification:{attributes:{"aria-haspopup":"true",...e.role.fold(()=>({}),w=>({role:w})),...e.dom.tag==="button"?{type:r("type").getOr("button")}:{}}}}},pl=Lr({name:"Dropdown",configFields:SR(),partFields:xR(),factory:CR,apis:{open:(e,t)=>e.open(t),refetch:(e,t)=>e.refetch(t),expand:(e,t)=>e.expand(t),close:(e,t)=>e.close(t),isOpen:(e,t)=>e.isOpen(t),repositionMenus:(e,t)=>e.repositionMenus(t)}}),TR=e=>{switch(e.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:e}}},kR=e=>{const t=Ee.getValue(e),o=Zv(e).map($5);pl.refetch(t).get(()=>{const n=Fn.getCoupled(t,"sandbox");o.each(r=>Zv(n).each(a=>q7(a,r)))})},OR=(e,t)=>{_R(e).each(o=>{ly(e,o.element,t.event.eventType,t.event.interactionEvent)})},_R=e=>Vt.getState(e).bind(to.getHighlighted).bind(to.getHighlighted),MR=e=>vc(e.element,Uv)?v.some(e.element):Yo(e.element,"."+Uv),zk=(e,t,o)=>{D5(e).each(n=>{K7(n,o),MR(t).each(a=>{C(a,"id").each(l=>at(n.element,"aria-controls",l))})}),at(o.element,"aria-selected","true")},ER=(e,t,o)=>{at(o.element,"aria-selected","false")},AR=e=>{D5(e).each(t=>ut.focus(t))},DR=e=>Fn.getExistingCoupled(e,"sandbox").bind(Zv).map($5).map(o=>o.fetchPattern).getOr("");var s2;(function(e){e[e.ContentFocus=0]="ContentFocus",e[e.UiFocus=1]="UiFocus"})(s2||(s2={}));const $R=(e,t,o,n,r)=>{const a=o.shared.providers,l=d=>r?{...d,shortcut:v.none(),icon:d.text.isSome()?v.none():d.icon}:d;switch(e.type){case"menuitem":return P8(e).fold(id,d=>v.some(aR(l(d),t,a,n)));case"nestedmenuitem":return N8(e).fold(id,d=>v.some(lR(l(d),t,a,n,r)));case"togglemenuitem":return Z8(e).fold(id,d=>v.some(iR(l(d),t,a,n)));case"separator":return u8(e).fold(id,d=>v.some(Ik(d)));case"fancymenuitem":return L8(e).fold(id,d=>uR(d,o));default:return console.error("Unknown item in general menu",e),v.none()}},RR=(e,t,o,n,r,a,l)=>{const d=n===1,m=!d||Wv(e);return os(ue(e,f=>{switch(f.type){case"separator":return m8(f).fold(id,w=>v.some(Ik(w)));case"cardmenuitem":return D8(f).fold(id,w=>v.some(dR({...w,onAction:x=>{w.onAction(x),o(w.value,w.meta)}},r,a,{itemBehaviours:ek(w.meta,a,v.none()),cardText:{matchText:t,highlightOn:l}})));case"autocompleteitem":default:return g8(f).fold(id,w=>v.some(cR(w,t,d,"normal",o,r,a,m)))}}))},Zk=(e,t,o,n,r,a)=>{const l=Wv(t),d=os(ue(t,w=>{const x=M=>r?!Ft(M,"text"):l,O=M=>$R(M,o,n,x(M),r);return w.type==="nestedmenuitem"&&w.getSubmenuItems().length<=0?O({...w,enabled:!1}):O(w)})),m=TR(a);return(r?o8:a4)(e,l,d,1,m)},L4=e=>fg.singleData(e.value,e),HR=(e,t,o,n)=>{const r=o2(t,n),a=vg(n);return{data:L4({...e,movement:r,menuBehaviours:A1.unnamedEvents(t!=="auto"?[]:[cn((l,d)=>{f4(l,4,a.item).each(({numColumns:m,numRows:f})=>{Ke.setGridSize(l,f,m)})})])}),menu:{markers:vg(n),fakeFocus:o===s2.ContentFocus}}},IR=e=>sm.create(U.fromDom(e.startContainer),e.startOffset,U.fromDom(e.endContainer),e.endOffset),BR={register:(e,t)=>{const o=Le("autocompleter"),n=We(!1),r=We(!1),a=Wo(),l=Zs(_n.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:o}},components:[],fireDismissalEventInstead:{},inlineBehaviours:xe([yt("dismissAutocompleter",[le($l(),()=>x()),le(Dp(),(W,Y)=>{C(Y.event.target,"id").each(j=>at(U.fromDom(e.getBody()),"aria-activedescendant",j))})])]),lazySink:t.getSink})),d=()=>_n.isOpen(l),m=r.get,f=()=>{if(d()){_n.hide(l),e.dom.remove(o,!1);const W=U.fromDom(e.getBody());C(W,"aria-owns").filter(Y=>Y===o).each(()=>{B(W,"aria-owns"),B(W,"aria-activedescendant")})}},w=()=>_n.getContent(l).bind(W=>Ss(W.components(),0)),x=()=>e.execCommand("mceAutocompleterClose"),O=W=>{const Y=Vn(W,j=>v.from(j.columns)).getOr(1);return uo(W,j=>{const de=j.items;return RR(de,j.matchText,(ie,he)=>{const ke={hide:()=>x(),reload:ae=>{f(),e.execCommand("mceAutocompleterReload",!1,{fetchOptions:ae})}};e.execCommand("mceAutocompleterRefreshActiveRange"),a.get().each(ae=>{n.set(!0),j.onAction(ke,ae,ie,he),n.set(!1)})},Y,Ii.BUBBLE_TO_SANDBOX,t,j.highlightOn)})},M=(W,Y)=>{const j=Vn(W,de=>v.from(de.columns)).getOr(1);_n.showMenuAt(l,{anchor:{type:"selection",getSelection:()=>a.get().map(IR),root:U.fromDom(e.getBody())}},HR(a4("autocompleter-value",!0,Y,j,{menuType:"normal"}),j,s2.ContentFocus,"normal")),w().each(to.highlightFirst)},A=W=>{const Y=O(W);Y.length>0?(M(W,Y),at(U.fromDom(e.getBody()),"aria-owns",o),e.inline||L()):f()},L=()=>{e.dom.get(o)&&e.dom.remove(o,!1);const W=e.getDoc().documentElement,Y=e.selection.getNode(),j=Jg(l.element);Ao(j,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${Y.offsetTop}px`,left:`${Y.offsetLeft}px`}),e.dom.add(W,j.dom),Yo(j,'[role="menu"]').each(de=>{jt(de,"position"),jt(de,"max-height")})};e.on("AutocompleterStart",({lookupData:W})=>{r.set(!0),n.set(!1),A(W)}),e.on("AutocompleterUpdate",({lookupData:W})=>A(W)),e.on("AutocompleterUpdateActiveRange",({range:W})=>a.set(W)),e.on("AutocompleterEnd",()=>{f(),r.set(!1),n.set(!1),a.clear()});const ee={cancelIfNecessary:x,isMenuOpen:d,isActive:m,isProcessingAction:n.get,getMenu:w};$7.setup(ee,e)}},LR=["visible","hidden","clip"],Uk=e=>$n(e).length>0&&!Xt(LR,e),Wk=e=>{if(dc(e)){const t=No(e,"overflow-x"),o=No(e,"overflow-y");return Uk(t)||Uk(o)}else return!1},FR=e=>{const t=k0(e,Wk),o=t.length===0?ro(e).map(vn).map(n=>k0(n,Wk)).getOr([]):t;return bn(o).map(n=>({element:n,others:o.slice(1)}))},Tg=(e,t)=>ym(e)?FR(t):v.none(),cp=e=>{const t=[...ue(e.others,Jn),ps()];return $d(Jn(e.element),t)},L1=(e,t,o)=>Fl(e,t,o).isSome(),Gk=(e,t)=>{let o=null;return{cancel:()=>{o!==null&&(clearTimeout(o),o=null)},schedule:(...a)=>{o=setTimeout(()=>{e.apply(null,a),o=null},t)}}},jk=5,PR=400,qk=e=>{const t=e.raw;return t.touches===void 0||t.touches.length!==1?v.none():v.some(t.touches[0])},VR=(e,t)=>{const o=Math.abs(e.clientX-t.x),n=Math.abs(e.clientY-t.y);return o>jk||n>jk},NR=e=>{const t=Wo(),o=We(!1),n=Gk(f=>{e.triggerEvent(Gm(),f),o.set(!0)},PR),r=f=>(qk(f).each(w=>{n.cancel();const x={x:w.clientX,y:w.clientY,target:f.target};n.schedule(f),o.set(!1),t.set(x)}),v.none()),a=f=>(n.cancel(),qk(f).each(w=>{t.on(x=>{VR(w,x)&&t.clear()})}),v.none()),l=f=>{n.cancel();const w=x=>eo(x.target,f.target);return t.get().filter(w).map(x=>o.get()?(f.prevent(),!1):e.triggerEvent(Al(),f))},d=De([{key:Uc(),value:r},{key:El(),value:a},{key:ll(),value:l}]);return{fireIfReady:(f,w)=>He(d,w).bind(x=>x(f))}},zR=e=>e.raw.which===f1[0]&&!Xt(["input","textarea"],ms(e.target))&&!L1(e.target,'[contenteditable="true"]'),ZR=(e,t)=>{const o={stopBackspace:!0,...t},n=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],r=NR(o),a=ue(n.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),M=>cr(e,M,A=>{r.fireIfReady(A,M).each(ee=>{ee&&A.kill()}),o.triggerEvent(M,A)&&A.kill()})),l=Wo(),d=cr(e,"paste",M=>{r.fireIfReady(M,"paste").each(L=>{L&&M.kill()}),o.triggerEvent("paste",M)&&M.kill(),l.set(setTimeout(()=>{o.triggerEvent(qg(),M)},0))}),m=cr(e,"keydown",M=>{o.triggerEvent("keydown",M)?M.kill():o.stopBackspace&&zR(M)&&M.prevent()}),f=cr(e,"focusin",M=>{o.triggerEvent("focusin",M)&&M.kill()}),w=Wo(),x=cr(e,"focusout",M=>{o.triggerEvent("focusout",M)&&M.kill(),w.set(setTimeout(()=>{o.triggerEvent(Uu(),M)},0))});return{unbind:()=>{ye(a,M=>{M.unbind()}),m.unbind(),f.unbind(),x.unbind(),d.unbind(),l.on(clearTimeout),w.on(clearTimeout)}}},Kk=(e,t)=>{const o=He(e,"target").getOr(t);return We(o)},UR=(e,t)=>{const o=We(!1),n=We(!1);return{stop:()=>{o.set(!0)},cut:()=>{n.set(!0)},isStopped:o.get,isCut:n.get,event:e,setSource:t.set,getSource:t.get}},WR=e=>{const t=We(!1);return{stop:()=>{t.set(!0)},cut:X,isStopped:t.get,isCut:Ht,event:e,setSource:q("Cannot set source of a broadcasted event"),getSource:q("Cannot get source of a broadcasted event")}},F1=g.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),Yk=(e,t,o,n,r,a)=>{const l=e(t,n),d=UR(o,r);return l.fold(()=>(a.logEventNoHandlers(t,n),F1.complete()),m=>{const f=m.descHandler;return Kd(f)(d),d.isStopped()?(a.logEventStopped(t,m.element,f.purpose),F1.stopped()):d.isCut()?(a.logEventCut(t,m.element,f.purpose),F1.complete()):ss(m.element).fold(()=>(a.logNoParent(t,m.element,f.purpose),F1.complete()),x=>(a.logEventResponse(t,m.element,f.purpose),F1.resume(x)))})},Xk=(e,t,o,n,r,a)=>Yk(e,t,o,n,r,a).fold(io,l=>Xk(e,t,o,l,r,a),Ht),GR=(e,t,o,n,r)=>{const a=Kk(o,n);return Yk(e,t,o,n,a,r)},jR=(e,t,o)=>{const n=WR(t);return ye(e,r=>{const a=r.descHandler;Kd(a)(n)}),n.isStopped()},qR=(e,t,o,n)=>Jk(e,t,o,o.target,n),Jk=(e,t,o,n,r)=>{const a=Kk(o,n);return Xk(e,t,o,n,a,r)},KR=(e,t)=>({element:e,descHandler:t}),YR=(e,t)=>({id:e,descHandler:t}),XR=()=>{const e={},t=(l,d,m)=>{ho(m,(f,w)=>{const x=e[w]!==void 0?e[w]:{};x[d]=Ey(f,l),e[w]=x})},o=(l,d)=>ju(d).bind(m=>He(l,m)).map(m=>KR(d,m));return{registerId:t,unregisterId:l=>{ho(e,(d,m)=>{Ft(d,l)&&delete d[l]})},filterByType:l=>He(e,l).map(d=>Nr(d,(m,f)=>YR(f,m))).getOr([]),find:(l,d,m)=>He(e,d).bind(f=>nr(m,w=>o(f,w),l))}},JR=()=>{const e=XR(),t={},o=f=>{const w=f.element;return ju(w).getOrThunk(()=>yy("uid-",f.element))},n=(f,w)=>{const x=t[w];if(x===f)a(f);else throw new Error('The tagId "'+w+'" is already used by: '+cu(x.element)+`
Cannot use it for: `+cu(f.element)+`
The conflicting element is`+(ao(x.element)?" ":" not ")+"already in the DOM")},r=f=>{const w=o(f);Cn(t,w)&&n(f,w);const x=[f];e.registerId(x,w,f.events),t[w]=f},a=f=>{ju(f.element).each(w=>{delete t[w],e.unregisterId(w)})};return{find:(f,w,x)=>e.find(f,w,x),filter:f=>e.filterByType(f),register:r,unregister:a,getById:f=>He(t,f)}},Bi=ar({name:"Container",factory:e=>{const{attributes:t,...o}=e.dom;return{uid:e.uid,dom:{tag:"div",attributes:{role:"presentation",...t},...o},components:e.components,behaviours:sd(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[J("components",[]),Es("containerBehaviours",[]),J("events",{}),J("domModification",{}),J("eventOrder",{})]}),F4=e=>{const t=W=>ss(e.element).fold(io,Y=>eo(W,Y)),o=JR(),n=(W,Y)=>o.find(t,W,Y),r=ZR(e.element,{triggerEvent:(W,Y)=>lh(W,Y.target,j=>qR(n,W,Y,j))}),a={debugInfo:I("real"),triggerEvent:(W,Y,j)=>{lh(W,Y,de=>Jk(n,W,j,Y,de))},triggerFocus:(W,Y)=>{ju(W).fold(()=>{da(W)},j=>{lh(wi(),W,de=>(GR(n,wi(),{originator:Y,kill:X,prevent:X,target:W},W,de),!1))})},triggerEscape:(W,Y)=>{a.triggerEvent("keydown",W.element,Y.event)},getByUid:W=>L(W),getByDom:W=>ee(W),build:Zs,buildOrPatch:ah,addToGui:W=>{m(W)},removeFromGui:W=>{f(W)},addToWorld:W=>{l(W)},removeFromWorld:W=>{d(W)},broadcast:W=>{O(W)},broadcastOn:(W,Y)=>{M(W,Y)},broadcastEvent:(W,Y)=>{A(W,Y)},isConnected:io},l=W=>{W.connect(a),Qs(W.element)||(o.register(W),ye(W.components(),l),a.triggerEvent(Xg(),W.element,{target:W.element}))},d=W=>{Qs(W.element)||(ye(W.components(),d),o.unregister(W)),W.disconnect()},m=W=>{Vl(e,W)},f=W=>{Di(W)},w=()=>{r.unbind(),Nc(e.element)},x=W=>{const Y=o.filter(su());ye(Y,j=>{const de=j.descHandler;Kd(de)(W)})},O=W=>{x({universal:!0,data:W})},M=(W,Y)=>{x({universal:!1,channels:W,data:Y})},A=(W,Y)=>{const j=o.filter(W);return jR(j,Y)},L=W=>o.getById(W).fold(()=>St.error(new Error('Could not find component with uid: "'+W+'" in system.')),St.value),ee=W=>{const Y=ju(W).getOr("not found");return L(Y)};return l(e),{root:e,element:e.element,destroy:w,add:m,remove:f,getByUid:L,getByDom:ee,addToWorld:l,removeFromWorld:d,broadcast:O,broadcastOn:M,broadcastEvent:A}},QR=(e,t)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:ue(e.items,t.interpreter)}),eH=I([J("prefix","form-field"),Es("fieldBehaviours",[It,Ee])]),tH=I([ma({schema:[me("dom")],name:"label"}),ma({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[me("text")],name:"aria-descriptor"}),wr({factory:{sketch:e=>{const t=re(e,["factory"]);return e.factory.sketch(t)}},schema:[me("factory")],name:"field"})]),oH=(e,t,o,n)=>{const r=Ws(e.fieldBehaviours,[It.config({find:d=>_o(d,e,"field")}),Ee.config({store:{mode:"manual",getValue:d=>It.getCurrent(d).bind(Ee.getValue),setValue:(d,m)=>{It.getCurrent(d).each(f=>{Ee.setValue(f,m)})}}})]),a=Lo([cn((d,m)=>{const f=gv(d,e,["label","field","aria-descriptor"]);f.field().each(w=>{const x=Le(e.prefix);f.label().each(O=>{at(O.element,"for",x),at(w.element,"id",x)}),f["aria-descriptor"]().each(O=>{const M=Le(e.prefix);at(O.element,"id",M),at(w.element,"aria-describedby",M)})})})]),l={getField:d=>_o(d,e,"field"),getLabel:d=>_o(d,e,"label")};return{uid:e.uid,dom:e.dom,components:t,behaviours:r,events:a,apis:l}},fo=Lr({name:"FormField",configFields:eH(),partFields:tH(),factory:oH,apis:{getField:(e,t)=>e.getField(t),getLabel:(e,t)=>e.getLabel(t)}});var nH=Object.freeze({__proto__:null,exhibit:(e,t)=>ia({attributes:De([{key:t.tabAttr,value:"true"}])})}),sH=[J("tabAttr","data-alloy-tabstop")];const Sn=Us({fields:sH,name:"tabstopping",active:nH});var rH=tinymce.util.Tools.resolve("tinymce.html.Entities");const P1=(e,t,o,n)=>{const r=aH(e,t,o,n);return fo.sketch(r)},cH=(e,t)=>P1(e,t,[],[]),aH=(e,t,o,n)=>({dom:Qk(o),components:e.toArray().concat([t]),fieldBehaviours:xe(n)}),lH=()=>Qk([]),Qk=e=>({tag:"div",classes:["tox-form__group"].concat(e)}),Tm=(e,t)=>fo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ln(t.translate(e))]}),ba=Le("form-component-change"),V1=Le("form-close"),km=Le("form-cancel"),pu=Le("form-action"),N1=Le("form-submit"),P4=Le("form-block"),V4=Le("form-unblock"),eO=Le("form-tabchange"),tO=Le("form-resize"),iH=(e,t,o)=>{const n=e.label.map(M=>Tm(M,t)),r=t.icons(),a=M=>{var A;return(A=r[M])!==null&&A!==void 0?A:M},l=M=>(A,L)=>{Fl(L.event.target,"[data-collection-item-value]").each(ee=>{M(A,L,ee,qo(ee,"data-collection-item-value"))})},d=(M,A)=>{const L=ue(A,Y=>{const j=Za.translate(Y.text),de=e.columns===1?`<div class="tox-collection__item-label">${j}</div>`:"",ie=`<div class="tox-collection__item-icon">${a(Y.icon)}</div>`,he={_:" "," - ":" ","-":" "},ke=j.replace(/\_| \- |\-/g,ct=>he[ct]),ae=t.isDisabled()?" tox-collection__item--state-disabled":"";return`<div data-mce-tooltip="${ke}" class="tox-collection__item${ae}" tabindex="-1" data-collection-item-value="${rH.encodeAllRaw(Y.value)}" aria-label="${ke}">${ie}${de}</div>`}),ee=e.columns!=="auto"&&e.columns>1?et(L,e.columns):[L],W=ue(ee,Y=>`<div class="tox-collection__group">${Y.join("")}</div>`);Gu(M.element,W.join(""))},m=l((M,A,L,ee)=>{A.stop(),t.isDisabled()||je(M,pu,{name:e.name,value:ee})}),f=[le(Aa(),l((M,A,L)=>{da(L)})),le(nu(),m),le(Al(),m),le(Wc(),l((M,A,L)=>{Yo(M.element,"."+bg).each(ee=>{Hn(ee,bg)}),wn(L,bg)})),le(yi(),l(M=>{Yo(M.element,"."+bg).each(A=>{Hn(A,bg),vh(A)})})),Ci(l((M,A,L,ee)=>{je(M,pu,{name:e.name,value:ee})}))],w=(M,A)=>ue(oc(M.element,".tox-collection__item"),A),x=fo.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(e.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:xt},behaviours:xe([rt.config({disabled:t.isDisabled,onDisabled:M=>{w(M,A=>{wn(A,"tox-collection__item--state-disabled"),at(A,"aria-disabled",!0)})},onEnabled:M=>{w(M,A=>{Hn(A,"tox-collection__item--state-disabled"),B(A,"aria-disabled")})}}),As(),bt.config({}),Fr.config({...t.tooltips.getConfig({tooltipText:"",onShow:M=>{Yo(M.element,"."+bg+"[data-mce-tooltip]").each(A=>{C(A,"data-mce-tooltip").each(L=>{Fr.setComponents(M,t.tooltips.getComponents({tooltipText:L}))})})}}),mode:"children-keyboard-focus",anchor:M=>({type:"node",node:Yo(M.element,"."+bg).orThunk(()=>Yy(".tox-collection__item")),root:M.element,layouts:{onLtr:I([Wn,Ms,as,Fo,ls,vs]),onRtl:I([Wn,Ms,as,Fo,ls,vs])},bubble:Ba(0,-2,{})})}),Ee.config({store:{mode:"memory",initialValue:o.getOr([])},onSetValue:(M,A)=>{d(M,A),e.columns==="auto"&&f4(M,5,"tox-collection__item").each(({numRows:L,numColumns:ee})=>{Ke.setGridSize(M,L,ee)}),Pt(M,tO)}}),Sn.config({}),Ke.config(G$(e.columns,"normal")),yt("collection-events",f)]),eventOrder:{[bc()]:["disabling","alloy.base.behaviour","collection-events"],[Wc()]:["collection-events","tooltipping"]}});return P1(n,x,["tox-form__group--collection"],[])},uH=["input","textarea"],oO=e=>{const t=ms(e);return Xt(uH,t)},nO=(e,t)=>{const o=t.getRoot(e).getOr(e.element);Hn(o,t.invalidClass),t.notify.each(n=>{oO(e.element)&&at(e.element,"aria-invalid",!1),n.getContainer(e).each(r=>{Gu(r,n.validHtml)}),n.onValid(e)})},sO=(e,t,o,n)=>{const r=t.getRoot(e).getOr(e.element);wn(r,t.invalidClass),t.notify.each(a=>{oO(e.element)&&at(e.element,"aria-invalid",!0),a.getContainer(e).each(l=>{Gu(l,n)}),a.onInvalid(e,n)})},rO=(e,t,o)=>t.validator.fold(()=>Pr.pure(St.value(!0)),n=>n.validate(e)),N4=(e,t,o)=>(t.notify.each(n=>{n.onValidate(e)}),rO(e,t).map(n=>e.getSystem().isConnected()?n.fold(r=>(sO(e,t,o,r),St.error(r)),r=>(nO(e,t),St.value(r))):St.error("No longer in system")));var dH=Object.freeze({__proto__:null,markValid:nO,markInvalid:sO,query:rO,run:N4,isInvalid:(e,t)=>{const o=t.getRoot(e).getOr(e.element);return vc(o,t.invalidClass)}}),mH=Object.freeze({__proto__:null,events:(e,t)=>e.validator.map(o=>Lo([le(o.onEvent,n=>{N4(n,e,t).get(xt)})].concat(o.validateOnLoad?[cn(n=>{N4(n,e,t).get(X)})]:[]))).getOr({})}),gH=[me("invalidClass"),J("getRoot",v.none),Ir("notify",[J("aria","alert"),J("getContainer",v.none),J("validHtml",""),Zt("onValid"),Zt("onInvalid"),Zt("onValidate")]),Ir("validator",[me("validate"),J("onEvent","input"),J("validateOnLoad",!0)])];const fu=Us({fields:gH,name:"invalidating",active:mH,apis:dH,extra:{validation:e=>t=>{const o=Ee.getValue(t);return Pr.pure(e(o))}}});var hH=Object.freeze({__proto__:null,events:()=>Lo([lb(sy(),io)]),exhibit:()=>ia({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const z1=Us({fields:[],name:"unselecting",active:hH}),pH=(e,t)=>pl.sketch({dom:e.dom,components:e.components,toggleClass:"mce-active",dropdownBehaviours:xe([ql.button(t.providers.isDisabled),As(),z1.config({}),Sn.config({})]),layouts:e.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:t.getSink,fetch:o=>Pr.nu(n=>e.fetch(n)).map(n=>v.from(L4(Oo($4(Le("menu-value"),n,r=>{e.onItemAction(o,r)},e.columns,e.presets,Ii.CLOSE_ON_EXECUTE,Ht,t.providers),{movement:o2(e.columns,e.presets)})))),parts:{menu:zv(!1,1,e.presets)}}),cO=Le("color-input-change"),aO=Le("color-swatch-change"),lO=Le("color-picker-cancel"),fH=(e,t,o,n)=>{const r=fo.parts.field({factory:yg,inputClasses:["tox-textfield"],data:n,onSetValue:f=>fu.run(f).get(X),inputBehaviours:xe([rt.config({disabled:t.providers.isDisabled}),As(),Sn.config({}),fu.config({invalidClass:"tox-textbox-field-invalid",getRoot:f=>Wr(f.element),notify:{onValid:f=>{const w=Ee.getValue(f);je(f,cO,{color:w})}},validator:{validateOnLoad:!1,validate:f=>{const w=Ee.getValue(f);if(w.length===0)return Pr.pure(St.value(!0));{const x=U.fromTag("span");Ie(x,"background-color",w);const O=zo(x,"background-color").fold(()=>St.error("blah"),M=>St.value(w));return Pr.pure(O)}}}})]),selectOnFocus:!1}),a=e.label.map(f=>Tm(f,t.providers)),l=(f,w)=>{je(f,aO,{value:w})},d=(f,w)=>{m.getOpt(f).each(x=>{w==="custom"?o.colorPicker(O=>{O.fold(()=>Pt(x,lO),M=>{l(x,M),yk(e.storageKey,M)})},"#ffffff"):w==="remove"?l(x,""):l(x,w)})},m=po(pH({dom:{tag:"span",attributes:{"aria-label":t.providers.translate("Color swatch")}},layouts:{onRtl:()=>[ls,as,Wn],onLtr:()=>[as,ls,Wn]},components:[],fetch:Ok(o.getColors(e.storageKey),e.storageKey,o.hasCustomColors()),columns:o.getColorCols(e.storageKey),presets:"color",onItemAction:d},t));return fo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:a.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[r,m.asSpec()]}]),fieldBehaviours:xe([yt("form-field-events",[le(cO,(f,w)=>{m.getOpt(f).each(x=>{Ie(x.element,"background-color",w.event.color)}),je(f,ba,{name:e.name})}),le(aO,(f,w)=>{fo.getField(f).each(x=>{Ee.setValue(x,w.event.value),It.getCurrent(f).each(ut.focus)})}),le(lO,(f,w)=>{fo.getField(f).each(x=>{It.getCurrent(f).each(ut.focus)})})])])})},bH=ma({schema:[me("dom")],name:"label"}),Om=e=>ma({name:""+e+"-edge",overrides:t=>t.model.manager.edgeActions[e].fold(()=>({}),n=>({events:Lo([Bp(Uc(),(r,a,l)=>n(r,l),[t]),Bp(Ot(),(r,a,l)=>n(r,l),[t]),Bp(Uo(),(r,a,l)=>{l.mouseIsDown.get()&&n(r,l)},[t])])}))}),vH=Om("top-left"),yH=Om("top"),wH=Om("top-right"),SH=Om("right"),xH=Om("bottom-right"),CH=Om("bottom"),TH=Om("bottom-left"),kH=Om("left"),OH=wr({name:"thumb",defaults:I({dom:{styles:{position:"absolute"}}}),overrides:e=>({events:Lo([xi(Uc(),e,"spectrum"),xi(El(),e,"spectrum"),xi(ll(),e,"spectrum"),xi(Ot(),e,"spectrum"),xi(Uo(),e,"spectrum"),xi(ec(),e,"spectrum")])})}),r2=e=>cd(e.event),_H=wr({schema:[tr("mouseIsDown",()=>We(!1))],name:"spectrum",overrides:e=>{const o=e.model.manager,n=(r,a)=>o.getValueFromEvent(a).map(l=>o.setValueFrom(r,e,l));return{behaviours:xe([Ke.config({mode:"special",onLeft:(r,a)=>o.onLeft(r,e,r2(a)),onRight:(r,a)=>o.onRight(r,e,r2(a)),onUp:(r,a)=>o.onUp(r,e,r2(a)),onDown:(r,a)=>o.onDown(r,e,r2(a))}),Sn.config({}),ut.config({})]),events:Lo([le(Uc(),n),le(El(),n),le(Ot(),n),le(Uo(),(r,a)=>{e.mouseIsDown.get()&&n(r,a)})])}}});var MH=[bH,kH,SH,yH,CH,vH,wH,TH,xH,OH,_H];const Z1=I("slider.change.value"),EH=e=>e.type.indexOf("touch")!==-1,z4=e=>{const t=e.event.raw;if(EH(t)){const o=t;return o.touches!==void 0&&o.touches.length===1?v.some(o.touches[0]).map(n=>Ko(n.clientX,n.clientY)):v.none()}else{const o=t;return o.clientX!==void 0?v.some(o).map(n=>Ko(n.clientX,n.clientY)):v.none()}},AH="top",DH="right",$H="bottom",RH="left",kg=e=>e.model.minX,Og=e=>e.model.minY,c2=e=>e.model.minX-1,a2=e=>e.model.minY-1,_g=e=>e.model.maxX,Mg=e=>e.model.maxY,l2=e=>e.model.maxX+1,i2=e=>e.model.maxY+1,iO=(e,t,o)=>t(e)-o(e),Z4=e=>iO(e,_g,kg),U4=e=>iO(e,Mg,Og),uO=e=>Z4(e)/2,dO=e=>U4(e)/2,ap=(e,t)=>t?e.stepSize*e.speedMultiplier:e.stepSize,mO=e=>e.snapToGrid,gO=e=>e.snapStart,hO=e=>e.rounded,u2=(e,t)=>e[t+"-edge"]!==void 0,pO=e=>u2(e,RH),fO=e=>u2(e,DH),bO=e=>u2(e,AH),vO=e=>u2(e,$H),dd=e=>e.model.value.get(),_m=(e,t)=>({x:e,y:t}),Kl=(e,t)=>{je(e,Z1(),{value:t})},HH=(e,t)=>{Kl(e,_m(c2(t),a2(t)))},IH=(e,t)=>{Kl(e,a2(t))},BH=(e,t)=>{Kl(e,_m(uO(t),a2(t)))},LH=(e,t)=>{Kl(e,_m(l2(t),a2(t)))},FH=(e,t)=>{Kl(e,l2(t))},PH=(e,t)=>{Kl(e,_m(l2(t),dO(t)))},VH=(e,t)=>{Kl(e,_m(l2(t),i2(t)))},NH=(e,t)=>{Kl(e,i2(t))},zH=(e,t)=>{Kl(e,_m(uO(t),i2(t)))},ZH=(e,t)=>{Kl(e,_m(c2(t),i2(t)))},UH=(e,t)=>{Kl(e,c2(t))},WH=(e,t)=>{Kl(e,_m(c2(t),dO(t)))},W4=(e,t,o,n)=>e<t?e:e>o?o:e===t?t-1:Math.max(t,e-n),G4=(e,t,o,n)=>e>o?e:e<t?t:e===o?o+1:Math.min(o,e+n),yO=(e,t,o)=>Math.max(t,Math.min(o,e)),GH=(e,t,o,n,r)=>r.fold(()=>{const a=e-t,l=Math.round(a/n)*n;return yO(t+l,t-1,o+1)},a=>{const l=(e-a)%n,d=Math.round(l/n),m=Math.floor((e-a)/n),f=Math.floor((o-a)/n),w=Math.min(f,m+d),x=a+w*n;return Math.max(a,x)}),jH=(e,t,o)=>Math.min(o,Math.max(e,t))-t,wO=e=>{const{min:t,max:o,range:n,value:r,step:a,snap:l,snapStart:d,rounded:m,hasMinEdge:f,hasMaxEdge:w,minBound:x,maxBound:O,screenRange:M}=e,A=f?t-1:t,L=w?o+1:o;if(r<x)return A;if(r>O)return L;{const ee=jH(r,x,O),W=yO(ee/M*n+t,A,L);return l&&W>=t&&W<=o?GH(W,t,o,a,d):m?Math.round(W):W}},SO=e=>{const{min:t,max:o,range:n,value:r,hasMinEdge:a,hasMaxEdge:l,maxBound:d,maxOffset:m,centerMinEdge:f,centerMaxEdge:w}=e;return r<t?a?0:f:r>o?l?d:w:(r-t)/n*m},j4="top",xO="right",CO="bottom",q4="left",qH="width",KH="height",bu=e=>e.element.dom.getBoundingClientRect(),Yl=(e,t)=>e[t],d2=e=>{const t=bu(e);return Yl(t,q4)},TO=e=>{const t=bu(e);return Yl(t,xO)},m2=e=>{const t=bu(e);return Yl(t,j4)},kO=e=>{const t=bu(e);return Yl(t,CO)},OO=e=>{const t=bu(e);return Yl(t,qH)},_O=e=>{const t=bu(e);return Yl(t,KH)},MO=(e,t,o)=>(e+t)/2-o,EO=(e,t)=>{const o=bu(e),n=bu(t),r=Yl(o,q4),a=Yl(o,xO),l=Yl(n,q4);return MO(r,a,l)},AO=(e,t)=>{const o=bu(e),n=bu(t),r=Yl(o,j4),a=Yl(o,CO),l=Yl(n,j4);return MO(r,a,l)},g2=(e,t)=>{je(e,Z1(),{value:t})},K4=(e,t,o)=>{const n={min:kg(t),max:_g(t),range:Z4(t),value:o,step:ap(t),snap:mO(t),snapStart:gO(t),rounded:hO(t),hasMinEdge:pO(t),hasMaxEdge:fO(t),minBound:d2(e),maxBound:TO(e),screenRange:OO(e)};return wO(n)},YH=(e,t,o)=>{const n=K4(e,t,o);return g2(e,n),n},XH=(e,t)=>{const o=kg(t);g2(e,o)},JH=(e,t)=>{const o=_g(t);g2(e,o)},QH=(e,t,o,n)=>{const a=(e>0?G4:W4)(dd(o),kg(o),_g(o),ap(o,n));return g2(t,a),v.some(a)},DO=e=>(t,o,n)=>QH(e,t,o,n).map(io),eI=e=>z4(e).map(o=>o.left),tI=(e,t,o,n,r)=>{const l=OO(e),d=n.bind(w=>v.some(EO(w,e))).getOr(0),m=r.bind(w=>v.some(EO(w,e))).getOr(l),f={min:kg(t),max:_g(t),range:Z4(t),value:o,hasMinEdge:pO(t),hasMaxEdge:fO(t),minBound:d2(e),minOffset:0,maxBound:TO(e),maxOffset:l,centerMinEdge:d,centerMaxEdge:m};return SO(f)},Y4=(e,t,o,n,r,a)=>{const l=tI(t,a,o,n,r);return d2(t)-d2(e)+l},oI=(e,t,o,n)=>{const r=dd(o),a=Y4(e,n.getSpectrum(e),r,n.getLeftEdge(e),n.getRightEdge(e),o),l=Ar(t.element)/2;Ie(t.element,"left",a-l+"px")},nI=DO(-1),sI=DO(1),rI=v.none,cI=v.none,aI={"top-left":v.none(),top:v.none(),"top-right":v.none(),right:v.some(FH),"bottom-right":v.none(),bottom:v.none(),"bottom-left":v.none(),left:v.some(UH)};var lI=Object.freeze({__proto__:null,setValueFrom:YH,setToMin:XH,setToMax:JH,findValueOfOffset:K4,getValueFromEvent:eI,findPositionOfValue:Y4,setPositionFromValue:oI,onLeft:nI,onRight:sI,onUp:rI,onDown:cI,edgeActions:aI});const h2=(e,t)=>{je(e,Z1(),{value:t})},X4=(e,t,o)=>{const n={min:Og(t),max:Mg(t),range:U4(t),value:o,step:ap(t),snap:mO(t),snapStart:gO(t),rounded:hO(t),hasMinEdge:bO(t),hasMaxEdge:vO(t),minBound:m2(e),maxBound:kO(e),screenRange:_O(e)};return wO(n)},iI=(e,t,o)=>{const n=X4(e,t,o);return h2(e,n),n},uI=(e,t)=>{const o=Og(t);h2(e,o)},dI=(e,t)=>{const o=Mg(t);h2(e,o)},mI=(e,t,o,n)=>{const a=(e>0?G4:W4)(dd(o),Og(o),Mg(o),ap(o,n));return h2(t,a),v.some(a)},$O=e=>(t,o,n)=>mI(e,t,o,n).map(io),gI=e=>z4(e).map(o=>o.top),hI=(e,t,o,n,r)=>{const l=_O(e),d=n.bind(w=>v.some(AO(w,e))).getOr(0),m=r.bind(w=>v.some(AO(w,e))).getOr(l),f={min:Og(t),max:Mg(t),range:U4(t),value:o,hasMinEdge:bO(t),hasMaxEdge:vO(t),minBound:m2(e),minOffset:0,maxBound:kO(e),maxOffset:l,centerMinEdge:d,centerMaxEdge:m};return SO(f)},J4=(e,t,o,n,r,a)=>{const l=hI(t,a,o,n,r);return m2(t)-m2(e)+l},pI=(e,t,o,n)=>{const r=dd(o),a=J4(e,n.getSpectrum(e),r,n.getTopEdge(e),n.getBottomEdge(e),o),l=Zo(t.element)/2;Ie(t.element,"top",a-l+"px")},fI=v.none,bI=v.none,vI=$O(-1),yI=$O(1),wI={"top-left":v.none(),top:v.some(IH),"top-right":v.none(),right:v.none(),"bottom-right":v.none(),bottom:v.some(NH),"bottom-left":v.none(),left:v.none()};var SI=Object.freeze({__proto__:null,setValueFrom:iI,setToMin:uI,setToMax:dI,findValueOfOffset:X4,getValueFromEvent:gI,findPositionOfValue:J4,setPositionFromValue:pI,onLeft:fI,onRight:bI,onUp:vI,onDown:yI,edgeActions:wI});const p2=(e,t)=>{je(e,Z1(),{value:t})},f2=(e,t)=>({x:e,y:t}),xI=(e,t,o)=>{const n=K4(e,t,o.left),r=X4(e,t,o.top),a=f2(n,r);return p2(e,a),a},CI=(e,t,o,n,r)=>{const a=e>0?G4:W4,l=t?dd(n).x:a(dd(n).x,kg(n),_g(n),ap(n,r)),d=t?a(dd(n).y,Og(n),Mg(n),ap(n,r)):dd(n).y;return p2(o,f2(l,d)),v.some(l)},b2=(e,t)=>(o,n,r)=>CI(e,t,o,n,r).map(io),TI=(e,t)=>{const o=kg(t),n=Og(t);p2(e,f2(o,n))},kI=(e,t)=>{const o=_g(t),n=Mg(t);p2(e,f2(o,n))},OI=e=>z4(e),_I=(e,t,o,n)=>{const r=dd(o),a=Y4(e,n.getSpectrum(e),r.x,n.getLeftEdge(e),n.getRightEdge(e),o),l=J4(e,n.getSpectrum(e),r.y,n.getTopEdge(e),n.getBottomEdge(e),o),d=Ar(t.element)/2,m=Zo(t.element)/2;Ie(t.element,"left",a-d+"px"),Ie(t.element,"top",l-m+"px")},MI=b2(-1,!1),EI=b2(1,!1),AI=b2(-1,!0),DI=b2(1,!0),$I={"top-left":v.some(HH),top:v.some(BH),"top-right":v.some(LH),right:v.some(PH),"bottom-right":v.some(VH),bottom:v.some(zH),"bottom-left":v.some(ZH),left:v.some(WH)};var RI=Object.freeze({__proto__:null,setValueFrom:xI,setToMin:TI,setToMax:kI,getValueFromEvent:OI,setPositionFromValue:_I,onLeft:MI,onRight:EI,onUp:AI,onDown:DI,edgeActions:$I});const HI=[J("stepSize",1),J("speedMultiplier",10),J("onChange",X),J("onChoose",X),J("onInit",X),J("onDragStart",X),J("onDragEnd",X),J("snapToGrid",!1),J("rounded",!0),no("snapStart"),gc("model",Jr("mode",{x:[J("minX",0),J("maxX",100),tr("value",e=>We(e.mode.minX)),me("getInitialValue"),Xo("manager",lI)],y:[J("minY",0),J("maxY",100),tr("value",e=>We(e.mode.minY)),me("getInitialValue"),Xo("manager",SI)],xy:[J("minX",0),J("maxX",100),J("minY",0),J("maxY",100),tr("value",e=>We({x:e.mode.minX,y:e.mode.minY})),me("getInitialValue"),Xo("manager",RI)]})),Es("sliderBehaviours",[Ke,Ee]),tr("mouseIsDown",()=>We(!1))],Xl=Lr({name:"Slider",configFields:HI,partFields:MH,factory:(e,t,o,n)=>{const r=ie=>du(ie,e,"thumb"),a=ie=>du(ie,e,"spectrum"),l=ie=>_o(ie,e,"left-edge"),d=ie=>_o(ie,e,"right-edge"),m=ie=>_o(ie,e,"top-edge"),f=ie=>_o(ie,e,"bottom-edge"),w=e.model,x=w.manager,O=(ie,he)=>{x.setPositionFromValue(ie,he,e,{getLeftEdge:l,getRightEdge:d,getTopEdge:m,getBottomEdge:f,getSpectrum:a})},M=(ie,he)=>{w.value.set(he);const ke=r(ie);O(ie,ke)},A=(ie,he)=>{M(ie,he);const ke=r(ie);return e.onChange(ie,ke,he),v.some(!0)},L=ie=>{x.setToMin(ie,e)},ee=ie=>{x.setToMax(ie,e)},W=ie=>{const he=()=>{_o(ie,e,"thumb").each(ae=>{const ct=w.value.get();e.onChoose(ie,ae,ct)})},ke=e.mouseIsDown.get();e.mouseIsDown.set(!1),ke&&he()},Y=(ie,he)=>{he.stop(),e.mouseIsDown.set(!0),e.onDragStart(ie,r(ie))},j=(ie,he)=>{he.stop(),e.onDragEnd(ie,r(ie)),W(ie)},de=ie=>{_o(ie,e,"spectrum").map(Ke.focusIn)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Ws(e.sliderBehaviours,[Ke.config({mode:"special",focusIn:de}),Ee.config({store:{mode:"manual",getValue:ie=>w.value.get(),setValue:M}}),yc.config({channels:{[Nf()]:{onReceive:W}}})]),events:Lo([le(Z1(),(ie,he)=>{A(ie,he.event.value)}),cn((ie,he)=>{const ke=w.getInitialValue();w.value.set(ke);const ae=r(ie);O(ie,ae);const ct=a(ie);e.onInit(ie,ae,ct,w.value.get())}),le(Uc(),Y),le(ll(),j),le(Ot(),(ie,he)=>{de(ie),Y(ie,he)}),le(ec(),j)]),apis:{resetToMin:L,resetToMax:ee,setValue:M,refresh:O},domModification:{styles:{position:"relative"}}}},apis:{setValue:(e,t,o)=>{e.setValue(t,o)},resetToMin:(e,t)=>{e.resetToMin(t)},resetToMax:(e,t)=>{e.resetToMax(t)},refresh:(e,t)=>{e.refresh(t)}}}),Q4=Le("rgb-hex-update"),RO=Le("slider-update"),HO=Le("palette-update"),II=(e,t)=>{const o=Xl.parts.spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),n=Xl.parts.thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return Xl.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:I(0)},components:[o,n],sliderBehaviours:xe([ut.config({})]),onChange:(r,a,l)=>{at(r.element,"aria-valuenow",Math.floor(360-l*3.6)),je(r,RO,{value:l})}})},IO="form",BI=[Es("formBehaviours",[Ee])],BO=e=>"<alloy.field."+e+">",LI=e=>{const t=(()=>{const a=[];return{field:(d,m)=>(a.push(d),dv(IO,BO(d),m)),record:I(a)}})(),o=e(t),n=t.record(),r=ue(n,a=>wr({name:a,pname:BO(a)}));return s1(IO,BI,r,PI,o)},FI=(e,t)=>e.fold(()=>St.error(t),St.value),PI=(e,t)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Ws(e.formBehaviours,[Ee.config({store:{mode:"manual",getValue:o=>{const n=hv(o,e);return yo(n,(r,a)=>r().bind(l=>{const d=It.getCurrent(l);return FI(d,new Error(`Cannot find a current component to extract the value from for form part '${a}': `+cu(l.element)))}).map(Ee.getValue))},setValue:(o,n)=>{ho(n,(r,a)=>{_o(o,e,a).each(l=>{It.getCurrent(l).each(d=>{Ee.setValue(d,r)})})})}}})]),apis:{getField:(o,n)=>_o(o,e,n).bind(It.getCurrent)}}),lp={getField:la((e,t,o)=>e.getField(t,o)),sketch:LI},LO=Le("valid-input"),FO=Le("invalid-input"),PO=Le("validating-input"),eC="colorcustom.rgb.",VI=(e,t,o,n)=>{const r=(O,M)=>fu.config({invalidClass:t("invalid"),notify:{onValidate:A=>{je(A,PO,{type:O})},onValid:A=>{je(A,LO,{type:O,value:Ee.getValue(A)})},onInvalid:A=>{je(A,FO,{type:O,value:Ee.getValue(A)})}},validator:{validate:A=>{const L=Ee.getValue(A),ee=M(L)?St.value(!0):St.error(e("aria.input.invalid"));return Pr.pure(ee)},validateOnLoad:!1}}),a=(O,M,A,L,ee)=>{const W=e(eC+"range"),Y=fo.parts.label({dom:{tag:"label",attributes:{"aria-label":L}},components:[Ln(A)]}),j=fo.parts.field({data:ee,factory:yg,inputAttributes:{type:"text",...M==="hex"?{"aria-live":"polite"}:{}},inputClasses:[t("textfield")],inputBehaviours:xe([r(M,O),Sn.config({})]),onSetValue:ke=>{fu.isInvalid(ke)&&fu.run(ke).get(X)}}),de=[Y,j],ie=M!=="hex"?[fo.parts["aria-descriptor"]({text:W})]:[],he=de.concat(ie);return{dom:{tag:"div",attributes:{role:"presentation"}},components:he}},l=(O,M)=>{const A=H1(M);return lp.getField(O,"hex").each(L=>{ut.isFocused(L)||Ee.setValue(O,{hex:A.value})}),A},d=(O,M)=>{const A=M.red,L=M.green,ee=M.blue;Ee.setValue(O,{red:A,green:L,blue:ee})},m=po({dom:{tag:"div",classes:[t("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),f=(O,M)=>{m.getOpt(O).each(A=>{Ie(A.element,"background-color","#"+M.value)})};return ar({factory:()=>{const O={red:We(v.some(255)),green:We(v.some(255)),blue:We(v.some(255)),hex:We(v.some("ffffff"))},M=(Ne,qt)=>{const Lt=I1(qt);d(Ne,Lt),W(Lt)},A=Ne=>O[Ne].get(),L=(Ne,qt)=>{O[Ne].set(qt)},ee=()=>A("red").bind(Ne=>A("green").bind(qt=>A("blue").map(Lt=>Cm(Ne,qt,Lt,1)))),W=Ne=>{const qt=Ne.red,Lt=Ne.green,Mt=Ne.blue;L("red",v.some(qt)),L("green",v.some(Lt)),L("blue",v.some(Mt))},Y=(Ne,qt)=>{const Lt=qt.event;Lt.type!=="hex"?L(Lt.type,v.none()):n(Ne)},j=(Ne,qt)=>{o(Ne);const Lt=sk(qt);L("hex",v.some(Lt.value));const Mt=I1(Lt);d(Ne,Mt),W(Mt),je(Ne,Q4,{hex:Lt}),f(Ne,Lt)},de=(Ne,qt,Lt)=>{const Mt=parseInt(Lt,10);L(qt,v.some(Mt)),ee().each(Se=>{const Be=l(Ne,Se);je(Ne,Q4,{hex:Be}),f(Ne,Be)})},ie=Ne=>Ne.type==="hex",he=(Ne,qt)=>{const Lt=qt.event;ie(Lt)?j(Ne,Lt.value):de(Ne,Lt.type,Lt.value)},ke=Ne=>({label:e(eC+Ne+".label"),description:e(eC+Ne+".description")}),ae=ke("red"),ct=ke("green"),$e=ke("blue"),Ye=ke("hex");return Oo(lp.sketch(Ne=>({dom:{tag:"form",classes:[t("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[Ne.field("red",fo.sketch(a(w4,"red",ae.label,ae.description,255))),Ne.field("green",fo.sketch(a(w4,"green",ct.label,ct.description,255))),Ne.field("blue",fo.sketch(a(w4,"blue",$e.label,$e.description,255))),Ne.field("hex",fo.sketch(a(ak,"hex",Ye.label,Ye.description,"ffffff"))),m.asSpec()],formBehaviours:xe([fu.config({invalidClass:t("form-invalid")}),yt("rgb-form-events",[le(LO,he),le(FO,Y),le(PO,Y)])])})),{apis:{updateHex:(Ne,qt)=>{Ee.setValue(Ne,{hex:qt.value}),M(Ne,qt),f(Ne,qt)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(O,M,A)=>{O.updateHex(M,A)}},extraApis:{}})},NI=(e,t)=>{const o=Xl.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[t("sv-palette-spectrum")]}}),n=Xl.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette-thumb")],innerHtml:`<div class=${t("sv-palette-inner-thumb")} role="presentation"></div>`}}),r=(f,w)=>{const{width:x,height:O}=f,M=f.getContext("2d");if(M===null)return;M.fillStyle=w,M.fillRect(0,0,x,O);const A=M.createLinearGradient(0,0,x,0);A.addColorStop(0,"rgba(255,255,255,1)"),A.addColorStop(1,"rgba(255,255,255,0)"),M.fillStyle=A,M.fillRect(0,0,x,O);const L=M.createLinearGradient(0,0,0,O);L.addColorStop(0,"rgba(0,0,0,0)"),L.addColorStop(1,"rgba(0,0,0,1)"),M.fillStyle=L,M.fillRect(0,0,x,O)},a=(f,w)=>{const x=f.components()[0].element.dom,O=B1(w,100,100),M=dk(O);r(x,gk(M))},l=(f,w)=>{const x=C4(I1(w));Xl.setValue(f,{x:x.saturation,y:100-x.value}),at(f.element,"aria-valuetext",e(["Saturation {0}%, Brightness {1}%",x.saturation,x.value]))};return ar({factory:f=>{const w=I({x:0,y:0}),x=(A,L,ee)=>{So(ee)||at(A.element,"aria-valuetext",e(["Saturation {0}%, Brightness {1}%",Math.floor(ee.x),Math.floor(100-ee.y)])),je(A,HO,{value:ee})},O=(A,L,ee,W)=>{r(ee.element.dom,gk(hk))},M=xe([It.config({find:v.some}),ut.config({})]);return Xl.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":e(["Saturation {0}%, Brightness {1}%",0,0])},classes:[t("sv-palette")]},model:{mode:"xy",getInitialValue:w},rounded:!1,components:[o,n],onChange:x,onInit:O,sliderBehaviours:M})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(f,w,x)=>{a(w,x)},setThumb:(f,w,x)=>{l(w,x)}},extraApis:{}})},zI=(e,t)=>{const o=r=>{const a=VI(e,t,r.onValidHex,r.onInvalidHex),l=NI(e,t),d=he=>(100-he)/100*360,m=he=>100-he/360*100,f={paletteRgba:We(hk),paletteHue:We(0)},w=po(II(e,t)),x=po(l.sketch({})),O=po(a.sketch({})),M=(he,ke,ae)=>{x.getOpt(he).each(ct=>{l.setHue(ct,ae)})},A=(he,ke)=>{O.getOpt(he).each(ae=>{a.updateHex(ae,ke)})},L=(he,ke,ae)=>{w.getOpt(he).each(ct=>{Xl.setValue(ct,m(ae))})},ee=(he,ke)=>{x.getOpt(he).each(ae=>{l.setThumb(ae,ke)})},W=(he,ke)=>{const ae=I1(he);f.paletteRgba.set(ae),f.paletteHue.set(ke)},Y=(he,ke,ae,ct)=>{W(ke,ae),ye(ct,$e=>{$e(he,ke,ae)})},j=()=>{const he=[A];return(ke,ae)=>{const ct=ae.event.value,$e=f.paletteHue.get(),Ye=B1($e,ct.x,100-ct.y),Ne=wk(Ye);Y(ke,Ne,$e,he)}},de=()=>{const he=[M,A];return(ke,ae)=>{const ct=d(ae.event.value),$e=f.paletteRgba.get(),Ye=C4($e),Ne=B1(ct,Ye.saturation,Ye.value),qt=wk(Ne);Y(ke,qt,ct,he)}},ie=()=>{const he=[M,L,ee];return(ke,ae)=>{const ct=ae.event.hex,$e=D$(ct);Y(ke,ct,$e.hue,he)}};return{uid:r.uid,dom:r.dom,components:[x.asSpec(),w.asSpec(),O.asSpec()],behaviours:xe([yt("colour-picker-events",[le(Q4,ie()),le(HO,j()),le(RO,de())]),It.config({find:he=>O.getOpt(he)}),Ke.config({mode:"acyclic"})])}};return ar({name:"ColourPicker",configFields:[me("dom"),J("onValidHex",X),J("onInvalidHex",X)],factory:o})},Jl={self:()=>It.config({find:v.some}),memento:e=>It.config({find:e.getOpt}),childAt:e=>It.config({find:t=>_c(t.element,e).bind(o=>t.getSystem().getByDom(o).toOptional())})},ZI=tt([J("preprocess",xt),J("postprocess",xt)]),UI=(e,t)=>{const o=Hr("RepresentingConfigs.memento processors",ZI,t);return Ee.config({store:{mode:"manual",getValue:n=>{const r=e.get(n),a=Ee.getValue(r);return o.postprocess(a)},setValue:(n,r)=>{const a=o.preprocess(r),l=e.get(n);Ee.setValue(l,a)}}})},Eg=(e,t,o)=>Ee.config({store:{mode:"manual",...e.map(n=>({initialValue:n})).getOr({}),getValue:t,setValue:o}}),VO=(e,t,o)=>Eg(e,n=>t(n.element),(n,r)=>o(n.element,r)),WI=e=>VO(e,Fp,Gu),v2=e=>Ee.config({store:{mode:"memory",initialValue:e}}),GI={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},jI=e=>t=>Xe(t)?e.translate(GI[t]):e.translate(t),qI=(e,t,o)=>{const n=m=>"tox-"+m,r=zI(jI(t),n),a=m=>{je(m,pu,{name:"hex-valid",value:!0})},l=m=>{je(m,pu,{name:"hex-valid",value:!1})},d=po(r.sketch({dom:{tag:"div",classes:[n("color-picker-container")],attributes:{role:"presentation"}},onValidHex:a,onInvalidHex:l}));return{dom:{tag:"div"},components:[d.asSpec()],behaviours:xe([Eg(o,m=>{const f=d.get(m);return It.getCurrent(f).bind(O=>Ee.getValue(O).hex).map(O=>"#"+kc(O,"#")).getOr("")},(m,f)=>{const w=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,x=v.from(w.exec(f)).bind(A=>Ss(A,1)),O=d.get(m);It.getCurrent(O).fold(()=>{console.log("Can not find form")},A=>{Ee.setValue(A,{hex:x.getOr("")}),lp.getField(A,"hex").each(L=>{Pt(L,Zu())})})}),Jl.self()])}};var KI=tinymce.util.Tools.resolve("tinymce.Resource");const NO=e=>Ft(e,"init"),YI=e=>{const t=Wo(),o=po({dom:{tag:e.tag}}),n=Wo(),r=!NO(e)&&e.onFocus.isSome()?[ut.config({onFocus:a=>{e.onFocus.each(l=>{l(a.element.dom)})}}),Sn.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:xe([yt("custom-editor-events",[cn(a=>{o.getOpt(a).each(l=>{(NO(e)?e.init(l.element.dom):KI.load(e.scriptId,e.scriptUrl).then(d=>d(l.element.dom,e.settings))).then(d=>{n.on(m=>{d.setValue(m)}),n.clear(),t.set(d)})})})]),Eg(v.none(),()=>t.get().fold(()=>n.get().getOr(""),a=>a.getValue()),(a,l)=>{t.get().fold(()=>n.set(l),d=>d.setValue(l))}),Jl.self()].concat(r)),components:[o.asSpec()]}};var md=tinymce.util.Tools.resolve("tinymce.util.Tools");const XI=(e,t)=>{const o=md.explode(t.getOption("images_file_types")),n=r=>fn(o,a=>Xs(r.name.toLowerCase(),`.${a.toLowerCase()}`));return Ct(Vr(e),n)},JI=(e,t,o)=>{const n=(O,M)=>{M.stop()},r=O=>(M,A)=>{ye(O,L=>{L(M,A)})},a=(O,M)=>{var A;if(!rt.isDisabled(O)){const L=M.event.raw;d(O,(A=L.dataTransfer)===null||A===void 0?void 0:A.files)}},l=(O,M)=>{const A=M.event.raw.target;d(O,A.files)},d=(O,M)=>{M&&(Ee.setValue(O,XI(M,t)),je(O,ba,{name:e.name}))},m=po({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:xe([yt("input-file-events",[Hl(nu()),Hl(Al())])])}),f=O=>({uid:O.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:xe([v2(o.getOr([])),Jl.self(),rt.config({}),_t.config({toggleClass:"dragenter",toggleOnExecute:!1}),yt("dropzone-events",[le("dragenter",r([n,_t.toggle])),le("dragleave",r([n,_t.toggle])),le("dragover",n),le("drop",r([n,a])),le(Da(),l)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Ln(t.translate("Drop an image here"))]},xr.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Ln(t.translate("Browse for an image")),m.asSpec()],action:M=>{m.get(M).element.dom.click()},buttonBehaviours:xe([Sn.config({}),ql.button(t.isDisabled),As()])})]}]}),w=e.label.map(O=>Tm(O,t)),x=fo.parts.field({factory:{sketch:f}});return P1(w,x,["tox-form__group--stretched"],[])},QI=(e,t)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${e.columns}col`]},components:ue(e.items,t.interpreter)}),eB=(e,t)=>{let o=null,n=null;return{cancel:()=>{Go(o)||(clearTimeout(o),o=null,n=null)},throttle:(...l)=>{n=l,Go(o)&&(o=setTimeout(()=>{const d=n;o=null,n=null,e.apply(null,d)},t))}}},tB=(e,t)=>{let o=null;return{cancel:()=>{Go(o)||(clearTimeout(o),o=null)},throttle:(...a)=>{Go(o)&&(o=setTimeout(()=>{o=null,e.apply(null,a)},t))}}},tC=(e,t)=>{let o=null;const n=()=>{Go(o)||(clearTimeout(o),o=null)};return{cancel:n,throttle:(...a)=>{n(),o=setTimeout(()=>{o=null,e.apply(null,a)},t)}}},oC=Le("alloy-fake-before-tabstop"),nC=Le("alloy-fake-after-tabstop"),zO=e=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:xe([ut.config({ignore:!0}),Sn.config({})])}),ZO=(e,t)=>({dom:{tag:"div",classes:["tox-navobj",...e.getOr([])]},components:[zO([oC]),t,zO([nC])],behaviours:xe([Jl.childAt(1)])}),UO=(e,t)=>{je(e,tc(),{raw:{which:9,shiftKey:t}})},oB=(e,t)=>{const o=t.element;vc(o,oC)?UO(e,!0):vc(o,nC)&&UO(e,!1)},U1=e=>L1(e,["."+oC,"."+nC].join(","),Ht),y2=Le("update-dialog"),WO=Le("update-title"),GO=Le("update-body"),jO=Le("update-footer"),qO=Le("body-send-message"),w2=Le("dialog-focus-shifted"),sC=Ac().browser,W1=sC.isSafari(),nB=sC.isFirefox(),KO=W1||nB,sB=sC.isChromium(),rB=({scrollTop:e,scrollHeight:t,clientHeight:o})=>Math.ceil(e)+o>=t,YO=(e,t)=>e.scrollTo(0,t==="bottom"?99999999:t),cB=(e,t)=>{const o=e.body;return v.from(!/^<!DOCTYPE (html|HTML)/.test(t)&&(!sB&&!W1||oo(o)&&(o.scrollTop!==0||Math.abs(o.scrollHeight-o.clientHeight)>1))?o:e.documentElement)},XO=(e,t,o)=>{const n=e.dom;v.from(n.contentDocument).fold(o,r=>{let a=0;const l=cB(r,t).map(m=>(a=m.scrollTop,m)).forall(rB),d=()=>{const m=n.contentWindow;oo(m)&&(l?YO(m,"bottom"):!l&&KO&&a!==0&&YO(m,a))};W1&&n.addEventListener("load",d,{once:!0}),r.open(),r.write(t),r.close(),W1||d()})},aB=Cs(KO,W1?500:200).map(e=>eB(XO,e)),lB=(e,t)=>{const o=We(e.getOr(""));return{getValue:n=>o.get(),setValue:(n,r)=>{if(o.get()!==r){const a=n.element,l=()=>at(a,"srcdoc",r);t?aB.fold(I(XO),d=>d.throttle)(a,r,l):l()}o.set(r)}}},iB=(e,t,o)=>{const n="tox-dialog__iframe",r=e.transparent?[]:[`${n}--opaque`],a=e.border?["tox-navobj-bordered"]:[],l={...e.label.map(x=>({title:x})).getOr({}),...o.map(x=>({srcdoc:x})).getOr({}),...e.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},d=lB(o,e.streamContent),m=e.label.map(x=>Tm(x,t)),f=x=>ZO(v.from(a),{uid:x.uid,dom:{tag:"iframe",attributes:l,classes:[n,...r]},behaviours:xe([Sn.config({}),ut.config({}),Eg(o,d.getValue,d.setValue),yc.config({channels:{[w2]:{onReceive:(O,M)=>{M.newFocus.each(A=>{Wr(O.element).each(L=>{(eo(O.element,A)?wn:Hn)(L,"tox-navobj-bordered-focus")})})}}}})])}),w=fo.parts.field({factory:{sketch:f}});return P1(m,w,["tox-form__group--stretched"],[])},uB=e=>new Promise((t,o)=>{const n=()=>{a(),t(e)},r=[cr(e,"load",n),cr(e,"error",()=>{a(),o("Unable to load data from image: "+e.dom.src)})],a=()=>ye(r,l=>l.unbind());e.dom.complete&&n()}),dB=(e,t,o,n,r)=>{const a=o*r,l=n*r,d=Math.max(0,e/2-a/2),m=Math.max(0,t/2-l/2);return{left:d.toString()+"px",top:m.toString()+"px",width:a.toString()+"px",height:l.toString()+"px"}},mB=(e,t,o)=>{const n=Ar(e),r=Zo(e);return Math.min(n/t,r/o,1)},gB=(e,t)=>{const o=We(t.getOr({url:""})),n=po({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:t.map(m=>({src:m.url})).getOr({})}}),r=po({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[n.asSpec()]}),a=(m,f)=>{const w={url:f.url};f.zoom.each(O=>w.zoom=O),f.cachedWidth.each(O=>w.cachedWidth=O),f.cachedHeight.each(O=>w.cachedHeight=O),o.set(w);const x=()=>{const{cachedWidth:O,cachedHeight:M,zoom:A}=w;if(!Mn(O)&&!Mn(M)){if(Mn(A)){const ee=mB(m.element,O,M);w.zoom=ee}const L=dB(Ar(m.element),Zo(m.element),O,M,w.zoom);r.getOpt(m).each(ee=>{Ao(ee.element,L)})}};n.getOpt(m).each(O=>{const M=O.element;f.url!==qo(M,"src")&&(at(M,"src",f.url),Hn(m.element,"tox-imagepreview__loaded")),x(),uB(M).then(A=>{m.getSystem().isConnected()&&(wn(m.element,"tox-imagepreview__loaded"),w.cachedWidth=A.dom.naturalWidth,w.cachedHeight=A.dom.naturalHeight,x())})})},l={};e.height.each(m=>l.height=m);const d=t.map(m=>({url:m.url,zoom:v.from(m.zoom),cachedWidth:v.from(m.cachedWidth),cachedHeight:v.from(m.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:l,attributes:{role:"presentation"}},components:[r.asSpec()],behaviours:xe([Jl.self(),Eg(d,()=>o.get(),a)])}},hB=(e,t)=>{const o="tox-label",n=e.align==="center"?[`${o}--center`]:[],r=e.align==="end"?[`${o}--end`]:[],a={dom:{tag:"label",classes:[o,...n,...r]},components:[Ln(t.providers.translate(e.label))]},l=ue(e.items,t.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[a,...l],behaviours:xe([Jl.self(),bt.config({}),WI(v.none()),Ke.config({mode:"acyclic"})])}},JO=Le("toolbar.button.execute"),pB=e=>Ci((t,o)=>{Xv(e,t)(n=>{je(t,JO,{buttonApi:n}),e.onAction(n)})}),Ag=Le("common-button-display-events"),QO={[bc()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Hc()]:["toolbar-button-events",Ag],[Dl()]:["toolbar-button-events","dropdown-events","tooltipping"],[Ot()]:["focusing","alloy.base.behaviour",Ag]},rC=e=>Ie(e.element,"width",No(e.element,"width")),e_=(e,t,o)=>Gl(e,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:o},t),cC=(e,t)=>e_(e,t,[]),Mm=(e,t)=>e_(e,t,[bt.config({})]),t_=(e,t,o)=>({dom:{tag:"span",classes:[`${t}__select-label`]},components:[Ln(o.translate(e))],behaviours:xe([bt.config({})])}),fl=Le("update-menu-text"),Dg=Le("update-menu-icon"),aC=(e,t,o,n)=>{const r=We(X),a=e.text.map(A=>po(t_(A,t,o.providers))),l=e.icon.map(A=>po(Mm(A,o.providers.icons))),d=(A,L)=>{const ee=Ee.getValue(A);return ut.focus(ee),je(ee,"keydown",{raw:L.event.raw}),pl.close(ee),v.some(!0)},m=e.role.fold(()=>({}),A=>({role:A})),f=e.ariaLabel.fold(()=>({}),A=>({"aria-label":o.providers.translate(A)})),w=Gl("chevron-down",{tag:"div",classes:[`${t}__select-chevron`]},o.providers.icons),x=Le("common-button-display-events"),O="dropdown-events";return po(pl.sketch({...e.uid?{uid:e.uid}:{},...m,dom:{tag:"button",classes:[t,`${t}--select`].concat(ue(e.classes,A=>`${t}--${A}`)),attributes:{...f,...oo(n)?{"data-mce-name":n}:{}}},components:op([l.map(A=>A.asSpec()),a.map(A=>A.asSpec()),v.some(w)]),matchWidth:!0,useMinWidth:!0,onOpen:(A,L,ee)=>{e.searchable&&AR(ee)},dropdownBehaviours:xe([...e.dropdownBehaviours,ql.button(()=>e.disabled||o.providers.isDisabled()),As(),z1.config({}),bt.config({}),...e.tooltip.map(A=>Fr.config(o.providers.tooltips.getConfig({tooltipText:o.providers.translate(A)}))).toArray(),yt(O,[Sm(e,r),xm(e,r)]),yt(x,[cn((A,L)=>rC(A))]),yt("menubutton-update-display-text",[le(fl,(A,L)=>{a.bind(ee=>ee.getOpt(A)).each(ee=>{bt.set(ee,[Ln(o.providers.translate(L.event.text))])})}),le(Dg,(A,L)=>{l.bind(ee=>ee.getOpt(A)).each(ee=>{bt.set(ee,[Mm(L.event.icon,o.providers.icons)])})})])]),eventOrder:Oo(QO,{[Ot()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Hc()]:["toolbar-button-events",Fr.name(),O,x]}),sandboxBehaviours:xe([Ke.config({mode:"special",onLeft:d,onRight:d}),yt("dropdown-sandbox-events",[le(M5,(A,L)=>{kR(A),L.stop()}),le(E5,(A,L)=>{OR(A,L),L.stop()})])]),lazySink:o.getSink,toggleClass:`${t}--active`,parts:{menu:{...zv(!1,e.columns,e.presets),fakeFocus:e.searchable,onHighlightItem:zk,onCollapseMenu:(A,L,ee)=>{to.getHighlighted(ee).each(W=>{zk(A,ee,W)})},onDehighlightItem:ER}},getAnchorOverrides:()=>({maxHeightFunction:(A,L)=>{Tf()(A,L-10)}}),fetch:A=>Pr.nu(go(e.fetch,A))})).asSpec()},fB=e=>Xe(e),o_=e=>e.type==="separator",bB=e=>Ft(e,"getSubmenuItems"),vB={type:"separator"},yB=(e,t)=>{const o=Ut(e,(n,r)=>fB(r)?r===""?n:r==="|"?n.length>0&&!o_(n[n.length-1])?n.concat([vB]):n:Ft(t,r.toLowerCase())?n.concat([t[r.toLowerCase()]]):n:n.concat([r]),[]);return o.length>0&&o_(o[o.length-1])&&o.pop(),o},wB=(e,t)=>{const o=e.getSubmenuItems(),n=n_(o,t),r=Oo(n.menus,{[e.value]:n.items}),a=Oo(n.expansions,{[e.value]:e.value});return{item:e,menus:r,expansions:a}},SB=e=>{const t=He(e,"value").getOrThunk(()=>Le("generated-menu-item"));return Oo({value:t},e)},n_=(e,t)=>{const o=yB(Xe(e)?e.split(" "):e,t);return Jt(o,(n,r)=>{if(bB(r)){const a=SB(r),l=wB(a,t);return{menus:Oo(n.menus,l.menus),items:[l.item,...n.items],expansions:Oo(n.expansions,l.expansions)}}else return{...n,items:[r,...n.items]}},{menus:{},expansions:{},items:[]})},xB=e=>e.search.fold(()=>({searchMode:"no-search"}),t=>({searchMode:"search-with-field",placeholder:t.placeholder})),CB=e=>e.search.fold(()=>({searchMode:"no-search"}),t=>({searchMode:"search-with-results"})),ip=(e,t,o,n)=>{const r=Le("primary-menu"),a=n_(e,o.shared.providers.menuItems());if(a.items.length===0)return v.none();const l=xB(n),d=Zk(r,a.items,t,o,n.isHorizontalMenu,l),m=CB(n),f=yo(a.menus,(x,O)=>Zk(O,x,t,o,!1,m)),w=Oo(f,ve(r,d));return v.from(fg.tieredData(r,w,a.expansions))},lC=e=>!Ft(e,"items"),s_="data-value",r_=(e,t,o,n)=>ue(o,r=>lC(r)?{type:"togglemenuitem",text:r.text,value:r.value,active:r.value===n,onAction:()=>{Ee.setValue(e,r.value),je(e,ba,{name:t}),ut.focus(e)}}:{type:"nestedmenuitem",text:r.text,getSubmenuItems:()=>r_(e,t,r.items,n)}),iC=(e,t)=>Vn(e,o=>lC(o)?Cs(o.value===t,o):iC(o.items,t)),TB=(e,t,o)=>{const n=t.shared.providers,r=o.bind(m=>iC(e.items,m)).orThunk(()=>bn(e.items).filter(lC)),a=e.label.map(m=>Tm(m,n)),l=fo.parts.field({dom:{},factory:{sketch:m=>aC({uid:m.uid,text:r.map(f=>f.text),icon:v.none(),tooltip:v.none(),role:v.none(),ariaLabel:e.label,fetch:(f,w)=>{const x=r_(f,e.name,e.items,Ee.getValue(f));w(ip(x,Ii.CLOSE_ON_EXECUTE,t,{isHorizontalMenu:!1,search:v.none()}))},onSetup:I(X),getApi:I({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Sn.config({}),Eg(r.map(f=>f.value),f=>qo(f.element,s_),(f,w)=>{iC(e.items,w).each(x=>{at(f.element,s_,x.value),je(f,fl,{text:x.text})})})]},"tox-listbox",t.shared)}}),d={dom:{tag:"div",classes:["tox-listboxfield"]},components:[l]};return fo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Rt([a.toArray(),[d]]),fieldBehaviours:xe([rt.config({disabled:I(!e.enabled),onDisabled:m=>{fo.getField(m).each(rt.disable)},onEnabled:m=>{fo.getField(m).each(rt.enable)}})])})},kB=(e,t)=>({dom:{tag:"div",classes:e.classes},components:ue(e.items,t.shared.interpreter)}),OB=(e,t)=>{const o=ue(e.options,r=>({dom:{tag:"option",value:r.value,innerHtml:r.text}})),n=e.data.map(r=>ve("initialValue",r)).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:o,behaviours:Ws(e.selectBehaviours,[ut.config({}),Ee.config({store:{mode:"manual",getValue:r=>Ti(r.element),setValue:(r,a)=>{const l=bn(e.options);Qt(e.options,m=>m.value===a).isSome()?Ll(r.element,a):r.element.dom.selectedIndex===-1&&a===""&&l.each(m=>Ll(r.element,m.value))},...n}})])}},_B=ar({name:"HtmlSelect",configFields:[me("options"),Es("selectBehaviours",[ut,Ee]),J("selectClasses",[]),J("selectAttributes",{}),no("data")],factory:OB}),MB=(e,t,o)=>{const n=ue(e.items,m=>({text:t.translate(m.text),value:m.value})),r=e.label.map(m=>Tm(m,t)),a=fo.parts.field({dom:{},...o.map(m=>({data:m})).getOr({}),selectAttributes:{size:e.size},options:n,factory:_B,selectBehaviours:xe([rt.config({disabled:()=>!e.enabled||t.isDisabled()}),Sn.config({}),yt("selectbox-change",[le(Da(),(m,f)=>{je(m,ba,{name:e.name})})])])}),l=e.size>1?v.none():v.some(Gl("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},t.icons)),d={dom:{tag:"div",classes:["tox-selectfield"]},components:Rt([[a],l.toArray()])};return fo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Rt([r.toArray(),[d]]),fieldBehaviours:xe([rt.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:m=>{fo.getField(m).each(rt.disable)},onEnabled:m=>{fo.getField(m).each(rt.enable)}}),As()])})},EB=I([J("field1Name","field1"),J("field2Name","field2"),Qu("onLockedChange"),Ra(["lockClass"]),J("locked",!1),Fa.field("coupledFieldBehaviours",[It,Ee])]),AB=(e,t,o)=>_o(e,t,o).bind(It.getCurrent),c_=(e,t)=>wr({factory:fo,name:e,overrides:o=>({fieldBehaviours:xe([yt("coupled-input-behaviour",[le(Zu(),n=>{AB(n,o,t).each(r=>{_o(n,o,"lock").each(a=>{_t.isOn(a)&&o.onLockedChange(n,r,a)})})})])])})}),DB=I([c_("field1","field2"),c_("field2","field1"),wr({factory:xr,schema:[me("dom")],name:"lock",overrides:e=>({buttonBehaviours:xe([_t.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])})})]),$B=(e,t,o,n)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Fa.augment(e.coupledFieldBehaviours,[It.config({find:v.some}),Ee.config({store:{mode:"manual",getValue:r=>{const a=n1(r,e,["field1","field2"]);return{[e.field1Name]:Ee.getValue(a.field1()),[e.field2Name]:Ee.getValue(a.field2())}},setValue:(r,a)=>{const l=n1(r,e,["field1","field2"]);Cn(a,e.field1Name)&&Ee.setValue(l.field1(),a[e.field1Name]),Cn(a,e.field2Name)&&Ee.setValue(l.field2(),a[e.field2Name])}}})]),apis:{getField1:r=>_o(r,e,"field1"),getField2:r=>_o(r,e,"field2"),getLock:r=>_o(r,e,"lock")}}),Ua=Lr({name:"FormCoupledInputs",configFields:EB(),partFields:DB(),factory:$B,apis:{getField1:(e,t)=>e.getField1(t),getField2:(e,t)=>e.getField2(t),getLock:(e,t)=>e.getLock(t)}}),RB=e=>{const t={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},o=r=>r in t?t[r]:1;let n=e.value.toFixed(o(e.unit));return n.indexOf(".")!==-1&&(n=n.replace(/\.?0*$/,"")),n+e.unit},uC=e=>{const o=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(o!==null){const n=parseFloat(o[1]),r=o[2];return St.value({value:n,unit:r})}else return St.error(e)},a_=(e,t)=>{const o={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},n=r=>Ft(o,r);return e.unit===t?v.some(e.value):n(e.unit)&&n(t)?o[e.unit]===o[t]?v.some(e.value):v.some(e.value/o[e.unit]*o[t]):v.none()},dC=e=>v.none(),HB=(e,t)=>o=>a_(o,t).map(n=>({value:n*e,unit:t})),IB=(e,t)=>{const o=uC(e).toOptional(),n=uC(t).toOptional();return Ks(o,n,(r,a)=>a_(r,a.unit).map(l=>a.value/l).map(l=>HB(l,a.unit)).getOr(dC)).getOr(dC)},BB=(e,t)=>{let o=dC;const n=Le("ratio-event"),r=M=>Gl(M,{tag:"span",classes:["tox-icon","tox-lock-icon__"+M]},t.icons),a=e.label.getOr("Constrain proportions"),l=t.translate(a),d=Ua.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":l,"data-mce-name":a}},components:[r("lock"),r("unlock")],buttonBehaviours:xe([rt.config({disabled:()=>!e.enabled||t.isDisabled()}),As(),Sn.config({}),Fr.config(t.tooltips.getConfig({tooltipText:l}))])}),m=M=>({dom:{tag:"div",classes:["tox-form__group"]},components:M}),f=M=>fo.parts.field({factory:yg,inputClasses:["tox-textfield"],inputBehaviours:xe([rt.config({disabled:()=>!e.enabled||t.isDisabled()}),As(),Sn.config({}),yt("size-input-events",[le(Wc(),(A,L)=>{je(A,n,{isField1:M})}),le(Da(),(A,L)=>{je(A,ba,{name:e.name})})])]),selectOnFocus:!1}),w=M=>({dom:{tag:"label",classes:["tox-label"]},components:[Ln(t.translate(M))]}),x=Ua.parts.field1(m([fo.parts.label(w("Width")),f(!0)])),O=Ua.parts.field2(m([fo.parts.label(w("Height")),f(!1)]));return Ua.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[x,O,m([w(f0),d])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(M,A,L)=>{uC(Ee.getValue(M)).each(ee=>{o(ee).each(W=>{Ee.setValue(A,RB(W))})})},coupledFieldBehaviours:xe([rt.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:M=>{Ua.getField1(M).bind(fo.getField).each(rt.disable),Ua.getField2(M).bind(fo.getField).each(rt.disable),Ua.getLock(M).each(rt.disable)},onEnabled:M=>{Ua.getField1(M).bind(fo.getField).each(rt.enable),Ua.getField2(M).bind(fo.getField).each(rt.enable),Ua.getLock(M).each(rt.enable)}}),As(),yt("size-input-events2",[le(n,(M,A)=>{const L=A.event.isField1,ee=L?Ua.getField1(M):Ua.getField2(M),W=L?Ua.getField2(M):Ua.getField1(M),Y=ee.map(Ee.getValue).getOr(""),j=W.map(Ee.getValue).getOr("");o=IB(Y,j)})])])})},LB=(e,t,o)=>{const n=Xl.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ln(t.translate(e.label))]}),r=Xl.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),a=Xl.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Xl.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:e.min,maxX:e.max,getInitialValue:I(o.getOrThunk(()=>(Math.abs(e.max)-Math.abs(e.min))/2))},components:[n,r,a],sliderBehaviours:xe([Jl.self(),ut.config({})]),onChoose:(l,d,m)=>{je(l,ba,{name:e.name,value:m})}})},FB=(e,t)=>{const o=d=>({dom:{tag:"th",innerHtml:t.translate(d)}}),n=d=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:ue(d,o)}]}),r=d=>({dom:{tag:"td",innerHtml:t.translate(d)}}),a=d=>({dom:{tag:"tr"},components:ue(d,r)}),l=d=>({dom:{tag:"tbody"},components:ue(d,a)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[n(e.header),l(e.cells)],behaviours:xe([Sn.config({}),ut.config({})])}},l_=(e,t)=>{const o=e.label.map(M=>Tm(M,t)),n=[rt.config({disabled:()=>e.disabled||t.isDisabled()}),As(),Ke.config({mode:"execution",useEnter:e.multiline!==!0,useControlEnter:e.multiline===!0,execute:M=>(Pt(M,N1),v.some(!0))}),yt("textfield-change",[le(Zu(),(M,A)=>{je(M,ba,{name:e.name})}),le(qg(),(M,A)=>{je(M,ba,{name:e.name})})]),Sn.config({})],r=e.validation.map(M=>fu.config({getRoot:A=>Wr(A.element),invalidClass:"tox-invalid",validator:{validate:A=>{const L=Ee.getValue(A),ee=M.validator(L);return Pr.pure(ee===!0?St.value(L):St.error(ee))},validateOnLoad:M.validateOnLoad}})).toArray(),a=e.placeholder.fold(I({}),M=>({placeholder:t.translate(M)})),l=e.inputMode.fold(I({}),M=>({inputmode:M})),d={...a,...l},m=fo.parts.field({tag:e.multiline===!0?"textarea":"input",...e.data.map(M=>({data:M})).getOr({}),inputAttributes:d,inputClasses:[e.classname],inputBehaviours:xe(Rt([n,r])),selectOnFocus:!1,factory:yg}),f=e.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[m]}:m,x=(e.flex?["tox-form__group--stretched"]:[]).concat(e.maximized?["tox-form-group--maximize"]:[]),O=[rt.config({disabled:()=>e.disabled||t.isDisabled(),onDisabled:M=>{fo.getField(M).each(rt.disable)},onEnabled:M=>{fo.getField(M).each(rt.enable)}}),As()];return P1(o,f,x,O)},PB=(e,t,o)=>l_({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:!e.enabled,classname:"tox-textfield",validation:v.none(),maximized:e.maximized,data:o},t),VB=(e,t,o)=>l_({name:e.name,multiline:!0,label:e.label,inputMode:v.none(),placeholder:e.placeholder,flex:!0,disabled:!e.enabled,classname:"tox-textarea",validation:v.none(),maximized:e.maximized,data:o},t),G1=(e,t)=>t.getAnimationRoot.fold(()=>e.element,o=>o(e)),gd=e=>e.dimension.property,$g=(e,t)=>e.dimension.getDimension(t),S2=(e,t)=>{const o=G1(e,t);$a(o,[t.shrinkingClass,t.growingClass])},mC=(e,t)=>{Hn(e.element,t.openClass),wn(e.element,t.closedClass),Ie(e.element,gd(t),"0px"),Is(e.element)},gC=(e,t)=>{Hn(e.element,t.closedClass),wn(e.element,t.openClass),jt(e.element,gd(t))},i_=(e,t,o,n)=>{o.setCollapsed(),Ie(e.element,gd(t),$g(t,e.element)),S2(e,t),mC(e,t),t.onStartShrink(e),t.onShrunk(e)},NB=(e,t,o,n)=>{const r=n.getOrThunk(()=>$g(t,e.element));o.setCollapsed(),Ie(e.element,gd(t),r),Is(e.element);const a=G1(e,t);Hn(a,t.growingClass),wn(a,t.shrinkingClass),mC(e,t),t.onStartShrink(e)},u_=(e,t,o)=>{const n=$g(t,e.element);(n==="0px"?i_:NB)(e,t,o,v.some(n))},d_=(e,t,o)=>{const n=G1(e,t),r=vc(n,t.shrinkingClass),a=$g(t,e.element);gC(e,t);const l=$g(t,e.element);(r?()=>{Ie(e.element,gd(t),a),Is(e.element)}:()=>{mC(e,t)})(),Hn(n,t.shrinkingClass),wn(n,t.growingClass),gC(e,t),Ie(e.element,gd(t),l),o.setExpanded(),t.onStartGrow(e)},zB=(e,t,o)=>{if(o.isExpanded()){jt(e.element,gd(t));const n=$g(t,e.element);Ie(e.element,gd(t),n)}},ZB=(e,t,o)=>{o.isExpanded()||d_(e,t,o)},UB=(e,t,o)=>{o.isExpanded()&&u_(e,t,o)},WB=(e,t,o)=>{o.isExpanded()&&i_(e,t,o)},GB=(e,t,o)=>o.isExpanded(),jB=(e,t,o)=>o.isCollapsed(),m_=(e,t,o)=>{const n=G1(e,t);return vc(n,t.growingClass)===!0},g_=(e,t,o)=>{const n=G1(e,t);return vc(n,t.shrinkingClass)===!0};var qB=Object.freeze({__proto__:null,refresh:zB,grow:ZB,shrink:UB,immediateShrink:WB,hasGrown:GB,hasShrunk:jB,isGrowing:m_,isShrinking:g_,isTransitioning:(e,t,o)=>m_(e,t)||g_(e,t),toggleGrow:(e,t,o)=>{(o.isExpanded()?u_:d_)(e,t,o)},disableTransitions:S2,immediateGrow:(e,t,o)=>{o.isExpanded()||(gC(e,t),Ie(e.element,gd(t),$g(t,e.element)),S2(e,t),o.setExpanded(),t.onStartGrow(e),t.onGrown(e))}}),KB=Object.freeze({__proto__:null,exhibit:(e,t,o)=>{const n=t.expanded;return ia(n?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:ve(t.dimension.property,"0px")})},events:(e,t)=>Lo([Wd(Wm(),(o,n)=>{n.event.raw.propertyName===e.dimension.property&&(S2(o,e),t.isExpanded()&&jt(o.element,e.dimension.property),(t.isExpanded()?e.onGrown:e.onShrunk)(o))})])}),YB=[me("closedClass"),me("openClass"),me("shrinkingClass"),me("growingClass"),no("getAnimationRoot"),Zt("onShrunk"),Zt("onStartShrink"),Zt("onGrown"),Zt("onStartGrow"),J("expanded",!1),gc("dimension",Jr("property",{width:[Xo("property","width"),Xo("getDimension",e=>Ar(e)+"px")],height:[Xo("property","height"),Xo("getDimension",e=>Zo(e)+"px")]}))],XB=Object.freeze({__proto__:null,init:e=>{const t=We(e.expanded),o=()=>"expanded: "+t.get();return Gc({isExpanded:()=>t.get()===!0,isCollapsed:()=>t.get()===!1,setCollapsed:go(t.set,!1),setExpanded:go(t.set,!0),readState:o})}});const va=Us({fields:YB,name:"sliding",active:KB,apis:qB,state:XB}),h_=e=>({isEnabled:()=>!rt.isDisabled(e),setEnabled:t=>rt.set(e,!t),setActive:t=>{const o=e.element;t?(wn(o,"tox-tbtn--enabled"),at(o,"aria-pressed",!0)):(Hn(o,"tox-tbtn--enabled"),B(o,"aria-pressed"))},isActive:()=>vc(e.element,"tox-tbtn--enabled"),setText:t=>{je(e,fl,{text:t})},setIcon:t=>je(e,Dg,{icon:t})}),j1=(e,t,o,n,r=!0,a)=>aC({text:e.text,icon:e.icon,tooltip:e.tooltip,ariaLabel:e.tooltip,searchable:e.search.isSome(),role:n,fetch:(l,d)=>{const m={pattern:e.search.isSome()?DR(l):""};e.fetch(f=>{d(ip(f,Ii.CLOSE_ON_EXECUTE,o,{isHorizontalMenu:!1,search:e.search}))},m,h_(l))},onSetup:e.onSetup,getApi:h_,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...r?[Sn.config({})]:[]]},t,o.shared,a),JB=(e,t,o)=>{const n=a=>l=>{const d=!l.isActive();l.setActive(d),a.storage.set(d),o.shared.getSink().each(m=>{t().getOpt(m).each(f=>{da(f.element),je(f,pu,{name:a.name,value:a.storage.get()})})})},r=a=>l=>{l.setActive(a.storage.get())};return a=>{a(ue(e,l=>{const d=l.text.fold(()=>({}),m=>({text:m}));return{type:l.type,active:!1,...d,onAction:n(l),onSetup:r(l)}}))}},p_=e=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":e}},components:[Ln(e)]}),f_=Le("leaf-label-event-id"),hC=({leaf:e,onLeafAction:t,visible:o,treeId:n,selectedId:r,backstage:a})=>{const l=e.menu.map(m=>j1(m,"tox-mbtn",a,v.none(),o)),d=[p_(e.title)];return l.each(m=>d.push(m)),xr.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(o?["tox-tree--leaf__label--visible"]:[])},components:d,role:"treeitem",action:m=>{t(e.id),m.getSystem().broadcastOn([`update-active-item-${n}`],{value:e.id})},eventOrder:{[tc()]:[f_,"keying"]},buttonBehaviours:xe([...o?[Sn.config({})]:[],_t.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),yc.config({channels:{[`update-active-item-${n}`]:{onReceive:(m,f)=>{(f.value===e.id?_t.on:_t.off)(m)}}}}),yt(f_,[cn((m,f)=>{r.each(w=>{(w===e.id?_t.on:_t.off)(m)})}),le(tc(),(m,f)=>{const w=f.event.raw.code==="ArrowLeft",x=f.event.raw.code==="ArrowRight";w?(_i(m.element,".tox-tree--directory").each(O=>{m.getSystem().getByDom(O).each(M=>{ef(O,".tox-tree--directory__label").each(A=>{M.getSystem().getByDom(A).each(ut.focus)})})}),f.stop()):x&&f.stop()})])])})},QB=(e,t,o)=>Gl(e,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:o},t),eL=(e,t)=>QB(e,t,[]),b_=Le("directory-label-event-id"),tL=({directory:e,visible:t,noChildren:o,backstage:n})=>{const r=e.menu.map(d=>j1(d,"tox-mbtn",n,v.none())),a=[{dom:{tag:"div",classes:["tox-chevron"]},components:[eL("chevron-right",n.shared.providers.icons)]},p_(e.title)];r.each(d=>{a.push(d)});const l=d=>{_i(d.element,".tox-tree--directory").each(m=>{d.getSystem().getByDom(m).each(f=>{const w=!_t.isOn(f);_t.toggle(f),je(d,"expand-tree-node",{expanded:w,node:e.id})})})};return xr.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(t?["tox-tree--directory__label--visible"]:[])},components:a,action:l,eventOrder:{[tc()]:[b_,"keying"]},buttonBehaviours:xe([...t?[Sn.config({})]:[],yt(b_,[le(tc(),(d,m)=>{const f=m.event.raw.code==="ArrowRight",w=m.event.raw.code==="ArrowLeft";f&&o&&m.stop(),(f||w)&&_i(d.element,".tox-tree--directory").each(x=>{d.getSystem().getByDom(x).each(O=>{!_t.isOn(O)&&f||_t.isOn(O)&&w?(l(d),m.stop()):w&&!_t.isOn(O)&&(_i(O.element,".tox-tree--directory").each(M=>{ef(M,".tox-tree--directory__label").each(A=>{O.getSystem().getByDom(A).each(ut.focus)})}),m.stop())})})})])])})},oL=({children:e,onLeafAction:t,visible:o,treeId:n,expandedIds:r,selectedId:a,backstage:l})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:e.map(d=>d.type==="leaf"?hC({leaf:d,selectedId:a,onLeafAction:t,visible:o,treeId:n,backstage:l}):pC({directory:d,expandedIds:r,selectedId:a,onLeafAction:t,labelTabstopping:o,treeId:n,backstage:l})),behaviours:xe([va.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:o}),bt.config({})])}),nL=Le("directory-event-id"),pC=({directory:e,onLeafAction:t,labelTabstopping:o,treeId:n,backstage:r,expandedIds:a,selectedId:l})=>{const{children:d}=e,m=We(a),f=x=>d.map(O=>O.type==="leaf"?hC({leaf:O,selectedId:l,onLeafAction:t,visible:x,treeId:n,backstage:r}):pC({directory:O,expandedIds:m.get(),selectedId:l,onLeafAction:t,labelTabstopping:x,treeId:n,backstage:r})),w=a.includes(e.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[tL({directory:e,visible:o,noChildren:e.children.length===0,backstage:r}),oL({children:d,expandedIds:a,selectedId:l,onLeafAction:t,visible:w,treeId:n,backstage:r})],behaviours:xe([yt(nL,[cn((x,O)=>{_t.set(x,w)}),le("expand-tree-node",(x,O)=>{const{expanded:M,node:A}=O.event;m.set(M?[...m.get(),A]:m.get().filter(L=>L!==A))})]),_t.config({...e.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(x,O)=>{const M=x.components()[1],A=f(O);O?va.grow(M):va.shrink(M),bt.set(M,A)}})])}},sL=Le("tree-event-id"),rL=(e,t)=>{const o=e.onLeafAction.getOr(X),n=e.onToggleExpand.getOr(X),r=e.defaultExpandedIds,a=We(r),l=We(e.defaultSelectedId),d=Le("tree-id"),m=(f,w)=>e.items.map(x=>x.type==="leaf"?hC({leaf:x,selectedId:f,onLeafAction:o,visible:!0,treeId:d,backstage:t}):pC({directory:x,selectedId:f,onLeafAction:o,expandedIds:w,labelTabstopping:!0,treeId:d,backstage:t}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:m(l.get(),a.get()),behaviours:xe([Ke.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),yt(sL,[le("expand-tree-node",(f,w)=>{const{expanded:x,node:O}=w.event;a.set(x?[...a.get(),O]:a.get().filter(M=>M!==O)),n(a.get(),{expanded:x,node:O})})]),yc.config({channels:{[`update-active-item-${d}`]:{onReceive:(f,w)=>{l.set(v.some(w.value)),bt.set(f,m(v.some(w.value),a.get()))}}}}),bt.config({})])}};var cL=Object.freeze({__proto__:null,events:(e,t)=>{const n=e.stream.streams.setup(e,t);return Lo([le(e.event,n),Il(()=>t.cancel())].concat(e.cancelEvent.map(r=>[le(r,()=>t.cancel())]).getOr([])))}});const v_=e=>{const t=We(null);return Gc({readState:()=>({timer:t.get()!==null?"set":"unset"}),setTimer:a=>{t.set(a)},cancel:()=>{const a=t.get();a!==null&&a.cancel()}})};var aL=Object.freeze({__proto__:null,throttle:v_,init:e=>e.stream.streams.state(e)});const lL=(e,t)=>{const o=e.stream,n=tC(e.onStream,o.delay);return t.setTimer(n),(r,a)=>{n.throttle(r,a),o.stopEvent&&a.stop()}};var iL=[gc("stream",Jr("mode",{throttle:[me("delay"),J("stopEvent",!0),Xo("streams",{setup:lL,state:v_})]})),J("event","input"),no("cancelEvent"),Qu("onStream")];const fC=Us({fields:iL,name:"streaming",active:cL,state:aL}),x2=(e,t,o)=>{const n=Ee.getValue(o);Ee.setValue(t,n),w_(t)},y_=(e,t)=>{const o=e.element,n=Ti(o),r=o.dom;qo(o,"type")!=="number"&&t(r,n)},w_=e=>{y_(e,(t,o)=>t.setSelectionRange(o.length,o.length))},uL=(e,t)=>{y_(e,(o,n)=>o.setSelectionRange(t,n.length))},dL=(e,t,o)=>{if(e.selectsOver){const n=Ee.getValue(t),r=e.getDisplayText(n),a=Ee.getValue(o);return e.getDisplayText(a).indexOf(r)===0?v.some(()=>{x2(e,t,o),uL(t,r.length)}):v.none()}else return v.none()},bC=I("alloy.typeahead.itemexecute"),mL=(e,t,o,n)=>{const r=(x,O,M)=>{e.previewing.set(!1);const A=Fn.getCoupled(x,"sandbox");if(Vt.isOpen(A))It.getCurrent(A).each(L=>{to.getHighlighted(L).fold(()=>{M(L)},()=>{ab(A,L.element,"keydown",O)})});else{const L=ee=>{It.getCurrent(ee).each(M)};n2(e,l(x),x,A,n,L,Lc.HighlightMenuAndItem).get(X)}},a=O5(e),l=x=>O=>O.map(M=>{const A=uc(M.menus),L=uo(A,W=>Ct(W.items,Y=>Y.type==="item"));return Ee.getState(x).update(ue(L,W=>W.data)),M}),d=x=>It.getCurrent(x),m="typeaheadevents",f=[ut.config({}),Ee.config({onSetValue:e.onSetValue,store:{mode:"dataset",getDataKey:x=>Ti(x.element),getFallbackEntry:x=>({value:x,meta:{}}),setValue:(x,O)=>{Ll(x.element,e.model.getDisplayText(O))},...e.initialData.map(x=>ve("initialValue",x)).getOr({})}}),fC.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:(x,O)=>{const M=Fn.getCoupled(x,"sandbox");if(ut.isFocused(x)&&Ti(x.element).length>=e.minChars){const L=d(M).bind(W=>to.getHighlighted(W).map(Ee.getValue));e.previewing.set(!0);const ee=W=>{d(M).each(Y=>{L.fold(()=>{e.model.selectsOver&&to.highlightFirst(Y)},j=>{to.highlightBy(Y,de=>Ee.getValue(de).value===j.value),to.getHighlighted(Y).orThunk(()=>(to.highlightFirst(Y),v.none()))})})};n2(e,l(x),x,M,n,ee,Lc.HighlightJustMenu).get(X)}},cancelEvent:Yg()}),Ke.config({mode:"special",onDown:(x,O)=>(r(x,O,to.highlightFirst),v.some(!0)),onEscape:x=>{const O=Fn.getCoupled(x,"sandbox");return Vt.isOpen(O)?(Vt.close(O),v.some(!0)):v.none()},onUp:(x,O)=>(r(x,O,to.highlightLast),v.some(!0)),onEnter:x=>{const O=Fn.getCoupled(x,"sandbox"),M=Vt.isOpen(O);if(M&&!e.previewing.get())return d(O).bind(A=>to.getHighlighted(A)).map(A=>(je(x,bC(),{item:A}),!0));{const A=Ee.getValue(x);return Pt(x,Yg()),e.onExecute(O,x,A),M&&Vt.close(O),v.some(!0)}}}),_t.config({toggleClass:e.markers.openClass,aria:{mode:"expanded"}}),Fn.config({others:{sandbox:x=>I4(e,x,{onOpen:()=>_t.on(x),onClose:()=>{e.lazyTypeaheadComp.get().each(O=>B(O.element,"aria-activedescendant")),_t.off(x)}})}}),yt(m,[cn(x=>{e.lazyTypeaheadComp.set(v.some(x))}),Il(x=>{e.lazyTypeaheadComp.set(v.none())}),Ci(x=>{const O=X;H4(e,l(x),x,n,O,Lc.HighlightMenuAndItem).get(X)}),le(bC(),(x,O)=>{const M=Fn.getCoupled(x,"sandbox");x2(e.model,x,O.event.item),Pt(x,Yg()),e.onItemExecute(x,M,O.event.item,Ee.getValue(x)),Vt.close(M),w_(x)})].concat(e.dismissOnBlur?[le(Uu(),x=>{const O=Fn.getCoupled(x,"sandbox");rr(O.element).isNone()&&Vt.close(O)})]:[]))],w={[Dl()]:[Ee.name(),fC.name(),m],...e.eventOrder};return{uid:e.uid,dom:_5(Oo(e,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...a,...Ws(e.typeaheadBehaviours,f)},eventOrder:w}},gL=I([no("lazySink"),me("fetch"),J("minChars",5),J("responseTime",1e3),Zt("onOpen"),J("getHotspot",v.some),J("getAnchorOverrides",I({})),J("layouts",v.none()),J("eventOrder",{}),Vd("model",{},[J("getDisplayText",e=>e.meta!==void 0&&e.meta.text!==void 0?e.meta.text:e.value),J("selectsOver",!0),J("populateFromBrowse",!0)]),Zt("onSetValue"),Ic("onExecute"),Zt("onItemExecute"),J("inputClasses",[]),J("inputAttributes",{}),J("inputStyles",{}),J("matchWidth",!0),J("useMinWidth",!1),J("dismissOnBlur",!0),Ra(["openClass"]),no("initialData"),Es("typeaheadBehaviours",[ut,Ee,fC,Ke,_t,Fn]),tr("lazyTypeaheadComp",()=>We(v.none)),tr("previewing",()=>We(!0))].concat(k5()).concat(B4())),hL=I([Pa({schema:[cf()],name:"menu",overrides:e=>({fakeFocus:!0,onHighlightItem:(t,o,n)=>{e.previewing.get()?e.lazyTypeaheadComp.get().each(r=>{dL(e.model,r,n).fold(()=>{e.model.selectsOver?(to.dehighlight(o,n),e.previewing.set(!0)):e.previewing.set(!1)},a=>{a(),e.previewing.set(!1)})}):e.lazyTypeaheadComp.get().each(r=>{e.model.populateFromBrowse&&x2(e.model,r,n),C(n.element,"id").each(a=>at(r.element,"aria-activedescendant",a))})},onExecute:(t,o)=>e.lazyTypeaheadComp.get().map(n=>(je(n,bC(),{item:o}),!0)),onHover:(t,o)=>{e.previewing.set(!1),e.lazyTypeaheadComp.get().each(n=>{e.model.populateFromBrowse&&x2(e.model,n,o)})}})})]),pL=Lr({name:"Typeahead",configFields:gL(),partFields:hL(),factory:mL}),Ql=e=>({...e,toCached:()=>Ql(e.toCached()),bindFuture:m=>Ql(e.bind(f=>f.fold(w=>Pr.pure(St.error(w)),w=>m(w)))),bindResult:m=>Ql(e.map(f=>f.bind(m))),mapResult:m=>Ql(e.map(f=>f.map(m))),mapError:m=>Ql(e.map(f=>f.mapError(m))),foldResult:(m,f)=>e.map(w=>w.fold(m,f)),withTimeout:(m,f)=>Ql(Pr.nu(w=>{let x=!1;const O=setTimeout(()=>{x=!0,w(St.error(f()))},m);e.get(M=>{x||(clearTimeout(O),w(M))})}))}),S_=e=>Ql(Pr.nu(e)),x_=e=>Ql(Pr.pure(St.value(e))),fL={nu:S_,wrap:Ql,pure:x_,value:x_,error:e=>Ql(Pr.pure(St.error(e))),fromResult:e=>Ql(Pr.pure(e)),fromFuture:e=>Ql(e.map(St.value)),fromPromise:e=>S_(t=>{e.then(o=>{t(St.value(o))},o=>{t(St.error(o))})})},C2=(e,t,o=[],n,r,a,l)=>{const d=t.fold(()=>({}),w=>({action:w})),m={buttonBehaviours:xe([ql.button(()=>!e.enabled||l.isDisabled()),As(),Sn.config({}),...a.map(w=>Fr.config(l.tooltips.getConfig({tooltipText:l.translate(w)}))).toArray(),yt("button press",[Ip("click"),Ip("mousedown")])].concat(o)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...d},f=Oo(m,{dom:n});return Oo(f,{components:r})},bL=(e,t,o,n=[],r)=>{const a=e.tooltip.map(f=>({"aria-label":o.translate(f)})).getOr({}),l={tag:"button",classes:["tox-tbtn"],attributes:{...a,"data-mce-name":r}},d=e.icon.map(f=>cC(f,o.icons)),m=op([d]);return C2(e,t,n,l,m,e.tooltip,o)},vC=e=>{switch(e){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},C_=(e,t,o,n=[],r=[])=>{const a=o.translate(e.text),l=e.icon.map(M=>cC(M,o.icons)),d=[l.getOrThunk(()=>Ln(a))],m=e.buttonType.getOr(!e.primary&&!e.borderless?"secondary":"primary"),x={tag:"button",classes:[...vC(m),...l.isSome()?["tox-button--icon"]:[],...e.borderless?["tox-button--naked"]:[],...r],attributes:{"aria-label":a,"data-mce-name":e.text}},O=e.icon.map(I(a));return C2(e,t,n,x,d,O,o)},T_=(e,t,o,n=[],r=[])=>{const a=C_(e,v.some(t),o,n,r);return xr.sketch(a)},k_=(e,t)=>o=>{t==="custom"?je(o,pu,{name:e,value:{}}):t==="submit"?Pt(o,N1):t==="cancel"?Pt(o,km):console.error("Unknown button type: ",t)},vL=(e,t)=>t==="menu",yL=(e,t)=>t==="custom"||t==="cancel"||t==="submit",wL=(e,t)=>t==="togglebutton",SL=(e,t,o)=>{var n,r;const a=e.icon.map(j=>Mm(j,t.icons)).map(po),l=j=>{je(j,pu,{name:e.name,value:{setIcon:de=>{a.map(ie=>ie.getOpt(j).each(he=>{bt.set(he,[Mm(de,t.icons)])}))}}})},d=e.buttonType.getOr(e.primary?"primary":"secondary"),m={...e,name:(n=e.name)!==null&&n!==void 0?n:"",primary:d==="primary",tooltip:e.tooltip,enabled:(r=e.enabled)!==null&&r!==void 0?r:!1,borderless:!1},f=m.tooltip.or(e.text).map(j=>({"aria-label":t.translate(j)})).getOr({}),w=vC(d??"secondary"),x=e.icon.isSome()&&e.text.isSome(),O={tag:"button",classes:[...w.concat(e.icon.isSome()?["tox-button--icon"]:[]),...e.active?["tox-button--enabled"]:[],...x?["tox-button--icon-and-text"]:[]],attributes:{...f,...oo(o)?{"data-mce-name":o}:{}}},M=[],A=t.translate(e.text.getOr("")),L=Ln(A),W=[...op([a.map(j=>j.asSpec())]),...e.text.isSome()?[L]:[]],Y=C2(m,v.some(l),M,O,W,e.tooltip,t);return xr.sketch(Y)},T2=(e,t,o)=>{if(vL(e,t)){const n=()=>l,r=e,a={...e,type:"menubutton",search:v.none(),onSetup:d=>(d.setEnabled(e.enabled),X),fetch:JB(r.items,n,o)},l=po(j1(a,"tox-tbtn",o,v.none(),!0,e.text.or(e.tooltip).getOrUndefined()));return l.asSpec()}else if(yL(e,t)){const n=k_(e.name,t),r={...e,borderless:!1};return T_(r,n,o.shared.providers,[])}else{if(wL(e,t))return SL(e,o.shared.providers,e.text.or(e.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",t),new Error("Unknown footer button type")}},xL=(e,t)=>{const o=k_(e.name,"custom");return cH(v.none(),fo.parts.field({factory:xr,...C_(e,v.some(o),t,[v2(""),Jl.self()])}))},CL={type:"separator"},TL=e=>({type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:X}),yC=(e,t)=>({type:"menuitem",value:t,text:e,meta:{attach:void 0},onAction:X}),kL=e=>ue(e,TL),OL=(e,t)=>Ct(t,o=>o.type===e),O_=(e,t)=>kL(OL(e,t)),_L=e=>O_("header",e.targets),ML=e=>O_("anchor",e.targets),EL=e=>v.from(e.anchorTop).map(t=>yC("<top>",t)).toArray(),AL=e=>v.from(e.anchorBottom).map(t=>yC("<bottom>",t)).toArray(),DL=e=>ue(e,t=>yC(t,t)),$L=e=>Ut(e,(t,o)=>t.length===0||o.length===0?t.concat(o):t.concat(CL,o),[]),wC=(e,t)=>{const o=e.toLowerCase();return Ct(t,n=>{var r;const a=n.meta!==void 0&&n.meta.text!==void 0?n.meta.text:n.text,l=(r=n.value)!==null&&r!==void 0?r:"";return mn(a.toLowerCase(),o)||mn(l.toLowerCase(),o)})},RL=(e,t,o)=>{var n,r;const a=Ee.getValue(t),l=(r=(n=a==null?void 0:a.meta)===null||n===void 0?void 0:n.text)!==null&&r!==void 0?r:a.value;return o.getLinkInformation().fold(()=>[],m=>{const f=wC(l,DL(o.getHistory(e)));return e==="file"?$L([f,wC(l,_L(m)),wC(l,Rt([EL(m),ML(m),AL(m)]))]):f})},__=Le("aria-invalid"),HL=(e,t,o,n)=>{const r=t.shared.providers,a=Y=>{const j=Ee.getValue(Y);o.addToHistory(j.value,e.filetype)},l={...n.map(Y=>({initialData:Y})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":__,type:"url"},minChars:0,responseTime:0,fetch:Y=>{const j=RL(e.filetype,Y,o),de=ip(j,Ii.BUBBLE_TO_SANDBOX,t,{isHorizontalMenu:!1,search:v.none()});return Pr.pure(de)},getHotspot:Y=>A.getOpt(Y),onSetValue:(Y,j)=>{Y.hasConfigured(fu)&&fu.run(Y).get(X)},typeaheadBehaviours:xe([...o.getValidationHandler().map(Y=>fu.config({getRoot:j=>Wr(j.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(j,de)=>{w.getOpt(j).each(ie=>{at(ie.element,"title",r.translate(de))})}},validator:{validate:j=>{const de=Ee.getValue(j);return fL.nu(ie=>{Y({type:e.filetype,url:de.value},he=>{if(he.status==="invalid"){const ke=St.error(he.message);ie(ke)}else{const ke=St.value(he.message);ie(ke)}})})},validateOnLoad:!1}})).toArray(),rt.config({disabled:()=>!e.enabled||r.isDisabled()}),Sn.config({}),yt("urlinput-events",[le(Zu(),Y=>{const j=Ti(Y.element),de=j.trim();de!==j&&Ll(Y.element,de),e.filetype==="file"&&je(Y,ba,{name:e.name})}),le(Da(),Y=>{je(Y,ba,{name:e.name}),a(Y)}),le(qg(),Y=>{je(Y,ba,{name:e.name}),a(Y)})])]),eventOrder:{[Zu()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:Y=>Y.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:t.shared.getSink,parts:{menu:zv(!1,1,"normal")},onExecute:(Y,j,de)=>{je(j,N1,{})},onItemExecute:(Y,j,de,ie)=>{a(Y),je(Y,ba,{name:e.name})}},d=fo.parts.field({...l,factory:pL}),m=e.label.map(Y=>Tm(Y,r)),w=po(((Y,j,de=Y,ie=Y)=>Gl(de,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Y],attributes:{title:r.translate(ie),"aria-live":"polite",...j.fold(()=>({}),he=>({id:he}))}},r.icons))("invalid",v.some(__),"warning")),x=po({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[w.asSpec()]}),O=o.getUrlPicker(e.filetype),M=Le("browser.url.event"),A=po({dom:{tag:"div",classes:["tox-control-wrap"]},components:[d,x.asSpec()],behaviours:xe([rt.config({disabled:()=>!e.enabled||r.isDisabled()})])}),L=po(T_({name:e.name,icon:v.some("browse"),text:e.picker_text.or(e.label).getOr(""),enabled:e.enabled,primary:!1,buttonType:v.none(),borderless:!0},Y=>Pt(Y,M),r,[],["tox-browse-url"])),ee=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Rt([[A.asSpec()],O.map(()=>L.asSpec()).toArray()])}),W=Y=>{It.getCurrent(Y).each(j=>{const de=Ee.getValue(j),ie={fieldname:e.name,...de};O.each(he=>{he(ie).get(ke=>{Ee.setValue(j,ke),je(Y,ba,{name:e.name})})})})};return fo.sketch({dom:lH(),components:m.toArray().concat([ee()]),fieldBehaviours:xe([rt.config({disabled:()=>!e.enabled||r.isDisabled(),onDisabled:Y=>{fo.getField(Y).each(rt.disable),L.getOpt(Y).each(rt.disable)},onEnabled:Y=>{fo.getField(Y).each(rt.enable),L.getOpt(Y).each(rt.enable)}}),As(),yt("url-input-events",[le(M,W)])])})},IL=(e,t)=>{const o=NT(e.icon,t.icons);return Bi.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${e.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:e.url?void 0:o},components:e.url?[xr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:o,attributes:{title:t.translate(e.iconTooltip)}},action:n=>je(n,pu,{name:"alert-banner",value:e.url}),buttonBehaviours:xe([Vx()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:t.translate(e.text)}}]})},BL=(e,t)=>{e.dom.checked=t},LL=e=>e.dom.checked,FL=(e,t,o)=>{const n=m=>(m.element.dom.click(),v.some(!0)),r=fo.parts.field({factory:{sketch:xt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:xe([Jl.self(),rt.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:m=>{Wr(m.element).each(f=>wn(f,"tox-checkbox--disabled"))},onEnabled:m=>{Wr(m.element).each(f=>Hn(f,"tox-checkbox--disabled"))}}),Sn.config({}),ut.config({}),VO(o,LL,BL),Ke.config({mode:"special",onEnter:n,onSpace:n,stopSpaceKeyup:!0}),yt("checkbox-events",[le(Da(),(m,f)=>{je(m,ba,{name:e.name})})])])}),a=fo.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Ln(t.translate(e.label))],behaviours:xe([z1.config({})])}),l=m=>Gl(m==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+m]},t.icons),d=po({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[l("checked"),l("unchecked")]});return fo.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[r,d.asSpec(),a],fieldBehaviours:xe([rt.config({disabled:()=>!e.enabled||t.isDisabled()}),As()])})},PL=(e,t)=>e.presets==="presentation"?Bi.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html},containerBehaviours:xe([Fr.config({...t.tooltips.getConfig({tooltipText:"",onShow:o=>{Yo(o.element,"[data-mce-tooltip]:hover").orThunk(()=>rr(o.element)).each(n=>{C(n,"data-mce-tooltip").each(r=>{Fr.setComponents(o,t.tooltips.getComponents({tooltipText:r}))})})}}),mode:"children-normal",anchor:o=>({type:"node",node:Yo(o.element,"[data-mce-tooltip]:hover").orThunk(()=>rr(o.element).filter(n=>C(n,"data-mce-tooltip").isSome())),root:o.element,layouts:{onLtr:I([Wn,Ms,as,Fo,ls,vs]),onRtl:I([Wn,Ms,as,Fo,ls,vs])},bubble:Ba(0,-2,{})})})])}):Bi.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:xe([Sn.config({}),ut.config({})])}),Ds=e=>(t,o,n,r)=>He(o,"name").fold(()=>e(o,r,v.none()),a=>t.field(a,e(o,r,He(n,a)))),VL=e=>(t,o,n,r)=>{const a=Oo(o,{source:"dynamic"});return Ds(e)(t,a,n,r)},NL={bar:Ds((e,t)=>QR(e,t.shared)),collection:Ds((e,t,o)=>iH(e,t.shared.providers,o)),alertbanner:Ds((e,t)=>IL(e,t.shared.providers)),input:Ds((e,t,o)=>PB(e,t.shared.providers,o)),textarea:Ds((e,t,o)=>VB(e,t.shared.providers,o)),label:Ds((e,t)=>hB(e,t.shared)),iframe:VL((e,t,o)=>iB(e,t.shared.providers,o)),button:Ds((e,t)=>xL(e,t.shared.providers)),checkbox:Ds((e,t,o)=>FL(e,t.shared.providers,o)),colorinput:Ds((e,t,o)=>fH(e,t.shared,t.colorinput,o)),colorpicker:Ds((e,t,o)=>qI(e,t.shared.providers,o)),dropzone:Ds((e,t,o)=>JI(e,t.shared.providers,o)),grid:Ds((e,t)=>QI(e,t.shared)),listbox:Ds((e,t,o)=>TB(e,t,o)),selectbox:Ds((e,t,o)=>MB(e,t.shared.providers,o)),sizeinput:Ds((e,t)=>BB(e,t.shared.providers)),slider:Ds((e,t,o)=>LB(e,t.shared.providers,o)),urlinput:Ds((e,t,o)=>HL(e,t,t.urlinput,o)),customeditor:Ds(YI),htmlpanel:Ds((e,t)=>PL(e,t.shared.providers)),imagepreview:Ds((e,t,o)=>gB(e,o)),table:Ds((e,t)=>FB(e,t.shared.providers)),tree:Ds((e,t)=>rL(e,t)),panel:Ds((e,t)=>kB(e,t))},zL={field:(e,t)=>t,record:I([])},M_=(e,t,o,n)=>{const r=Oo(n,{shared:{interpreter:a=>SC(e,a,o,r)}});return SC(e,t,o,r)},SC=(e,t,o,n)=>He(NL,t.type).fold(()=>(console.error(`Unknown factory type "${t.type}", defaulting to container: `,t),t),r=>r(e,t,o,n)),E_=(e,t,o)=>SC(zL,e,t,o),Em="layout-inset",xC=e=>e.x,A_=(e,t)=>e.x+e.width/2-t.width/2,CC=(e,t)=>e.x+e.width-t.width,TC=e=>e.y,kC=(e,t)=>e.y+e.height-t.height,D_=(e,t)=>e.y+e.height/2-t.height/2,k2=(e,t,o)=>_s(CC(e,t),kC(e,t),o.insetSouthwest(),mh(),"southwest",sr(e,{right:0,bottom:3}),Em),O2=(e,t,o)=>_s(xC(e),kC(e,t),o.insetSoutheast(),dh(),"southeast",sr(e,{left:1,bottom:3}),Em),q1=(e,t,o)=>_s(CC(e,t),TC(e),o.insetNorthwest(),uh(),"northwest",sr(e,{right:0,top:2}),Em),K1=(e,t,o)=>_s(xC(e),TC(e),o.insetNortheast(),Ei(),"northeast",sr(e,{left:1,top:2}),Em),ei=(e,t,o)=>_s(A_(e,t),TC(e),o.insetNorth(),Fb(),"north",sr(e,{top:2}),Em),Y1=(e,t,o)=>_s(A_(e,t),kC(e,t),o.insetSouth(),Pb(),"south",sr(e,{bottom:3}),Em),$_=(e,t,o)=>_s(CC(e,t),D_(e,t),o.insetEast(),lf(),"east",sr(e,{right:0}),Em),R_=(e,t,o)=>_s(xC(e),D_(e,t),o.insetWest(),Vb(),"west",sr(e,{left:1}),Em),ZL=e=>{switch(e){case"north":return ei;case"northeast":return K1;case"northwest":return q1;case"south":return Y1;case"southeast":return O2;case"southwest":return k2;case"east":return $_;case"west":return R_}},H_=(e,t,o,n,r)=>Qb(n).map(ZL).getOr(ei)(e,t,o,n,r),UL=e=>{switch(e){case"north":return Y1;case"northeast":return O2;case"northwest":return k2;case"south":return ei;case"southeast":return K1;case"southwest":return q1;case"east":return R_;case"west":return $_}},WL=(e,t,o,n,r)=>Qb(n).map(UL).getOr(ei)(e,t,o,n,r),X1={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},GL=(e,t,o)=>{const r={maxHeightFunction:om()},a=()=>({type:"node",root:be(te(e())),node:v.from(e()),bubble:Ba(12,12,X1),layouts:{onRtl:()=>[K1],onLtr:()=>[q1]},overrides:r}),l=()=>({type:"hotspot",hotspot:t(),bubble:Ba(-12,12,X1),layouts:{onRtl:()=>[as,ls,Wn],onLtr:()=>[ls,as,Wn]},overrides:r});return()=>o()?a():l()},jL=(e,t,o,n)=>{const a={maxHeightFunction:om()},l=()=>({type:"node",root:be(te(t())),node:v.from(t()),bubble:Ba(12,12,X1),layouts:{onRtl:()=>[ei],onLtr:()=>[ei]},overrides:a}),d=()=>e?{type:"node",root:be(te(t())),node:v.from(t()),bubble:Ba(0,-wl(t()),X1),layouts:{onRtl:()=>[Ms],onLtr:()=>[Ms]},overrides:a}:{type:"hotspot",hotspot:o(),bubble:Ba(0,0,X1),layouts:{onRtl:()=>[Ms],onLtr:()=>[Ms]},overrides:a};return()=>n()?l():d()},qL=(e,t,o)=>{const n=()=>({type:"node",root:be(te(e())),node:v.from(e()),layouts:{onRtl:()=>[ei],onLtr:()=>[ei]}}),r=()=>({type:"hotspot",hotspot:t(),layouts:{onRtl:()=>[Wn],onLtr:()=>[Wn]}});return()=>o()?n():r()},KL=(e,t)=>()=>({type:"selection",root:t(),getSelection:()=>{const o=e.selection.getRng(),n=e.model.table.getSelectedCells();if(n.length>1){const r=n[0],a=n[n.length-1],l={firstCell:U.fromDom(r),lastCell:U.fromDom(a)};return v.some(l)}return v.some(sg.range(U.fromDom(o.startContainer),o.startOffset,U.fromDom(o.endContainer),o.endOffset))}}),YL=e=>t=>({type:"node",root:e(),node:t}),XL=(e,t,o,n)=>{const r=Qh(e),a=()=>U.fromDom(e.getBody()),l=()=>U.fromDom(e.getContentAreaContainer()),d=()=>r||!n();return{inlineDialog:GL(l,t,d),inlineBottomDialog:jL(e.inline,l,o,d),banner:qL(l,t,d),cursor:KL(e,a),node:YL(a)}},JL=e=>(t,o)=>{Dk(e)(t,o)},QL=e=>()=>Ck(e),eF=e=>t=>t2(e,t),tF=e=>t=>xk(e,t),oF=e=>({colorPicker:JL(e),hasCustomColors:QL(e),getColors:eF(e),getColorCols:tF(e)}),nF=e=>()=>a5(e),sF=e=>({isDraggableModal:nF(e)}),rF=e=>{const t=We(Xx(e)?"bottom":"top");return{isPositionedAtTop:()=>t.get()==="top",getDockingMode:t.get,setDockingMode:t.set}},I_=e=>Cn(e,"items"),B_=e=>Cn(e,"format"),L_=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],cF=e=>Ft(e,"items"),aF=e=>Ft(e,"block"),lF=e=>Ft(e,"inline"),iF=e=>Ft(e,"selector"),F_=e=>Ut(e,(t,o)=>{if(cF(o)){const n=F_(o.items);return{customFormats:t.customFormats.concat(n.customFormats),formats:t.formats.concat([{title:o.title,items:n.formats}])}}else if(lF(o)||aF(o)||iF(o)){const r=`custom-${Xe(o.name)?o.name:o.title.toLowerCase()}`;return{customFormats:t.customFormats.concat([{name:r,format:o}]),formats:t.formats.concat([{title:o.title,format:r,icon:o.icon}])}}else return{...t,formats:t.formats.concat(o)}},{customFormats:[],formats:[]}),uF=(e,t)=>{const o=F_(t),n=r=>{ye(r,a=>{e.formatter.has(a.name)||e.formatter.register(a.name,a.format)})};return e.formatter?n(o.customFormats):e.on("init",()=>{n(o.customFormats)}),o.formats},P_=e=>WT(e).map(t=>{const o=uF(e,t);return GT(e)?L_.concat(o):o}).getOr(L_),dF=e=>{const t=Ro(e);return t.length===1&&Xt(t,"title")},V_=(e,t,o)=>({...e,type:"formatter",isSelected:t(e.format),getStylePreview:o(e.format)}),N_=(e,t,o,n)=>{const r=m=>V_(m,o,n),a=m=>{const f=d(m.items);return{...m,type:"submenu",getStyleItems:I(f)}},l=m=>{const f=Xe(m.name)?m.name:Le(m.title),w=`custom-${f}`,x={...m,type:"formatter",format:w,isSelected:o(w),getStylePreview:n(w)};return e.formatter.register(f,x),x},d=m=>ue(m,f=>I_(f)?a(f):B_(f)?r(f):dF(f)?{...f,type:"separator"}:l(f));return d(t)},mF=e=>{const t=d=>()=>e.formatter.match(d),o=d=>()=>{const m=e.formatter.get(d);return m!==void 0?v.some({tag:m.length>0&&(m[0].inline||m[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(d))}):v.none()},n=We([]),r=We([]),a=We(!1);return e.on("PreInit",d=>{const m=P_(e),f=N_(e,m,t,o);n.set(f)}),e.on("addStyleModifications",d=>{const m=N_(e,d.items,t,o);r.set(m),a.set(d.replace)}),{getData:()=>{const d=a.get()?[]:n.get(),m=r.get();return d.concat(m)}}},gF=e=>{let n=0;const r=()=>n>0,a=d=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Ln(d.tooltipText)]}];return{getConfig:d=>({delayForShow:()=>r()?60:300,delayForHide:I(300),exclusive:!0,lazySink:e,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:a(d),onShow:(m,f)=>{n++,d.onShow&&d.onShow(m,f)},onHide:()=>{n--}}),getComponents:a}},hF=e=>oo(e)&&e.nodeType===1,pF=md.trim,z_=e=>t=>!!(hF(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),fF=z_("true"),bF=z_("false"),Z_=(e,t,o,n,r)=>({type:e,title:t,url:o,level:n,attach:r}),vF=e=>{let t=e;for(;t=t.parentNode;){const o=t.contentEditable;if(o&&o!=="inherit")return fF(t)}return!1},yF=(e,t)=>ue(oc(U.fromDom(t),e),o=>o.dom),U_=e=>e.innerText||e.textContent,wF=e=>e.id?e.id:Le("h"),SF=e=>e&&e.nodeName==="A"&&(e.id||e.name)!==void 0,xF=e=>SF(e)&&G_(e),W_=e=>e&&/^(H[1-6])$/.test(e.nodeName),G_=e=>vF(e)&&!bF(e),CF=e=>W_(e)&&G_(e),TF=e=>W_(e)?parseInt(e.nodeName.substr(1),10):0,kF=e=>{var t;const o=wF(e),n=()=>{e.id=o};return Z_("header",(t=U_(e))!==null&&t!==void 0?t:"","#"+o,TF(e),n)},OF=e=>{const t=e.id||e.name,o=U_(e);return Z_("anchor",o||"#"+t,"#"+t,0,X)},_F=e=>ue(Ct(e,CF),kF),MF=e=>ue(Ct(e,xF),OF),EF=e=>yF("h1,h2,h3,h4,h5,h6,a:not([href])",e),AF=e=>pF(e.title).length>0,DF={find:e=>{const t=EF(e);return Ct(_F(t).concat(MF(t)),AF)}},_2="tinymce-url-history",j_=5,q_=e=>Xe(e)&&/^https?/.test(e),$F=e=>Vo(e)&&e.length<=j_&&Et(e,q_),K_=e=>At(e)&&Dn(e,t=>!$F(t)).isNone(),Y_=()=>{const e=Cg.getItem(_2);if(e===null)return{};let t;try{t=JSON.parse(e)}catch(o){if(o instanceof SyntaxError)return console.log("Local storage "+_2+" was not valid JSON",o),{};throw o}return K_(t)?t:(console.log("Local storage "+_2+" was not valid format",t),{})},RF=e=>{if(!K_(e))throw new Error(`Bad format for history:
`+JSON.stringify(e));Cg.setItem(_2,JSON.stringify(e))},HF=e=>{const t=Y_();return He(t,e).getOr([])},IF=(e,t)=>{if(!q_(e))return;const o=Y_(),n=He(o,t).getOr([]),r=Ct(n,a=>a!==e);o[t]=[e].concat(r).slice(0,j_),RF(o)},X_=e=>!!e,BF=e=>yo(md.makeMap(e,/[, ]/),X_),OC=e=>v.from(e5(e)),LF=e=>{const t=v.from(n5(e)).filter(X_).map(BF);return OC(e).fold(Ht,o=>t.fold(io,n=>Ro(n).length>0?n:!1))},FF=(e,t)=>{const o=LF(e);return Jo(o)?o?OC(e):v.none():o[t]?OC(e):v.none()},PF=(e,t)=>FF(e,t).map(o=>n=>Pr.nu(r=>{const a=(d,m)=>{if(!Xe(d))throw new Error("Expected value to be string");if(m!==void 0&&!At(m))throw new Error("Expected meta to be a object");r({value:d,meta:m})},l={filetype:t,fieldname:n.fieldname,...v.from(n.meta).getOr({})};o.call(e,a,n.value,l)})),J_=e=>v.from(e).filter(Xe).getOrUndefined(),VF=e=>s5(e)?v.some({targets:DF.find(e.getBody()),anchorTop:J_(r5(e)),anchorBottom:J_(c5(e))}):v.none(),NF=e=>v.from(t5(e)),zF=e=>({getHistory:HF,addToHistory:IF,getLinkInformation:()=>VF(e),getValidationHandler:()=>NF(e),getUrlPicker:t=>PF(e,t)}),ZF=(e,t,o,n)=>{const r=We(!1),a=rF(t),l={icons:()=>t.ui.registry.getAll().icons,menuItems:()=>t.ui.registry.getAll().menuItems,translate:Za.translate,isDisabled:()=>t.mode.isReadOnly()||!t.ui.isEnabled(),getOption:t.options.get,tooltips:gF(e.dialog)},d=zF(t),m=mF(t),f=oF(t),w=sF(t),x=()=>r.get(),O=ee=>r.set(ee),M={shared:{providers:l,anchors:XL(t,o,n,a.isPositionedAtTop),header:a},urlinput:d,styles:m,colorinput:f,dialog:w,isContextMenuOpen:x,setContextMenuState:O},A={...M,shared:{...M.shared,interpreter:ee=>E_(ee,{},A),getSink:e.popup}},L={...M,shared:{...M.shared,interpreter:ee=>E_(ee,{},L),getSink:e.dialog}};return{popup:A,dialog:L}},UF=(e,t,o)=>{const n=(ae,ct)=>{ye([t,...o],$e=>{$e.broadcastEvent(ae,ct)})},r=(ae,ct)=>{ye([t,...o],$e=>{$e.broadcastOn([ae],ct)})},a=ae=>r(uu(),{target:ae.target}),l=Cl(),d=cr(l,"touchstart",a),m=cr(l,"touchmove",ae=>n(cy(),ae)),f=cr(l,"touchend",ae=>n(ay(),ae)),w=cr(l,"mousedown",a),x=cr(l,"mouseup",ae=>{ae.raw.button===0&&r(Nf(),{target:ae.target})}),O=ae=>r(uu(),{target:U.fromDom(ae.target)}),M=ae=>{ae.button===0&&r(Nf(),{target:U.fromDom(ae.target)})},A=()=>{ye(e.editorManager.get(),ae=>{e!==ae&&ae.dispatch("DismissPopups",{relatedTarget:e})})},L=ae=>n(_p(),n0(ae)),ee=ae=>{r(lm(),{}),n(jm(),n0(ae))},W=te(U.fromDom(e.getElement())),Y=ys(W,"scroll",ae=>{requestAnimationFrame(()=>{const ct=e.getContainer();if(ct!=null){const Ye=Tg(e,t.element).map(Ne=>[Ne.element,...Ne.others]).getOr([]);fn(Ye,Ne=>eo(Ne,ae.target))&&(e.dispatch("ElementScroll",{target:ae.target.dom}),n(Mp(),ae))}})}),j=()=>r(lm(),{}),de=ae=>{ae.state&&r(uu(),{target:U.fromDom(e.getContainer())})},ie=ae=>{r(uu(),{target:U.fromDom(ae.relatedTarget.getContainer())})},he=ae=>e.dispatch("focusin",ae),ke=ae=>e.dispatch("focusout",ae);e.on("PostRender",()=>{e.on("click",O),e.on("tap",O),e.on("mouseup",M),e.on("mousedown",A),e.on("ScrollWindow",L),e.on("ResizeWindow",ee),e.on("ResizeEditor",j),e.on("AfterProgressState",de),e.on("DismissPopups",ie),ye([t,...o],ae=>{ae.element.dom.addEventListener("focusin",he),ae.element.dom.addEventListener("focusout",ke)})}),e.on("remove",()=>{e.off("click",O),e.off("tap",O),e.off("mouseup",M),e.off("mousedown",A),e.off("ScrollWindow",L),e.off("ResizeWindow",ee),e.off("ResizeEditor",j),e.off("AfterProgressState",de),e.off("DismissPopups",ie),ye([t,...o],ae=>{ae.element.dom.removeEventListener("focusin",he),ae.element.dom.removeEventListener("focusout",ke)}),w.unbind(),d.unbind(),m.unbind(),f.unbind(),x.unbind(),Y.unbind()}),e.on("detach",()=>{ye([t,...o],W0),ye([t,...o],ae=>ae.destroy())})},Gs=KS,vu=WS,WF=I([J("shell",!1),me("makeItem"),J("setupItem",X),Fa.field("listBehaviours",[bt])]),GF=ma({name:"items",overrides:()=>({behaviours:xe([bt.config({})])})}),jF=I([GF]),qF=I("CustomList"),KF=(e,t,o,n)=>{const r=(d,m)=>{l(d).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},f=>{const w=bt.contents(f),x=m.length,O=x-w.length,M=O>0?we(O,()=>e.makeItem()):[],A=w.slice(x);ye(A,ee=>bt.remove(f,ee)),ye(M,ee=>bt.append(f,ee));const L=bt.contents(f);ye(L,(ee,W)=>{e.setupItem(d,ee,m[W],W)})})},a=e.shell?{behaviours:[bt.config({})],components:[]}:{behaviours:[],components:t},l=d=>e.shell?v.some(d):_o(d,e,"items");return{uid:e.uid,dom:e.dom,components:a.components,behaviours:Ws(e.listBehaviours,a.behaviours),apis:{setItems:r}}},Q_=Lr({name:qF(),configFields:WF(),partFields:jF(),factory:KF,apis:{setItems:(e,t,o)=>{e.setItems(t,o)}}}),up=I([me("dom"),J("shell",!0),Es("toolbarBehaviours",[bt])]),YF=I([ma({name:"groups",overrides:()=>({behaviours:xe([bt.config({})])})})]),XF=(e,t,o,n)=>{const r=(d,m)=>{a(d).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},f=>{bt.set(f,m)})},a=d=>e.shell?v.some(d):_o(d,e,"groups"),l=e.shell?{behaviours:[bt.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:l.components,behaviours:Ws(e.toolbarBehaviours,l.behaviours),apis:{setGroups:r,refresh:X},domModification:{attributes:{role:"group"}}}},Li=Lr({name:"Toolbar",configFields:up(),partFields:YF(),factory:XF,apis:{setGroups:(e,t,o)=>{e.setGroups(t,o)}}}),JF=X,QF=Ht,eM=I([]);var eP=Object.freeze({__proto__:null,setup:JF,isDocked:QF,getBehaviours:eM});const _C=e=>(xs(zo(e,"position"),"fixed")?v.none():Mr(e)).orThunk(()=>{const n=U.fromTag("span");return ss(e).bind(r=>{pr(r,n);const a=Mr(n);return Nc(n),a})}),tM=e=>_C(e).map(Bs).getOrThunk(()=>Ko(0,0)),tP=(e,t)=>{const o=e.element;wn(o,t.transitionClass),Hn(o,t.fadeOutClass),wn(o,t.fadeInClass),t.onShow(e)},oP=(e,t)=>{const o=e.element;wn(o,t.transitionClass),Hn(o,t.fadeInClass),wn(o,t.fadeOutClass),t.onHide(e)},nP=(e,t)=>e.y<t.bottom&&e.bottom>t.y,oM=(e,t)=>e.y>=t.y,nM=(e,t)=>e.bottom<=t.bottom,MC=(e,t,o)=>({location:"top",leftX:t,topY:o.bounds.y-e.y}),EC=(e,t,o)=>({location:"bottom",leftX:t,bottomY:e.bottom-o.bounds.bottom}),AC=e=>e.box.x-e.win.x,sP=(e,t,o)=>{const n=t.win,r=t.box,a=AC(t);return Vn(e,l=>{switch(l){case"bottom":return nM(r,o.bounds)?v.none():v.some(EC(n,a,o));case"top":return oM(r,o.bounds)?v.none():v.some(MC(n,a,o));default:return v.none()}}).getOr({location:"no-dock"})},rP=(e,t,o)=>Et(e,n=>{switch(n){case"bottom":return nM(t,o.bounds);case"top":return oM(t,o.bounds)}}),cP=(e,t)=>{const o=t.optScrollEnv.fold(I(e.bounds.y),n=>n.scrollElmTop+(e.bounds.y-n.currentScrollTop));return Ko(e.bounds.x,o)},aP=(e,t)=>{const o=t.optScrollEnv.fold(I(e.y),n=>e.y+n.currentScrollTop-n.scrollElmTop);return Ko(e.x,o)},DC=(e,t,o)=>o.getInitialPos().map(n=>{const r=cP(n,t);return{box:yn(r.left,r.top,Ar(e),Zo(e)),location:n.location}}),sM=(e,t,o,n,r)=>{const a=aP(t,o),l=yn(a.left,a.top,t.width,t.height);n.setInitialPos({style:Ga(e),position:No(e,"position")||"static",bounds:l,location:r.location})},lP=(e,t,o,n,r)=>{n.getInitialPos().fold(()=>sM(e,t,o,n,r),()=>X)},rM=(e,t,o)=>o.getInitialPos().bind(n=>{var r;switch(o.clearInitialPos(),n.position){case"static":return v.some({morph:"static"});case"absolute":const a=_C(e).getOr(rs()),l=Jn(a),d=(r=a.dom.scrollTop)!==null&&r!==void 0?r:0;return v.some({morph:"absolute",positionCss:Ia("absolute",He(n.style,"left").map(m=>t.x-l.x),He(n.style,"top").map(m=>t.y-l.y+d),He(n.style,"right").map(m=>l.right-t.right),He(n.style,"bottom").map(m=>l.bottom-t.bottom))});default:return v.none()}}),iP=(e,t,o)=>DC(e,t,o).filter(({box:n})=>rP(o.getModes(),n,t)).bind(({box:n})=>rM(e,n,o)),$C=e=>{switch(e.location){case"top":return v.some({morph:"fixed",positionCss:Ia("fixed",v.some(e.leftX),v.some(e.topY),v.none(),v.none())});case"bottom":return v.some({morph:"fixed",positionCss:Ia("fixed",v.some(e.leftX),v.none(),v.none(),v.some(e.bottomY))});default:return v.none()}},uP=(e,t,o)=>{const n=Jn(e),r=ps(),a=sP(o.getModes(),{win:r,box:n},t);return a.location==="top"||a.location==="bottom"?(sM(e,n,t,o,a),$C(a)):v.none()},dP=(e,t,o)=>iP(e,t,o).orThunk(()=>t.optScrollEnv.bind(n=>DC(e,t,o)).bind(({box:n,location:r})=>{const a=ps(),l=AC({win:a,box:n}),d=r==="top"?MC(a,l,t):EC(a,l,t);return $C(d)})),mP=(e,t,o)=>{const n=e.element;return xs(zo(n,"position"),"fixed")?dP(n,t,o):uP(n,t,o)},gP=(e,t,o)=>{const n=e.element;return DC(n,t,o).bind(({box:r})=>rM(n,r,o))},hP=(e,t,o,n)=>{const r=Jn(e),a=ps(),l=AC({win:a,box:r}),d=n(a,l,t);return d.location==="bottom"||d.location==="top"?(lP(e,r,t,o,d),$C(d)):v.none()},cM=(e,t,o)=>{o.setDocked(!1),ye(["left","right","top","bottom","position"],n=>jt(e.element,n)),t.onUndocked(e)},RC=(e,t,o,n)=>{const r=n.position==="fixed";o.setDocked(r),Kb(e.element,n),(r?t.onDocked:t.onUndocked)(e)},aM=(e,t,o,n,r=!1)=>{t.contextual.each(a=>{a.lazyContext(e).each(l=>{const d=nP(l,n.bounds);d!==o.isVisible()&&(o.setVisible(d),r&&!d?(Yu(e.element,[a.fadeOutClass]),a.onHide(e)):(d?tP:oP)(e,a))})})},lM=(e,t,o,n,r)=>{aM(e,t,o,n,!0),RC(e,t,o,r.positionCss)},pP=(e,t,o,n,r)=>{switch(r.morph){case"static":return cM(e,t,o);case"absolute":return RC(e,t,o,r.positionCss);case"fixed":return lM(e,t,o,n,r)}},fP=(e,t,o)=>{const n=t.lazyViewport(e);aM(e,t,o,n),mP(e,n,o).each(r=>{pP(e,t,o,n,r)})},bP=(e,t,o)=>{const n=e.element;o.setDocked(!1);const r=t.lazyViewport(e);gP(e,r,o).each(a=>{switch(a.morph){case"static":{cM(e,t,o);break}case"absolute":{RC(e,t,o,a.positionCss);break}}}),o.setVisible(!0),t.contextual.each(a=>{$a(n,[a.fadeInClass,a.fadeOutClass,a.transitionClass]),a.onShow(e)}),M2(e,t,o)},M2=(e,t,o)=>{e.getSystem().isConnected()&&fP(e,t,o)},iM=(e,t,o)=>{o.isDocked()&&bP(e,t,o)},uM=e=>(t,o,n)=>{const r=o.lazyViewport(t);hP(t.element,r,n,e).each(l=>{lM(t,o,n,r,l)})},vP=uM(MC),yP=uM(EC);var wP=Object.freeze({__proto__:null,refresh:M2,reset:iM,isDocked:(e,t,o)=>o.isDocked(),getModes:(e,t,o)=>o.getModes(),setModes:(e,t,o,n)=>o.setModes(n),forceDockToTop:vP,forceDockToBottom:yP}),SP=Object.freeze({__proto__:null,events:(e,t)=>Lo([Wd(Wm(),(o,n)=>{e.contextual.each(r=>{vc(o.element,r.transitionClass)&&($a(o.element,[r.transitionClass,r.fadeInClass]),(t.isVisible()?r.onShown:r.onHidden)(o)),n.stop()})}),le(_p(),(o,n)=>{M2(o,e,t)}),le(Mp(),(o,n)=>{M2(o,e,t)}),le(jm(),(o,n)=>{iM(o,e,t)})])}),xP=[Ir("contextual",[Zn("fadeInClass"),Zn("fadeOutClass"),Zn("transitionClass"),$c("lazyContext"),Zt("onShow"),Zt("onShown"),Zt("onHide"),Zt("onHidden")]),Un("lazyViewport",()=>({bounds:ps(),optScrollEnv:v.none()})),Ea("modes",["top","bottom"],fs),Zt("onDocked"),Zt("onUndocked")],CP=Object.freeze({__proto__:null,init:e=>{const t=We(!1),o=We(!0),n=Wo(),r=We(e.modes),a=()=>`docked:  ${t.get()}, visible: ${o.get()}, modes: ${r.get().join(",")}`;return Gc({isDocked:t.get,setDocked:t.set,getInitialPos:n.get,setInitialPos:n.set,clearInitialPos:n.clear,isVisible:o.get,setVisible:o.set,getModes:r.get,setModes:r.set,readState:a})}});const Gn=Us({fields:xP,name:"docking",active:SP,apis:wP,state:CP}),HC=I(Le("toolbar-height-change")),yu={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},dM="tox-tinymce--toolbar-sticky-on",mM="tox-tinymce--toolbar-sticky-off",TP=(e,t)=>{const o=ks(t),r=Zr(t).dom.innerHeight,a=Ps(o),l=U.fromDom(e.elm),d=fr(l),m=Zo(l),f=d.y,w=f+m,x=Bs(t),O=Zo(t),M=x.top,A=M+O,L=Math.abs(M-a.top)<2,ee=Math.abs(A-(a.top+r))<2;if(L&&f<A)qi(a.left,f-O,o);else if(ee&&w>M){const W=f-r+m+O;qi(a.left,W,o)}},E2=(e,t)=>Xt(Gn.getModes(e),t),IC=e=>{const t=n=>wl(n)+(parseInt(No(n,"margin-top"),10)||0)+(parseInt(No(n,"margin-bottom"),10)||0),o=e.element;Wr(o).each(n=>{const r="padding-"+Gn.getModes(e)[0];if(Gn.isDocked(e)){const a=Ar(n);Ie(o,"width",a+"px"),Ie(n,r,t(o)+"px")}else jt(o,"width"),jt(n,r)})},gM=(e,t)=>{t?(Hn(e,yu.fadeOutClass),Yu(e,[yu.transitionClass,yu.fadeInClass])):(Hn(e,yu.fadeInClass),Yu(e,[yu.fadeOutClass,yu.transitionClass]))},hM=(e,t)=>{const o=U.fromDom(e.getContainer());t?(wn(o,dM),Hn(o,mM)):(wn(o,mM),Hn(o,dM))},kP=(e,t)=>{const o=ks(t);Ha(o).filter(n=>!eo(t,n)).filter(n=>eo(n,U.fromDom(o.dom.body))||Nn(e,n)).each(()=>da(t))},OP=(e,t)=>rr(e).orThunk(()=>t().toOptional().bind(o=>rr(o.element))),_P=(e,t,o)=>{e.inline||(t.header.isPositionedAtTop()||e.on("ResizeEditor",()=>{o().each(Gn.reset)}),e.on("ResizeWindow ResizeEditor",()=>{o().each(IC)}),e.on("SkinLoaded",()=>{o().each(n=>{Gn.isDocked(n)?Gn.reset(n):Gn.refresh(n)})}),e.on("FullscreenStateChanged",()=>{o().each(Gn.reset)})),e.on("AfterScrollIntoView",n=>{o().each(r=>{Gn.refresh(r);const a=r.element;an(a)&&TP(n,a)})}),e.on("PostRender",()=>{hM(e,!1)})},MP=e=>e().map(Gn.isDocked).getOr(!1),EP=()=>[yc.config({channels:{[HC()]:{onReceive:IC}}})],pM=(e,t)=>{const o=Wo(),n=t.getSink,r=d=>{n().each(m=>d(m.element))},a=d=>{e.inline||IC(d),hM(e,Gn.isDocked(d)),d.getSystem().broadcastOn([lm()],{}),n().each(m=>m.getSystem().broadcastOn([lm()],{}))},l=e.inline?[]:EP();return[ut.config({}),Gn.config({contextual:{lazyContext:d=>{const m=wl(d.element),f=e.inline?e.getContentAreaContainer():e.getContainer();return v.from(f).map(w=>{const x=Jn(U.fromDom(w));return Tg(e,d.element).fold(()=>{const M=x.height-m,A=x.y+(E2(d,"top")?0:m);return yn(x.x,A,x.width,M)},M=>{const A=Ru(x,cp(M)),L=E2(d,"top")?A.y:A.y+m;return yn(A.x,L,A.width,A.height-m)})})},onShow:()=>{r(d=>gM(d,!0))},onShown:d=>{r(m=>$a(m,[yu.transitionClass,yu.fadeInClass])),o.get().each(m=>{kP(d.element,m),o.clear()})},onHide:d=>{OP(d.element,n).fold(o.clear,o.set),r(m=>gM(m,!1))},onHidden:()=>{r(d=>$a(d,[yu.transitionClass]))},...yu},lazyViewport:d=>Tg(e,d.element).fold(()=>{const f=ps(),w=JT(e),x=f.y+(E2(d,"top")?w:0),O=f.height-(E2(d,"bottom")?w:0);return{bounds:yn(f.x,x,f.width,O),optScrollEnv:v.none()}},f=>({bounds:cp(f),optScrollEnv:v.some({currentScrollTop:f.element.dom.scrollTop,scrollElmTop:Bs(f.element).top})})),modes:[t.header.getDockingMode()],onDocked:a,onUndocked:a}),...l]};var AP=Object.freeze({__proto__:null,setup:_P,isDocked:MP,getBehaviours:pM});const DP=e=>{const t=e.editor,o=e.sticky?pM:eM;return{uid:e.uid,dom:e.dom,components:e.components,behaviours:xe(o(t,e.sharedBackstage))}},$P=tt([es,gc("items",Id([Bd([l4,hc("items",fs)]),fs]))].concat(E1)),RP=e=>rn("GroupToolbarButton",$P,e),HP=[or("text"),or("tooltip"),or("icon"),Rc("search",!1,Id([Nu,tt([or("placeholder")])],e=>Jo(e)?e?v.some({placeholder:v.none()}):v.none():v.some(e))),$c("fetch"),Un("onSetup",()=>X)],fM=tt([es,...HP]),bM=e=>rn("menubutton",fM,e),IP=tt([es,M1,hl,wm,a8,n8,wg,fc("presets","normal",["normal","color","listpreview"]),F5(1),ep,r8]),BP=e=>rn("SplitButton",IP,e);var BC=ar({factory:(e,t)=>{const o=(r,a)=>{const l=ue(a,d=>{const m={type:"menubutton",text:d.text,fetch:w=>{w(d.getItems())}},f=bM(m).mapError(w=>eu(w)).getOrDie();return j1(f,"tox-mbtn",t.backstage,v.some("menuitem"))});bt.set(r,l)},n={focus:Ke.focusIn,setMenus:o};return{uid:e.uid,dom:e.dom,components:[],behaviours:xe([bt.config({}),yt("menubar-events",[cn(r=>{e.onSetup(r)}),le(Aa(),(r,a)=>{Yo(r.element,".tox-mbtn--active").each(l=>{Fl(a.event.target,".tox-mbtn").each(d=>{eo(l,d)||r.getSystem().getByDom(l).each(m=>{r.getSystem().getByDom(d).each(f=>{pl.expand(f),pl.close(m),ut.focus(f)})})})})}),le(Rl(),(r,a)=>{a.event.prevFocus.bind(l=>r.getSystem().getByDom(l).toOptional()).each(l=>{a.event.newFocus.bind(d=>r.getSystem().getByDom(d).toOptional()).each(d=>{pl.isOpen(l)&&(pl.expand(d),pl.close(l))})})})]),Ke.config({mode:"flow",selector:".tox-mbtn",onEscape:r=>(e.onEscape(r),v.some(!0))}),Sn.config({})]),apis:n,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[me("dom"),me("uid"),me("onEscape"),me("backstage"),J("onSetup",X)],apis:{focus:(e,t)=>{e.focus(t)},setMenus:(e,t,o)=>{e.setMenus(t,o)}}});const LP="Upgrade",FP="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",PP=e=>({uid:e.uid,dom:e.dom,components:[{dom:{tag:"a",attributes:{href:FP,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:LP}}]}),vM="container",VP=[Es("slotBehaviours",[])],yM=e=>"<alloy.field."+e+">",NP=e=>{const t=(()=>{const a=[];return{slot:(d,m)=>(a.push(d),dv(vM,yM(d),m)),record:I(a)}})(),o=e(t),n=t.record(),r=ue(n,a=>wr({name:a,pname:yM(a)}));return s1(vM,VP,r,zP,o)},zP=(e,t)=>{const o=L=>pv(e),n=(L,ee)=>_o(L,e,ee),r=(L,ee)=>(W,Y)=>_o(W,e,Y).map(j=>L(j,Y)).getOr(ee),a=L=>(ee,W)=>{ye(W,Y=>L(ee,Y))},l=(L,ee)=>qo(L.element,"aria-hidden")!=="true",d=(L,ee)=>{if(!l(L)){const W=L.element;jt(W,"display"),B(W,"aria-hidden"),je(L,Zd(),{name:ee,visible:!0})}},m=(L,ee)=>{if(l(L)){const W=L.element;Ie(W,"display","none"),at(W,"aria-hidden","true"),je(L,Zd(),{name:ee,visible:!1})}},f=r(l,!1),w=r(m),x=a(w),O=L=>x(L,o()),M=r(d),A={getSlotNames:o,getSlot:n,isShowing:f,hideSlot:w,hideAllSlots:O,showSlot:M};return{uid:e.uid,dom:e.dom,components:t,behaviours:sd(e.slotBehaviours),apis:A}},cc={...yo({getSlotNames:(e,t)=>e.getSlotNames(t),getSlot:(e,t,o)=>e.getSlot(t,o),isShowing:(e,t,o)=>e.isShowing(t,o),hideSlot:(e,t,o)=>e.hideSlot(t,o),hideAllSlots:(e,t)=>e.hideAllSlots(t),showSlot:(e,t,o)=>e.showSlot(t,o)},e=>la(e)),sketch:NP},ZP=tt([hl,M1,Un("onShow",X),Un("onHide",X),wg]),UP=e=>rn("sidebar",ZP,e),WP=e=>{const{sidebars:t}=e.ui.registry.getAll();ye(Ro(t),o=>{const n=t[o],r=()=>xs(v.from(e.queryCommandValue("ToggleSidebar")),o);e.ui.registry.addToggleButton(o,{icon:n.icon,tooltip:n.tooltip,onAction:a=>{e.execCommand("ToggleSidebar",!1,o),a.setActive(r())},onSetup:a=>{a.setActive(r());const l=()=>a.setActive(r());return e.on("ToggleSidebar",l),()=>{e.off("ToggleSidebar",l)}}})})},GP=e=>({element:()=>e.element.dom}),jP=(e,t)=>{const o=ue(Ro(t),n=>{const r=t[n],a=ca(UP(r));return{name:n,getApi:GP,onSetup:a.onSetup,onShow:a.onShow,onHide:a.onHide}});return ue(o,n=>{const r=We(X);return e.slot(n.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:A1.unnamedEvents([Sm(n,r),xm(n,r),le(Zd(),(a,l)=>{const d=l.event;Qt(o,f=>f.name===d.name).each(f=>{(d.visible?f.onShow:f.onHide)(f.getApi(a))})})])})})},qP=e=>cc.sketch(t=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:jP(t,e),slotBehaviours:A1.unnamedEvents([cn(o=>cc.hideAllSlots(o))])})),KP=(e,t,o)=>{It.getCurrent(e).each(r=>{bt.set(r,[qP(t)]);const a=o==null?void 0:o.toLowerCase();Xe(a)&&Ft(t,a)&&It.getCurrent(r).each(l=>{cc.showSlot(l,a),va.immediateGrow(r),jt(r.element,"width"),A2(e.element,"region")})})},A2=(e,t)=>{at(e,"role",t)},YP=(e,t)=>{It.getCurrent(e).each(n=>{It.getCurrent(n).each(a=>{va.hasGrown(n)?cc.isShowing(a,t)?(va.shrink(n),A2(e.element,"presentation")):(cc.hideAllSlots(a),cc.showSlot(a,t),A2(e.element,"region")):(cc.hideAllSlots(a),cc.showSlot(a,t),va.grow(n),A2(e.element,"region"))})})},XP=e=>It.getCurrent(e).bind(o=>va.isGrowing(o)||va.hasGrown(o)?It.getCurrent(o).bind(a=>Qt(cc.getSlotNames(a),l=>cc.isShowing(a,l))):v.none()),LC=Le("FixSizeEvent"),FC=Le("AutoSizeEvent"),JP=e=>({uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:xe([Sn.config({}),ut.config({}),va.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:t=>{It.getCurrent(t).each(cc.hideAllSlots),Pt(t,FC)},onGrown:t=>{Pt(t,FC)},onStartGrow:t=>{je(t,LC,{width:zo(t.element,"width").getOr("")})},onStartShrink:t=>{je(t,LC,{width:Ar(t.element)+"px"})}}),bt.config({}),It.config({find:t=>{const o=bt.contents(t);return bn(o)}})])}],behaviours:xe([Jl.childAt(0),yt("sidebar-sliding-events",[le(LC,(t,o)=>{Ie(t.element,"width",o.event.width)}),le(FC,(t,o)=>{jt(t.element,"width")})])])});var QP=Object.freeze({__proto__:null,block:(e,t,o,n)=>{at(e.element,"aria-busy",!0);const r=t.getRoot(e).getOr(e),a=xe([Ke.config({mode:"special",onTab:()=>v.some(!0),onShiftTab:()=>v.some(!0)}),ut.config({})]),l=n(r,a),d=r.getSystem().build(l);bt.append(r,ua(d)),d.hasConfigured(Ke)&&t.focus&&Ke.focusIn(d),o.isBlocked()||t.onBlock(e),o.blockWith(()=>bt.remove(r,d))},unblock:(e,t,o)=>{B(e.element,"aria-busy"),o.isBlocked()&&t.onUnblock(e),o.clear()},isBlocked:(e,t,o)=>o.isBlocked()}),e9=[Un("getRoot",v.none),Vs("focus",!0),Zt("onBlock"),Zt("onUnblock")],t9=Object.freeze({__proto__:null,init:()=>{const e=Mw(),t=o=>{e.set({destroy:o})};return Gc({readState:e.isSet,blockWith:t,clear:e.clear,isBlocked:e.isSet})}});const Fi=Us({fields:e9,name:"blocking",apis:QP,state:t9}),o9=e=>(t,o)=>({dom:{tag:"div",attributes:{"aria-label":e.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:ld('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),wM=e=>It.getCurrent(e).each(t=>da(t.element,!0)),n9=(e,t)=>{const o="tabindex",n=`data-mce-${o}`;v.from(e.iframeElement).map(U.fromDom).each(r=>{t?(C(r,o).each(a=>at(r,n,a)),at(r,o,-1)):(B(r,o),C(r,n).each(a=>{at(r,o,a),B(r,n)}))})},s9=(e,t,o,n)=>{const r=t.element;if(n9(e,o),o)Fi.block(t,o9(n)),jt(r,"display"),B(r,"aria-hidden"),e.hasFocus()&&wM(t);else{const a=It.getCurrent(t).exists(l=>em(l.element));Fi.unblock(t),Ie(r,"display","none"),at(r,"aria-hidden","true"),a&&e.focus()}},r9=e=>({uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:xe([bt.config({}),Fi.config({focus:!1}),It.config({find:t=>bn(t.components())})]),components:[]}),c9=e=>e.type==="focusin",a9=e=>c9(e)?(e.composed?bn(e.composedPath()):v.from(e.target)).map(U.fromDom).filter(Co).exists(o=>vc(o,"mce-pastebin")):!1,l9=(e,t,o)=>{const n=We(!1),r=Wo(),a=d=>{n.get()&&!a9(d)&&(d.preventDefault(),wM(t()),e.editorManager.setActive(e))};e.inline||e.on("PreInit",()=>{e.dom.bind(e.getWin(),"focusin",a),e.on("BeforeExecCommand",d=>{d.command.toLowerCase()==="mcefocus"&&d.value!==!0&&a(d)})});const l=d=>{d!==n.get()&&(n.set(d),s9(e,t(),d,o.providers),y$(e,d))};e.on("ProgressState",d=>{if(r.on(clearTimeout),So(d.time)){const m=Dv.setEditorTimeout(e,()=>l(d.state),d.time);r.set(m)}else l(d.state),r.clear()})},i9=(e,t)=>Ut(e,(r,a)=>t(a,r.len).fold(I(r),d=>({len:d.finish,list:r.list.concat([d])})),{len:0,list:[]}).list,PC=(e,t,o)=>({within:e,extra:t,withinWidth:o}),SM=(e,t,o)=>{const n=i9(e,(d,m)=>{const f=o(d);return v.some({element:d,start:m,finish:m+f,width:f})}),r=Ct(n,d=>d.finish<=t),a=Jt(r,(d,m)=>d+m.width,0),l=n.slice(r.length);return{within:r,extra:l,withinWidth:a}},D2=e=>ue(e,t=>t.element),u9=(e,t,o)=>{const n=D2(e.concat(t));return PC(n,[],o)},d9=(e,t,o,n)=>{const r=D2(e).concat([o]);return PC(r,D2(t),n)},m9=(e,t,o)=>PC(D2(e),[],o),g9=(e,t,o)=>{const n=SM(t,e,o);return n.extra.length===0?v.some(n):v.none()},h9=(e,t,o,n)=>{const r=g9(e,t,o).getOrThunk(()=>SM(t,e-o(n),o)),a=r.within,l=r.extra,d=r.withinWidth;return l.length===1&&l[0].width<=o(n)?u9(a,l,d):l.length>=1?d9(a,l,n,d):m9(a,l,d)},xM=(e,t)=>{const o=ue(t,n=>ua(n));Li.setGroups(e,o)},p9=e=>Vn(e,t=>rr(t.element).bind(o=>t.getSystem().getByDom(o).toOptional())),CM=(e,t,o)=>{const n=t.builtGroups.get();if(n.length===0)return;const r=du(e,t,"primary"),a=Fn.getCoupled(e,"overflowGroup");Ie(r.element,"visibility","hidden");const l=n.concat([a]),d=p9(l);o([]),xM(r,l);const m=Ar(r.element),f=h9(m,t.builtGroups.get(),w=>Math.ceil(w.element.dom.getBoundingClientRect().width),a);f.extra.length===0?(bt.remove(r,a),o([])):(xM(r,f.within),o(f.extra)),jt(r.element,"visibility"),Is(r.element),d.each(ut.focus)},TM=I([Es("splitToolbarBehaviours",[Fn]),tr("builtGroups",()=>We([]))]),f9=I([Ra(["overflowToggledClass"]),Ml("getOverflowBounds"),me("lazySink"),tr("overflowGroups",()=>We([])),Zt("onOpened"),Zt("onClosed")].concat(TM())),b9=I([wr({factory:Li,schema:up(),name:"primary"}),Pa({schema:up(),name:"overflow"}),Pa({name:"overflow-button"}),Pa({name:"overflow-group"})]),VC=I((e,t)=>{ja(e,Math.floor(t))}),v9=I([Ra(["toggledClass"]),me("lazySink"),$c("fetch"),Ml("getBounds"),Ir("fireDismissalEventInstead",[J("event",$l())]),La(),Zt("onToggled")]),y9=I([Pa({name:"button",overrides:e=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:xe([_t.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:e.onToggled})])})}),Pa({factory:Li,schema:up(),name:"toolbar",overrides:e=>({toolbarBehaviours:xe([Ke.config({mode:"cyclic",onEscape:t=>(_o(t,e,"button").each(ut.focus),v.none())})])})})]),$2=Wo(),w9=(e,t)=>{$2.set(!0),NC(e,t),$2.clear()},NC=(e,t)=>{const o=Fn.getCoupled(e,"toolbarSandbox");Vt.isOpen(o)?Vt.close(o):Vt.open(o,t.toolbar())},zC=(e,t,o,n)=>{const r=o.getBounds.map(l=>l()),a=o.lazySink(e).getOrDie();yr.positionWithinBounds(a,t,{anchor:{type:"hotspot",hotspot:e,layouts:n,overrides:{maxWidthFunction:VC()}}},r)},kM=(e,t,o,n,r)=>{Li.setGroups(t,r),zC(e,t,o,n),_t.on(e)},S9=(e,t,o)=>{const n=Db(),r=(l,d)=>{const m=$2.get().getOr(!1);o.fetch().get(f=>{kM(e,d,o,t.layouts,f),n.link(e.element),m||Ke.focusIn(d)})},a=()=>{_t.off(e),$2.get().getOr(!1)||ut.focus(e),n.unlink(e.element)};return{dom:{tag:"div",attributes:{id:n.id}},behaviours:xe([Ke.config({mode:"special",onEscape:l=>(Vt.close(l),v.some(!0))}),Vt.config({onOpen:r,onClose:a,isPartOf:(l,d,m)=>Xu(d,m)||Xu(e,m),getAttachPoint:()=>o.lazySink(e).getOrDie()}),yc.config({channels:{...$h({isExtraPart:Ht,...o.fireDismissalEventInstead.map(l=>({fireEventInstead:{event:l.event}})).getOr({})}),...zf({doReposition:()=>{Vt.getState(Fn.getCoupled(e,"toolbarSandbox")).each(l=>{zC(e,l,o,t.layouts)})}})}})])}},Am=Lr({name:"FloatingToolbarButton",factory:(e,t,o,n)=>({...xr.sketch({...n.button(),action:r=>{NC(r,n)},buttonBehaviours:Fa.augment({dump:n.button().buttonBehaviours},[Fn.config({others:{toolbarSandbox:r=>S9(r,o,e)}})])}),apis:{setGroups:(r,a)=>{Vt.getState(Fn.getCoupled(r,"toolbarSandbox")).each(l=>{kM(r,l,e,o.layouts,a)})},reposition:r=>{Vt.getState(Fn.getCoupled(r,"toolbarSandbox")).each(a=>{zC(r,a,e,o.layouts)})},toggle:r=>{NC(r,n)},toggleWithoutFocusing:r=>{w9(r,n)},getToolbar:r=>Vt.getState(Fn.getCoupled(r,"toolbarSandbox")),isOpen:r=>Vt.isOpen(Fn.getCoupled(r,"toolbarSandbox"))}}),configFields:v9(),partFields:y9(),apis:{setGroups:(e,t,o)=>{e.setGroups(t,o)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},toggleWithoutFocusing:(e,t)=>{e.toggleWithoutFocusing(t)},getToolbar:(e,t)=>e.getToolbar(t),isOpen:(e,t)=>e.isOpen(t)}}),x9=I([me("items"),Ra(["itemSelector"]),Es("tgroupBehaviours",[Ke])]),C9=I([Va({name:"items",unit:"item"})]),T9=(e,t,o,n)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Ws(e.tgroupBehaviours,[Ke.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),R2=Lr({name:"ToolbarGroup",configFields:x9(),partFields:C9(),factory:T9}),OM=e=>ue(e,t=>ua(t)),_M=(e,t,o)=>{CM(e,o,n=>{o.overflowGroups.set(n),t.getOpt(e).each(r=>{Am.setGroups(r,OM(n))})})},k9=(e,t,o,n)=>{const r=po(Am.sketch({fetch:()=>Pr.nu(a=>{a(OM(e.overflowGroups.get()))}),layouts:{onLtr:()=>[ls,as],onRtl:()=>[as,ls],onBottomLtr:()=>[vs,Fo],onBottomRtl:()=>[Fo,vs]},getBounds:o.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:n["overflow-button"](),toolbar:n.overflow()},onToggled:(a,l)=>e[l?"onOpened":"onClosed"](a)}));return{uid:e.uid,dom:e.dom,components:t,behaviours:Ws(e.splitToolbarBehaviours,[Fn.config({others:{overflowGroup:()=>R2.sketch({...n["overflow-group"](),items:[r.asSpec()]})}})]),apis:{setGroups:(a,l)=>{e.builtGroups.set(ue(l,a.getSystem().build)),_M(a,r,e)},refresh:a=>_M(a,r,e),toggle:a=>{r.getOpt(a).each(l=>{Am.toggle(l)})},toggleWithoutFocusing:a=>{r.getOpt(a).each(Am.toggleWithoutFocusing)},isOpen:a=>r.getOpt(a).map(Am.isOpen).getOr(!1),reposition:a=>{r.getOpt(a).each(l=>{Am.reposition(l)})},getOverflow:a=>r.getOpt(a).bind(Am.getToolbar)},domModification:{attributes:{role:"group"}}}},MM=Lr({name:"SplitFloatingToolbar",configFields:f9(),partFields:b9(),factory:k9,apis:{setGroups:(e,t,o)=>{e.setGroups(t,o)},refresh:(e,t)=>{e.refresh(t)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},toggleWithoutFocusing:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t),getOverflow:(e,t)=>e.getOverflow(t)}}),O9=I([Ra(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Zt("onOpened"),Zt("onClosed")].concat(TM())),_9=I([wr({factory:Li,schema:up(),name:"primary"}),wr({factory:Li,schema:up(),name:"overflow",overrides:e=>({toolbarBehaviours:xe([va.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:t=>{_o(t,e,"overflow-button").each(o=>{_t.off(o),ut.focus(o)}),e.onClosed(t)},onGrown:t=>{Ke.focusIn(t),e.onOpened(t)},onStartGrow:t=>{_o(t,e,"overflow-button").each(_t.on)}}),Ke.config({mode:"acyclic",onEscape:t=>(_o(t,e,"overflow-button").each(ut.focus),v.some(!0))})])})}),Pa({name:"overflow-button",overrides:e=>({buttonBehaviours:xe([_t.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),Pa({name:"overflow-group"})]),M9=(e,t)=>_o(e,t,"overflow").map(va.hasGrown).getOr(!1),EM=(e,t)=>{_o(e,t,"overflow-button").bind(()=>_o(e,t,"overflow")).each(o=>{ZC(e,t),va.toggleGrow(o)})},ZC=(e,t)=>{_o(e,t,"overflow").each(o=>{CM(e,t,n=>{const r=ue(n,a=>ua(a));Li.setGroups(o,r)}),_o(e,t,"overflow-button").each(n=>{va.hasGrown(o)&&_t.on(n)}),va.refresh(o)})},E9=(e,t,o,n)=>{const r="alloy.toolbar.toggle",a=(l,d)=>{const m=ue(d,l.getSystem().build);e.builtGroups.set(m)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Ws(e.splitToolbarBehaviours,[Fn.config({others:{overflowGroup:l=>R2.sketch({...n["overflow-group"](),items:[xr.sketch({...n["overflow-button"](),action:d=>{Pt(l,r)}})]})}}),yt("toolbar-toggle-events",[le(r,l=>{EM(l,e)})])]),apis:{setGroups:(l,d)=>{a(l,d),ZC(l,e)},refresh:l=>ZC(l,e),toggle:l=>EM(l,e),isOpen:l=>M9(l,e)},domModification:{attributes:{role:"group"}}}},UC=Lr({name:"SplitSlidingToolbar",configFields:O9(),partFields:_9(),factory:E9,apis:{setGroups:(e,t,o)=>{e.setGroups(t,o)},refresh:(e,t)=>{e.refresh(t)},toggle:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t)}}),AM=e=>{const t=e.title.fold(()=>({}),o=>({attributes:{title:o}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...t},components:[R2.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:xe([Sn.config({}),ut.config({})])}},H2=e=>R2.sketch(AM(e)),DM=(e,t)=>{const o=cn(n=>{const r=ue(e.initGroups,H2);Li.setGroups(n,r)});return xe([ql.toolbarButton(e.providers.isDisabled),As(),Ke.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),yt("toolbar-events",[o])])},$M=e=>{const t=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":AM({title:v.none(),items:[]}),"overflow-button":bL({name:"more",icon:v.some("more-drawer"),enabled:!0,tooltip:v.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:v.none(),borderless:!1},v.none(),e.providers,[],"overflow-button")},splitToolbarBehaviours:DM(e,t)}},A9=e=>{const t=$M(e),o=4,n=MM.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return MM.sketch({...t,lazySink:e.getSink,getOverflowBounds:()=>{const r=e.moreDrawerData.lazyHeader().element,a=fr(r),l=_r(r),d=fr(l),m=Math.max(l.dom.scrollHeight,d.height);return yn(a.x+o,d.y,a.width-o*2,m)},parts:{...t.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}},components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:r=>e.onToggled(r,!0),onClosed:r=>e.onToggled(r,!1)})},D9=e=>{const t=UC.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),o=UC.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),n=$M(e);return UC.sketch({...n,components:[t,o],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:r=>{r.getSystem().broadcastOn([HC()],{type:"opened"}),e.onToggled(r,!0)},onClosed:r=>{r.getSystem().broadcastOn([HC()],{type:"closed"}),e.onToggled(r,!1)}})},I2=e=>{const t=e.cyclicKeying?"cyclic":"acyclic";return Li.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===gl.scrolling?["tox-toolbar--scrolling"]:[])},components:[Li.parts.groups({})],toolbarBehaviours:DM(e,t)})},RM=[wm,hl,or("tooltip"),fc("buttonType","secondary",["primary","secondary"]),Vs("borderless",!1),$c("onAction")],$9=[...RM,ud,cl("type",["button"])],R9=[...RM,Vs("active",!1),cl("type",["togglebutton"])],HM={button:$9,togglebutton:R9},H9=[cl("type",["group"]),Ea("buttons",[],Jr("type",HM))],I9=Jr("type",{...HM,group:H9}),B9=tt([Ea("buttons",[],I9),$c("onShow"),$c("onHide")]),L9=e=>rn("view",B9,e),F9=(e,t)=>{var o,n;const r=e.type==="togglebutton",a=e.icon.map(j=>Mm(j,t.icons)).map(po),d=j=>{const de=ke=>{a.map(ae=>ae.getOpt(j).each(ct=>{bt.set(ct,[Mm(ke,t.icons)])}))},ie=ke=>{const ae=j.element;ke?(wn(ae,"tox-button--enabled"),at(ae,"aria-pressed",!0)):(Hn(ae,"tox-button--enabled"),B(ae,"aria-pressed"))},he=()=>vc(j.element,"tox-button--enabled");if(r)return e.onAction({setIcon:de,setActive:ie,isActive:he});if(e.type==="button")return e.onAction({setIcon:de})},m={...e,name:r?e.text.getOr(e.icon.getOr("")):(o=e.text)!==null&&o!==void 0?o:e.icon.getOr(""),primary:e.buttonType==="primary",buttonType:v.from(e.buttonType),tooltip:e.tooltip,icon:e.icon,enabled:!0,borderless:e.borderless},f=vC((n=e.buttonType)!==null&&n!==void 0?n:"secondary"),w=r?e.text.map(t.translate):v.some(t.translate(e.text)),x=w.map(Ln),O=m.tooltip.or(w).map(j=>({"aria-label":t.translate(j)})).getOr({}),M=a.map(j=>j.asSpec()),A=op([M,x]),L=e.icon.isSome()&&x.isSome(),ee={tag:"button",classes:f.concat(...e.icon.isSome()&&!L?["tox-button--icon"]:[]).concat(...L?["tox-button--icon-and-text"]:[]).concat(...e.borderless?["tox-button--naked"]:[]).concat(...e.type==="togglebutton"&&e.active?["tox-button--enabled"]:[]),attributes:O},W=[],Y=C2(m,v.some(d),W,ee,A,e.tooltip,t);return xr.sketch(Y)},IM=(e,t)=>F9(e,t),P9=(e,t)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:ue(e.buttons,o=>IM(o,t))}),BM=Ac().deviceType,V9=BM.isPhone(),N9=BM.isTablet(),z9=e=>{let t=!1;const o=ue(e.buttons,n=>n.type==="group"?(t=!0,P9(n,e.providers)):IM(n,e.providers));return{uid:e.uid,dom:{tag:"div",classes:[t?"tox-view__toolbar":"tox-view__header",...V9||N9?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:xe([ut.config({}),Ke.config({mode:"flow",selector:"button, .tox-button",focusInside:fm.OnEnterOrSpaceMode})]),components:t?o:[Bi.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Bi.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:o})]}},Z9=e=>({uid:e.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),U9=(e,t,o,n)=>{const r={getPane:a=>Gs.getPart(a,e,"pane"),getOnShow:a=>e.viewConfig.onShow,getOnHide:a=>e.viewConfig.onHide};return{uid:e.uid,dom:e.dom,components:t,apis:r}};var dp=Lr({name:"silver.View",configFields:[me("viewConfig")],partFields:[ma({factory:{sketch:z9},schema:[me("buttons"),me("providers")],name:"header"}),ma({factory:{sketch:Z9},schema:[],name:"pane"})],factory:U9,apis:{getPane:(e,t)=>e.getPane(t),getOnShow:(e,t)=>e.getOnShow(t),getOnHide:(e,t)=>e.getOnHide(t)}});const W9=(e,t,o)=>Nr(t,(n,r)=>{const a=ca(L9(n));return e.slot(r,dp.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:a,components:[...a.buttons.length>0?[dp.parts.header({buttons:a.buttons,providers:o})]:[],dp.parts.pane({})]}))}),G9=(e,t)=>cc.sketch(o=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:W9(o,e,t),slotBehaviours:A1.unnamedEvents([cn(n=>cc.hideAllSlots(n))])})),LM=e=>Qt(cc.getSlotNames(e),t=>cc.isShowing(e,t)),j9=e=>{const t=e.element;Ie(t,"display","none"),at(t,"aria-hidden","true")},q9=e=>{const t=e.element;jt(t,"display"),B(t,"aria-hidden")},K9=e=>({getContainer:I(e)}),FM=(e,t,o)=>{cc.getSlot(e,t).each(n=>{dp.getPane(n).each(r=>{o(n)(K9(r.element.dom))})})},Y9=(e,t)=>FM(e,t,dp.getOnShow),X9=(e,t)=>FM(e,t,dp.getOnHide);var B2=ar({factory:(e,t)=>{const a={setViews:(l,d)=>{bt.set(l,[G9(d,t.backstage.shared.providers)])},whichView:l=>It.getCurrent(l).bind(LM),toggleView:(l,d,m,f)=>It.getCurrent(l).exists(w=>{const x=LM(w),O=x.exists(A=>f===A),M=cc.getSlot(w,f).isSome();return M&&(cc.hideAllSlots(w),O?(j9(l),d()):(m(),q9(l),cc.showSlot(w,f),Y9(w,f)),x.each(A=>X9(w,A))),M})};return{uid:e.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:xe([bt.config({}),It.config({find:l=>{const d=bt.contents(l);return bn(d)}})]),apis:a}},name:"silver.ViewWrapper",configFields:[me("backstage")],apis:{setViews:(e,t,o)=>e.setViews(t,o),toggleView:(e,t,o,n,r)=>e.toggleView(t,o,n,r),whichView:(e,t)=>e.whichView(t)}});const J9=(e,t,o)=>{let n=!1;const r=l=>{Ab(l,".tox-statusbar").each(d=>{No(d,"display")==="none"&&qo(d,"aria-hidden")==="true"?(jt(d,"display"),B(d,"aria-hidden")):(Ie(d,"display","none"),at(d,"aria-hidden","true"))})},a={getSocket:l=>Gs.getPart(l,e,"socket"),setSidebar:(l,d,m)=>{Gs.getPart(l,e,"sidebar").each(f=>KP(f,d,m))},toggleSidebar:(l,d)=>{Gs.getPart(l,e,"sidebar").each(m=>YP(m,d))},whichSidebar:l=>Gs.getPart(l,e,"sidebar").bind(XP).getOrNull(),getHeader:l=>Gs.getPart(l,e,"header"),getToolbar:l=>Gs.getPart(l,e,"toolbar"),setToolbar:(l,d)=>{Gs.getPart(l,e,"toolbar").each(m=>{const f=ue(d,H2);m.getApis().setGroups(m,f)})},setToolbars:(l,d)=>{Gs.getPart(l,e,"multiple-toolbar").each(m=>{const f=ue(d,w=>ue(w,H2));Q_.setItems(m,f)})},refreshToolbar:l=>{Gs.getPart(l,e,"toolbar").each(m=>m.getApis().refresh(m))},toggleToolbarDrawer:l=>{Gs.getPart(l,e,"toolbar").each(d=>{Kc(d.getApis().toggle,m=>m(d))})},toggleToolbarDrawerWithoutFocusing:l=>{Gs.getPart(l,e,"toolbar").each(d=>{Kc(d.getApis().toggleWithoutFocusing,m=>m(d))})},isToolbarDrawerToggled:l=>Gs.getPart(l,e,"toolbar").bind(d=>v.from(d.getApis().isOpen).map(m=>m(d))).getOr(!1),getThrobber:l=>Gs.getPart(l,e,"throbber"),focusToolbar:l=>{Gs.getPart(l,e,"toolbar").orThunk(()=>Gs.getPart(l,e,"multiple-toolbar")).each(m=>{Ke.focusIn(m)})},setMenubar:(l,d)=>{Gs.getPart(l,e,"menubar").each(m=>{BC.setMenus(m,d)})},focusMenubar:l=>{Gs.getPart(l,e,"menubar").each(d=>{BC.focus(d)})},setViews:(l,d)=>{Gs.getPart(l,e,"viewWrapper").each(m=>{B2.setViews(m,d)})},toggleView:(l,d)=>Gs.getPart(l,e,"viewWrapper").exists(m=>B2.toggleView(m,()=>a.showMainView(l),()=>a.hideMainView(l),d)),whichView:l=>Gs.getPart(l,e,"viewWrapper").bind(B2.whichView).getOrNull(),hideMainView:l=>{n=a.isToolbarDrawerToggled(l),n&&a.toggleToolbarDrawer(l),Gs.getPart(l,e,"editorContainer").each(d=>{const m=d.element;r(m),Ie(m,"display","none"),at(m,"aria-hidden","true")})},showMainView:l=>{n&&a.toggleToolbarDrawer(l),Gs.getPart(l,e,"editorContainer").each(d=>{const m=d.element;r(m),jt(m,"display"),B(m,"aria-hidden")})}};return{uid:e.uid,dom:e.dom,components:t,apis:a,behaviours:e.behaviours}},Q9=vu.optional({factory:BC,name:"menubar",schema:[me("backstage")]}),eV=e=>e.type===gl.sliding?D9:e.type===gl.floating?A9:I2,tV=vu.optional({factory:{sketch:e=>Q_.sketch({uid:e.uid,dom:e.dom,listBehaviours:xe([Ke.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>I2({type:e.type,uid:Le("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:()=>(e.onEscape(),v.some(!0))}),setupItem:(t,o,n,r)=>{Li.setGroups(o,n)},shell:!0})},name:"multiple-toolbar",schema:[me("dom"),me("onEscape")]}),oV=vu.optional({factory:{sketch:e=>{const t=eV(e),o={type:e.type,uid:e.uid,onEscape:()=>(e.onEscape(),v.some(!0)),onToggled:(n,r)=>e.onToolbarToggled(r),cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes};return t(o)}},name:"toolbar",schema:[me("dom"),me("onEscape"),me("getSink")]}),nV=vu.optional({factory:{sketch:DP},name:"header",schema:[me("dom")]}),sV=vu.optional({factory:{sketch:PP},name:"promotion",schema:[me("dom")]}),rV=vu.optional({name:"socket",schema:[me("dom")]}),cV=vu.optional({factory:{sketch:JP},name:"sidebar",schema:[me("dom")]}),aV=vu.optional({factory:{sketch:r9},name:"throbber",schema:[me("dom")]}),lV=vu.optional({factory:B2,name:"viewWrapper",schema:[me("backstage")]}),iV=e=>({uid:e.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:e.components}),uV=vu.optional({factory:{sketch:iV},name:"editorContainer",schema:[]});var Po=Lr({name:"OuterContainer",factory:J9,configFields:[me("dom"),me("behaviours")],partFields:[nV,Q9,oV,tV,rV,cV,sV,aV,lV,uV],apis:{getSocket:(e,t)=>e.getSocket(t),setSidebar:(e,t,o,n)=>{e.setSidebar(t,o,n)},toggleSidebar:(e,t,o)=>{e.toggleSidebar(t,o)},whichSidebar:(e,t)=>e.whichSidebar(t),getHeader:(e,t)=>e.getHeader(t),getToolbar:(e,t)=>e.getToolbar(t),setToolbar:(e,t,o)=>{e.setToolbar(t,o)},setToolbars:(e,t,o)=>{e.setToolbars(t,o)},refreshToolbar:(e,t)=>e.refreshToolbar(t),toggleToolbarDrawer:(e,t)=>{e.toggleToolbarDrawer(t)},toggleToolbarDrawerWithoutFocusing:(e,t)=>{e.toggleToolbarDrawerWithoutFocusing(t)},isToolbarDrawerToggled:(e,t)=>e.isToolbarDrawerToggled(t),getThrobber:(e,t)=>e.getThrobber(t),setMenubar:(e,t,o)=>{e.setMenubar(t,o)},focusMenubar:(e,t)=>{e.focusMenubar(t)},focusToolbar:(e,t)=>{e.focusToolbar(t)},setViews:(e,t,o)=>{e.setViews(t,o)},toggleView:(e,t,o)=>e.toggleView(t,o),whichView:(e,t)=>e.whichView(t)}});const dV="file edit view insert format tools table help",PM={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},mV=(e,t,o)=>{const n=KT(o).split(/[ ,]/);return{text:e.title,getItems:()=>uo(e.items,r=>{const a=r.toLowerCase();return a.trim().length===0?[]:fn(n,l=>l===a)?[]:a==="separator"||a==="|"?[{type:"separator"}]:t.menuItems[a]?[t.menuItems[a]]:[]})}},WC=e=>e.split(" "),VM=(e,t)=>{const o={...PM,...t.menus},n=Ro(t.menus).length>0,r=t.menubar===void 0||t.menubar===!0?WC(dV):WC(t.menubar===!1?"":t.menubar),a=Ct(r,d=>{const m=Ft(PM,d);return n?m||He(t.menus,d).exists(f=>Ft(f,"items")):m}),l=ue(a,d=>{const m=o[d];return mV({title:m.title,items:WC(m.items)},t,e)});return Ct(l,d=>{const m=f=>Xe(f)||f.type!=="separator";return d.getItems().length>0&&fn(d.getItems(),m)})},gV=e=>{const t=()=>{e._skinLoaded=!0,p$(e)};return()=>{e.initialized?t():e.on("init",t)}},hV=(e,t)=>()=>f$(e,{message:t}),NM=(e,t,o)=>(e.on("remove",()=>o.unload(t)),o.load(t)),GC=(e,t,o,n)=>(e.on("remove",()=>n.unloadRawCss(t)),n.loadRawCss(t,o)),pV=async(e,t)=>{const n="ui/"+Pv(e).getOr("default")+"/skin.css",r=tinymce.Resource.get(n);if(Xe(r))return Promise.resolve(GC(e,n,r,e.ui.styleSheetLoader));{const a=t+"/skin.min.css";return NM(e,a,e.ui.styleSheetLoader)}},fV=async(e,t)=>{if(Je(U.fromDom(e.getElement()))){const r="ui/"+Pv(e).getOr("default")+"/skin.shadowdom.css",a=tinymce.Resource.get(r);if(Xe(a))return GC(e,r,a,Yh.DOM.styleSheetLoader),Promise.resolve();{const l=t+"/skin.shadowdom.min.css";return NM(e,l,Yh.DOM.styleSheetLoader)}}},bV=async(e,t)=>{Pv(t).fold(()=>{const n=Fv(t);n&&t.contentCSS.push(n+(e?"/content.inline":"/content")+".min.css")},n=>{const r="ui/"+n+(e?"/content.inline":"/content")+".css",a=tinymce.Resource.get(r);if(Xe(a))GC(t,r,a,t.ui.styleSheetLoader);else{const l=Fv(t);l&&t.contentCSS.push(l+(e?"/content.inline":"/content")+".min.css")}});const o=Fv(t);if(!Kx(t)&&Xe(o))return Promise.all([pV(t,o),fV(t,o)]).then()},zM=(e,t)=>bV(e,t).then(gV(t),hV(t,"Skin could not be loaded")),vV=go(zM,!1),yV=go(zM,!0),mp=(e,t,o)=>F(o)?e.translate(t):e.translate([t,e.translate(o)]),wV=(e,t)=>{const o=(l,d,m,f)=>{const w=e.shared.providers.translate(l.title);if(l.type==="separator")return v.some({type:"separator",text:w});if(l.type==="submenu"){const x=uo(l.getStyleItems(),O=>n(O,d,f));return d===0&&x.length<=0?v.none():v.some({type:"nestedmenuitem",text:w,enabled:x.length>0,getSubmenuItems:()=>uo(l.getStyleItems(),O=>n(O,d,f))})}else return v.some({type:"togglemenuitem",text:w,icon:l.icon,active:l.isSelected(f),enabled:!m,onAction:t.onAction(l),...l.getStylePreview().fold(()=>({}),x=>({meta:{style:x}}))})},n=(l,d,m)=>{const f=l.type==="formatter"&&t.isInvalid(l);return d===0?f?[]:o(l,d,!1,m).toArray():o(l,d,f,m).toArray()},r=l=>{const d=t.getCurrentValue(),m=t.shouldHide?0:1;return uo(l,f=>n(f,m,d))};return{validateItems:r,getFetch:(l,d)=>(m,f)=>{const w=d(),x=r(w),O=ip(x,Ii.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:v.none()});f(O)}}},gp=(e,t)=>{const o=t.dataset,n=o.type==="basic"?()=>ue(o.data,r=>V_(r,t.isSelectedFor,t.getPreviewFor)):o.getData;return{items:wV(e,t),getStyleItems:n}},J1=(e,t,o,n,r,a)=>{const{items:l,getStyleItems:d}=gp(t,o),m=We(o.tooltip),f=x=>({getComponent:I(x),setTooltip:O=>{const M=t.shared.providers.translate(O);at(x.element,"aria-label",M),m.set(O)}}),w=x=>{const O=M=>x.setTooltip(mp(e,n(M.value),M.value));return e.on(r,O),Qv(xg(e,"NodeChange",M=>{const A=M.getComponent();o.updateText(A),rt.set(M.getComponent(),!e.selection.isEditable())})(x),()=>e.off(r,O))};return aC({text:o.icon.isSome()?v.none():o.text,icon:o.icon,ariaLabel:v.some(o.tooltip),tooltip:v.none(),role:v.none(),fetch:l.getFetch(t,d),onSetup:w,getApi:f,columns:1,presets:"normal",classes:o.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Fr.config({...t.shared.providers.tooltips.getConfig({tooltipText:t.shared.providers.translate(o.tooltip),onShow:x=>{if(o.tooltip!==m.get()){const O=t.shared.providers.translate(m.get());Fr.setComponents(x,t.shared.providers.tooltips.getComponents({tooltipText:O}))}}})})]},"tox-tbtn",t.shared,a)},SV=e=>ue(e,t=>{let o=t,n=t;const r=t.split("=");return r.length>1&&(o=r[0],n=r[1]),{title:o,format:n}}),xV=e=>({type:"basic",data:e});var hp;(function(e){e[e.SemiColon=0]="SemiColon",e[e.Space=1]="Space"})(hp||(hp={}));const CV=(e,t)=>t===hp.SemiColon?e.replace(/;$/,"").split(";"):e.split(" "),jC=(e,t,o)=>{const n=e.options.get(t);return{type:"basic",data:SV(CV(n,o))}},TV="Align",ZM=I("Alignment {0}"),UM="left",qC=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],WM=e=>{const t=()=>Qt(qC,d=>e.formatter.match(d.format)),o=d=>()=>e.formatter.match(d),n=d=>v.none,r=d=>{const f=t().fold(I(UM),w=>w.title.toLowerCase());je(d,Dg,{icon:`align-${f}`}),C$(e,{value:f})},a=xV(qC),l=d=>()=>Qt(qC,m=>m.format===d.format).each(m=>e.execCommand(m.command));return{tooltip:mp(e,ZM(),UM),text:v.none(),icon:v.some("align-left"),isSelectedFor:o,getCurrentValue:v.none,getPreviewFor:n,onAction:l,updateText:r,dataset:a,shouldHide:!1,isInvalid:d=>!e.formatter.canApply(d.format)}},kV=(e,t)=>J1(e,t,WM(e),ZM,"AlignTextUpdate","align"),OV=(e,t)=>{const o=gp(t,WM(e));e.ui.registry.addNestedMenuItem("align",{text:t.shared.providers.translate(TV),onSetup:wc(e),getSubmenuItems:()=>o.items.validateItems(o.getStyleItems())})},GM=(e,t)=>{const o=t(),n=ue(o,r=>r.format);return v.from(e.formatter.closest(n)).bind(r=>Qt(o,a=>a.format===r))},_V="Blocks",jM=I("Block {0}"),KC="Paragraph",qM=e=>{const t=a=>()=>e.formatter.match(a),o=a=>()=>{const l=e.formatter.get(a);return l?v.some({tag:l.length>0&&(l[0].inline||l[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(a))}):v.none()},n=a=>{const d=GM(e,()=>r.data).fold(I(KC),m=>m.title);je(a,fl,{text:d}),O$(e,{value:d})},r=jC(e,"block_formats",hp.SemiColon);return{tooltip:mp(e,jM(),KC),text:v.some(KC),icon:v.none(),isSelectedFor:t,getCurrentValue:v.none,getPreviewFor:o,onAction:fk(e),updateText:n,dataset:r,shouldHide:!1,isInvalid:a=>!e.formatter.canApply(a.format)}},MV=(e,t)=>J1(e,t,qM(e),jM,"BlocksTextUpdate","blocks"),EV=(e,t)=>{const o=gp(t,qM(e));e.ui.registry.addNestedMenuItem("blocks",{text:_V,onSetup:wc(e),getSubmenuItems:()=>o.items.validateItems(o.getStyleItems())})},AV="Fonts",KM=I("Font {0}"),YC="System Font",DV=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],YM=e=>{const t=e.split(/\s*,\s*/);return ue(t,o=>o.replace(/^['"]+|['"]+$/g,""))},XM=(e,t)=>t.length>0&&Et(t,o=>e.indexOf(o.toLowerCase())>-1),$V=(e,t)=>{if(e.indexOf("-apple-system")===0||t.length>0){const o=YM(e.toLowerCase());return XM(o,DV)||XM(o,t)}else return!1},JM=e=>{const t=()=>{const m=A=>A?YM(A)[0]:"",f=e.queryCommandValue("FontName"),w=d.data,x=f?f.toLowerCase():"",O=p5(e);return{matchOpt:Qt(w,A=>{const L=A.format;return L.toLowerCase()===x||m(L).toLowerCase()===m(x).toLowerCase()}).orThunk(()=>Cs($V(x,O),{title:YC,format:x})),font:f}},o=m=>f=>f.exists(w=>w.format===m),n=()=>{const{matchOpt:m}=t();return m},r=m=>()=>v.some({tag:"div",styles:m.indexOf("dings")===-1?{"font-family":m}:{}}),a=m=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("FontName",!1,m.format)})},l=m=>{const{matchOpt:f,font:w}=t(),x=f.fold(I(w),O=>O.title);je(m,fl,{text:x}),_$(e,{value:x})},d=jC(e,"font_family_formats",hp.SemiColon);return{tooltip:mp(e,KM(),YC),text:v.some(YC),icon:v.none(),isSelectedFor:o,getCurrentValue:n,getPreviewFor:r,onAction:a,updateText:l,dataset:d,shouldHide:!1,isInvalid:Ht}},RV=(e,t)=>J1(e,t,JM(e),KM,"FontFamilyTextUpdate","fontfamily"),HV=(e,t)=>{const o=gp(t,JM(e));e.ui.registry.addNestedMenuItem("fontfamily",{text:t.shared.providers.translate(AV),onSetup:wc(e),getSubmenuItems:()=>o.items.validateItems(o.getStyleItems())})},IV={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},BV=(()=>{const e="[0-9]+",o="[eE]"+("[+-]?"+e),n="\\.",r=d=>`(?:${d})?`,l=`[+-]?(?:${["Infinity",e+n+r(e)+r(o),n+e+r(o),e+r(o)].join("|")})`;return new RegExp(`^(${l})(.*)$`)})(),LV=(e,t)=>fn(t,o=>fn(IV[o],n=>e===n)),L2=(e,t)=>v.from(BV.exec(e)).bind(n=>{const r=Number(n[1]),a=n[2];return LV(a,t)?v.some({value:r,unit:a}):v.none()}),FV=(e,t)=>L2(e,t).map(({value:o,unit:n})=>o+n),QM={tab:I(9),escape:I(27),enter:I(13),backspace:I(8),delete:I(46),left:I(37),up:I(38),right:I(39),down:I(40),space:I(32),home:I(36),end:I(35),pageUp:I(33),pageDown:I(34)},PV=(e,t,o,n)=>{let r=v.none();const a=j=>j.map(de=>Ee.getValue(de)).getOr(""),l=xg(e,"NodeChange SwitchMode",j=>{const de=j.getComponent();r=v.some(de),o.updateInputValue(de),rt.set(de,!e.selection.isEditable())}),d=j=>({getComponent:I(j)}),m=We(X),f=Le("custom-number-input-events"),w=(j,de,ie)=>{const he=a(r),ke=o.getNewValue(he,j),ae=he.length-`${ke}`.length,ct=r.map(Ye=>Ye.element.dom.selectionStart-ae),$e=r.map(Ye=>Ye.element.dom.selectionEnd-ae);o.onAction(ke,ie),r.each(Ye=>{Ee.setValue(Ye,ke),de&&(ct.each(Ne=>Ye.element.dom.selectionStart=Ne),$e.each(Ne=>Ye.element.dom.selectionEnd=Ne))})},x=(j,de)=>w((ie,he)=>ie-he,j,de),O=(j,de)=>w((ie,he)=>ie+he,j,de),M=j=>Wr(j.element).fold(v.none,de=>(da(de),v.some(!0))),A=j=>em(j.element)?(Jc(j.element).each(de=>da(de)),v.some(!0)):v.none(),L=(j,de,ie,he)=>{const ke=We(X),ae=t.shared.providers.translate(ie),ct=Le("altExecuting"),$e=xg(e,"NodeChange SwitchMode",Ne=>{rt.set(Ne.getComponent(),!e.selection.isEditable())}),Ye=Ne=>{rt.isDisabled(Ne)||j(!0)};return xr.sketch({dom:{tag:"button",attributes:{"aria-label":ae,"data-mce-name":de},classes:he.concat(de)},components:[cC(de,t.shared.providers.icons)],buttonBehaviours:xe([rt.config({}),Fr.config(t.shared.providers.tooltips.getConfig({tooltipText:ae})),yt(ct,[Sm({onSetup:$e,getApi:d},ke),xm({getApi:d},ke),le(tc(),(Ne,qt)=>{(qt.event.raw.keyCode===QM.space()||qt.event.raw.keyCode===QM.enter())&&(rt.isDisabled(Ne)||j(!1))}),le(nu(),Ye),le(ll(),Ye)])]),eventOrder:{[tc()]:[ct,"keying"],[nu()]:[ct,"alloy.base.behaviour"],[ll()]:[ct,"alloy.base.behaviour"],[Hc()]:["alloy.base.behaviour",ct,"tooltipping"],[Dl()]:[ct,"tooltipping"]}})},ee=po(L(j=>x(!1,j),"minus","Decrease font size",[])),W=po(L(j=>O(!1,j),"plus","Increase font size",[])),Y=po({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[yg.sketch({inputBehaviours:xe([rt.config({}),yt(f,[Sm({onSetup:l,getApi:d},m),xm({getApi:d},m)]),yt("input-update-display-text",[le(fl,(j,de)=>{Ee.setValue(j,de.event.text)}),le(yi(),j=>{o.onAction(Ee.getValue(j))}),le(Da(),j=>{o.onAction(Ee.getValue(j))})]),Ke.config({mode:"special",onEnter:j=>(w(xt,!0,!0),v.some(!0)),onEscape:M,onUp:j=>(O(!0,!1),v.some(!0)),onDown:j=>(x(!0,!1),v.some(!0)),onLeft:(j,de)=>(de.cut(),v.none()),onRight:(j,de)=>(de.cut(),v.none())})])})],behaviours:xe([ut.config({}),Ke.config({mode:"special",onEnter:A,onSpace:A,onEscape:M}),yt("input-wrapper-events",[le(Aa(),j=>{ye([ee,W],de=>{const ie=U.fromDom(de.get(j).element.dom);em(ie)&&vh(ie)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...oo(n)?{"data-mce-name":n}:{}}},components:[ee.asSpec(),Y.asSpec(),W.asSpec()],behaviours:xe([ut.config({}),Ke.config({mode:"flow",focusInside:fm.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:j=>em(j.element)?v.none():(da(j.element),v.some(!0))})])}},VV="Font sizes",eE=I("Font size {0}"),tE="12pt",NV={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},zV={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},ZV=(e,t)=>{const o=Math.pow(10,t);return Math.round(e*o)/o},UV=(e,t)=>/[0-9.]+px$/.test(e)?ZV(parseInt(e,10)*72/96,t||0)+"pt":He(zV,e).getOr(e),WV=e=>He(NV,e).getOr(""),oE=e=>{const t=()=>{let m=v.none();const f=d.data,w=e.queryCommandValue("FontSize");if(w)for(let x=3;m.isNone()&&x>=0;x--){const O=UV(w,x),M=WV(O);m=Qt(f,A=>A.format===w||A.format===O||A.format===M)}return{matchOpt:m,size:w}},o=m=>f=>f.exists(w=>w.format===m),n=()=>{const{matchOpt:m}=t();return m},r=I(v.none),a=m=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("FontSize",!1,m.format)})},l=m=>{const{matchOpt:f,size:w}=t(),x=f.fold(I(w),O=>O.title);je(m,fl,{text:x}),T$(e,{value:x})},d=jC(e,"font_size_formats",hp.Space);return{tooltip:mp(e,eE(),tE),text:v.some(tE),icon:v.none(),isSelectedFor:o,getPreviewFor:r,getCurrentValue:n,onAction:a,updateText:l,dataset:d,shouldHide:!1,isInvalid:Ht}},GV=(e,t)=>J1(e,t,oE(e),eE,"FontSizeTextUpdate","fontsize"),jV=e=>{var t;const o={step:1};return(t={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[e])!==null&&t!==void 0?t:o},qV=16,KV=e=>e>=0,YV=e=>{const t=()=>e.queryCommandValue("FontSize");return{updateInputValue:n=>je(n,fl,{text:t()}),onAction:(n,r)=>e.execCommand("FontSize",!1,n,{skip_focus:!r}),getNewValue:(n,r)=>{L2(n,["unsupportedLength","empty"]);const a=t(),l=L2(n,["unsupportedLength","empty"]).or(L2(a,["unsupportedLength","empty"])),d=l.map(O=>O.value).getOr(qV),m=o5(e),f=l.map(O=>O.unit).filter(O=>O!=="").getOr(m),w=r(d,jV(f).step),x=`${KV(w)?w:d}${f}`;return x!==a&&k$(e,{value:x}),x}}},XV=(e,t)=>PV(e,t,YV(e),"fontsizeinput"),JV=(e,t)=>{const o=gp(t,oE(e));e.ui.registry.addNestedMenuItem("fontsize",{text:VV,onSetup:wc(e),getSubmenuItems:()=>o.items.validateItems(o.getStyleItems())})},QV="Formats",nE=e=>F(e)?"Formats":"Format {0}",sE=(e,t)=>{const o="Formats",n=l=>()=>e.formatter.match(l),r=l=>()=>{const d=e.formatter.get(l);return d!==void 0?v.some({tag:d.length>0&&(d[0].inline||d[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(l))}):v.none()},a=l=>{const d=x=>I_(x)?uo(x.items,d):B_(x)?[{title:x.title,format:x.format}]:[],m=uo(P_(e),d),w=GM(e,I(m)).fold(I({title:o,tooltipLabel:""}),x=>({title:x.title,tooltipLabel:x.title}));je(l,fl,{text:w.title}),x$(e,{value:w.tooltipLabel})};return{tooltip:mp(e,nE(""),""),text:v.some(o),icon:v.none(),isSelectedFor:n,getCurrentValue:v.none,getPreviewFor:r,onAction:fk(e),updateText:a,shouldHide:jT(e),isInvalid:l=>!e.formatter.canApply(l.format),dataset:t}},eN=(e,t)=>{const o={type:"advanced",...t.styles};return J1(e,t,sE(e,o),nE,"StylesTextUpdate","styles")},tN=(e,t)=>{const o={type:"advanced",...t.styles},n=gp(t,sE(e,o));e.ui.registry.addNestedMenuItem("styles",{text:QV,onSetup:wc(e),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})},oN=I([me("toggleClass"),me("fetch"),Qu("onExecute"),J("getHotspot",v.some),J("getAnchorOverrides",I({})),La(),Qu("onItemExecute"),no("lazySink"),me("dom"),Zt("onOpen"),Es("splitDropdownBehaviours",[Fn,Ke,ut]),J("matchWidth",!1),J("useMinWidth",!1),J("eventOrder",{}),no("role")].concat(B4())),nN=wr({factory:xr,schema:[me("dom")],name:"arrow",defaults:()=>({buttonBehaviours:xe([ut.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each(Si)},buttonBehaviours:xe([_t.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])})}),sN=wr({factory:xr,schema:[me("dom")],name:"button",defaults:()=>({buttonBehaviours:xe([ut.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each(o=>{e.onExecute(o,t)})}})}),rN=I([nN,sN,ma({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[me("text")],name:"aria-descriptor"}),Pa({schema:[cf()],name:"menu",defaults:e=>({onExecute:(t,o)=>{t.getSystem().getByUid(e.uid).each(n=>{e.onItemExecute(n,t,o)})}})}),Lk()]),cN=(e,t,o,n)=>{const r=w=>{It.getCurrent(w).each(x=>{to.highlightFirst(x),Ke.focusIn(x)})},a=w=>{H4(e,xt,w,n,r,Lc.HighlightMenuAndItem).get(X)},l=w=>(a(w),v.some(!0)),d=w=>{const x=du(w,e,"button");return Si(x),v.some(!0)},m={...Lo([cn((w,x)=>{_o(w,e,"aria-descriptor").each(M=>{const A=Le("aria");at(M.element,"id",A),at(w.element,"aria-describedby",A)})})]),...Av(v.some(a))},f={repositionMenus:w=>{_t.isOn(w)&&Nk(w)}};return{uid:e.uid,dom:e.dom,components:t,apis:f,eventOrder:{...e.eventOrder,[bc()]:["disabling","toggling","alloy.base.behaviour"]},events:m,behaviours:Ws(e.splitDropdownBehaviours,[Fn.config({others:{sandbox:w=>{const x=du(w,e,"arrow");return I4(e,w,{onOpen:()=>{_t.on(x),_t.on(w)},onClose:()=>{_t.off(x),_t.off(w)}})}}}),Ke.config({mode:"special",onSpace:d,onEnter:d,onDown:l}),ut.config({}),_t.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}},F2=Lr({name:"SplitDropdown",configFields:oN(),partFields:rN(),factory:cN,apis:{repositionMenus:(e,t)=>e.repositionMenus(t)}}),rE=e=>({isEnabled:()=>!rt.isDisabled(e),setEnabled:t=>rt.set(e,!t),setText:t=>je(e,fl,{text:t}),setIcon:t=>je(e,Dg,{icon:t})}),aN=e=>({setActive:t=>{_t.set(e,t)},isActive:()=>_t.isOn(e),isEnabled:()=>!rt.isDisabled(e),setEnabled:t=>rt.set(e,!t),setText:t=>je(e,fl,{text:t}),setIcon:t=>je(e,Dg,{icon:t})}),cE=(e,t)=>e.map(o=>({"aria-label":t.translate(o)})).getOr({}),aE=Le("focus-button"),XC=(e,t,o,n,r,a)=>{const l=t.map(m=>po(t_(m,"tox-tbtn",r))),d=e.map(m=>po(Mm(m,r.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(t.isSome()?["tox-tbtn--select"]:[]),attributes:{...cE(o,r),...oo(a)?{"data-mce-name":a}:{}}},components:op([d.map(m=>m.asSpec()),l.map(m=>m.asSpec())]),eventOrder:{[Ot()]:["focusing","alloy.base.behaviour",Ag],[Hc()]:[Ag,"toolbar-group-button-events"]},buttonBehaviours:xe([ql.toolbarButton(r.isDisabled),As(),yt(Ag,[cn((m,f)=>rC(m)),le(fl,(m,f)=>{l.bind(w=>w.getOpt(m)).each(w=>{bt.set(w,[Ln(r.translate(f.event.text))])})}),le(Dg,(m,f)=>{d.bind(w=>w.getOpt(m)).each(w=>{bt.set(w,[Mm(f.event.icon,r.icons)])})}),le(Ot(),(m,f)=>{f.event.prevent(),Pt(m,aE)})])].concat(n.getOr([])))}},lN=(e,t,o,n,r)=>{const a=t.shared,l=We(X),d={toolbarButtonBehaviours:[],getApi:rE,onSetup:e.onSetup},m=[yt("toolbar-group-button-events",[Sm(d,l),xm(d,l)])];return Am.sketch({lazySink:a.getSink,fetch:()=>Pr.nu(f=>{f(ue(o(e.items),H2))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:XC(e.icon,e.text,e.tooltip,v.some(m),a.providers,r),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:n}}}})},lE=(e,t,o,n)=>{var r;const a=We(X),l=XC(e.icon,e.text,e.tooltip,v.none(),o,n);return xr.sketch({dom:l.dom,components:l.components,eventOrder:QO,buttonBehaviours:{...xe([yt("toolbar-button-events",[pB({onAction:e.onAction,getApi:t.getApi}),Sm(t,a),xm(t,a)]),...e.tooltip.map(d=>Fr.config(o.tooltips.getConfig({tooltipText:o.translate(d)+e.shortcut.map(m=>` (${b4(m)})`).getOr("")}))).toArray(),ql.toolbarButton(()=>!e.enabled||o.isDisabled()),As()].concat(t.toolbarButtonBehaviours)),[Ag]:(r=l.buttonBehaviours)===null||r===void 0?void 0:r[Ag]}})},iN=(e,t,o)=>iE(e,t,[],o),iE=(e,t,o,n)=>lE(e,{toolbarButtonBehaviours:o.length>0?[yt("toolbarButtonWith",o)]:[],getApi:rE,onSetup:e.onSetup},t,n),uN=(e,t,o)=>uE(e,t,[],o),uE=(e,t,o,n)=>lE(e,{toolbarButtonBehaviours:[bt.config({}),_t.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(o.length>0?[yt("toolbarToggleButtonWith",o)]:[]),getApi:aN,onSetup:e.onSetup},t,n),dN=(e,t,o)=>n=>Pr.nu(r=>t.fetch(r)).map(r=>v.from(L4(Oo($4(Le("menu-value"),r,a=>{t.onItemAction(e(n),a)},t.columns,t.presets,Ii.CLOSE_ON_EXECUTE,t.select.getOr(Ht),o),{movement:o2(t.columns,t.presets),menuBehaviours:A1.unnamedEvents(t.columns!=="auto"?[]:[cn((a,l)=>{f4(a,4,T5(t.presets)).each(({numRows:d,numColumns:m})=>{Ke.setGridSize(a,d,m)})})])})))),mN=(e,t,o)=>{const n=We(e.tooltip.getOr("")),r=d=>({isEnabled:()=>!rt.isDisabled(d),setEnabled:m=>rt.set(d,!m),setIconFill:(m,f)=>{Yo(d.element,`svg path[class="${m}"], rect[class="${m}"]`).each(w=>{at(w,"fill",f)})},setActive:m=>{at(d.element,"aria-pressed",m),Yo(d.element,"span").each(f=>{d.getSystem().getByDom(f).each(w=>_t.set(w,m))})},isActive:()=>Yo(d.element,"span").exists(m=>d.getSystem().getByDom(m).exists(_t.isOn)),setText:m=>Yo(d.element,"span").each(f=>d.getSystem().getByDom(f).each(w=>je(w,fl,{text:m}))),setIcon:m=>Yo(d.element,"span").each(f=>d.getSystem().getByDom(f).each(w=>je(w,Dg,{icon:m}))),setTooltip:m=>{const f=t.providers.translate(m);at(d.element,"aria-label",f),n.set(m)}}),a=We(X),l={getApi:r,onSetup:e.onSetup};return F2.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...cE(e.tooltip,t.providers),...oo(o)?{"data-mce-name":o}:{}}},onExecute:d=>{const m=r(d);m.isEnabled()&&e.onAction(m)},onItemExecute:(d,m,f)=>{},splitDropdownBehaviours:xe([ql.splitButton(t.providers.isDisabled),As(),yt("split-dropdown-events",[cn((d,m)=>rC(d)),le(aE,ut.focus),Sm(l,a),xm(l,a)]),z1.config({}),...e.tooltip.map(d=>Fr.config({...t.providers.tooltips.getConfig({tooltipText:t.providers.translate(d),onShow:m=>{if(n.get()!==d){const f=t.providers.translate(n.get());Fr.setComponents(m,t.providers.tooltips.getComponents({tooltipText:f}))}}})})).toArray()]),eventOrder:{[Hc()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Dl()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:t.getSink,fetch:dN(r,e,t.providers),parts:{menu:zv(!1,e.columns,e.presets)},components:[F2.parts.button(XC(e.icon,e.text,v.none(),v.some([_t.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),t.providers)),F2.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:NT("chevron-down",t.providers.icons)},buttonBehaviours:xe([ql.splitButton(t.providers.isDisabled),As(),Vx()])}),F2.parts["aria-descriptor"]({text:t.providers.translate("To open the popup, press Shift+Enter")})]})},gN=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Q1=(e,t)=>(o,n,r,a)=>{const l=e(o).mapError(d=>eu(d)).getOrDie();return t(l,n,r,a)},hN={button:Q1(V5,(e,t,o,n)=>iN(e,t.shared.providers,n)),togglebutton:Q1(N5,(e,t,o,n)=>uN(e,t.shared.providers,n)),menubutton:Q1(bM,(e,t,o,n)=>j1(e,"tox-tbtn",t,v.none(),!1,n)),splitbutton:Q1(BP,(e,t,o,n)=>mN(e,t.shared,n)),grouptoolbarbutton:Q1(RP,(e,t,o,n)=>{const r=o.ui.registry.getAll().buttons,a=d=>P2(o,{buttons:r,toolbar:d,allowToolbarGroups:!1},t,v.none()),l={[Ch]:t.shared.header.isPositionedAtTop()?Pl.TopToBottom:Pl.BottomToTop};switch(Jh(o)){case gl.floating:return lN(e,t,a,l,n);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},pN=(e,t,o,n)=>He(hN,e.type).fold(()=>(console.error("skipping button defined by",e),v.none()),r=>v.some(r(e,t,o,n))),dE={styles:eN,fontsize:GV,fontsizeinput:XV,fontfamily:RV,blocks:MV,align:kV},fN=e=>{const t=ue(gN,o=>{const n=Ct(o.items,r=>Ft(e,r)||Ft(dE,r));return{name:o.name,items:n}});return Ct(t,o=>o.items.length>0)},bN=e=>{const t=e.split("|");return ue(t,o=>({items:o.trim().split(" ")}))},vN=e=>st(e,t=>Ft(t,"name")&&Ft(t,"items")),yN=e=>{const t=e.toolbar,o=e.buttons;return t===!1?[]:t===void 0||t===!0?fN(o):Xe(t)?bN(t):vN(t)?t:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},wN=(e,t,o,n,r,a)=>He(t,o.toLowerCase()).orThunk(()=>a.bind(l=>Vn(l,d=>He(t,d+o.toLowerCase())))).fold(()=>He(dE,o.toLowerCase()).map(l=>l(e,r)),l=>l.type==="grouptoolbarbutton"&&!n?(console.warn(`Ignoring the '${o}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),v.none()):pN(l,r,e,o.toLowerCase())),P2=(e,t,o,n)=>{const r=yN(t),a=ue(r,l=>{const d=uo(l.items,m=>m.trim().length===0?[]:wN(e,t.buttons,m,t.allowToolbarGroups,o,n).toArray());return{title:v.from(e.translate(l.name)),items:d}});return Ct(a,l=>l.items.length>0)},mE=(e,t,o,n)=>{const r=t.mainUi.outerContainer,a=o.toolbar,l=o.buttons;if(st(a,Xe)){const d=a.map(m=>{const f={toolbar:m,buttons:l,allowToolbarGroups:o.allowToolbarGroups};return P2(e,f,n,v.none())});Po.setToolbars(r,d)}else Po.setToolbar(r,P2(e,o,n,v.none()))},gE=Ac(),SN=gE.os.isiOS()&&gE.os.version.major<=12,xN=(e,t)=>{const{uiMotherships:o}=t,n=e.dom;let r=e.getWin();const a=e.getDoc().documentElement,l=We(Ko(r.innerWidth,r.innerHeight)),d=We(Ko(a.offsetWidth,a.offsetHeight)),m=()=>{const O=l.get();(O.left!==r.innerWidth||O.top!==r.innerHeight)&&(l.set(Ko(r.innerWidth,r.innerHeight)),x4(e))},f=()=>{const O=e.getDoc().documentElement,M=d.get();(M.left!==O.offsetWidth||M.top!==O.offsetHeight)&&(d.set(Ko(O.offsetWidth,O.offsetHeight)),x4(e))},w=O=>{v$(e,O)};n.bind(r,"resize",m),n.bind(r,"scroll",w);const x=ys(U.fromDom(e.getBody()),"load",f);e.on("hide",()=>{ye(o,O=>{Ie(O.element,"display","none")})}),e.on("show",()=>{ye(o,O=>{jt(O.element,"display")})}),e.on("NodeChange",f),e.on("remove",()=>{x.unbind(),n.unbind(r,"resize",m),n.unbind(r,"scroll",w),r=null})},CN=(e,t,o)=>{ym(e)&&ig(o.mainUi.mothership.element,o.popupUi.mothership),am(t,o.dialogUi.mothership)};var TN=Object.freeze({__proto__:null,render:(e,t,o,n,r)=>{const{mainUi:a,uiMotherships:l}=t,d=We(0),m=a.outerContainer;vV(e);const f=U.fromDom(r.targetNode),w=be(te(f));ig(f,a.mothership),CN(e,w,t),e.on("SkinLoaded",()=>{Po.setSidebar(m,o.sidebar,m5(e)),mE(e,t,o,n),d.set(e.getWin().innerWidth),Po.setMenubar(m,VM(e,o)),Po.setViews(m,o.views),xN(e,t)});const x=Po.getSocket(m).getOrDie("Could not find expected socket element");if(SN){Ao(x.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const L=tB(()=>{e.dispatch("ScrollContent")},20),ee=cr(x.element,"scroll",L.throttle);e.on("remove",ee.unbind)}K5(e,t),e.addCommand("ToggleSidebar",(L,ee)=>{Po.toggleSidebar(m,ee),e.dispatch("ToggleSidebar")}),e.addQueryValueHandler("ToggleSidebar",()=>{var L;return(L=Po.whichSidebar(m))!==null&&L!==void 0?L:""}),e.addCommand("ToggleView",(L,ee)=>{if(Po.toggleView(m,ee)){const W=m.element;a.mothership.broadcastOn([uu()],{target:W}),ye(l,Y=>{Y.broadcastOn([uu()],{target:W})}),Go(Po.whichView(m))&&(e.focus(),e.nodeChanged(),Po.refreshToolbar(m))}}),e.addQueryValueHandler("ToggleView",()=>{var L;return(L=Po.whichView(m))!==null&&L!==void 0?L:""});const O=Jh(e),M=()=>{Po.refreshToolbar(t.mainUi.outerContainer)};(O===gl.sliding||O===gl.floating)&&e.on("ResizeWindow ResizeEditor ResizeContent",()=>{const L=e.getWin().innerWidth;L!==d.get()&&(M(),d.set(L))});const A={setEnabled:L=>{Yv(t,!L)},isEnabled:()=>!rt.isDisabled(m)};return{iframeContainer:x.element.dom,editorContainer:m.element.dom,api:A}}});const hE=e=>/^[0-9\.]+(|px)$/i.test(""+e)?v.some(parseInt(""+e,10)):v.none(),JC=e=>So(e)?e+"px":e,V2=(e,t,o)=>{const n=t.filter(a=>e<a),r=o.filter(a=>e>a);return n.or(r).getOr(e)},kN=e=>{const t=zx(e),o=Wx(e),n=Gx(e);return hE(t).map(r=>V2(r,o,n))},ON=e=>kN(e).getOr(zx(e)),pE=e=>{const t=Zx(e),o=Ux(e),n=Iv(e);return hE(t).map(r=>V2(r,o,n))},_N=e=>pE(e).getOr(Zx(e)),{ToolbarLocation:QC,ToolbarMode:fE}=D7,MN=40,EN=(e,t,o,n,r)=>{const{mainUi:a,uiMotherships:l}=o,d=Yh.DOM,m=Qh(e),f=O1(e),w=Iv(e).or(pE(e)),x=n.shared.header,O=x.isPositionedAtTop,M=150,A=Jh(e),L=A===fE.sliding||A===fE.floating,ee=We(!1),W=()=>ee.get()&&!e.removed,Y=Mt=>L?Mt.fold(I(0),Se=>Se.components().length>1?Zo(Se.components()[1].element):0):0,j=Mt=>{switch(jx(e)){case QC.auto:const Se=Po.getToolbar(a.outerContainer),Be=Y(Se),ht=Zo(Mt.element)-Be,Qe=Jn(t);if(Qe.y>ht)return"top";{const mt=_r(t),vo=Math.max(mt.dom.scrollHeight,Zo(mt));return Qe.bottom<vo-ht||ps().bottom<Qe.bottom-ht?"bottom":"top"}case QC.bottom:return"bottom";case QC.top:default:return"top"}},de=Mt=>{r.on(Se=>{Gn.setModes(Se,[Mt]),x.setDockingMode(Mt);const Be=O()?Pl.TopToBottom:Pl.BottomToTop;at(Se.element,Ch,Be)})},ie=()=>{r.on(Mt=>{const Se=w.getOrThunk(()=>ii().width-Gr(t).left-10);Ie(Mt.element,"max-width",Se+"px")})},he=(Mt,Se)=>{r.on(Be=>{const ht=Po.getToolbar(a.outerContainer),Qe=Y(ht),Ze=Jn(t),mt=ke(e,a.outerContainer.element),vo=()=>mt.fold(()=>Ze.x,ir=>{const qc=Jn(ir);return eo(ir,rs())?Ze.x:Ze.x-qc.x}),Yt=()=>mt.fold(()=>O()?Math.max(Ze.y-Zo(Be.element)+Qe,0):Ze.bottom,ir=>{var qc;const wa=Jn(ir),Sc=(qc=ir.dom.scrollTop)!==null&&qc!==void 0?qc:0,pd=eo(ir,rs())?Math.max(Ze.y-Zo(Be.element)+Qe,0):Ze.y-wa.y+Sc-Zo(Be.element)+Qe;return O()?pd:Ze.bottom}),Cr=vo(),jc=Cs(Mt,Math.ceil(a.outerContainer.element.dom.getBoundingClientRect().width)).filter(ir=>ir>M).map(ir=>{const qc=Se.getOr(Ps()),wa=window.innerWidth-(Cr-qc.left),Sc=Math.max(Math.min(ir,wa),M);return wa<ir&&Ie(a.outerContainer.element,"width",Sc+"px"),{width:Sc+"px"}}).getOr({width:"max-content"}),bl={position:"absolute",left:Math.round(Cr)+"px",top:Yt()+"px"};Ao(a.outerContainer.element,{...bl,...jc})})},ke=(Mt,Se)=>ym(Mt)?_C(Se):v.none(),ae=()=>{ye(l,Mt=>{Mt.broadcastOn([lm()],{})})},ct=()=>!m&&(Bs(a.outerContainer.element).left+Dr(a.outerContainer.element)>=window.innerWidth-MN||zo(a.outerContainer.element,"width").isSome())?(Ie(a.outerContainer.element,"position","absolute"),Ie(a.outerContainer.element,"left","0px"),jt(a.outerContainer.element,"width"),!0):!1,$e=Mt=>{if(!W())return;m||ie();const Se=Ps(),Be=m?!1:ct();if(L&&Po.refreshToolbar(a.outerContainer),!m){const ht=Ps(),Qe=Cs(Se.left!==ht.left,Se);he(Be,Qe),Qe.each(Ze=>{qi(Ze.left,ht.top)})}f&&r.on(Mt),ae()},Ye=()=>m||!f||!W()?!1:r.get().exists(Mt=>{const Se=x.getDockingMode(),Be=j(Mt);return Be!==Se?(de(Be),!0):!1});return{isVisible:W,isPositionedAtTop:O,show:()=>{ee.set(!0),Ie(a.outerContainer.element,"display","flex"),d.addClass(e.getBody(),"mce-edit-focus"),ye(l,Mt=>{jt(Mt.element,"display")}),Ye(),ym(e)?$e(Mt=>Gn.isDocked(Mt)?Gn.reset(Mt):Gn.refresh(Mt)):$e(Gn.refresh)},hide:()=>{ee.set(!1),Ie(a.outerContainer.element,"display","none"),d.removeClass(e.getBody(),"mce-edit-focus"),ye(l,Mt=>{Ie(Mt.element,"display","none")})},update:$e,updateMode:()=>{Ye()&&$e(Gn.reset)},repositionPopups:ae}},bE=(e,t)=>{const o=Jn(e);return{pos:t?o.y:o.bottom,bounds:o}},AN=(e,t,o,n)=>{const r=We(bE(t,o.isPositionedAtTop())),a=f=>{const{pos:w,bounds:x}=bE(t,o.isPositionedAtTop()),{pos:O,bounds:M}=r.get(),A=x.height!==M.height||x.width!==M.width;r.set({pos:w,bounds:x}),A&&x4(e,f),o.isVisible()&&(O!==w?o.update(Gn.reset):A&&(o.updateMode(),o.repositionPopups()))};n||(e.on("activate",o.show),e.on("deactivate",o.hide)),e.on("SkinLoaded ResizeWindow",()=>o.update(Gn.reset)),e.on("NodeChange keydown",f=>{requestAnimationFrame(()=>a(f))});let l=0;const d=tC(()=>o.update(Gn.refresh),33);e.on("ScrollWindow",()=>{const f=Ps().left;f!==l&&(l=f,d.throttle()),o.updateMode()}),ym(e)&&e.on("ElementScroll",f=>{o.update(Gn.refresh)});const m=tm();m.set(ys(U.fromDom(e.getBody()),"load",f=>a(f.raw))),e.on("remove",()=>{m.clear()})};var DN=Object.freeze({__proto__:null,render:(e,t,o,n,r)=>{const{mainUi:a}=t,l=Wo(),d=U.fromDom(r.targetNode),m=EN(e,d,t,n,l),f=XT(e);yV(e);const w=()=>{if(l.isSet()){m.show();return}l.set(Po.getHeader(a.outerContainer).getOrDie());const O=Jx(e);ym(e)?(ig(d,a.mothership),ig(d,t.popupUi.mothership)):am(O,a.mothership),am(O,t.dialogUi.mothership);const M=()=>{mE(e,t,o,n),Po.setMenubar(a.outerContainer,VM(e,o)),m.show(),AN(e,d,m,f),e.nodeChanged()};f?e.once("SkinLoaded",M):M()};e.on("show",w),e.on("hide",m.hide),f||(e.on("focus",w),e.on("blur",m.hide)),e.on("init",()=>{(e.hasFocus()||f)&&w()}),K5(e,t);const x={show:w,hide:m.hide,setEnabled:O=>{Yv(t,!O)},isEnabled:()=>!rt.isDisabled(a.outerContainer)};return{editorContainer:a.outerContainer.element.dom,api:x}}});const $N=()=>{const e=Wo(),t=Wo(),o=Wo();return{dialogUi:e,popupUi:t,mainUi:o,getUiMotherships:()=>{const a=e.get().map(d=>d.mothership),l=t.get().map(d=>d.mothership);return a.fold(()=>l.toArray(),d=>l.fold(()=>[d],m=>eo(d.element,m.element)?[d]:[d,m]))},lazyGetInOuterOrDie:(a,l)=>()=>o.get().bind(d=>l(d.outerContainer)).getOrDie(`Could not find ${a} element in OuterContainer`)}},RN="contexttoolbar-show",vE="contexttoolbar-hide",HN=e=>({hide:()=>Pt(e,Kg()),getValue:()=>Ee.getValue(e)}),yE=(e,t)=>le(JO,(o,n)=>{const r=e.get(o),a=HN(r);t.onAction(a,n.event.buttonApi)}),IN=(e,t,o)=>{const{primary:n,...r}=t.original,a=ca(V5({...r,type:"button",onAction:X}));return iE(a,o,[yE(e,t)])},BN=(e,t,o)=>{const{primary:n,...r}=t.original,a=ca(N5({...r,type:"togglebutton",onAction:X}));return uE(a,o,[yE(e,t)])},LN=e=>e.type==="contextformtogglebutton",FN=(e,t,o)=>LN(t)?BN(e,t,o):IN(e,t,o),PN=(e,t,o)=>{const n=ue(t,l=>po(FN(e,l,o)));return{asSpecs:()=>ue(n,l=>l.asSpec()),findPrimary:l=>Vn(t,(d,m)=>d.primary?v.from(n[m]).bind(f=>f.getOpt(l)).filter(wt(rt.isDisabled)):v.none())}},wE=(e,t)=>{const o=e.label.fold(()=>({}),a=>({"aria-label":a})),n=po(yg.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:o,selectOnFocus:!0,inputBehaviours:xe([Ke.config({mode:"special",onEnter:a=>r.findPrimary(a).map(l=>(Si(l),!0)),onLeft:(a,l)=>(l.cut(),v.none()),onRight:(a,l)=>(l.cut(),v.none())})])})),r=PN(n,e.commands,t);return[{title:v.none(),items:[n.asSpec()]},{title:v.none(),items:r.asSpecs()}]},VN={renderContextForm:(e,t,o)=>I2({type:e,uid:Le("context-toolbar"),initGroups:wE(t,o),onEscape:v.none,cyclicKeying:!0,providers:o}),buildInitGroups:wE},SE=(e,t,o)=>t.bottom-e.y>=o&&e.bottom-t.y>=o,NN=e=>{const t=e.getBoundingClientRect();if(t.height<=0&&t.width<=0){const o=yl(U.fromDom(e.startContainer),e.startOffset).element;return(Qs(o)?ss(o):v.some(o)).filter(Co).map(r=>r.dom.getBoundingClientRect()).getOr(t)}else return t},e3=e=>{const t=e.selection.getRng(),o=NN(t);if(e.inline){const n=Ps();return yn(n.left+o.left,n.top+o.top,o.width,o.height)}else{const n=fr(U.fromDom(e.getBody()));return yn(n.x+o.left,n.y+o.top,o.width,o.height)}},zN=(e,t)=>t.filter(o=>ao(o)&&dc(o)).map(fr).getOrThunk(()=>e3(e)),ZN=(e,t,o)=>{const n=Math.max(e.x+o,t.x),r=Math.min(e.right-o,t.right);return{x:n,width:r-n}},UN=(e,t,o,n,r,a)=>{const l=U.fromDom(e.getContainer()),d=Yo(l,".tox-editor-header").getOr(l),m=Jn(d),f=m.y>=t.bottom,w=n&&!f;if(e.inline&&w)return{y:Math.max(m.bottom+a,o.y),bottom:o.bottom};if(e.inline&&!w)return{y:o.y,bottom:Math.min(m.y-a,o.bottom)};const x=r==="line"?Jn(l):t;return w?{y:Math.max(m.bottom+a,o.y),bottom:Math.min(x.bottom-a,o.bottom)}:{y:Math.max(x.y+a,o.y),bottom:Math.min(m.y-a,o.bottom)}},xE=(e,t,o,n=0)=>{const r=ii(window),a=Jn(U.fromDom(e.getContentAreaContainer())),l=Lv(e)||Vv(e)||k1(e),{x:d,width:m}=ZN(a,r,n);if(e.inline&&!l)return yn(d,r.y,m,r.height);{const f=t.header.isPositionedAtTop(),{y:w,bottom:x}=UN(e,a,r,f,o,n);return yn(d,w,m,x-w)}},N2=12,CE={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},TE={maxHeightFunction:om(),maxWidthFunction:VC()},WN=(e,t)=>{const o=e.selection.getRng(),n=yl(U.fromDom(o.startContainer),o.startOffset);return o.startContainer===o.endContainer&&o.startOffset===o.endOffset-1&&eo(n.element,t)},GN=(e,t,o)=>{const n=zo(e,"position");Ie(e,"position",t);const r=o(e);return n.each(a=>Ie(e,"position",a)),r},kE=e=>e==="node",jN=(e,t,o,n,r)=>{const a=e3(e),l=n.lastElement().exists(d=>eo(o,d));if(WN(e,o))return l?H_:ei;if(l)return GN(t,n.getMode(),()=>SE(a,Jn(t),-20)&&!n.isReposition()?WL:H_);{const d=n.getMode()==="fixed"?r.y+Ps().top:r.y,m=Zo(t)+N2;return d+m<=a.y?ei:Y1}},qN=(e,t,o,n)=>{const r=m=>(f,w,x,O,M)=>{const A=jN(e,O,m,o,M),L={...f,y:M.y,height:M.height};return{...A(L,w,x,O,M),alwaysFit:!0}},a=m=>kE(n)?[r(m)]:[];return t?{onLtr:m=>[Wn,as,ls,Fo,vs,Ms].concat(a(m)),onRtl:m=>[Wn,ls,as,vs,Fo,Ms].concat(a(m))}:{onLtr:m=>[Ms,Wn,Fo,as,vs,ls].concat(a(m)),onRtl:m=>[Ms,Wn,vs,ls,Fo,as].concat(a(m))}},KN=(e,t,o,n)=>t==="line"?{bubble:Ba(N2,0,CE),layouts:{onLtr:()=>[gf],onRtl:()=>[hf]},overrides:TE}:{bubble:Ba(0,N2,CE,1/N2),layouts:qN(e,o,n,t),overrides:TE},t3=(e,t)=>{const o=Ct(t,a=>a.predicate(e.dom)),{pass:n,fail:r}=en(o,a=>a.type==="contexttoolbar");return{contextToolbars:n,contextForms:r}},YN=e=>{if(e.length<=1)return e;{const t=a=>fn(e,l=>l.position===a),o=a=>Ct(e,l=>l.position===a),n=t("selection"),r=t("node");if(n||r)if(r&&n){const a=o("node"),l=ue(o("selection"),d=>({...d,position:"node"}));return a.concat(l)}else return o(n?"selection":"node");else return o("line")}},XN=e=>{if(e.length<=1)return e;{const t=n=>Qt(e,r=>r.position===n);return t("selection").orThunk(()=>t("node")).orThunk(()=>t("line")).map(n=>n.position).fold(()=>[],n=>Ct(e,r=>r.position===n))}},JN=(e,t,o)=>{const n=t3(e,t);if(n.contextForms.length>0)return v.some({elem:e,toolbars:[n.contextForms[0]]});{const r=t3(e,o);if(r.contextForms.length>0)return v.some({elem:e,toolbars:[r.contextForms[0]]});if(n.contextToolbars.length>0||r.contextToolbars.length>0){const a=YN(n.contextToolbars.concat(r.contextToolbars));return v.some({elem:e,toolbars:a})}else return v.none()}},QN=(e,t,o)=>e(t)?v.none():Bo(t,n=>{if(Co(n)){const{contextToolbars:r,contextForms:a}=t3(n,o.inNodeScope),l=a.length>0?a:XN(r);return l.length>0?v.some({elem:n,toolbars:l}):v.none()}else return v.none()},e),ez=(e,t)=>{const o=U.fromDom(t.getBody()),n=l=>eo(l,o),r=l=>!n(l)&&!Nn(o,l),a=U.fromDom(t.selection.getNode());return r(a)?v.none():JN(a,e.inNodeScope,e.inEditorScope).orThunk(()=>QN(n,a,e))},tz=(e,t)=>{const o={},n=[],r=[],a={},l={},d=(w,x)=>{const O=ca(x8(x));o[w]=O,O.launch.map(M=>{a["form:"+w]={...x.launch,type:M.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{t(O)}}}),O.scope==="editor"?r.push(O):n.push(O),l[w]=O},m=(w,x)=>{T8(x).each(O=>{x.scope==="editor"?r.push(O):n.push(O),l[w]=O})},f=Ro(e);return ye(f,w=>{const x=e[w];x.type==="contextform"?d(w,x):x.type==="contexttoolbar"&&m(w,x)}),{forms:o,inNodeScope:n,inEditorScope:r,lookupTable:l,formNavigators:a}},OE=Le("forward-slide"),_E=Le("backward-slide"),o3=Le("change-slide-event"),n3="tox-pop--resizing",oz=e=>{const t=We([]);return _n.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:o=>{t.set([]),_n.getContent(o).each(n=>{jt(n.element,"visibility")}),Hn(o.element,n3),jt(o.element,"width")},inlineBehaviours:xe([yt("context-toolbar-events",[Wd(Wm(),(o,n)=>{n.event.raw.propertyName==="width"&&(Hn(o.element,n3),jt(o.element,"width"))}),le(o3,(o,n)=>{const r=o.element;jt(r,"width");const a=Ar(r);_n.setContent(o,n.event.contents),wn(r,n3);const l=Ar(r);Ie(r,"width",a+"px"),_n.getContent(o).each(d=>{n.event.focus.bind(m=>(da(m),rr(r))).orThunk(()=>(Ke.focusIn(d),Ha(te(r))))}),setTimeout(()=>{Ie(o.element,"width",l+"px")},0)}),le(OE,(o,n)=>{_n.getContent(o).each(r=>{t.set(t.get().concat([{bar:r,focus:Ha(te(o.element))}]))}),je(o,o3,{contents:n.event.forwardContents,focus:v.none()})}),le(_E,(o,n)=>{Fc(t.get()).each(r=>{t.set(t.get().slice(0,t.get().length-1)),je(o,o3,{contents:ua(r.bar),focus:r.focus})})})]),Ke.config({mode:"special",onEscape:o=>Fc(t.get()).fold(()=>e.onEscape(),n=>(Pt(o,_E),v.some(!0)))})]),lazySink:()=>St.value(e.sink)})},s3="tox-pop--transition",nz=(e,t,o,n)=>{const r=n.backstage,a=r.shared,l=Ac().deviceType.isTouch,d=Wo(),m=Wo(),f=Wo(),w=Zs(oz({sink:o,onEscape:()=>(e.focus(),v.some(!0))})),x=()=>{const $e=f.get().getOr("node"),Ye=kE($e)?1:0;return xE(e,a,$e,Ye)},O=()=>!e.removed&&!(l()&&r.isContextMenuOpen()),M=$e=>xs(Ks($e,d.get(),eo),!0),A=()=>{if(O()){const $e=x(),Ye=xs(f.get(),"node")?zN(e,d.get()):e3(e);return $e.height<=0||!SE(Ye,$e,.01)}else return!0},L=()=>{d.clear(),m.clear(),f.clear(),_n.hide(w)},ee=()=>{if(_n.isOpen(w)){const $e=w.element;jt($e,"display"),A()?Ie($e,"display","none"):(m.set(0),_n.reposition(w))}},W=$e=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[$e],behaviours:xe([Ke.config({mode:"acyclic"}),yt("pop-dialog-wrap-events",[cn(Ye=>{e.shortcuts.add("ctrl+F9","focus statusbar",()=>Ke.focusIn(Ye))}),Il(Ye=>{e.shortcuts.remove("ctrl+F9")})])])}),Y=ta(()=>tz(t,$e=>{const Ye=ie([$e]);je(w,OE,{forwardContents:W(Ye)})})),j=($e,Ye)=>P2(e,{buttons:$e,toolbar:Ye.items,allowToolbarGroups:!1},n.backstage,v.some(["form:"])),de=($e,Ye)=>VN.buildInitGroups($e,Ye),ie=$e=>{const{buttons:Ye}=e.ui.registry.getAll(),Ne=Y(),qt={...Ye,...Ne.formNavigators},Lt=Jh(e)===gl.scrolling?gl.scrolling:gl.default,Mt=Rt(ue($e,Se=>Se.type==="contexttoolbar"?j(qt,Se):de(Se,a.providers)));return I2({type:Lt,uid:Le("context-toolbar"),initGroups:Mt,onEscape:v.none,cyclicKeying:!0,providers:a.providers})},he=($e,Ye)=>{const Ne=$e==="node"?a.anchors.node(Ye):a.anchors.cursor(),qt=KN(e,$e,l(),{lastElement:d.get,isReposition:()=>xs(m.get(),0),getMode:()=>yr.getMode(o)});return Oo(Ne,qt)},ke=($e,Ye)=>{if(ct.cancel(),!O())return;const Ne=ie($e),qt=$e[0].position,Lt=he(qt,Ye);f.set(qt),m.set(1);const Mt=w.element;jt(Mt,"display"),M(Ye)||(Hn(Mt,s3),yr.reset(o,w)),_n.showWithinBounds(w,W(Ne),{anchor:Lt,transition:{classes:[s3],mode:"placement"}},()=>v.some(x())),Ye.fold(d.clear,d.set),A()&&Ie(Mt,"display","none")};let ae=!1;const ct=tC(()=>{if(!(!e.hasFocus()||e.removed||ae))if(vc(w.element,s3))ct.throttle();else{const $e=Y();ez($e,e).fold(L,Ye=>{ke(Ye.toolbars,v.some(Ye.elem))})}},17);e.on("init",()=>{e.on("remove",L),e.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",ee),e.on("click keyup focus SetContent",ct.throttle),e.on(vE,L),e.on(RN,$e=>{const Ye=Y();He(Ye.lookupTable,$e.toolbarKey).each(Ne=>{ke([Ne],Cs($e.target!==e,$e.target)),_n.getContent(w).each(Ke.focusIn)})}),e.on("focusout",$e=>{Dv.setEditorTimeout(e,()=>{rr(o.element).isNone()&&rr(w.element).isNone()&&L()},0)}),e.on("SwitchMode",()=>{e.mode.isReadOnly()&&L()}),e.on("ExecCommand",({command:$e})=>{$e.toLowerCase()==="toggleview"&&L()}),e.on("AfterProgressState",$e=>{$e.state?L():e.hasFocus()&&ct.throttle()}),e.on("dragstart",()=>{ae=!0}),e.on("dragend drop",()=>{ae=!1}),e.on("NodeChange",$e=>{rr(w.element).fold(ct.throttle,X)})})},sz=e=>{ye([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],o=>{e.ui.registry.addToggleButton(o.name,{tooltip:o.text,icon:o.icon,onAction:fa(e,o.cmd),onSetup:e2(e,o.name)})}),e.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:wc(e),onAction:fa(e,"JustifyNone")})},ME=(e,t)=>{const o=()=>{const n=t.getOptions(e),r=t.getCurrent(e).map(t.hash),a=Wo();return ue(n,l=>({type:"togglemenuitem",text:t.display(l),onSetup:d=>{const m=w=>{w&&(a.on(x=>x.setActive(!1)),a.set(d)),d.setActive(w)};m(xs(r,t.hash(l)));const f=t.watcher(e,l,m);return()=>{a.clear(),f()}},onAction:()=>t.setCurrent(e,l)}))};e.ui.registry.addMenuButton(t.name,{tooltip:t.text,icon:t.icon,fetch:n=>n(o()),onSetup:t.onToolbarSetup}),e.ui.registry.addNestedMenuItem(t.name,{type:"nestedmenuitem",text:t.text,getSubmenuItems:o,onSetup:t.onMenuSetup})},rz=e=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:f5,hash:t=>FV(t,["fixed","relative","empty"]).getOr(t),display:xt,watcher:(t,o,n)=>t.formatter.formatChanged("lineheight",n,!1,{value:o}).unbind,getCurrent:t=>v.from(t.queryCommandValue("LineHeight")),setCurrent:(t,o)=>t.execCommand("LineHeight",!1,o),onToolbarSetup:wc(e),onMenuSetup:wc(e)}),cz=e=>v.from(qT(e)).map(o=>({name:"language",text:"Language",icon:"language",getOptions:I(o),hash:n=>Mn(n.customCode)?n.code:`${n.code}/${n.customCode}`,display:n=>n.title,watcher:(n,r,a)=>{var l;return n.formatter.formatChanged("lang",a,!1,{value:r.code,customValue:(l=r.customCode)!==null&&l!==void 0?l:null}).unbind},getCurrent:n=>{const r=U.fromDom(n.selection.getNode());return nr(r,a=>v.some(a).filter(Co).bind(l=>C(l,"lang").map(m=>{const f=C(l,"data-mce-lang").getOrUndefined();return{code:m,customCode:f,title:""}})))},setCurrent:(n,r)=>n.execCommand("Lang",!1,r),onToolbarSetup:n=>{const r=tm();return n.setActive(e.formatter.match("lang",{},void 0,!0)),r.set(e.formatter.formatChanged("lang",n.setActive,!0)),Qv(r.clear,wc(e)(n))},onMenuSetup:wc(e)})),az=e=>{ME(e,rz(e)),cz(e).each(t=>ME(e,t))},lz=(e,t)=>{OV(e,t),HV(e,t),tN(e,t),EV(e,t),JV(e,t)},iz=e=>xg(e,"NodeChange",t=>{t.setEnabled(e.queryCommandState("outdent")&&e.selection.isEditable())}),uz=e=>{e.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:iz(e),onAction:fa(e,"outdent")}),e.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:wc(e),onAction:fa(e,"indent")})},dz=e=>{uz(e)},EE=(e,t)=>o=>{o.setActive(t.get());const n=r=>{t.set(r.state),o.setActive(r.state)};return e.on("PastePlainTextToggle",n),Qv(()=>e.off("PastePlainTextToggle",n),wc(e)(o))},mz=e=>{const t=We(d5(e)),o=()=>e.execCommand("mceTogglePlainTextPaste");e.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:o,onSetup:EE(e,t)}),e.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:o,onSetup:EE(e,t)})},r3=(e,t)=>()=>{e.execCommand("mceToggleFormat",!1,t)},gz=e=>{md.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(t,o)=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:e2(e,t.name),onAction:r3(e,t.name),shortcut:t.shortcut})});for(let t=1;t<=6;t++){const o="h"+t,n=`Access+${t}`;e.ui.registry.addToggleButton(o,{text:o.toUpperCase(),tooltip:"Heading "+t,onSetup:e2(e,o),onAction:r3(e,o),shortcut:n})}},hz=e=>{md.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],t=>{e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:fa(e,t.action),shortcut:t.shortcut})}),md.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],t=>{e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:wc(e),onAction:fa(e,t.action)})})},pz=e=>{md.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:fa(e,t.action),onSetup:e2(e,t.name)})})},fz=e=>{gz(e),hz(e),pz(e)},bz=e=>{md.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],t=>{e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:fa(e,t.action)})}),md.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],t=>{e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onSetup:wc(e),onAction:fa(e,t.action)})}),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:wc(e),onAction:r3(e,"code")})},vz=e=>{fz(e),bz(e)},z2=(e,t)=>xg(e,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",o=>{o.setEnabled(!e.mode.isReadOnly()&&e.undoManager[t]())}),yz=e=>{e.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:z2(e,"hasUndo"),onAction:fa(e,"undo")}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:z2(e,"hasRedo"),onAction:fa(e,"redo")})},wz=e=>{e.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:z2(e,"hasUndo"),onAction:fa(e,"undo"),shortcut:"Meta+Z"}),e.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:z2(e,"hasRedo"),onAction:fa(e,"redo"),shortcut:"Meta+Y"})},Sz=e=>{yz(e),wz(e)},xz=e=>xg(e,"VisualAid",t=>{t.setActive(e.hasVisual)}),Cz=e=>{e.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:xz(e),onAction:fa(e,"mceToggleVisualAid")})},Tz=e=>{e.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:fa(e,"mceToggleVisualAid")})},kz=e=>{Tz(e),Cz(e)},Oz=(e,t)=>{sz(e),vz(e),lz(e,t),Sz(e),U$(e),kz(e),dz(e),az(e),mz(e)},_z=e=>Xe(e)?e.split(/[ ,]/):e,AE=e=>t=>t.options.get(e),Mz=e=>{const t=e.options.register;t("contextmenu_avoid_overlap",{processor:"string",default:""}),t("contextmenu_never_use_native",{processor:"boolean",default:!1}),t("contextmenu",{processor:o=>o===!1?{value:[],valid:!0}:Xe(o)||st(o,Xe)?{value:_z(o),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},DE=AE("contextmenu_never_use_native"),Ez=AE("contextmenu_avoid_overlap"),Az=e=>$E(e).length===0,$E=e=>{const t=e.ui.registry.getAll().contextMenus,o=e.options.get("contextmenu");return e.options.isSet("contextmenu")?o:Ct(o,n=>Ft(t,n))},eb=(e,t)=>({type:"makeshift",x:e,y:t}),Dz=(e,t,o)=>eb(e.x+t,e.y+o),RE=e=>e.type==="longpress"||e.type.indexOf("touch")===0,$z=e=>{if(RE(e)){const t=e.touches[0];return eb(t.pageX,t.pageY)}else return eb(e.pageX,e.pageY)},Rz=e=>{if(RE(e)){const t=e.touches[0];return eb(t.clientX,t.clientY)}else return eb(e.clientX,e.clientY)},Hz=(e,t)=>{const o=Yh.DOM.getPos(e);return Dz(t,o.x,o.y)},Iz=(e,t)=>t.type==="contextmenu"||t.type==="longpress"?e.inline?$z(t):Hz(e.getContentAreaContainer(),Rz(t)):HE(e),HE=e=>({type:"selection",root:U.fromDom(e.selection.getNode())}),Bz=e=>({type:"node",node:v.some(U.fromDom(e.selection.getNode())),root:U.fromDom(e.getBody())}),IE=(e,t,o)=>{switch(o){case"node":return Bz(e);case"point":return Iz(e,t);case"selection":return HE(e)}},Lz=(e,t,o,n,r,a)=>{const l=o(),d=IE(e,t,a);ip(l,Ii.CLOSE_ON_EXECUTE,n,{isHorizontalMenu:!1,search:v.none()}).map(m=>{t.preventDefault(),_n.showMenuAt(r,{anchor:d},{menu:{markers:vg("normal")},data:m})})},Fz={onLtr:()=>[Wn,as,ls,Fo,vs,Ms,ei,Y1,K1,O2,q1,k2],onRtl:()=>[Wn,ls,as,vs,Fo,Ms,ei,Y1,q1,k2,K1,O2]},Pz=12,Vz={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},Nz=(e,t)=>{const o=e.selection;if(o.isCollapsed()||t.touches.length<1)return!1;{const n=t.touches[0],r=o.getRng();return iS(e.getWin(),sg.domRange(r)).exists(l=>l.left<=n.clientX&&l.right>=n.clientX&&l.top<=n.clientY&&l.bottom>=n.clientY)}},zz=e=>{const t=e.selection.getRng(),o=()=>{Dv.setEditorTimeout(e,()=>{e.selection.setRng(t)},10),a()};e.once("touchend",o);const n=l=>{l.preventDefault(),l.stopImmediatePropagation()};e.on("mousedown",n,!0);const r=()=>a();e.once("longpresscancel",r);const a=()=>{e.off("touchend",o),e.off("longpresscancel",r),e.off("mousedown",n)}},Zz=(e,t,o)=>{const n=IE(e,t,o);return{bubble:Ba(0,o==="point"?Pz:0,Vz),layouts:Fz,overrides:{maxWidthFunction:VC(),maxHeightFunction:om()},...n}},Uz=(e,t,o,n,r,a,l)=>{const d=Zz(e,t,a);ip(o,Ii.CLOSE_ON_EXECUTE,n,{isHorizontalMenu:!0,search:v.none()}).map(m=>{t.preventDefault();const f=l?Lc.HighlightMenuAndItem:Lc.HighlightNone;_n.showMenuWithinBounds(r,{anchor:d},{menu:{markers:vg("normal"),highlightOnOpen:f},data:m,type:"horizontal"},()=>v.some(xE(e,n.shared,a==="node"?"node":"selection"))),e.dispatch(vE)})},Wz=(e,t,o,n,r,a)=>{const l=Ac(),d=l.os.isiOS(),m=l.os.isMacOS(),f=l.os.isAndroid(),w=l.deviceType.isTouch(),x=()=>!(f||d||m&&w),O=()=>{const M=o();Uz(e,t,M,n,r,a,x())};if((m||d)&&a!=="node"){const M=()=>{zz(e),O()};Nz(e,t)?M():(e.once("selectionchange",M),e.once("touchend",()=>e.off("selectionchange",M)))}else O()},BE=e=>Xe(e)?e==="|":e.type==="separator",c3={type:"separator"},LE=e=>{const t=o=>({text:o.text,icon:o.icon,enabled:o.enabled,shortcut:o.shortcut});if(Xe(e))return e;switch(e.type){case"separator":return c3;case"submenu":return{type:"nestedmenuitem",...t(e),getSubmenuItems:()=>{const n=e.getSubmenuItems();return Xe(n)?n:ue(n,LE)}};default:const o=e;return{type:"menuitem",...t(o),onAction:Re(o.onAction)}}},FE=(e,t)=>{if(t.length===0)return e;const n=Fc(e).filter(r=>!BE(r)).fold(()=>[],r=>[c3]);return e.concat(n).concat(t).concat([c3])},Gz=(e,t,o)=>{const n=Ut(t,(r,a)=>He(e,a.toLowerCase()).map(l=>{const d=l.update(o);if(Xe(d)&&V($n(d)))return FE(r,d.split(" "));if(Vo(d)&&d.length>0){const m=ue(d,LE);return FE(r,m)}else return r}).getOrThunk(()=>r.concat([a])),[]);return n.length>0&&BE(n[n.length-1])&&n.pop(),n},jz=(e,t)=>t.ctrlKey&&!DE(e),qz=e=>e.type==="longpress"||Ft(e,"touches"),PE=(e,t)=>!qz(t)&&(t.button!==2||t.target===e.getBody()&&t.pointerType===""),VE=(e,t)=>PE(e,t)?e.selection.getStart(!0):t.target,Kz=(e,t)=>{const o=Ez(e),n=PE(e,t)?"selection":"point";if(V(o)){const r=VE(e,t);return L1(U.fromDom(r),o)?"node":n}else return n},Yz=(e,t,o)=>{const r=Ac().deviceType.isTouch,a=Zs(_n.sketch({dom:{tag:"div"},lazySink:t,onEscape:()=>e.focus(),onShow:()=>o.setContextMenuState(!0),onHide:()=>o.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:xe([yt("dismissContextMenu",[le($l(),(m,f)=>{Vt.close(m),e.focus()})])])})),l=()=>_n.hide(a),d=m=>{if(DE(e)&&m.preventDefault(),jz(e,m)||Az(e))return;const f=Kz(e,m),w=()=>{const O=VE(e,m),M=e.ui.registry.getAll(),A=$E(e);return Gz(M.contextMenus,A,O)};(r()?Wz:Lz)(e,m,w,o,a,f)};e.on("init",()=>{const m="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(r()?"":" ResizeWindow");e.on(m,l),e.on("longpress contextmenu",d)})},a3=g.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),Z2=e=>t=>t.translate(-e.left,-e.top),U2=e=>t=>t.translate(e.left,e.top),hd=e=>(t,o)=>Ut(e,(n,r)=>r(n),Ko(t,o)),W2=(e,t,o)=>e.fold(hd([U2(o),Z2(t)]),hd([Z2(t)]),hd([])),pp=(e,t,o)=>e.fold(hd([U2(o)]),hd([]),hd([U2(t)])),NE=(e,t,o)=>e.fold(hd([]),hd([Z2(o)]),hd([U2(t),Z2(o)])),Xz=(e,t,o,n,r,a)=>{const l=pp(e,r,a),d=pp(t,r,a);return Math.abs(l.left-d.left)<=o&&Math.abs(l.top-d.top)<=n},Jz=(e,t,o,n,r,a)=>{const l=pp(e,r,a),d=pp(t,r,a),m=Math.abs(l.left-d.left),f=Math.abs(l.top-d.top);return Ko(m,f)},zE=(e,t,o)=>{const n=e.fold((r,a)=>({position:v.some("absolute"),left:v.some(r+"px"),top:v.some(a+"px")}),(r,a)=>({position:v.some("absolute"),left:v.some(r-o.left+"px"),top:v.some(a-o.top+"px")}),(r,a)=>({position:v.some("fixed"),left:v.some(r+"px"),top:v.some(a+"px")}));return{right:v.none(),bottom:v.none(),...n}},Qz=(e,t,o)=>e.fold((n,r)=>G2(n+t,r+o),(n,r)=>Dm(n+t,r+o),(n,r)=>Rg(n+t,r+o)),l3=(e,t,o,n)=>{const r=(a,l)=>(d,m)=>{const f=a(t,o,n);return l(d.getOr(f.left),m.getOr(f.top))};return e.fold(r(NE,G2),r(pp,Dm),r(W2,Rg))},G2=a3.offset,Dm=a3.absolute,Rg=a3.fixed,ZE=(e,t)=>{const o=qo(e,t);return Mn(o)?NaN:parseInt(o,10)},eZ=(e,t)=>{const o=e.element,n=ZE(o,t.leftAttr),r=ZE(o,t.topAttr);return isNaN(n)||isNaN(r)?v.none():v.some(Ko(n,r))},tZ=(e,t,o)=>{const n=e.element;at(n,t.leftAttr,o.left+"px"),at(n,t.topAttr,o.top+"px")},oZ=(e,t)=>{const o=e.element;B(o,t.leftAttr),B(o,t.topAttr)},nZ=(e,t,o,n)=>eZ(e,t).fold(()=>o,r=>Rg(r.left+n.left,r.top+n.top)),sZ=(e,t,o,n,r,a)=>{const l=nZ(e,t,o,n),d=t.mustSnap?cZ(e,t,l,r,a):aZ(e,t,l,r,a),m=W2(l,r,a);return tZ(e,t,m),d.fold(()=>({coord:Rg(m.left,m.top),extra:v.none()}),f=>({coord:f.output,extra:f.extra}))},rZ=(e,t)=>{oZ(e,t)},UE=(e,t,o,n)=>Vn(e,r=>{const a=r.sensor;return Xz(t,a,r.range.left,r.range.top,o,n)?v.some({output:l3(r.output,t,o,n),extra:r.extra}):v.none()}),cZ=(e,t,o,n,r)=>{const a=t.getSnapPoints(e);return UE(a,o,n,r).orThunk(()=>Ut(a,(m,f)=>{const w=f.sensor,x=Jz(o,w,f.range.left,f.range.top,n,r);return m.deltas.fold(()=>({deltas:v.some(x),snap:v.some(f)}),O=>{const M=(x.left+x.top)/2,A=(O.left+O.top)/2;return M<=A?{deltas:v.some(x),snap:v.some(f)}:m})},{deltas:v.none(),snap:v.none()}).snap.map(m=>({output:l3(m.output,o,n,r),extra:m.extra})))},aZ=(e,t,o,n,r)=>{const a=t.getSnapPoints(e);return UE(a,o,n,r)},lZ=(e,t,o)=>({coord:l3(e.output,e.output,t,o),extra:e.extra});var iZ=Object.freeze({__proto__:null,snapTo:(e,t,o,n)=>{const r=t.getTarget(e.element);if(t.repositionTarget){const a=ks(e.element),l=Ps(a),d=tM(r),m=lZ(n,l,d),f=zE(m.coord,l,d);Er(r,f)}}});const i3="data-initial-z-index",uZ=e=>{ss(e.element).filter(Co).each(t=>{C(t,i3).fold(()=>jt(t,"z-index"),o=>Ie(t,"z-index",o)),B(t,i3)})},dZ=e=>{ss(e.element).filter(Co).each(t=>{zo(t,"z-index").each(o=>{at(t,i3,o)}),Ie(t,"z-index",No(e.element,"z-index"))})},WE=(e,t)=>{e.getSystem().addToGui(t),dZ(t)},mZ=e=>{uZ(e),e.getSystem().removeFromGui(e)},GE=(e,t,o)=>e.getSystem().build(Bi.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:o}));var gZ=Ir("snaps",[me("getSnapPoints"),Zt("onSensor"),me("leftAttr"),me("topAttr"),J("lazyViewport",ps),J("mustSnap",!1)]);const u3=[J("useFixed",Ht),me("blockerClass"),J("getTarget",xt),J("onDrag",X),J("repositionTarget",!0),J("onDrop",X),Un("getBounds",ps),gZ],hZ=e=>gr(zo(e,"left"),zo(e,"top"),zo(e,"position"),(t,o,n)=>(n==="fixed"?Rg:G2)(parseInt(t,10),parseInt(o,10))).getOrThunk(()=>{const t=Bs(e);return Dm(t.left,t.top)}),pZ=(e,t,o,n,r)=>{const a=r.bounds,l=pp(t,o,n),d=In(l.left,a.x,a.x+a.width-r.width),m=In(l.top,a.y,a.y+a.height-r.height),f=Dm(d,m);return t.fold(()=>{const w=NE(f,o,n);return G2(w.left,w.top)},I(f),()=>{const w=W2(f,o,n);return Rg(w.left,w.top)})},fZ=(e,t,o,n,r,a,l)=>{const d=t.fold(()=>{const m=Qz(o,a.left,a.top),f=W2(m,n,r);return Rg(f.left,f.top)},m=>{const f=sZ(e,m,o,a,n,r);return f.extra.each(w=>{m.onSensor(e,w)}),f.coord});return pZ(e,d,n,r,l)},bZ=(e,t,o,n)=>{const r=t.getTarget(e.element);if(t.repositionTarget){const a=ks(e.element),l=Ps(a),d=tM(r),m=hZ(r),f=fZ(e,t.snaps,m,l,d,n,o),w=zE(f,l,d);Er(r,w)}t.onDrag(e,r,n)},jE=(e,t)=>({bounds:e.getBounds(),height:wl(t.element),width:Dr(t.element)}),d3=(e,t,o,n,r)=>{const a=o.update(n,r),l=o.getStartData().getOrThunk(()=>jE(t,e));a.each(d=>{bZ(e,t,l,d)})},qE=(e,t,o,n)=>{t.each(mZ),o.snaps.each(a=>{rZ(e,a)});const r=o.getTarget(e.element);n.reset(),o.onDrop(e,r)},m3=e=>(t,o)=>{const n=r=>{o.setStartData(jE(t,r))};return Lo([le(_p(),r=>{o.getStartData().each(()=>n(r))}),...e(t,o,n)])},vZ=e=>Lo([le(Ot(),e.forceDrop),le(ec(),e.drop),le(Uo(),(t,o)=>{e.move(o.event)}),le(Ns(),e.delayDrop)]);var yZ=Object.freeze({__proto__:null,getData:e=>v.from(Ko(e.x,e.y)),getDelta:(e,t)=>Ko(t.left-e.left,t.top-e.top)});const KE=(e,t,o)=>[le(Ot(),(n,r)=>{if(r.event.raw.button!==0)return;r.stop();const l=()=>qE(n,v.some(f),e,t),d=Gk(l,200),m={drop:l,delayDrop:d.schedule,forceDrop:l,move:x=>{d.cancel(),d3(n,e,t,yZ,x)}},f=GE(n,e.blockerClass,vZ(m));(()=>{o(n),WE(n,f)})()})],wZ=[...u3,Xo("dragger",{handlers:m3(KE)})],SZ=e=>Lo([le(Uc(),e.forceDrop),le(ll(),e.drop),le(zd(),e.drop),le(El(),(t,o)=>{e.move(o.event)})]),xZ=e=>{const t=e[0];return v.some(Ko(t.clientX,t.clientY))};var YE=Object.freeze({__proto__:null,getData:e=>{const o=e.raw.touches;return o.length===1?xZ(o):v.none()},getDelta:(e,t)=>Ko(t.left-e.left,t.top-e.top)});const XE=(e,t,o)=>{const n=Wo(),r=a=>{qE(a,n.get(),e,t),n.clear()};return[le(Uc(),(a,l)=>{l.stop();const d=()=>r(a),m={drop:d,delayDrop:X,forceDrop:d,move:x=>{d3(a,e,t,YE,x)}},f=GE(a,e.blockerClass,SZ(m));n.set(f),(()=>{o(a),WE(a,f)})()}),le(El(),(a,l)=>{l.stop(),d3(a,e,t,YE,l.event)}),le(ll(),(a,l)=>{l.stop(),r(a)}),le(zd(),r)]},CZ=[...u3,Xo("dragger",{handlers:m3(XE)})],TZ=(e,t,o)=>[...KE(e,t,o),...XE(e,t,o)],kZ=[...u3,Xo("dragger",{handlers:m3(TZ)})];var OZ=Object.freeze({__proto__:null,mouse:wZ,touch:CZ,mouseOrTouch:kZ}),_Z=Object.freeze({__proto__:null,init:()=>{let e=v.none(),t=v.none();const o=()=>{e=v.none(),t=v.none()},n=(m,f)=>{const w=e.map(x=>m.getDelta(x,f));return e=v.some(f),w},r=(m,f)=>m.getData(f).bind(w=>n(m,w)),a=m=>{t=v.some(m)},l=()=>t,d=I({});return Gc({readState:d,reset:o,update:r,getStartData:l,setStartData:a})}});const Hg=bh({branchKey:"mode",branches:OZ,name:"dragging",active:{events:(e,t)=>e.dragger.handlers(e,t)},extra:{snap:e=>({sensor:e.sensor,range:e.range,output:e.output,extra:v.from(e.extra)})},state:_Z,apis:iZ}),g3=40,j2=g3/2,JE=(e,t,o,n,r,a)=>e.fold(()=>Hg.snap({sensor:Dm(o-j2,n-j2),range:Ko(r,a),output:Dm(v.some(o),v.some(n)),extra:{td:t}}),l=>{const d=o-j2,m=n-j2,f=g3,w=g3,x=l.element.dom.getBoundingClientRect();return Hg.snap({sensor:Dm(d,m),range:Ko(f,w),output:Dm(v.some(o-x.width/2),v.some(n-x.height/2)),extra:{td:t}})}),QE=(e,t,o)=>{const n=(r,a)=>r.exists(l=>eo(l,a));return{getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(r,a)=>{const l=a.td;n(t.get(),l)||(t.set(l),o(l))},mustSnap:!0}},eA=e=>po(xr.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:xe([Hg.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),z1.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),MZ=(e,t)=>{const o=We([]),n=We([]),r=We(!1),a=Wo(),l=Wo(),d=ke=>{const ae=fr(ke);return JE(M.getOpt(t),ke,ae.x,ae.y,ae.width,ae.height)},m=()=>ue(o.get(),ke=>d(ke)),f=ke=>{const ae=fr(ke);return JE(A.getOpt(t),ke,ae.right,ae.bottom,ae.width,ae.height)},w=()=>ue(n.get(),ke=>f(ke)),x=QE(m,a,ke=>{l.get().each(ae=>{e.dispatch("TableSelectorChange",{start:ke,finish:ae})})}),O=QE(w,l,ke=>{a.get().each(ae=>{e.dispatch("TableSelectorChange",{start:ae,finish:ke})})}),M=eA(x),A=eA(O),L=Zs(M.asSpec()),ee=Zs(A.asSpec()),W=(ke,ae,ct,$e)=>{const Ye=ae.dom.getBoundingClientRect();jt(ke.element,"display");const Ne=Zr(U.fromDom(e.getBody())).dom.innerHeight,qt=ct(Ye),Lt=$e(Ye,Ne);(qt||Lt)&&Ie(ke.element,"display","none")},Y=(ke,ae,ct,$e)=>{const Ye=ct(ae);Hg.snapTo(ke,Ye),W(ke,ae,Lt=>Lt[$e]<0,(Lt,Mt)=>Lt[$e]>Mt)},j=ke=>Y(L,ke,d,"top"),de=()=>a.get().each(j),ie=ke=>Y(ee,ke,f,"bottom"),he=()=>l.get().each(ie);if(Ac().deviceType.isTouch()){const ke=ae=>ue(ae,U.fromDom);e.on("TableSelectionChange",ae=>{r.get()||(Vl(t,L),Vl(t,ee),r.set(!0));const ct=U.fromDom(ae.start),$e=U.fromDom(ae.finish);a.set(ct),l.set($e),v.from(ae.otherCells).each(Ye=>{o.set(ke(Ye.upOrLeftCells)),n.set(ke(Ye.downOrRightCells)),j(ct),ie($e)})}),e.on("ResizeEditor ResizeWindow ScrollContent",()=>{de(),he()}),e.on("TableSelectionClear",()=>{r.get()&&(Di(L),Di(ee),r.set(!1)),a.clear(),l.clear()})}};var EZ=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const AZ=e=>e.nodeName==="BR"||!!e.getAttribute("data-mce-bogus")||e.getAttribute("data-mce-type")==="bookmark",DZ=(e,t,o)=>{var n;const r=(n=t.delimiter)!==null&&n!==void 0?n:"",a=(f,w,x)=>xr.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":x,"aria-level":x+1}},components:[Ln(f)],action:O=>{e.focus(),e.selection.select(w),e.nodeChanged()},buttonBehaviours:xe([ql.button(o.isDisabled),As()])}),l=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Ln(` ${r} `)]}),d=f=>Ut(f,(w,x,O)=>{const M=a(x.name,x.element,O);return O===0?w.concat([M]):w.concat([l(),M])},[]),m=f=>{const w=[];let x=f.length;for(;x-- >0;){const O=f[x];if(O.nodeType===1&&!AZ(O)){const M=w$(e,O);if(M.isDefaultPrevented()||w.push({name:M.name,element:O}),M.isPropagationStopped())break}}return w};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:xe([Ke.config({mode:"flow",selector:"div[role=button]"}),rt.config({disabled:o.isDisabled}),As(),Sn.config({}),bt.config({}),yt("elementPathEvents",[cn((f,w)=>{e.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Ke.focusIn(f)),e.on("NodeChange",x=>{const O=m(x.parents),M=O.length>0?d(O):[];bt.set(f,M)})})])]),components:[]}};var $m;(function(e){e[e.None=0]="None",e[e.Both=1]="Both",e[e.Vertical=2]="Vertical"})($m||($m={}));const $Z=(e,t,o,n,r)=>{const a={height:V2(n+t.top,Wx(e),Gx(e))};return o===$m.Both&&(a.width=V2(r+t.left,Ux(e),Iv(e))),a},tA=(e,t,o)=>{const n=U.fromDom(e.getContainer()),r=$Z(e,t,o,Zo(n),Ar(n));ho(r,(a,l)=>{So(a)&&Ie(n,l,JC(a))}),b$(e)},RZ=e=>{const t=u5(e);return t===!1?$m.None:t==="both"?$m.Both:$m.Vertical},q2=(e,t,o,n)=>{const a=Ko(o*20,n*20);return tA(e,a,t),v.some(!0)},HZ=(e,t)=>{const o=RZ(e);if(o===$m.None)return v.none();const n=o===$m.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return v.some(Gl("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":t.translate(n),"data-mce-name":"resize-handle"},behaviours:[Hg.config({mode:"mouse",repositionTarget:!1,onDrag:(r,a,l)=>tA(e,l,o),blockerClass:"tox-blocker"}),Ke.config({mode:"special",onLeft:()=>q2(e,o,-1,0),onRight:()=>q2(e,o,1,0),onUp:()=>q2(e,o,0,-1),onDown:()=>q2(e,o,0,1)}),Sn.config({}),ut.config({}),Fr.config(t.tooltips.getConfig({tooltipText:t.translate("Resize")}))]},t.icons))},IZ=(e,t)=>{const o=(n,r,a)=>bt.set(n,[Ln(t.translate(["{0} "+a,r[a]]))]);return xr.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:xe([ql.button(t.isDisabled),As(),Sn.config({}),bt.config({}),Ee.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),yt("wordcount-events",[Ci(n=>{const r=Ee.getValue(n),a=r.mode==="words"?"characters":"words";Ee.setValue(n,{mode:a,count:r.count}),o(n,r.count,a)}),cn(n=>{e.on("wordCountUpdate",r=>{const{mode:a}=Ee.getValue(n);Ee.setValue(n,{mode:a,count:r.wordCount}),o(n,r.wordCount,a)})})])]),eventOrder:{[bc()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},BZ=(e,t)=>{const o=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":Za.translate(["Powered by {0}","Tiny"])},innerHtml:EZ.trim()},behaviours:xe([ut.config({})])}]}),n=()=>{const d=b4("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Ln(Za.translate(["Press {0} for help",d]))]}},r=()=>{const d=[];return e.hasPlugin("wordcount")&&d.push(IZ(e,t)),qx(e)&&d.push(o()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:d}},a=()=>{const d=[],m=h5(e),f=i5(e),w=qx(e)||e.hasPlugin("wordcount"),x=()=>{const O="tox-statusbar__text-container--flex-start",M="tox-statusbar__text-container--flex-end",A="tox-statusbar__text-container--space-around";if(m){const L="tox-statusbar__text-container-3-cols";return!w&&!f?[L,A]:w&&!f?[L,M]:[L,O]}return[w&&!f?M:O]};return f&&d.push(DZ(e,{},t)),m&&d.push(n()),w&&d.push(r()),d.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...x()]},components:d}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const d=a(),m=HZ(e,t);return d.concat(m.toArray())})()}},oA=(e,t)=>t.get().getOrDie(`UI for ${e} has not been rendered`),LZ=(e,t)=>{const o=e.inline,n=o?DN:TN,r=O1(e)?AP:eP,a=$N(),l=Wo(),d=Wo(),m=Wo(),O=Ac().deviceType.isTouch()?["tox-platform-touch"]:[],M=Xx(e),A=Jh(e),L=po({dom:{tag:"div",classes:["tox-anchorbar"]}}),ee=po({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),W=()=>a.mainUi.get().map(Ze=>Ze.outerContainer).bind(Po.getHeader),Y=()=>St.fromOption(a.dialogUi.get().map(Ze=>Ze.sink),"UI has not been rendered"),j=()=>St.fromOption(a.popupUi.get().map(Ze=>Ze.sink),"(popup) UI has not been rendered"),de=a.lazyGetInOuterOrDie("anchor bar",L.getOpt),ie=a.lazyGetInOuterOrDie("bottom anchor bar",ee.getOpt),he=a.lazyGetInOuterOrDie("toolbar",Po.getToolbar),ke=a.lazyGetInOuterOrDie("throbber",Po.getThrobber),ae=ZF({popup:j,dialog:Y},e,de,ie),ct=()=>{const Ze={attributes:{[Ch]:M?Pl.BottomToTop:Pl.TopToBottom}},mt=Po.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:ae.popup,onEscape:()=>{e.focus()}}),vo=Po.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:ae.popup.shared.getSink,providers:ae.popup.shared.providers,onEscape:()=>{e.focus()},onToolbarToggled:pd=>{S$(e,pd)},type:A,lazyToolbar:he,lazyHeader:()=>W().getOrDie("Could not find header element"),...Ze}),Yt=Po.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:ae.popup.shared.providers,onEscape:()=>{e.focus()},type:A}),Cr=k1(e),jc=Vv(e),bl=Lv(e),ir=g5(e),qc=$e(),wa=Cr||jc||bl,Sc=()=>Cr?[Yt]:jc?[vo]:[],ti=ir?[qc,mt]:[mt];return Po.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(wa?[]:["tox-editor-header--empty"]),...Ze},components:Rt([bl?ti:[],Sc(),Qh(e)?[]:[L.asSpec()]]),sticky:O1(e),editor:e,sharedBackstage:ae.popup.shared})},$e=()=>Po.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Ye=()=>{const Ze=Po.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),mt=Po.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Ze,mt]}},Ne=()=>{const Ze=Jx(e),mt=eo(rs(),Ze)&&No(Ze,"display")==="grid",vo={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(O),attributes:{...Za.isRtl()?{dir:"rtl"}:{}}},behaviours:xe([yr.config({useFixed:()=>r.isDocked(W)})])},Yt={dom:{styles:{width:document.body.clientWidth+"px"}},events:Lo([le(jm(),bl=>{Ie(bl.element,"width",document.body.clientWidth+"px")})])},Cr=Zs(Oo(vo,mt?Yt:{})),jc=F4(Cr);return d.set(jc),{sink:Cr,mothership:jc}},qt=()=>{const Ze={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(O),attributes:{...Za.isRtl()?{dir:"rtl"}:{}}},behaviours:xe([yr.config({useFixed:()=>r.isDocked(W),getBounds:()=>t.getPopupSinkBounds()})])},mt=Zs(Ze),vo=F4(mt);return m.set(vo),{sink:mt,mothership:vo}},Lt=()=>{const Ze=ct(),mt=Ye(),vo=Po.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:ae.popup}),Yt=Po.parts.viewWrapper({backstage:ae.popup}),Cr=l5(e)&&!o?v.some(BZ(e,ae.popup.shared.providers)):v.none(),jc=Rt([M?[]:[Ze],o?[]:[mt],M?[Ze]:[]]),bl=Po.parts.editorContainer({components:Rt([jc,o?[]:[ee.asSpec()]])}),ir=Qx(e),qc={role:"application",...Za.isRtl()?{dir:"rtl"}:{},...ir?{"aria-hidden":"true"}:{}},wa=Zs(Po.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(o?["tox-tinymce-inline"]:[]).concat(M?["tox-tinymce--toolbar-bottom"]:[]).concat(O),styles:{visibility:"hidden",...ir?{opacity:"0",border:"0"}:{}},attributes:qc},components:[bl,...o?[]:[Yt,...Cr.toArray()],vo],behaviours:xe([As(),rt.config({disableClass:"tox-tinymce--disabled"}),Ke.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Sc=F4(wa);return l.set(Sc),{mothership:Sc,outerContainer:wa}},Mt=Ze=>{const mt=JC(ON(e)),vo=JC(_N(e));return e.inline||(Mc("div","width",vo)&&Ie(Ze.element,"width",vo),Mc("div","height",mt)?Ie(Ze.element,"height",mt):Ie(Ze.element,"height","400px")),mt},Se=Ze=>{e.addShortcut("alt+F9","focus menubar",()=>{Po.focusMenubar(Ze)}),e.addShortcut("alt+F10","focus toolbar",()=>{Po.focusToolbar(Ze)}),e.addCommand("ToggleToolbarDrawer",(mt,vo)=>{vo!=null&&vo.skipFocus?Po.toggleToolbarDrawerWithoutFocusing(Ze):Po.toggleToolbarDrawer(Ze)}),e.addQueryStateHandler("ToggleToolbarDrawer",()=>Po.isToolbarDrawerToggled(Ze))},Be=Ze=>{const{mainUi:mt,popupUi:vo,uiMotherships:Yt}=Ze;yo(YT(e),(Rm,vp)=>{e.ui.registry.addGroupToolbarButton(vp,Rm)});const{buttons:Cr,menuItems:jc,contextToolbars:bl,sidebars:ir,views:qc}=e.ui.registry.getAll(),wa=Yx(e),Sc={menuItems:jc,menus:v5(e),menubar:QT(e),toolbar:wa.getOrThunk(()=>Bv(e)),allowToolbarGroups:A===gl.floating,buttons:Cr,sidebar:ir,views:qc};Se(mt.outerContainer),UF(e,mt.mothership,Yt),r.setup(e,ae.popup.shared,W),Oz(e,ae.popup),Yz(e,ae.popup.shared.getSink,ae.popup),WP(e),l9(e,ke,ae.popup.shared),nz(e,bl,vo.sink,{backstage:ae.popup}),MZ(e,vo.sink);const ti=e.getElement(),pd=Mt(mt.outerContainer),tb={targetNode:ti,height:pd};return n.render(e,Ze,Sc,ae.popup,tb)},ht=Ze=>(m.set(Ze.mothership),Ze),Qe=()=>{const Ze=Lt(),mt=Ne(),vo=ym(e)?qt():ht(mt);a.dialogUi.set(mt),a.popupUi.set(vo),a.mainUi.set(Ze);const Yt={popupUi:vo,dialogUi:mt,mainUi:Ze,uiMotherships:a.getUiMotherships()};return Be(Yt)};return{popups:{backstage:ae.popup,getMothership:()=>oA("popups",m)},dialogs:{backstage:ae.dialog,getMothership:()=>oA("dialogs",d)},renderUI:Qe}},FZ=(e,t)=>{const o=C(e,"id").fold(()=>{const n=Le("dialog-label");return at(t,"id",n),n},xt);at(e,"aria-labelledby",o)},PZ=I([me("lazySink"),no("dragBlockClass"),Un("getBounds",ps),J("useTabstopAt",io),J("firstTabstop",0),J("eventOrder",{}),Es("modalBehaviours",[Ke]),Ic("onExecute"),af("onEscape")]),h3={sketch:xt},VZ=I([ma({name:"draghandle",overrides:(e,t)=>({behaviours:xe([Hg.config({mode:"mouse",getTarget:o=>_i(o,'[role="dialog"]').getOr(o),blockerClass:e.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(t,null,2)).message),getBounds:e.getDragBounds})])})}),wr({schema:[me("dom")],name:"title"}),wr({factory:h3,schema:[me("dom")],name:"close"}),wr({factory:h3,schema:[me("dom")],name:"body"}),ma({factory:h3,schema:[me("dom")],name:"footer"}),Pa({factory:{sketch:(e,t)=>({...e,dom:t.dom,components:t.components})},schema:[J("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),J("components",[])],name:"blocker"})]),NZ=(e,t,o,n)=>{const r=Wo(),a=M=>{r.set(M);const A=e.lazySink(M).getOrDie(),L=n.blocker(),ee=A.getSystem().build({...L,components:L.components.concat([ua(M)]),behaviours:xe([ut.config({}),yt("dialog-blocker-events",[Wd(Wc(),()=>{Fi.isBlocked(M)?X():Ke.focusIn(M)})])])});Vl(A,ee),Ke.focusIn(M)},l=M=>{r.clear(),ss(M.element).each(A=>{M.getSystem().getByDom(A).each(L=>{Di(L)})})},d=M=>du(M,e,"body"),m=M=>_o(M,e,"footer"),f=(M,A)=>{Fi.block(M,A)},w=M=>{Fi.unblock(M)},x=Le("modal-events"),O={...e.eventOrder,[Hc()]:[x].concat(e.eventOrder["alloy.system.attached"]||[])};return{uid:e.uid,dom:e.dom,components:t,apis:{show:a,hide:l,getBody:d,getFooter:m,setIdle:w,setBusy:f},eventOrder:O,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Ws(e.modalBehaviours,[bt.config({}),Ke.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt,firstTabstop:e.firstTabstop}),Fi.config({getRoot:r.get}),yt(x,[cn(M=>{FZ(M.element,du(M,e,"title").element)})])])}},$s=Lr({name:"ModalDialog",configFields:PZ(),partFields:VZ(),factory:NZ,apis:{show:(e,t)=>{e.show(t)},hide:(e,t)=>{e.hide(t)},getBody:(e,t)=>e.getBody(t),getFooter:(e,t)=>e.getFooter(t),setBusy:(e,t,o)=>{e.setBusy(t,o)},setIdle:(e,t)=>{e.setIdle(t)}}}),zZ=tt([es,l4].concat(tp)),ZZ=Nu,p3=[h4("button"),hl,fc("align","end",["start","end"]),jv,jl,Gg("buttonType",["primary","secondary"])],nA=[...p3,ud],f3=[cl("type",["submit","cancel","custom"]),...nA],UZ=[cl("type",["menu"]),wm,M1,hl,hc("items",zZ),...p3],WZ=[...p3,cl("type",["togglebutton"]),M1,hl,wm,Vs("active",!1)],GZ=Jr("type",{submit:f3,cancel:f3,custom:f3,menu:UZ,togglebutton:WZ}),jZ=[es,ud,cl("level",["info","warn","error","success"]),L5,J("url","")],qZ=tt(jZ),KZ=e=>[es,e],YZ=[es,ud,jl,h4("button"),hl,l8,Gg("buttonType",["primary","secondary","toolbar"]),jv],XZ=tt(YZ),fp=[es,l4],Pi=fp.concat([u4]),JZ=fp.concat([i4,jl]),QZ=tt(JZ),eU=Nu,tU=Pi.concat([F5("auto")]),oU=tt(tU),nU=Bd([_1,ud,L5]),sU=Pi.concat([pc("storageKey","default")]),rU=tt(sU),cU=fs,aU=tt(Pi),lU=fs,iU=fp.concat([pc("tag","textarea"),Zn("scriptId"),Zn("scriptUrl"),Ml("onFocus"),Pd("settings",void 0)]),uU=fp.concat([pc("tag","textarea"),$c("init")]),dU=Qi(e=>rn("customeditor.old",Xr(uU),e).orThunk(()=>rn("customeditor.new",Xr(iU),e))),mU=fs,gU=tt(Pi),hU=kp(),pU=e=>[es,Ug("columns"),e],fU=[es,Zn("html"),fc("presets","presentation",["presentation","document"])],bU=tt(fU),vU=Pi.concat([Vs("border",!1),Vs("sandboxed",!0),Vs("streamContent",!1),Vs("transparent",!0)]),yU=tt(vU),wU=fs,SU=tt(fp.concat([or("height")])),xU=tt([Zn("url"),zu("zoom"),zu("cachedWidth"),zu("cachedHeight")]),CU=Pi.concat([or("inputMode"),or("placeholder"),Vs("maximized",!1),jl]),TU=tt(CU),kU=fs,OU=e=>[es,i4,e,fc("align","start",["start","center","end"])],_U=[ud,_1],MU=[ud,hc("items",Zg("items",()=>sA))],sA=Id([tt(_U),tt(MU)]),EU=Pi.concat([hc("items",sA),jl]),AU=tt(EU),DU=fs,$U=Pi.concat([Zm("items",[ud,_1]),Fd("size",1),jl]),RU=tt($U),HU=fs,IU=Pi.concat([Vs("constrain",!0),jl]),BU=tt(IU),rA=tt([Zn("width"),Zn("height")]),LU=fp.concat([i4,Fd("min",0),Fd("max",0)]),FU=tt(LU),PU=rl,VU=[es,hc("header",fs),hc("cells",pi(fs))],NU=tt(VU),zU=Pi.concat([or("placeholder"),Vs("maximized",!1),jl]),ZU=tt(zU),UU=fs,cA=[cl("type",["directory","leaf"]),B5,Zn("id"),Ma("menu",fM)],aA=tt(cA),WU=cA.concat([hc("children",Zg("children",()=>vi("type",{directory:lA,leaf:aA})))]),lA=tt(WU),GU=vi("type",{directory:lA,leaf:aA}),jU=[es,hc("items",GU),Ml("onLeafAction"),Ml("onToggleExpand"),Ea("defaultExpandedIds",[],fs),or("defaultSelectedId")],qU=tt(jU),KU=Pi.concat([fc("filetype","file",["image","media","file"]),jl,or("picker_text")]),YU=tt(KU),XU=tt([_1,m4]),b3=e=>bs("items","items",Rr(),pi(Qi(t=>rn(`Checking item of ${e}`,v3,t).fold(o=>St.error(eu(o)),o=>St.value(o))))),v3=Vm(()=>vi("type",{alertbanner:qZ,bar:tt(KZ(b3("bar"))),button:XZ,checkbox:QZ,colorinput:rU,colorpicker:aU,dropzone:gU,grid:tt(pU(b3("grid"))),iframe:yU,input:TU,listbox:AU,selectbox:RU,sizeinput:BU,slider:FU,textarea:ZU,urlinput:YU,customeditor:dU,htmlpanel:bU,imagepreview:SU,collection:oU,label:tt(OU(b3("label"))),table:NU,tree:qU,panel:iA})),JU=[es,J("classes",[]),hc("items",v3)],iA=tt(JU),QU=[h4("tab"),B5,hc("items",v3)],eW=[es,Zm("tabs",QU)],tW=tt(eW),oW=nA,nW=GZ,sW=tt([Zn("title"),gc("body",vi("type",{panel:iA,tabpanel:tW})),pc("size","normal"),Ea("buttons",[],nW),J("initialData",{}),Un("onAction",X),Un("onChange",X),Un("onSubmit",X),Un("onClose",X),Un("onCancel",X),Un("onTabChange",X)]),rW=e=>rn("dialog",sW,e),cW=tt([cl("type",["cancel","custom"]),...oW]),aW=tt([Zn("title"),Zn("url"),zu("height"),zu("width"),jg("buttons",cW),Un("onAction",X),Un("onCancel",X),Un("onClose",X),Un("onMessage",X)]),lW=e=>rn("dialog",aW,e),y3=e=>At(e)?[e].concat(uo(uc(e),y3)):Vo(e)?uo(e,y3):[],iW=e=>Xe(e.type)&&Xe(e.name),uW={checkbox:eU,colorinput:cU,colorpicker:lU,dropzone:hU,input:kU,iframe:wU,imagepreview:xU,selectbox:HU,sizeinput:rA,slider:PU,listbox:DU,size:rA,textarea:UU,urlinput:XU,customeditor:mU,collection:nU,togglemenuitem:ZZ},dW=e=>v.from(uW[e.type]),mW=e=>Ct(y3(e),iW),gW=e=>{const t=mW(e),o=uo(t,n=>dW(n).fold(()=>[],r=>[gc(n.name,r)]));return tt(o)},uA=e=>{var t;const o=ca(rW(e)),n=gW(e),r=(t=e.initialData)!==null&&t!==void 0?t:{};return{internalDialog:o,dataValidator:n,initialData:r}},Ig={open:(e,t)=>{const o=uA(t);return e(o.internalDialog,o.initialData,o.dataValidator)},openUrl:(e,t)=>{const o=ca(lW(t));return e(o)},redial:e=>uA(e)};var hW=Object.freeze({__proto__:null,events:(e,t)=>{const o=(n,r)=>{e.updateState.each(a=>{const l=a(n,r);t.set(l)}),e.renderComponents.each(a=>{const l=a(r,t.get());(e.reuseDom?iT:lT)(n,l)})};return Lo([le(su(),(n,r)=>{const a=r;if(!a.universal){const l=e.channel;Xt(a.channels,l)&&o(n,a.data)}}),cn((n,r)=>{e.initialData.each(a=>{o(n,a)})})])}}),pW=Object.freeze({__proto__:null,getState:(e,t,o)=>o}),fW=[me("channel"),no("renderComponents"),no("updateState"),no("initialData"),Vs("reuseDom",!0)],bW=Object.freeze({__proto__:null,init:()=>{const e=We(v.none()),t=()=>e.set(v.none());return{readState:()=>e.get().getOr("none"),get:e.get,set:e.set,clear:t}}});const ya=Us({fields:fW,name:"reflecting",active:hW,apis:pW,state:bW}),dA=e=>{const t=[],o={};return ho(e,(n,r)=>{n.fold(()=>{t.push(r)},a=>{o[r]=a})}),t.length>0?St.error(t):St.value(o)},vW=(e,t,o)=>{const n=po(lp.sketch(r=>({dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:ue(e.items,a=>M_(r,a,t,o))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[n.asSpec()]}],behaviours:xe([Ke.config({mode:"acyclic",useTabstopAt:wt(U1)}),Jl.memento(n),UI(n,{postprocess:r=>dA(r).fold(a=>(console.error(a),{}),xt)}),yt("dialog-body-panel",[le(Wc(),(r,a)=>{r.getSystem().broadcastOn([w2],{newFocus:v.some(a.event.target)})})])])}},yW=(e,t)=>({uid:e.uid,dom:e.dom,components:e.components,events:Av(e.action),behaviours:Ws(e.tabButtonBehaviours,[ut.config({}),Ke.config({mode:"execution",useSpace:!0,useEnter:!0}),Ee.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification}),wW=ar({name:"TabButton",configFields:[J("uid",void 0),me("value"),bs("dom","dom",kl(()=>({attributes:{role:"tab",id:Le("aria"),"aria-selected":"false"}})),ra()),no("action"),J("domModification",{}),Es("tabButtonBehaviours",[ut,Ke,Ee]),me("view")],factory:yW}),SW=I([me("tabs"),me("dom"),J("clickToDismiss",!1),Es("tabbarBehaviours",[to,Ke]),Ra(["tabClass","selectedClass"])]),xW=Va({factory:wW,name:"tabs",unit:"tab",overrides:e=>{const t=(n,r)=>{to.dehighlight(n,r),je(n,Ap(),{tabbar:n,button:r})},o=(n,r)=>{to.highlight(n,r),je(n,Ep(),{tabbar:n,button:r})};return{action:n=>{const r=n.getSystem().getByUid(e.uid).getOrDie(),a=to.isHighlighted(r,n);(a&&e.clickToDismiss?t:a?X:o)(r,n)},domModification:{classes:[e.markers.tabClass]}}}}),CW=I([xW]),TW=(e,t,o,n)=>({uid:e.uid,dom:e.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Ws(e.tabbarBehaviours,[to.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:(r,a)=>{at(a.element,"aria-selected","true")},onDehighlight:(r,a)=>{at(a.element,"aria-selected","false")}}),Ke.config({mode:"flow",getInitial:r=>to.getHighlighted(r).map(a=>a.element),selector:"."+e.markers.tabClass,executeOnMove:!0})])}),mA=Lr({name:"Tabbar",configFields:SW(),partFields:CW(),factory:TW}),kW=(e,t)=>({uid:e.uid,dom:e.dom,behaviours:Ws(e.tabviewBehaviours,[bt.config({})]),domModification:{attributes:{role:"tabpanel"}}}),OW=ar({name:"Tabview",configFields:[Es("tabviewBehaviours",[bt])],factory:kW}),_W=I([J("selectFirst",!0),Zt("onChangeTab"),Zt("onDismissTab"),J("tabs",[]),Es("tabSectionBehaviours",[])]),MW=wr({factory:mA,schema:[me("dom"),al("markers",[me("tabClass"),me("selectedClass")])],name:"tabbar",defaults:e=>({tabs:e.tabs})}),EW=wr({factory:OW,name:"tabview"}),AW=I([MW,EW]),DW=(e,t,o,n)=>{const r=l=>{const d=Ee.getValue(l);_o(l,e,"tabview").each(m=>{Qt(e.tabs,w=>w.value===d).each(w=>{const x=w.view();C(l.element,"id").each(O=>{at(m.element,"aria-labelledby",O)}),bt.set(m,x),e.onChangeTab(m,l,x)})})},a=(l,d)=>{_o(l,e,"tabbar").each(m=>{d(m).each(Si)})};return{uid:e.uid,dom:e.dom,components:t,behaviours:sd(e.tabSectionBehaviours),events:Lo(Rt([e.selectFirst?[cn((l,d)=>{a(l,to.getFirst)})]:[],[le(Ep(),(l,d)=>{const m=d.event.button;r(m)}),le(Ap(),(l,d)=>{const m=d.event.button;e.onDismissTab(l,m)})]])),apis:{getViewItems:l=>_o(l,e,"tabview").map(d=>bt.contents(d)).getOr([]),showTab:(l,d)=>{a(l,f=>{const w=to.getCandidates(f);return Qt(w,O=>Ee.getValue(O)===d).filter(O=>!to.isHighlighted(f,O))})}}}},bp=Lr({name:"TabSection",configFields:_W(),partFields:AW(),factory:DW,apis:{getViewItems:(e,t)=>e.getViewItems(t),showTab:(e,t,o)=>{e.showTab(t,o)}}}),$W=(e,t,o)=>ue(e,(n,r)=>{bt.set(o,e[r].view());const a=t.dom.getBoundingClientRect();return bt.set(o,[]),a.height}),RW=e=>bn(ws(e,(t,o)=>t>o?-1:t<o?1:0)),HW=(e,t,o)=>{const n=_r(e).dom,r=_i(e,".tox-dialog-wrap").getOr(e),a=No(r,"position")==="fixed";let l;a?l=Math.max(n.clientHeight,window.innerHeight):l=Math.max(n.offsetHeight,n.scrollHeight);const d=Zo(t),f=t.dom.offsetLeft>=o.dom.offsetLeft+Ar(o)?Math.max(Zo(o),d):d,w=parseInt(No(e,"margin-top"),10)||0,x=parseInt(No(e,"margin-bottom"),10)||0,M=Zo(e)+w+x-f;return l-M},IW=(e,t)=>{bn(e).each(o=>bp.showTab(t,o.value))},gA=(e,t)=>{Ie(e,"height",t+"px"),Ie(e,"flex-basis",t+"px")},K2=(e,t,o)=>{_i(e,'[role="dialog"]').each(n=>{Yo(n,'[role="tablist"]').each(r=>{o.get().map(a=>(Ie(t,"height","0"),Ie(t,"flex-basis","0"),Math.min(a,HW(n,t,r)))).each(a=>{gA(t,a)})})})},w3=e=>Yo(e,'[role="tabpanel"]'),BW=e=>{const t=Wo();return{extraEvents:[cn(r=>{const a=r.element;w3(a).each(l=>{Ie(l,"visibility","hidden"),r.getSystem().getByDom(l).toOptional().each(d=>{const m=$W(e,l,d);RW(m).fold(t.clear,t.set)}),K2(a,l,t),jt(l,"visibility"),IW(e,r),requestAnimationFrame(()=>{K2(a,l,t)})})}),le(jm(),r=>{const a=r.element;w3(a).each(l=>{K2(a,l,t)})}),le(tO,(r,a)=>{const l=r.element;w3(l).each(d=>{const m=Ha(te(d));Ie(d,"visibility","hidden");const f=zo(d,"height").map(O=>parseInt(O,10));jt(d,"height"),jt(d,"flex-basis");const w=d.dom.getBoundingClientRect().height;f.forall(O=>w>O)?(t.set(w),K2(l,d,t)):f.each(O=>{gA(d,O)}),jt(d,"visibility"),m.each(da)})})],selectFirst:!1}},hA="send-data-to-section",pA="send-data-to-view",LW=(e,t,o)=>{const n=We({}),r=f=>{const w=Ee.getValue(f),x=dA(w).getOr({}),O=n.get(),M=Oo(O,x);n.set(M)},a=f=>{const w=n.get();Ee.setValue(f,w)},l=We(null),d=ue(e.tabs,f=>({value:f.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Ln(o.shared.providers.translate(f.title))],view:()=>[lp.sketch(w=>({dom:{tag:"div",classes:["tox-form"]},components:ue(f.items,x=>M_(w,x,t,o)),formBehaviours:xe([Ke.config({mode:"acyclic",useTabstopAt:wt(U1)}),yt("TabView.form.events",[cn(a),Il(r)]),yc.config({channels:De([{key:hA,value:{onReceive:r}},{key:pA,value:{onReceive:a}}])})])}))]})),m=BW(d);return bp.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(f,w,x)=>{const O=Ee.getValue(w);je(f,eO,{name:O,oldName:l.get()}),l.set(O)},tabs:d,components:[bp.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[mA.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:xe([Sn.config({})])}),bp.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:m.selectFirst,tabSectionBehaviours:xe([yt("tabpanel",m.extraEvents),Ke.config({mode:"acyclic"}),It.config({find:f=>bn(bp.getViewItems(f))}),Eg(v.none(),f=>(f.getSystem().broadcastOn([hA],{}),n.get()),(f,w)=>{n.set(w),f.getSystem().broadcastOn([pA],{})})])})},fA=(e,t,o,n,r)=>{const a=m=>{const f=m.body;switch(f.type){case"tabpanel":return[LW(f,m.initialData,n)];default:return[vW(f,m.initialData,n)]}},l=(m,f)=>v.some({isTabPanel:()=>f.body.type==="tabpanel"}),d={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...o.map(m=>({id:m})).getOr({}),...r?d:{}}},components:[],behaviours:xe([Jl.childAt(0),ya.config({channel:`${GO}-${t}`,updateState:l,renderComponents:a,initialData:e})])}},FW=(e,t,o,n,r)=>fA(e,t,v.some(o),n,r),PW=(e,t,o)=>{const n=fA(e,t,v.none(),o,!1);return $s.parts.body(n)},VW=e=>{const t={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[ZO(v.none(),{dom:{tag:"iframe",attributes:{src:e.url}},behaviours:xe([Sn.config({}),ut.config({})])})]}],behaviours:xe([Ke.config({mode:"acyclic",useTabstopAt:wt(U1)})])};return $s.parts.body(t)},NW=Xh.deviceType.isTouch(),bA=(e,t)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,t]}),vA=(e,t)=>$s.parts.close(xr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:e,buttonBehaviours:xe([Sn.config({})])})),yA=()=>$s.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),wA=(e,t)=>$s.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:ld(`<p>${FT(t.translate(e))}</p>`)}]}]}),SA=e=>$s.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e}),xA=(e,t)=>[Bi.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),Bi.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})],S3=e=>{const t="tox-dialog",o=t+"-wrap",n=o+"__backdrop",r=t+"__disable-scroll";return $s.sketch({lazySink:e.lazySink,onEscape:a=>(e.onEscape(a),v.some(!0)),useTabstopAt:a=>!U1(a),firstTabstop:e.firstTabstop,dom:{tag:"div",classes:[t].concat(e.extraClasses),styles:{position:"relative",...e.extraStyles}},components:[e.header,e.body,...e.footer.toArray()],parts:{blocker:{dom:ld(`<div class="${o}"></div>`),components:[{dom:{tag:"div",classes:NW?[n,n+"--opaque"]:[n]}}]}},dragBlockClass:o,modalBehaviours:xe([ut.config({}),yt("dialog-events",e.dialogEvents.concat([Wd(Wc(),(a,l)=>{Fi.isBlocked(a)?X():Ke.focusIn(a)}),le(Rl(),(a,l)=>{a.getSystem().broadcastOn([w2],{newFocus:l.event.newFocus})})])),yt("scroll-lock",[cn(()=>{wn(rs(),r)}),Il(()=>{Hn(rs(),r)})]),...e.extraBehaviours]),eventOrder:{[bc()]:["dialog-events"],[Hc()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Dl()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...e.eventOrder}})},CA=e=>xr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:xe([Sn.config({}),Fr.config(e.tooltips.getConfig({tooltipText:e.translate("Close")}))]),components:[Gl("close",{tag:"span",classes:["tox-icon"]},e.icons)],action:t=>{Pt(t,km)}}),TA=(e,t,o,n)=>{const r=a=>[Ln(n.translate(a.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...o.map(a=>({id:a})).getOr({})}},components:[],behaviours:xe([ya.config({channel:`${WO}-${t}`,initialData:e,renderComponents:r})])}},kA=()=>({dom:ld('<div class="tox-dialog__draghandle"></div>')}),zW=(e,t,o,n)=>Bi.sketch({dom:ld('<div class="tox-dialog__header"></div>'),components:[TA(e,t,v.some(o),n),kA(),CA(n)],containerBehaviours:xe([Hg.config({mode:"mouse",blockerClass:"blocker",getTarget:r=>Fl(r,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),ZW=(e,t,o)=>{const n=$s.parts.title(TA(e,t,v.none(),o)),r=$s.parts.draghandle(kA()),a=$s.parts.close(CA(o)),l=[n].concat(e.draggable?[r]:[]).concat([a]);return Bi.sketch({dom:ld('<div class="tox-dialog__header"></div>'),components:l})},OA=(e,t,o)=>ZW({title:o.shared.providers.translate(e),draggable:o.dialog.isDraggableModal()},t,o.shared.providers),_A=(e,t,o,n)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":o.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${n.getOr(0)}px`,position:"absolute"}},behaviours:t,components:[{dom:ld('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),MA=(e,t,o)=>({onClose:()=>o.closeWindow(),onBlock:n=>{const r=Yo(e().element,".tox-dialog__header").map(a=>Zo(a));$s.setBusy(e(),(a,l)=>_A(n.message,l,t,r))},onUnblock:()=>{$s.setIdle(e())}}),EA="tox-dialog--fullscreen",x3="tox-dialog--width-lg",C3="tox-dialog--width-md",Y2=e=>{switch(e){case"large":return v.some(x3);case"medium":return v.some(C3);default:return v.none()}},AA=(e,t)=>{const o=U.fromDom(t.element.dom);vc(o,EA)||($a(o,[x3,C3]),Y2(e).each(n=>wn(o,n)))},DA=(e,t)=>{const o=U.fromDom(e.element.dom),n=Yd(o),r=Qt(n,a=>a===x3||a===C3).or(Y2(t));yb(o,[EA,...r.toArray()])},$A=(e,t,o)=>Zs(S3({...e,firstTabstop:1,lazySink:o.shared.getSink,extraBehaviours:[v2({}),...e.extraBehaviours],onEscape:n=>{Pt(n,km)},dialogEvents:t,eventOrder:{[su()]:[ya.name(),yc.name()],[Hc()]:["scroll-lock",ya.name(),"messages","dialog-events","alloy.base.behaviour"],[Dl()]:["alloy.base.behaviour","dialog-events","messages",ya.name(),"scroll-lock"]}})),T3=(e,t={})=>{const o=n=>{const r=ue(n.items,a=>{const l=He(t,a.name).getOr(We(!1));return{...a,storage:l}});return{...n,items:r}};return ue(e,n=>n.type==="menu"?o(n):n)},RA=e=>Ut(e,(t,o)=>o.type==="menu"?Ut(o.items,(r,a)=>(r[a.name]=a.storage,r),t):t,{}),HA=(e,t)=>[Lp(Wc(),oB),e(V1,(o,n,r,a)=>{Ha(te(a.element)).fold(X,vh),t.onClose(),n.onClose()}),e(km,(o,n,r,a)=>{n.onCancel(o),Pt(a,V1)}),le(V4,(o,n)=>t.onUnblock()),le(P4,(o,n)=>t.onBlock(n.event))],UW=(e,t)=>{const o=(r,a)=>le(r,(l,d)=>{n(l,(m,f)=>{a(e(),m,d.event,l)})}),n=(r,a)=>{ya.getState(r).get().each(l=>{a(l,r)})};return[...HA(o,t),o(pu,(r,a,l)=>{a.onAction(r,{name:l.name})})]},IA=(e,t,o)=>{const n=(a,l)=>le(a,(d,m)=>{r(d,(f,w)=>{l(e(),f,m.event,d)})}),r=(a,l)=>{ya.getState(a).get().each(d=>{l(d.internalDialog,a)})};return[...HA(n,t),n(N1,(a,l)=>l.onSubmit(a)),n(ba,(a,l,d)=>{l.onChange(a,{name:d.name})}),n(pu,(a,l,d,m)=>{const f=()=>m.getSystem().isConnected()?Ke.focusIn(m):void 0,w=M=>R(M,"disabled")||C(M,"aria-disabled").exists(A=>A==="true"),x=te(m.element),O=Ha(x);l.onAction(a,{name:d.name,value:d.value}),Ha(x).fold(f,M=>{w(M)||O.exists(A=>Nn(M,A)&&w(A))?f():o().toOptional().filter(A=>!Nn(A.element,M)).each(f)})}),n(eO,(a,l,d)=>{l.onTabChange(a,{newTabName:d.name,oldTabName:d.oldName})}),Il(a=>{const l=e();Ee.setValue(a,l.getData())})]},WW=(e,t)=>T2(e,e.type,t),GW=(e,t,o)=>Qt(t,n=>n.name===o).bind(n=>n.memento.getOpt(e)),jW=(e,t)=>{const o=t.map(d=>d.footerButtons).getOr([]),n=en(o,d=>d.align==="start"),r=(d,m)=>Bi.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${d}`]},components:ue(m,f=>f.memento.asSpec())}),a=r("start",n.pass),l=r("end",n.fail);return[a,l]},BA=(e,t,o)=>{const n=(r,a)=>{const l=ue(a.buttons,m=>{const f=po(WW(m,o));return{name:m.name,align:m.align,memento:f}}),d=m=>GW(r,l,m);return v.some({lookupByName:d,footerButtons:l})};return{dom:ld('<div class="tox-dialog__footer"></div>'),components:[],behaviours:xe([ya.config({channel:`${jO}-${t}`,initialData:e,updateState:n,renderComponents:jW})])}},qW=(e,t,o)=>BA(e,t,o),LA=(e,t,o)=>$s.parts.footer(BA(e,t,o)),FA=(e,t)=>{if(e.getRoot().getSystem().isConnected()){const n=It.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return lp.getField(n,t).orThunk(()=>e.getFooter().bind(l=>ya.getState(l).get()).bind(l=>l.lookupByName(t)))}else return v.none()},KW=(e,t)=>{const o=e.getRoot();return ya.getState(o).get().map(n=>ca(rn("data",n.dataValidator,t))).getOr(t)},PA=(e,t,o)=>{const n=A=>{const L=e.getRoot();L.getSystem().isConnected()&&A(L)},M={getData:()=>{const A=e.getRoot(),L=A.getSystem().isConnected()?e.getFormWrapper():A,ee=Ee.getValue(L),W=yo(o,Y=>Y.get());return{...ee,...W}},setData:A=>{n(L=>{const ee=M.getData(),W=Oo(ee,A),Y=KW(e,W),j=e.getFormWrapper();Ee.setValue(j,Y),ho(o,(de,ie)=>{Ft(W,ie)&&de.set(W[ie])})})},setEnabled:(A,L)=>{FA(e,A).each(L?rt.enable:rt.disable)},focus:A=>{FA(e,A).each(ut.focus)},block:A=>{if(!Xe(A))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");n(L=>{je(L,P4,{message:A})})},unblock:()=>{n(A=>{Pt(A,V4)})},showTab:A=>{n(L=>{const ee=e.getBody();ya.getState(ee).get().exists(Y=>Y.isTabPanel())&&It.getCurrent(ee).each(Y=>{bp.showTab(Y,A)})})},redial:A=>{n(L=>{const ee=e.getId(),W=t(A),Y=T3(W.internalDialog.buttons,o);L.getSystem().broadcastOn([`${y2}-${ee}`],W),L.getSystem().broadcastOn([`${WO}-${ee}`],W.internalDialog),L.getSystem().broadcastOn([`${GO}-${ee}`],W.internalDialog),L.getSystem().broadcastOn([`${jO}-${ee}`],{...W.internalDialog,buttons:Y}),M.setData(W.initialData)})},close:()=>{n(A=>{Pt(A,V1)})},toggleFullscreen:e.toggleFullscreen};return M},YW=(e,t,o)=>{const n=Le("dialog"),r=e.internalDialog,a=OA(r.title,n,o),l=We(r.size),d=Y2(l.get()).toArray(),m=(Y,j)=>(l.set(j.internalDialog.size),AA(j.internalDialog.size,Y),v.some(j)),f=PW({body:r.body,initialData:r.initialData},n,o),w=T3(r.buttons),x=RA(w),O=Cs(w.length!==0,LA({buttons:w},n,o)),M=IA(()=>W,MA(()=>L,o.shared.providers,t),o.shared.getSink),A={id:n,header:a,body:f,footer:O,extraClasses:d,extraBehaviours:[ya.config({channel:`${y2}-${n}`,updateState:m,initialData:e})],extraStyles:{}},L=$A(A,M,o),ee=(()=>{const Y=()=>{const de=$s.getBody(L);return It.getCurrent(de).getOr(de)},j=()=>{DA(L,l.get())};return{getId:I(n),getRoot:I(L),getBody:()=>$s.getBody(L),getFooter:()=>$s.getFooter(L),getFormWrapper:Y,toggleFullscreen:j}})(),W=PA(ee,t.redial,x);return{dialog:L,instanceApi:W}},VA=(e,t,o,n=!1,r)=>{const a=Le("dialog"),l=Le("dialog-label"),d=Le("dialog-content"),m=e.internalDialog,f=We(m.size),w=Y2(f.get()).toArray(),x=(he,ke)=>(f.set(ke.internalDialog.size),AA(ke.internalDialog.size,he),r(),v.some(ke)),O=po(zW({title:m.title,draggable:!0},a,l,o.shared.providers)),M=po(FW({body:m.body,initialData:m.initialData},a,d,o,n)),A=T3(m.buttons),L=RA(A),ee=Cs(A.length!==0,po(qW({buttons:A},a,o))),W=IA(()=>ie,{onBlock:he=>{Fi.block(j,(ke,ae)=>{const ct=O.getOpt(j).map($e=>Zo($e.element));return _A(he.message,ae,o.shared.providers,ct)})},onUnblock:()=>{Fi.unblock(j)},onClose:()=>t.closeWindow()},o.shared.getSink),j=Zs({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",...w],attributes:{role:"dialog","aria-labelledby":l}},eventOrder:{[su()]:[ya.name(),yc.name()],[bc()]:["execute-on-form"],[Hc()]:["reflecting","execute-on-form"]},behaviours:xe([Ke.config({mode:"cyclic",onEscape:he=>(Pt(he,V1),v.some(!0)),useTabstopAt:he=>!U1(he)&&(ms(he)!=="button"||qo(he,"disabled")!=="disabled"),firstTabstop:1}),ya.config({channel:`${y2}-${a}`,updateState:x,initialData:e}),ut.config({}),yt("execute-on-form",W.concat([Wd(Wc(),(he,ke)=>{Ke.focusIn(he)}),le(Rl(),(he,ke)=>{he.getSystem().broadcastOn([w2],{newFocus:ke.event.newFocus})})])),Fi.config({getRoot:()=>v.some(j)}),bt.config({}),v2({})]),components:[O.asSpec(),M.asSpec(),...ee.map(he=>he.asSpec()).toArray()]}),de=()=>{DA(j,f.get())},ie=PA({getId:I(a),getRoot:I(j),getFooter:()=>ee.map(he=>he.get(j)),getBody:()=>M.get(j),getFormWrapper:()=>{const he=M.get(j);return It.getCurrent(he).getOr(he)},toggleFullscreen:de},t.redial,L);return{dialog:j,instanceApi:ie}};var k3=tinymce.util.Tools.resolve("tinymce.util.URI");const XW=e=>{const t=l=>{e.getSystem().isConnected()&&l(e)};return{block:l=>{if(!Xe(l))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t(d=>{je(d,P4,{message:l})})},unblock:()=>{t(l=>{Pt(l,V4)})},close:()=>{t(l=>{Pt(l,V1)})},sendMessage:l=>{t(d=>{d.getSystem().broadcastOn([qO],l)})}}},JW=["insertContent","setContent","execCommand","close","block","unblock"],NA=e=>At(e)&&JW.indexOf(e.mceAction)!==-1,QW=e=>!NA(e)&&At(e)&&Ft(e,"mceAction"),eG=(e,t,o)=>{switch(o.mceAction){case"insertContent":e.insertContent(o.content);break;case"setContent":e.setContent(o.content);break;case"execCommand":const n=Jo(o.ui)?o.ui:!1;e.execCommand(o.cmd,n,o.value);break;case"close":t.close();break;case"block":t.block(o.message);break;case"unblock":t.unblock();break}},tG=(e,t,o,n)=>{const r=Le("dialog"),a=OA(e.title,r,n),l=VW(e),d=e.buttons.bind(j=>j.length===0?v.none():v.some(LA({buttons:j},r,n))),m=UW(()=>Y,MA(()=>W,n.shared.providers,t)),f={...e.height.fold(()=>({}),j=>({height:j+"px","max-height":j+"px"})),...e.width.fold(()=>({}),j=>({width:j+"px","max-width":j+"px"}))},w=e.width.isNone()&&e.height.isNone()?["tox-dialog--width-lg"]:[],x=new k3(e.url,{base_uri:new k3(window.location.href)}),O=`${x.protocol}://${x.host}${x.port?":"+x.port:""}`,M=tm(),A=(j,de)=>v.some(de),L=[ya.config({channel:`${y2}-${r}`,updateState:A,initialData:e}),yt("messages",[cn(()=>{const j=cr(U.fromDom(window),"message",de=>{if(x.isSameOrigin(new k3(de.raw.origin))){const ie=de.raw.data;NA(ie)?eG(o,Y,ie):QW(ie)&&e.onMessage(Y,ie)}});M.set(j)}),Il(M.clear)]),yc.config({channels:{[qO]:{onReceive:(j,de)=>{Yo(j.element,"iframe").each(ie=>{const he=ie.dom.contentWindow;oo(he)&&he.postMessage(de,O)})}}}})],W=$A({id:r,header:a,body:l,footer:d,extraClasses:w,extraBehaviours:L,extraStyles:f},m,n),Y=XW(W);return{dialog:W,instanceApi:Y}},oG=e=>{const t=e.shared;return{open:(n,r)=>{const a=()=>{$s.hide(f),r()},l=po(T2({name:"close-alert",text:"OK",primary:!0,buttonType:v.some("primary"),align:"end",enabled:!0,icon:v.none()},"cancel",e)),d=yA(),m=vA(a,t.providers),f=Zs(S3({lazySink:()=>t.getSink(),header:bA(d,m),body:wA(n,t.providers),footer:v.some(SA(xA([],[l.asSpec()]))),onEscape:a,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[le(km,a)],eventOrder:{}}));$s.show(f);const w=l.get(f);ut.focus(w)}}},nG=e=>{const t=e.shared;return{open:(n,r)=>{const a=O=>{$s.hide(w),r(O)},l=po(T2({name:"yes",text:"Yes",primary:!0,buttonType:v.some("primary"),align:"end",enabled:!0,icon:v.none()},"submit",e)),d=T2({name:"no",text:"No",primary:!1,buttonType:v.some("secondary"),align:"end",enabled:!0,icon:v.none()},"cancel",e),m=yA(),f=vA(()=>a(!1),t.providers),w=Zs(S3({lazySink:()=>t.getSink(),header:bA(m,f),body:wA(n,t.providers),footer:v.some(SA(xA([],[d,l.asSpec()]))),onEscape:()=>a(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[le(km,()=>a(!1)),le(N1,()=>a(!0))],eventOrder:{}}));$s.show(w);const x=l.get(w);ut.focus(x)}}},zA=(e,t)=>ca(rn("data",t,e)),ZA=e=>L1(e,".tox-alert-dialog")||L1(e,".tox-confirm-dialog"),sG=(e,t,o)=>t&&o?[]:[Gn.config({contextual:{lazyContext:()=>v.some(Jn(U.fromDom(e.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:n=>Tg(e,n.element).map(a=>({bounds:cp(a),optScrollEnv:v.some({currentScrollTop:a.element.dom.scrollTop,scrollElmTop:Bs(a.element).top})})).getOrThunk(()=>({bounds:ps(),optScrollEnv:v.none()}))})],rG=e=>{const t=e.editor,o=O1(t),n=oG(e.backstages.dialog),r=nG(e.backstages.dialog),a=(A,L,ee)=>{if(!Mn(L)){if(L.inline==="toolbar")return f(A,e.backstages.popup.shared.anchors.inlineDialog(),ee,L);if(L.inline==="bottom")return w(A,e.backstages.popup.shared.anchors.inlineBottomDialog(),ee,L);if(L.inline==="cursor")return f(A,e.backstages.popup.shared.anchors.cursor(),ee,L)}return m(A,ee)},l=(A,L)=>d(A,L),d=(A,L)=>{const ee=W=>{const Y=tG(W,{closeWindow:()=>{$s.hide(Y.dialog),L(Y.instanceApi)}},t,e.backstages.dialog);return $s.show(Y.dialog),Y.instanceApi};return Ig.openUrl(ee,A)},m=(A,L)=>{const ee=(W,Y,j)=>{const de=Y,he=YW({dataValidator:j,initialData:de,internalDialog:W},{redial:Ig.redial,closeWindow:()=>{$s.hide(he.dialog),L(he.instanceApi)}},e.backstages.dialog);return $s.show(he.dialog),he.instanceApi.setData(de),he.instanceApi};return Ig.open(ee,A)},f=(A,L,ee,W)=>{const Y=(j,de,ie)=>{const he=zA(de,ie),ke=Wo(),ae=e.backstages.popup.shared.header.isPositionedAtTop(),ct={dataValidator:ie,initialData:he,internalDialog:j},$e=()=>ke.on(Lt=>{_n.reposition(Lt),(!o||!ae)&&Gn.refresh(Lt)}),Ye=VA(ct,{redial:Ig.redial,closeWindow:()=>{ke.on(_n.hide),t.off("ResizeEditor",$e),ke.clear(),ee(Ye.instanceApi)}},e.backstages.popup,W.ariaAttrs,$e),Ne=Zs(_n.sketch({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:W.persistent?{event:"doNotDismissYet"}:{},...ae?{}:{fireRepositionEventInstead:{}},inlineBehaviours:xe([yt("window-manager-inline-events",[le($l(),(Lt,Mt)=>{Pt(Ye.dialog,km)})]),...sG(t,o,ae)]),isExtraPart:(Lt,Mt)=>ZA(Mt)}));ke.set(Ne);const qt=()=>{const Lt=t.inline?rs():U.fromDom(t.getContainer()),Mt=Jn(Lt);return v.some(Mt)};return _n.showWithinBounds(Ne,ua(Ye.dialog),{anchor:L},qt),(!o||!ae)&&(Gn.refresh(Ne),t.on("ResizeEditor",$e)),Ye.instanceApi.setData(he),Ke.focusIn(Ye.dialog),Ye.instanceApi};return Ig.open(Y,A)},w=(A,L,ee,W)=>{const Y=(j,de,ie)=>{const he=zA(de,ie),ke=Wo(),ae=e.backstages.popup.shared.header.isPositionedAtTop(),ct={dataValidator:ie,initialData:he,internalDialog:j},$e=()=>ke.on(Lt=>{_n.reposition(Lt),Gn.refresh(Lt)}),Ye=VA(ct,{redial:Ig.redial,closeWindow:()=>{ke.on(_n.hide),t.off("ResizeEditor ScrollWindow ElementScroll",$e),ke.clear(),ee(Ye.instanceApi)}},e.backstages.popup,W.ariaAttrs,$e),Ne=Zs(_n.sketch({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:W.persistent?{event:"doNotDismissYet"}:{},...ae?{}:{fireRepositionEventInstead:{}},inlineBehaviours:xe([yt("window-manager-inline-events",[le($l(),(Lt,Mt)=>{Pt(Ye.dialog,km)})]),Gn.config({contextual:{lazyContext:()=>v.some(Jn(U.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Lt=>Tg(t,Lt.element).map(Se=>({bounds:cp(Se),optScrollEnv:v.some({currentScrollTop:Se.element.dom.scrollTop,scrollElmTop:Bs(Se.element).top})})).getOrThunk(()=>({bounds:ps(),optScrollEnv:v.none()}))})]),isExtraPart:(Lt,Mt)=>ZA(Mt)}));ke.set(Ne);const qt=()=>e.backstages.popup.shared.getSink().toOptional().bind(Lt=>{const Mt=Tg(t,Lt.element),Se=15,Be=Mt.map(Ze=>cp(Ze)).getOr(ps()),ht=Jn(U.fromDom(t.getContentAreaContainer())),Qe=Ru(ht,Be);return v.some(yn(Qe.x,Qe.y,Qe.width,Qe.height-Se))});return _n.showWithinBounds(Ne,ua(Ye.dialog),{anchor:L},qt),Gn.refresh(Ne),t.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",$e),Ye.instanceApi.setData(he),Ke.focusIn(Ye.dialog),Ye.instanceApi};return Ig.open(Y,A)};return{open:a,openUrl:l,alert:(A,L)=>{n.open(A,L)},close:A=>{A.close()},confirm:(A,L)=>{r.open(A,L)}}},cG=e=>{ZT(e),I$(e),Mz(e)};var aG=()=>{Yi.add("silver",e=>{cG(e);let t=()=>ps();const{dialogs:o,popups:n,renderUI:r}=LZ(e,{getPopupSinkBounds:()=>t()}),a=()=>{const m=r();return Tg(e,n.getMothership().element).each(w=>{t=()=>cp(w)}),m};BR.register(e,n.backstage.shared);const l=rG({editor:e,backstages:{popup:n.backstage,dialog:o.backstage}}),d=()=>_7(e,{backstage:n.backstage},n.getMothership());return{renderUI:a,getWindowManagerImpl:I(l),getNotificationManagerImpl:d}})};aG()})();(function(){var ac=tinymce.util.Tools.resolve("tinymce.ModelManager");const qs=(s,c,i)=>{var u;return i(s,c.prototype)?!0:((u=s.constructor)===null||u===void 0?void 0:u.name)===c.name},is=s=>{const c=typeof s;return s===null?"null":c==="object"&&Array.isArray(s)?"array":c==="object"&&qs(s,String,(i,u)=>u.isPrototypeOf(i))?"string":c},xn=s=>c=>is(c)===s,un=s=>c=>typeof c===s,ts=s=>c=>s===c,dn=xn("string"),Xe=xn("object"),At=xn("array"),Eo=ts(null),Vo=un("boolean"),Go=ts(void 0),Jo=s=>s==null,Mn=s=>!Jo(s),us=un("function"),oo=un("number"),Ae=()=>{},So=(s,c)=>(...i)=>s(c.apply(null,i)),st=(s,c)=>i=>s(c(i)),X=s=>()=>s,Re=s=>s,ur=(s,c)=>s===c;function Qo(s,...c){return(...i)=>{const u=c.concat(i);return s.apply(null,u)}}const I=s=>c=>!s(c),xt=s=>()=>{throw new Error(s)},Tr=s=>s(),go=X(!1),wt=X(!0);class q{constructor(c,i){this.tag=c,this.value=i}static some(c){return new q(!0,c)}static none(){return q.singletonNone}fold(c,i){return this.tag?i(this.value):c()}isSome(){return this.tag}isNone(){return!this.tag}map(c){return this.tag?q.some(c(this.value)):q.none()}bind(c){return this.tag?c(this.value):q.none()}exists(c){return this.tag&&c(this.value)}forall(c){return!this.tag||c(this.value)}filter(c){return!this.tag||c(this.value)?this:q.none()}getOr(c){return this.tag?this.value:c}or(c){return this.tag?this:c}getOrThunk(c){return this.tag?this.value:c()}orThunk(c){return this.tag?this:c()}getOrDie(c){if(this.tag)return this.value;throw new Error(c??"Called getOrDie on None")}static from(c){return Mn(c)?q.some(c):q.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(c){this.tag&&c(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}q.singletonNone=new q(!1);const En=Array.prototype.slice,Ht=Array.prototype.indexOf,io=Array.prototype.push,v=(s,c)=>Ht.call(s,c),Wt=(s,c)=>v(s,c)>-1,xo=(s,c)=>{for(let i=0,u=s.length;i<u;i++){const p=s[i];if(c(p,i))return!0}return!1},An=(s,c)=>{const i=[];for(let u=0;u<s;u++)i.push(c(u));return i},Ue=(s,c)=>{const i=s.length,u=new Array(i);for(let p=0;p<i;p++){const y=s[p];u[p]=c(y,p)}return u},pt=(s,c)=>{for(let i=0,u=s.length;i<u;i++){const p=s[i];c(p,i)}},Xt=(s,c)=>{for(let i=s.length-1;i>=0;i--){const u=s[i];c(u,i)}},fn=(s,c)=>{const i=[],u=[];for(let p=0,y=s.length;p<y;p++){const T=s[p];(c(T,p)?i:u).push(T)}return{pass:i,fail:u}},we=(s,c)=>{const i=[];for(let u=0,p=s.length;u<p;u++){const y=s[u];c(y,u)&&i.push(y)}return i},et=(s,c,i)=>(Xt(s,(u,p)=>{i=c(i,u,p)}),i),ue=(s,c,i)=>(pt(s,(u,p)=>{i=c(i,u,p)}),i),ye=(s,c,i)=>{for(let u=0,p=s.length;u<p;u++){const y=s[u];if(c(y,u))return q.some(y);if(i(y,u))break}return q.none()},zt=(s,c)=>ye(s,c,go),en=(s,c)=>{for(let i=0,u=s.length;i<u;i++){const p=s[i];if(c(p,i))return q.some(i)}return q.none()},Ct=s=>{const c=[];for(let i=0,u=s.length;i<u;++i){if(!At(s[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+s);io.apply(c,s[i])}return c},Jt=(s,c)=>Ct(Ue(s,c)),Ut=(s,c)=>{for(let i=0,u=s.length;i<u;++i){const p=s[i];if(c(p,i)!==!0)return!1}return!0},kr=s=>{const c=En.call(s,0);return c.reverse(),c},Qt=(s,c)=>{const i={};for(let u=0,p=s.length;u<p;u++){const y=s[u];i[String(y)]=c(y,u)}return i},ds=(s,c)=>{const i=En.call(s,0);return i.sort(c),i},Rt=(s,c)=>c>=0&&c<s.length?q.some(s[c]):q.none(),uo=s=>Rt(s,0),Et=s=>Rt(s,s.length-1),tn=(s,c)=>{for(let i=0;i<s.length;i++){const u=c(s[i],i);if(u.isSome())return u}return q.none()},Pn=Object.keys,dr=Object.hasOwnProperty,mo=(s,c)=>{const i=Pn(s);for(let u=0,p=i.length;u<p;u++){const y=i[u],T=s[y];c(T,y)}},ws=(s,c)=>Ss(s,(i,u)=>({k:u,v:c(i,u)})),Ss=(s,c)=>{const i={};return mo(s,(u,p)=>{const y=c(u,p);i[y.k]=y.v}),i},bn=s=>(c,i)=>{s[i]=c},Fc=(s,c,i,u)=>{mo(s,(p,y)=>{(c(p,y)?i:u)(p,y)})},Vr=(s,c)=>{const i={};return Fc(s,c,bn(i),Ae),i},Vn=(s,c)=>{const i=[];return mo(s,(u,p)=>{i.push(c(u,p))}),i},Ro=s=>Vn(s,Re),lc=(s,c)=>ho(s,c)?q.from(s[c]):q.none(),ho=(s,c)=>dr.call(s,c),yo=(s,c)=>ho(s,c)&&s[c]!==void 0&&s[c]!==null,Tc=s=>{for(const c in s)if(dr.call(s,c))return!1;return!0},Gt=typeof window<"u"?window:Function("return this;")(),jo=(s,c)=>{let i=c??Gt;for(let u=0;u<s.length&&i!==void 0&&i!==null;++u)i=i[s[u]];return i},Or=(s,c)=>{const i=s.split(".");return jo(i,c)},ic=(s,c)=>Or(s,c),Nr=(s,c)=>{const i=ic(s,c);if(i==null)throw new Error(s+" not available on this browser");return i},Dn=Object.getPrototypeOf,uc=s=>Nr("HTMLElement",s),He=s=>{const c=Or("ownerDocument.defaultView",s);return Xe(s)&&(uc(c).prototype.isPrototypeOf(s)||/^HTML\w*Element$/.test(Dn(s).constructor.name))},Ft=8,Cn=9,xs=11,mr=1,os=3,wo=s=>s.dom.nodeName.toLowerCase(),Ks=s=>s.dom.nodeType,gr=s=>c=>Ks(c)===s,Kc=s=>Ks(s)===Ft||wo(s)==="#comment",Cs=s=>qn(s)&&He(s.dom),qn=gr(mr),Ys=gr(os),zr=gr(Cn),kc=gr(xs),Tn=s=>c=>qn(c)&&wo(c)===s,mn=(s,c,i)=>{if(dn(i)||Vo(i)||oo(i))s.setAttribute(c,i+"");else throw console.error("Invalid call to Attribute.set. Key ",c,":: Value ",i,":: Element ",s),new Error("Attribute value was not simple")},on=(s,c,i)=>{mn(s.dom,c,i)},Xs=(s,c)=>{const i=s.dom;mo(c,(u,p)=>{mn(i,p,u)})},Wa=(s,c)=>{mo(c,(i,u)=>{i.fold(()=>{F(s,u)},p=>{mn(s.dom,u,p)})})},$n=(s,c)=>{const i=s.dom.getAttribute(c);return i===null?void 0:i},V=(s,c)=>q.from($n(s,c)),F=(s,c)=>{s.dom.removeAttribute(c)},ne=s=>ue(s.dom.attributes,(c,i)=>(c[i.name]=i.value,c),{}),ce=(s,c)=>{const u=(c||document).createElement("div");if(u.innerHTML=s,!u.hasChildNodes()||u.childNodes.length>1){const p="HTML does not have a single root node";throw console.error(p,s),new Error(p)}return vt(u.childNodes[0])},Ve=(s,c)=>{const u=(c||document).createElement(s);return vt(u)},Ge=(s,c)=>{const u=(c||document).createTextNode(s);return vt(u)},vt=s=>{if(s==null)throw new Error("Node cannot be null or undefined");return{dom:s}},U={fromHtml:ce,fromTag:Ve,fromText:Ge,fromDom:vt,fromPoint:(s,c,i)=>q.from(s.dom.elementFromPoint(c,i)).map(vt)},ft=(s,c)=>{const i=s.dom;if(i.nodeType!==mr)return!1;{const u=i;if(u.matches!==void 0)return u.matches(c);if(u.msMatchesSelector!==void 0)return u.msMatchesSelector(c);if(u.webkitMatchesSelector!==void 0)return u.webkitMatchesSelector(c);if(u.mozMatchesSelector!==void 0)return u.mozMatchesSelector(c);throw new Error("Browser lacks native selectors")}},gn=s=>s.nodeType!==mr&&s.nodeType!==Cn&&s.nodeType!==xs||s.childElementCount===0,hn=(s,c)=>{const i=c===void 0?document:c.dom;return gn(i)?[]:Ue(i.querySelectorAll(s),U.fromDom)},Kn=(s,c)=>{const i=c===void 0?document:c.dom;return gn(i)?q.none():q.from(i.querySelector(s)).map(U.fromDom)},Kt=(s,c)=>s.dom===c.dom,Oc=(s,c)=>{const i=s.dom,u=c.dom;return i===u?!1:i.contains(u)},Js=ft,ns=s=>U.fromDom(s.dom.ownerDocument),Rn=s=>zr(s)?s:ns(s),nn=s=>U.fromDom(Rn(s).dom.documentElement),Yn=s=>U.fromDom(Rn(s).dom.defaultView),Xn=s=>q.from(s.dom.parentNode).map(U.fromDom),ms=s=>q.from(s.dom.parentElement).map(U.fromDom),Yc=(s,c)=>{const i=us(c)?c:go;let u=s.dom;const p=[];for(;u.parentNode!==null&&u.parentNode!==void 0;){const y=u.parentNode,T=U.fromDom(y);if(p.push(T),i(T)===!0)break;u=y}return p},Pc=s=>q.from(s.dom.previousSibling).map(U.fromDom),dc=s=>q.from(s.dom.nextSibling).map(U.fromDom),Co=s=>Ue(s.dom.childNodes,U.fromDom),Qs=(s,c)=>{const i=s.dom.childNodes;return q.from(i[c]).map(U.fromDom)},gs=s=>Qs(s,0),Sa=(s,c)=>{Xn(s).each(u=>{u.dom.insertBefore(c.dom,s.dom)})},Rs=(s,c)=>{dc(s).fold(()=>{Xn(s).each(p=>{bo(p,c)})},u=>{Sa(u,c)})},kn=(s,c)=>{gs(s).fold(()=>{bo(s,c)},u=>{s.dom.insertBefore(c.dom,u.dom)})},bo=(s,c)=>{s.dom.appendChild(c.dom)},Ts=(s,c,i)=>{Qs(s,i).fold(()=>{bo(s,c)},u=>{Sa(u,c)})},Xc=(s,c)=>{Sa(s,c),bo(c,s)},eo=(s,c)=>{pt(c,(i,u)=>{const p=u===0?s:c[u-1];Rs(p,i)})},Nn=(s,c)=>{pt(c,i=>{bo(s,i)})},ks=s=>{s.dom.textContent="",pt(Co(s),c=>{On(c)})},On=s=>{const c=s.dom;c.parentNode!==null&&c.parentNode.removeChild(c)},_r=s=>{const c=Co(s);c.length>0&&eo(s,c),On(s)},Zr=(s,c)=>U.fromDom(s.dom.cloneNode(c)),ss=s=>Zr(s,!1),Ur=s=>Zr(s,!0),Wr=(s,c)=>{const i=U.fromTag(c),u=ne(s);return Xs(i,u),i},vl=(s,c)=>{const i=Wr(s,c),u=Co(Ur(s));return Nn(i,u),i},Mr=(s,c)=>{const i=Wr(s,c);Rs(s,i);const u=Co(s);return Nn(i,u),On(s),i},xa=["tfoot","thead","tbody","colgroup"],Hs=s=>Wt(xa,s),_c=(s,c)=>({rows:s,columns:c}),Jc=(s,c)=>({row:s,column:c}),Ca=(s,c,i)=>({element:s,rowspan:c,colspan:i}),yl=(s,c,i,u)=>({element:s,rowspan:c,colspan:i,isNew:u}),D=(s,c,i,u,p,y)=>({element:s,rowspan:c,colspan:i,row:u,column:p,isLocked:y}),N=(s,c,i)=>({element:s,cells:c,section:i}),K=(s,c,i,u)=>({element:s,cells:c,section:i,isNew:u}),te=(s,c,i)=>({element:s,isNew:c,isLocked:i}),be=(s,c,i,u)=>({element:s,cells:c,section:i,isNew:u}),Je=(s,c,i,u)=>({startRow:s,startCol:c,finishRow:i,finishCol:u}),ro=(s,c,i)=>({element:s,colspan:c,column:i}),vn=(s,c)=>({element:s,columns:c}),co=s=>kc(s)&&Mn(s.dom.host),Ho=us(Element.prototype.attachShadow)&&us(Node.prototype.getRootNode),ao=X(Ho),rs=Ho?s=>U.fromDom(s.dom.getRootNode()):Rn,mc=s=>{const c=rs(s);return co(c)?q.some(c):q.none()},Ta=s=>U.fromDom(s.dom.host),at=s=>{if(ao()&&Mn(s.target)){const c=U.fromDom(s.target);if(qn(c)&&Vi(c)&&s.composed&&s.composedPath){const i=s.composedPath();if(i)return uo(i)}}return q.from(s.target)},Vi=s=>Mn(s.dom.shadowRoot),qo=s=>{const c=Ys(s)?s.dom.parentNode:s.dom;if(c==null||c.ownerDocument===null)return!1;const i=c.ownerDocument;return mc(U.fromDom(c)).fold(()=>i.body.contains(c),st(qo,Ta))},C=()=>R(U.fromDom(document)),R=s=>{const c=s.dom.body;if(c==null)throw new Error("Body is not available yet");return U.fromDom(c)},B=(s,c,i)=>we(Yc(s,i),c),oe=(s,c)=>we(Co(s),c),_e=(s,c)=>{let i=[];return pt(Co(s),u=>{c(u)&&(i=i.concat([u])),i=i.concat(_e(u,c))}),i},Tt=(s,c,i)=>B(s,u=>ft(u,c),i),Ie=(s,c)=>oe(s,i=>ft(i,c)),Ao=(s,c)=>hn(c,s);var Er=(s,c,i,u,p)=>s(i,u)?q.some(i):us(p)&&p(i)?q.none():c(i,u,p);const No=(s,c,i)=>{let u=s.dom;const p=us(i)?i:go;for(;u.parentNode;){u=u.parentNode;const y=U.fromDom(u);if(c(y))return q.some(y);if(p(y))break}return q.none()},er=(s,c,i)=>Er((p,y)=>y(p),No,s,c,i),zo=(s,c)=>{const i=p=>c(U.fromDom(p));return zt(s.dom.childNodes,i).map(U.fromDom)},Ga=(s,c)=>{const i=u=>{for(let p=0;p<u.childNodes.length;p++){const y=U.fromDom(u.childNodes[p]);if(c(y))return q.some(y);const T=i(u.childNodes[p]);if(T.isSome())return T}return q.none()};return i(s.dom)},Mc=(s,c,i)=>No(s,u=>ft(u,c),i),jt=(s,c)=>zo(s,i=>ft(i,c)),Is=(s,c)=>Kn(c,s),Io=(s,c,i)=>Er((p,y)=>ft(p,y),Mc,s,c,i),Qc=(s,c,i=ur)=>s.exists(u=>i(u,c)),Zo=s=>{const c=[],i=u=>{c.push(u)};for(let u=0;u<s.length;u++)s[u].each(i);return c},wl=(s,c)=>s!=null?c(s):q.none(),vd=(s,c)=>s?q.some(c):q.none(),Hm=(s,c)=>s.substring(c),Ko=(s,c,i)=>c===""||s.length>=c.length&&s.substr(i,i+c.length)===c,ea=(s,c)=>Bs(s,c)?Hm(s,c.length):s,Os=(s,c,i=0,u)=>{const p=s.indexOf(c,i);return p!==-1?Go(u)?!0:p+c.length<=u:!1},Bs=(s,c)=>Ko(s,c,0),Gr=(s,c)=>Ko(s,c,s.length-c.length),Ni=(s=>c=>c.replace(s,""))(/^\s+|\s+$/g),Ar=s=>s.length>0,Dr=s=>{const c=parseFloat(s);return isNaN(c)?q.none():q.some(c)},ja=s=>s.style!==void 0&&us(s.style.getPropertyValue),ta=(s,c,i)=>{if(!dn(i))throw console.error("Invalid call to CSS.set. Property ",c,":: Value ",i,":: Element ",s),new Error("CSS value must be a string: "+i);ja(s)&&s.style.setProperty(c,i)},Im=(s,c)=>{ja(s)&&s.style.removeProperty(c)},hs=(s,c,i)=>{const u=s.dom;ta(u,c,i)},si=(s,c)=>{const i=s.dom;mo(c,(u,p)=>{ta(i,p,u)})},qa=(s,c)=>{const i=s.dom,p=window.getComputedStyle(i).getPropertyValue(c);return p===""&&!qo(s)?zi(i,c):p},zi=(s,c)=>ja(s)?s.style.getPropertyValue(c):"",ri=(s,c)=>{const i=s.dom,u=zi(i,c);return q.from(u).filter(p=>p.length>0)},hr=(s,c)=>{const i=s.dom;Im(i,c),Qc(V(s,"style").map(Ni),"")&&F(s,"style")},yd=(s,c)=>{const i=s.dom,u=c.dom;ja(i)&&ja(u)&&(u.style.cssText=i.style.cssText)},Vc=(s,c,i=0)=>V(s,c).map(u=>parseInt(u,10)).getOr(i),Su=(s,c)=>Vc(s,c,1),Ls=s=>Tn("col")(s)?Vc(s,"span",1)>1:Su(s,"colspan")>1,xu=s=>Su(s,"rowspan")>1,jr=(s,c)=>parseInt(qa(s,c),10),Ka=X(10),Zi=X(10),Ya=(s,c)=>Sl(s,c,wt),Sl=(s,c,i)=>Jt(Co(s),u=>ft(u,c)?i(u)?[u]:[]:Sl(u,c,i)),Xa=(s,c,i=go)=>{if(i(c))return q.none();if(Wt(s,wo(c)))return q.some(c);const u=p=>ft(p,"table")||i(p);return Mc(c,s.join(","),u)},Cu=(s,c)=>Xa(["td","th"],s,c),Ja=s=>Ya(s,"th,td"),Ec=s=>ft(s,"colgroup")?Ie(s,"col"):Jt(ci(s),c=>Ie(c,"col")),Fs=(s,c)=>Io(s,"table",c),Tu=s=>Ya(s,"tr"),ci=s=>Fs(s).fold(X([]),c=>Ie(c,"colgroup")),xl=(s,c)=>Ue(s,i=>{if(wo(i)==="colgroup"){const u=Ue(Ec(i),p=>{const y=Vc(p,"span",1);return Ca(p,1,y)});return N(i,u,"colgroup")}else{const u=Ue(Ja(i),p=>{const y=Vc(p,"rowspan",1),T=Vc(p,"colspan",1);return Ca(p,y,T)});return N(i,u,c(i))}}),ku=s=>Xn(s).map(c=>{const i=wo(c);return Hs(i)?i:"tbody"}).getOr("tbody"),Ui=s=>{const c=Tu(s),u=[...ci(s),...c];return xl(u,ku)},Ou=(s,c)=>xl(s,()=>c),Qa=s=>{let c=!1,i;return(...u)=>(c||(c=!0,i=s.apply(null,u)),i)},_u=(s,c,i,u)=>{const p=s.isiOS()&&/ipad/i.test(i)===!0,y=s.isiOS()&&!p,T=s.isiOS()||s.isAndroid(),E=T||u("(pointer:coarse)"),H=p||!y&&T&&u("(min-device-width:768px)"),z=y||T&&!H,Q=c.isSafari()&&s.isiOS()&&/safari/i.test(i)===!1,fe=!z&&!H&&!Q;return{isiPad:X(p),isiPhone:X(y),isTablet:X(H),isPhone:X(z),isTouch:X(E),isAndroid:s.isAndroid,isiOS:s.isiOS,isWebView:X(Q),isDesktop:X(fe)}},Mu=(s,c)=>{for(let i=0;i<s.length;i++){const u=s[i];if(u.test(c))return u}},wd=(s,c)=>{const i=Mu(s,c);if(!i)return{major:0,minor:0};const u=p=>Number(c.replace(i,"$"+p));return ai(u(1),u(2))},Sd=(s,c)=>{const i=String(c).toLowerCase();return s.length===0?Wi():wd(s,i)},Wi=()=>ai(0,0),ai=(s,c)=>({major:s,minor:c}),ka={nu:ai,detect:Sd,unknown:Wi},Eu=(s,c)=>tn(c.brands,i=>{const u=i.brand.toLowerCase();return zt(s,p=>{var y;return u===((y=p.brand)===null||y===void 0?void 0:y.toLowerCase())}).map(p=>({current:p.name,version:ka.nu(parseInt(i.version,10),0)}))}),xd=(s,c)=>{const i=String(c).toLowerCase();return zt(s,u=>u.search(i))},li=(s,c)=>xd(s,c).map(i=>{const u=ka.detect(i.versionRegexes,c);return{current:i.name,version:u}}),Cd=(s,c)=>xd(s,c).map(i=>{const u=ka.detect(i.versionRegexes,c);return{current:i.name,version:u}}),Ac=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,qr=s=>c=>Os(c,s),el=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:s=>Os(s,"edge/")&&Os(s,"chrome")&&Os(s,"safari")&&Os(s,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ac],search:s=>Os(s,"chrome")&&!Os(s,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:s=>Os(s,"msie")||Os(s,"trident")},{name:"Opera",versionRegexes:[Ac,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:qr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:qr("firefox")},{name:"Safari",versionRegexes:[Ac,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:s=>(Os(s,"safari")||Os(s,"mobile/"))&&Os(s,"applewebkit")}],tl=[{name:"Windows",search:qr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:s=>Os(s,"iphone")||Os(s,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:qr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:qr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:qr("linux"),versionRegexes:[]},{name:"Solaris",search:qr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:qr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:qr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Oa={browsers:X(el),oses:X(tl)},_a="Edge",Td="Chromium",kd="IE",ol="Opera",nl="Firefox",Od="Safari",pr=()=>Gi({current:void 0,version:ka.unknown()}),Gi=s=>{const c=s.current,i=s.version,u=p=>()=>c===p;return{current:c,version:i,isEdge:u(_a),isChromium:u(Td),isIE:u(kd),isOpera:u(ol),isFirefox:u(nl),isSafari:u(Od)}},Au={unknown:pr,nu:Gi,edge:X(_a),chromium:X(Td),ie:X(kd),opera:X(ol),firefox:X(nl),safari:X(Od)},ji="Windows",Nc="iOS",Ps="Android",qi="Linux",_d="macOS",Du="Solaris",ii="FreeBSD",Cl="ChromeOS",Md=()=>Ed({current:void 0,version:ka.unknown()}),Ed=s=>{const c=s.current,i=s.version,u=p=>()=>c===p;return{current:c,version:i,isWindows:u(ji),isiOS:u(Nc),isAndroid:u(Ps),isMacOS:u(_d),isLinux:u(qi),isSolaris:u(Du),isFreeBSD:u(ii),isChromeOS:u(Cl)}},Bm={unknown:Md,nu:Ed,windows:X(ji),ios:X(Nc),android:X(Ps),linux:X(qi),macos:X(_d),solaris:X(Du),freebsd:X(ii),chromeos:X(Cl)},$u={detect:(s,c,i)=>{const u=Oa.browsers(),p=Oa.oses(),y=c.bind(H=>Eu(u,H)).orThunk(()=>li(u,s)).fold(Au.unknown,Au.nu),T=Cd(p,s).fold(Bm.unknown,Bm.nu),E=_u(T,y,s,i);return{browser:y,os:T,deviceType:E}}},ui=s=>window.matchMedia(s).matches;let Ki=Qa(()=>$u.detect(navigator.userAgent,q.from(navigator.userAgentData),ui));const Dd=()=>Ki(),yn=(s,c)=>{const i=(E,H)=>{if(!oo(H)&&!H.match(/^[0-9]+$/))throw new Error(s+".set accepts only positive integer values. Value was "+H);const z=E.dom;ja(z)&&(z.style[s]=H+"px")},u=E=>{const H=c(E);if(H<=0||H===null){const z=qa(E,s);return parseFloat(z)||0}return H},p=u,y=(E,H)=>ue(H,(z,Q)=>{const fe=qa(E,Q),Me=fe===void 0?0:parseInt(fe,10);return isNaN(Me)?z:z+Me},0);return{set:i,get:u,getOuter:p,aggregate:y,max:(E,H,z)=>{const Q=y(E,z);return H>Q?H-Q:0}}},Jn=(s,c)=>Dr(s).getOr(c),fr=(s,c,i)=>Jn(qa(s,c),i),Ru=(s,c,i,u)=>{const p=fr(s,`padding-${i}`,0),y=fr(s,`padding-${u}`,0),T=fr(s,`border-${i}-width`,0),E=fr(s,`border-${u}-width`,0);return c-p-y-T-E},$d=(s,c)=>{const i=s.dom,u=i.getBoundingClientRect().width||i.offsetWidth;return c==="border-box"?u:Ru(s,u,"left","right")},ps=s=>fr(s,"height",s.dom.offsetHeight),Yi=s=>fr(s,"width",s.dom.offsetWidth),Xi=s=>$d(s,"content-box"),Hu=yn("width",s=>s.dom.offsetWidth),zc=s=>Hu.get(s),St=s=>Hu.getOuter(s),br=Xi,Iu=Yi,Bu=(s,c,i)=>{const u=s.cells,p=u.slice(0,c),y=u.slice(c),T=p.concat(i).concat(y);return Tl(s,T)},Ji=(s,c,i)=>Bu(s,c,[i]),di=(s,c,i)=>{const u=s.cells;u[c]=i},Tl=(s,c)=>be(s.element,c,s.section,s.isNew),Lu=(s,c)=>{const i=s.cells,u=Ue(i,c);return be(s.element,u,s.section,s.isNew)},Kr=(s,c)=>s.cells[c],vr=(s,c)=>Kr(s,c).element,$r=s=>s.cells.length,zn=s=>{const c=fn(s,i=>i.section==="colgroup");return{rows:c.fail,cols:c.pass}},pn=(s,c,i)=>{const u=Ue(s.cells,i);return be(c(s.element),u,s.section,!0)},mi="data-snooker-locked-cols",Lm=s=>V(s,mi).bind(c=>q.from(c.match(/\d+/g))).map(c=>Qt(c,wt)),Dc=s=>{const c=ue(zn(s).rows,(u,p)=>(pt(p.cells,(y,T)=>{y.isLocked&&(u[T]=!0)}),u),{}),i=Vn(c,(u,p)=>parseInt(p,10));return ds(i)},Fu=(s,c)=>s+","+c,Fm=(s,c,i)=>q.from(s.access[Fu(c,i)]),Rd=(s,c,i)=>{const u=Oo(s,p=>i(c,p.element));return u.length>0?q.some(u[0]):q.none()},Oo=(s,c)=>{const i=Jt(s.all,u=>u.cells);return we(i,c)},gi=s=>{const c={};let i=0;return pt(s.cells,u=>{const p=u.colspan;An(p,y=>{const T=i+y;c[T]=ro(u.element,p,T)}),i+=p}),c},Rr=s=>{const c={},i=[],p=uo(s).map(Oe=>Oe.element).bind(Fs).bind(Lm).getOr({});let y=0,T=0,E=0;const{pass:H,fail:z}=fn(s,Oe=>Oe.section==="colgroup");pt(z,Oe=>{const Te=[];pt(Oe.cells,Fe=>{let pe=0;for(;c[Fu(E,pe)]!==void 0;)pe++;const Ce=yo(p,pe.toString()),qe=D(Fe.element,Fe.rowspan,Fe.colspan,E,pe,Ce);for(let ot=0;ot<Fe.colspan;ot++)for(let so=0;so<Fe.rowspan;so++){const an=E+so,ln=pe+ot,lr=Fu(an,ln);c[lr]=qe,T=Math.max(T,ln+1)}Te.push(qe)}),y++,i.push(N(Oe.element,Te,Oe.section)),E++});const{columns:Q,colgroups:fe}=Et(H).map(Oe=>{const Te=gi(Oe);return{colgroups:[vn(Oe.element,Ro(Te))],columns:Te}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:_c(y,T),access:c,all:i,columns:Q,colgroups:fe}},Dt={fromTable:s=>{const c=Ui(s);return Rr(c)},generate:Rr,getAt:Fm,findItem:Rd,filterItems:Oo,justCells:s=>Jt(s.all,c=>c.cells),justColumns:s=>Ro(s.columns),hasColumns:s=>Pn(s.columns).length>0,getColumnAt:(s,c)=>q.from(s.columns[c])},hi=(s,c=wt)=>{const i=s.grid,u=An(i.columns,Re),p=An(i.rows,Re);return Ue(u,y=>Hd(()=>Jt(p,z=>Dt.getAt(s,z,y).filter(Q=>Q.column===y).toArray()),z=>z.colspan===1&&c(z.element),()=>Dt.getAt(s,0,y)))},Hd=(s,c,i)=>{const u=s();return zt(u,c).orThunk(()=>q.from(u[0]).orThunk(i)).map(T=>T.element)},Pm=s=>{const c=s.grid,i=An(c.rows,Re),u=An(c.columns,Re);return Ue(i,p=>Hd(()=>Jt(u,H=>Dt.getAt(s,p,H).filter(z=>z.row===p).fold(X([]),z=>[z])),H=>H.rowspan===1,()=>Dt.getAt(s,p,0)))},Vu=(s,c)=>{if(c<0||c>=s.length-1)return q.none();const i=s[c].fold(()=>{const p=kr(s.slice(0,c));return tn(p,(y,T)=>y.map(E=>({value:E,delta:T+1})))},p=>q.some({value:p,delta:0})),u=s[c+1].fold(()=>{const p=s.slice(c+1);return tn(p,(y,T)=>y.map(E=>({value:E,delta:T+1})))},p=>q.some({value:p,delta:1}));return i.bind(p=>u.map(y=>{const T=y.delta+p.delta;return Math.abs(y.value-p.value)/T}))},Ol=(s,c)=>i=>Fg(i)==="rtl"?c:s,Fg=s=>qa(s,"direction")==="rtl"?"rtl":"ltr",h=yn("height",s=>{const c=s.dom;return qo(s)?c.getBoundingClientRect().height:c.offsetHeight}),S=s=>h.get(s),_=s=>h.getOuter(s),P=ps,Z=(s,c)=>({left:s,top:c,translate:(u,p)=>Z(s+u,c+p)}),ge=Z,ze=s=>{const c=s.getBoundingClientRect();return ge(c.left,c.top)},lt=(s,c)=>s!==void 0?s:c!==void 0?c:0,it=s=>{const c=s.dom.ownerDocument,i=c.body,u=c.defaultView,p=c.documentElement;if(i===s.dom)return ge(i.offsetLeft,i.offsetTop);const y=lt(u==null?void 0:u.pageYOffset,p.scrollTop),T=lt(u==null?void 0:u.pageXOffset,p.scrollLeft),E=lt(p.clientTop,i.clientTop),H=lt(p.clientLeft,i.clientLeft);return nt(s).translate(T-H,y-E)},nt=s=>{const c=s.dom,u=c.ownerDocument.body;return u===c?ge(u.offsetLeft,u.offsetTop):qo(s)?ze(c):ge(0,0)},sn=(s,c)=>({row:s,y:c}),cs=(s,c)=>({col:s,x:c}),Yr=s=>it(s).left+St(s),sa=s=>it(s).left,Vm=(s,c)=>cs(s,sa(c)),Pg=(s,c)=>cs(s,Yr(c)),Xr=s=>it(s).top,tt=(s,c)=>sn(s,Xr(c)),pi=(s,c)=>sn(s,Xr(c)+_(c)),Id=(s,c,i)=>{if(i.length===0)return[];const u=Ue(i.slice(1),(y,T)=>y.map(E=>s(T,E))),p=i[i.length-1].map(y=>c(i.length-1,y));return u.concat([p])},Cp=s=>-s,fi={delta:Re,positions:s=>Id(tt,pi,s),edge:Xr},bi=Ol({delta:Re,edge:sa,positions:s=>Id(Vm,Pg,s)},{delta:Cp,edge:Yr,positions:s=>Id(Pg,Vm,s)}),rl={delta:(s,c)=>bi(c).delta(s,c),positions:(s,c)=>bi(c).positions(s,c),edge:s=>bi(s).edge(s)},fs={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Nu=(()=>{const s="[0-9]+",i="[eE]"+("[+-]?"+s),u="\\.",p=E=>`(?:${E})?`,T=`[+-]?(?:${["Infinity",s+u+p(s)+p(i),u+s+p(i),s+p(i)].join("|")})`;return new RegExp(`^(${T})(.*)$`)})(),Nm=(s,c)=>xo(c,i=>xo(fs[i],u=>s===u)),Vg=(s,c)=>q.from(Nu.exec(s)).bind(u=>{const p=Number(u[1]),y=u[2];return Nm(y,c)?q.some({value:p,unit:y}):q.none()}),Ng=/(\d+(\.\d+)?)%/,Tp=/(\d+(\.\d+)?)px|em/,vi=Tn("col"),kp=Tn("tr"),Qi=(s,c,i)=>{const u=ms(s).getOrThunk(()=>R(ns(s)));return c(s)/i(u)*100},zm=(s,c)=>{hs(s,"width",c+"px")},zg=(s,c)=>{hs(s,"width",c+"%")},rn=(s,c)=>{hs(s,"height",c+"px")},ca=s=>{hr(s,"height")},Hr=s=>P(s)+"px",eu=(s,c,i,u)=>{const p=Fs(s).map(y=>{const T=i(y);return Math.floor(c/100*T)}).getOr(c);return u(s,p),p},Jr=(s,c,i,u)=>{const p=parseFloat(s);return Gr(s,"%")&&wo(c)!=="table"?eu(c,p,i,u):p},Zg=s=>{const c=Hr(s);return c?Jr(c,s,S,rn):S(s)},bs=(s,c,i)=>{const u=i(s),p=Su(s,c);return u/p},tr=(s,c)=>ri(s,c).orThunk(()=>V(s,c).map(i=>i+"px")),_l=s=>tr(s,"width"),me=s=>tr(s,"height"),gc=s=>Qi(s,zc,br),Ug=s=>vi(s)?zc(s):Iu(s),Zn=s=>kp(s)?S(s):bs(s,"rowspan",Zg),cl=s=>_l(s).bind(i=>Vg(i,["fixed","relative","empty"])),Wg=(s,c,i)=>{hs(s,"width",c+i)},$c=s=>zc(s)+"px",Op=s=>S(s)+"px",al=s=>Qi(s,zc,br)+"%",Zm=s=>_l(s).exists(c=>Ng.test(c)),hc=s=>_l(s).exists(c=>Tp.test(c)),no=s=>_l(s).isNone(),Ma=X(Ng),zu=Tn("col"),or=s=>_l(s).getOrThunk(()=>Ug(s)+"px"),Gg=s=>me(s).getOrThunk(()=>Zn(s)+"px"),Ml=s=>Ue(Dt.justColumns(s),c=>q.from(c.element)),jg=s=>{const c=Dd().browser,i=c.isChromium()||c.isFirefox();return zu(s)?i:!0},Ir=(s,c,i,u,p,y)=>s.filter(u).fold(()=>y(Vu(i,c)),T=>p(T)),Ld=(s,c,i,u)=>{const p=hi(s),y=Dt.hasColumns(s)?Ml(s):p,T=[q.some(rl.edge(c))].concat(Ue(rl.positions(p,c),H=>H.map(z=>z.x))),E=I(Ls);return Ue(y,(H,z)=>Ir(H,z,T,E,Q=>{if(jg(Q))return i(Q);{const fe=wl(p[z],Re);return Ir(fe,z,T,E,Me=>u(q.some(zc(Me))),u)}},u))},J=s=>s.map(c=>c+"px").getOr(""),Rc=(s,c)=>Ld(s,c,or,J),Fd=(s,c,i)=>Ld(s,c,gc,u=>u.fold(()=>i.minCellWidth(),p=>p/i.pixelWidth()*100)),pc=(s,c,i)=>Ld(s,c,Ug,u=>u.getOrThunk(i.minCellWidth)),fc=(s,c,i,u)=>{const p=Pm(s),y=Ue(s.all,E=>q.some(E.element)),T=[q.some(fi.edge(c))].concat(Ue(fi.positions(p,c),E=>E.map(H=>H.y)));return Ue(y,(E,H)=>Ir(E,H,T,wt,i,u))},Vs=(s,c)=>fc(s,c,Zn,i=>i.getOrThunk(Zi)),Un=(s,c)=>fc(s,c,Gg,J),Pd=(s,c)=>()=>qo(s)?c(s):parseFloat(ri(s,"width").getOr("0")),Ea=s=>{const c=Pd(s,zc),i=X(0);return{width:c,pixelWidth:c,getWidths:(p,y)=>pc(p,s,y),getCellDelta:i,singleColumnWidth:X([0]),minCellWidth:i,setElementWidth:Ae,adjustTableWidth:Ae,isRelative:!0,label:"none"}},Vd=s=>{const c=Pd(s,H=>parseFloat(al(H))),i=Pd(s,zc);return{width:c,pixelWidth:i,getWidths:(H,z)=>Fd(H,s,z),getCellDelta:H=>H/i()*100,singleColumnWidth:(H,z)=>[100-H],minCellWidth:()=>Ka()/i()*100,setElementWidth:zg,adjustTableWidth:H=>{const z=c(),Q=H/100*z,fe=z+Q;zg(s,fe)},isRelative:!0,label:"percent"}},We=s=>{const c=Pd(s,zc);return{width:c,pixelWidth:c,getWidths:(T,E)=>pc(T,s,E),getCellDelta:Re,singleColumnWidth:(T,E)=>[Math.max(Ka(),T+E)-T],minCellWidth:Ka,setElementWidth:zm,adjustTableWidth:T=>{const E=c()+T;zm(s,E)},isRelative:!1,label:"pixel"}},rb=(s,c)=>Ma().exec(c)!==null?Vd(s):We(s),b={getTableSize:s=>_l(s).fold(()=>Ea(s),i=>rb(s,i)),pixelSize:We,percentageSize:Vd,noneSize:Ea},k=(s,c,i,u,p,y)=>({minRow:s,minCol:c,maxRow:i,maxCol:u,allCells:p,selectedCells:y}),$=(s,c)=>{const i=s.grid.columns;let p=s.grid.rows,y=i,T=0,E=0;const H=[],z=[];return mo(s.access,Q=>{if(H.push(Q),c(Q)){z.push(Q);const fe=Q.row,Me=fe+Q.rowspan-1,Oe=Q.column,Te=Oe+Q.colspan-1;fe<p?p=fe:Me>T&&(T=Me),Oe<y?y=Oe:Te>E&&(E=Te)}}),k(p,y,T,E,H,z)},G=(s,c,i)=>{const u=s[i].element,p=U.fromTag("td");bo(p,U.fromTag("br")),(c?bo:kn)(u,p)},re=(s,c,i,u)=>{const p=we(s,E=>E.section!=="colgroup"),y=c.grid.columns,T=c.grid.rows;for(let E=0;E<T;E++){let H=!1;for(let z=0;z<y;z++)E<i.minRow||E>i.maxRow||z<i.minCol||z>i.maxCol||(Dt.getAt(c,E,z).filter(u).isNone()?G(p,H,E):H=!0)}},ve=(s,c,i,u)=>{mo(i.columns,T=>{(T.column<c.minCol||T.column>c.maxCol)&&On(T.element)});const p=we(Ya(s,"tr"),T=>T.dom.childElementCount===0);pt(p,On),(c.minCol===c.maxCol||c.minRow===c.maxRow)&&pt(Ya(s,"th,td"),T=>{F(T,"rowspan"),F(T,"colspan")}),F(s,mi),F(s,"data-snooker-col-series"),b.getTableSize(s).adjustTableWidth(u)},De=(s,c,i,u)=>{if(u.minCol===0&&c.grid.columns===u.maxCol+1)return 0;const p=pc(c,s,i),y=ue(p,(z,Q)=>z+Q,0),H=ue(p.slice(u.minCol,u.maxCol+1),(z,Q)=>z+Q,0)/y*i.pixelWidth()-i.pixelWidth();return i.getCellDelta(H)},gt=(s,c)=>{const i=Me=>ft(Me.element,c),u=Ur(s),p=Ui(u),y=b.getTableSize(s),T=Dt.generate(p),E=$(T,i),H="th:not("+c+"),td:not("+c+")",z=Sl(u,"th,td",Me=>ft(Me,H));pt(z,On),re(p,T,E,i);const Q=Dt.fromTable(s),fe=De(s,Q,y,E);return ve(u,E,T,fe),u},kt="",lo=((s,c)=>{const i=y=>{if(!s(y))throw new Error("Can only get "+c+" value of a "+c+" node");return u(y).getOr("")},u=y=>s(y)?q.from(y.dom.nodeValue):q.none();return{get:i,getOption:u,set:(y,T)=>{if(!s(y))throw new Error("Can only set raw "+c+" value of a "+c+" node");y.dom.nodeValue=T}}})(Ys,"text"),Bo=s=>lo.get(s),nr=s=>lo.getOption(s),aa=(s,c)=>lo.set(s,c),Qr=s=>wo(s)==="img"?1:nr(s).fold(()=>Co(s).length,c=>c.length),Zc=s=>nr(s).filter(c=>c.trim().length!==0||c.indexOf(kt)>-1).isSome(),Um=s=>Cs(s)&&$n(s,"contenteditable")==="false",Nd=["img","br"],tu=s=>Zc(s)||Wt(Nd,wo(s))||Um(s),ou=s=>Ga(s,tu),Qn=s=>Uc(s,tu),Uc=(s,c)=>{const i=u=>{const p=Co(u);for(let y=p.length-1;y>=0;y--){const T=p[y];if(c(T))return q.some(T);const E=i(T);if(E.isSome())return E}return q.none()};return i(s)},El={scope:["row","col"]},ll=s=>()=>{const c=U.fromTag("td",s.dom);return bo(c,U.fromTag("br",s.dom)),c},zd=s=>()=>U.fromTag("col",s.dom),Ot=s=>()=>U.fromTag("colgroup",s.dom),Uo=s=>()=>U.fromTag("tr",s.dom),Ns=(s,c,i)=>{const u=vl(s,c);return mo(i,(p,y)=>{p===null?F(u,y):on(u,y,p)}),u},ec=s=>s,Aa=(s,c,i)=>ou(s).map(p=>{const y=i.join(","),T=Tt(p,y,E=>Kt(E,s));return et(T,(E,H)=>{const z=ss(H);return bo(E,z),z},c)}).getOr(c),Wc=(s,c)=>{mo(El,(i,u)=>V(s,u).filter(p=>Wt(i,p)).each(p=>on(c,u,p)))},yi=(s,c,i)=>{const u=(T,E)=>{yd(T.element,E),hr(E,"height"),T.colspan!==1&&hr(E,"width")},p=T=>{const E=U.fromTag(wo(T.element),c.dom),H=i.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),z=H.length>0?Aa(T.element,E,H):E;return bo(z,U.fromTag("br")),u(T,E),Wc(T.element,E),s(T.element,E),E};return{col:T=>{const E=U.fromTag(wo(T.element),c.dom);return u(T,E),s(T.element,E),E},colgroup:Ot(c),row:Uo(c),cell:p,replace:Ns,colGap:zd(c),gap:ll(c)}},tc=s=>({col:zd(s),colgroup:Ot(s),row:Uo(s),cell:ll(s),replace:ec,colGap:zd(s),gap:ll(s)}),oy=(s,c)=>{const u=document.createElement("div");return u.innerHTML=s,Co(U.fromDom(u))},Zu=s=>Ue(s,U.fromDom),Da=s=>c=>c.options.get(s),nu="100%",cb=s=>{var c;const i=s.dom,u=(c=i.getParent(s.selection.getStart(),i.isBlock))!==null&&c!==void 0?c:s.getBody();return br(U.fromDom(u))+"px"},Wm=(s,c)=>Gm(s)||!Yg(s)?c:Al(s)?{...c,width:cb(s)}:{...c,width:nu},ny=(s,c)=>Gm(s)||Yg(s)?c:Al(s)?{...c,width:cb(s)}:{...c,width:nu},sy=s=>{const c=s.options.register;c("table_clone_elements",{processor:"string[]"}),c("table_use_colgroups",{processor:"boolean",default:!0}),c("table_header_type",{processor:i=>{const u=Wt(["section","cells","sectionCells","auto"],i);return u?{value:i,valid:u}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),c("table_sizing_mode",{processor:"string",default:"auto"}),c("table_default_attributes",{processor:"object",default:{border:"1"}}),c("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),c("table_column_resizing",{processor:i=>{const u=Wt(["preservetable","resizetable"],i);return u?{value:i,valid:u}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),c("table_resize_bars",{processor:"boolean",default:!0}),c("table_style_by_css",{processor:"boolean",default:!0}),c("table_merge_content_on_paste",{processor:"boolean",default:!0})},Bn=s=>q.from(s.options.get("table_clone_elements")),ry=s=>{const c=s.options.get("object_resizing");return Wt(c.split(","),"table")},wi=Da("table_header_type"),Uu=Da("table_column_resizing"),qg=s=>Uu(s)==="preservetable",su=s=>Uu(s)==="resizetable",bc=Da("table_sizing_mode"),ru=s=>bc(s)==="relative",Al=s=>bc(s)==="fixed",Gm=s=>bc(s)==="responsive",Kg=Da("table_resize_bars"),Yg=Da("table_style_by_css"),Xg=Da("table_merge_content_on_paste"),cy=s=>{const c=s.options,i=c.get("table_default_attributes");return c.isSet("table_default_attributes")?i:ny(s,i)},ay=s=>{const c=s.options,i=c.get("table_default_styles");return c.isSet("table_default_styles")?i:Wm(s,i)},_p=Da("table_use_colgroups"),jm=s=>Io(s,"[contenteditable]"),Hc=(s,c=!1)=>qo(s)?s.dom.isContentEditable:jm(s).fold(X(c),i=>Dl(i)==="true"),Dl=s=>s.dom.contentEditable,$l=s=>U.fromDom(s.getBody()),Wu=s=>c=>Kt(c,$l(s)),Rl=s=>{F(s,"data-mce-style");const c=i=>F(i,"data-mce-style");pt(Ja(s),c),pt(Ec(s),c),pt(Tu(s),c)},Zd=s=>U.fromDom(s.selection.getStart()),Mp=s=>s.getBoundingClientRect().width,Ep=s=>s.getBoundingClientRect().height,Ap=s=>(c,i)=>{const u=c.dom.getStyle(i,s)||c.dom.getAttrib(i,s);return q.from(u).filter(Ar)},Dp=Ap("width"),$p=Ap("height"),Pt=s=>/^(\d+(\.\d+)?)%$/.test(s),je=s=>/^(\d+(\.\d+)?)px$/.test(s),Si=s=>er(s,Tn("table")).exists(Hc),Rp=(s,c)=>{const i=c.column,u=c.column+c.colspan-1,p=c.row,y=c.row+c.rowspan-1;return i<=s.finishCol&&u>=s.startCol&&p<=s.finishRow&&y>=s.startRow},Hp=(s,c)=>c.column>=s.startCol&&c.column+c.colspan-1<=s.finishCol&&c.row>=s.startRow&&c.row+c.rowspan-1<=s.finishRow,ly=(s,c)=>{let i=!0;const u=Qo(Hp,c);for(let p=c.startRow;p<=c.finishRow;p++)for(let y=c.startCol;y<=c.finishCol;y++)i=i&&Dt.getAt(s,p,y).exists(u);return i?q.some(c):q.none()},ab=(s,c)=>Je(Math.min(s.row,c.row),Math.min(s.column,c.column),Math.max(s.row+s.rowspan-1,c.row+c.rowspan-1),Math.max(s.column+s.colspan-1,c.column+c.colspan-1)),Lo=(s,c,i)=>{const u=Dt.findItem(s,c,Kt),p=Dt.findItem(s,i,Kt);return u.bind(y=>p.map(T=>ab(y,T)))},lb=(s,c,i)=>Lo(s,c,i).bind(u=>ly(s,u)),iy=(s,c,i,u)=>Dt.findItem(s,c,Kt).bind(p=>{const y=i>0?p.row+p.rowspan-1:p.row,T=u>0?p.column+p.colspan-1:p.column;return Dt.getAt(s,y+i,T+u).map(H=>H.element)}),Ip=(s,c,i)=>Lo(s,c,i).map(u=>{const p=Dt.filterItems(s,Qo(Rp,u));return Ue(p,y=>y.element)}),le=(s,c)=>{const i=(u,p)=>Oc(p,u);return Dt.findItem(s,c,i).map(u=>u.element)},Bp=(s,c,i)=>Fs(s).bind(u=>{const p=xi(u);return iy(p,s,c,i)}),uy=(s,c,i)=>{const u=xi(s);return Ip(u,c,i)},Ud=(s,c,i,u,p)=>{const y=xi(s),T=Kt(s,i)?q.some(c):le(y,c),E=Kt(s,p)?q.some(u):le(y,u);return T.bind(H=>E.bind(z=>Ip(y,H,z)))},dy=(s,c,i)=>{const u=xi(s);return lb(u,c,i)},xi=Dt.fromTable;var Lp=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Hl=()=>{const s=z=>U.fromDom(z.dom.cloneNode(!1)),c=z=>Rn(z).dom,i=z=>qn(z)?wo(z)==="body"?!0:Wt(Lp,wo(z)):!1,u=z=>qn(z)?Wt(["br","img","hr","input"],wo(z)):!1,p=z=>qn(z)&&$n(z,"contenteditable")==="false",y=(z,Q)=>z.dom.compareDocumentPosition(Q.dom),T=(z,Q)=>{const fe=ne(z);Xs(Q,fe)},E=z=>{const Q=wo(z);return Wt(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Q)},H=z=>qn(z)?V(z,"lang"):q.none();return{up:X({selector:Mc,closest:Io,predicate:No,all:Yc}),down:X({selector:Ao,predicate:_e}),styles:X({get:qa,getRaw:ri,set:hs,remove:hr}),attrs:X({get:$n,set:on,remove:F,copyTo:T}),insert:X({before:Sa,after:Rs,afterAll:eo,append:bo,appendAll:Nn,prepend:kn,wrap:Xc}),remove:X({unwrap:_r,remove:On}),create:X({nu:U.fromTag,clone:s,text:U.fromText}),query:X({comparePosition:y,prevSibling:Pc,nextSibling:dc}),property:X({children:Co,name:wo,parent:Xn,document:c,isText:Ys,isComment:Kc,isElement:qn,isSpecial:E,getLanguage:H,getText:Bo,setText:aa,isBoundary:i,isEmptyTag:u,isNonEditable:p}),eq:Kt,is:Js}};const my=(s,c,i,u)=>{const p=i[0],y=i.slice(1);return u(s,c,p,y)},Wd=(s,c,i)=>i.length>0?my(s,c,i,cn):q.none(),cn=(s,c,i,u)=>{const p=c(s,i);return et(u,(y,T)=>{const E=c(s,T);return Il(s,y,E)},p)},Il=(s,c,i)=>c.bind(u=>i.filter(Qo(s.eq,u))),gy=(s,c)=>Qo(s.eq,c),Ci=(s,c,i,u=go)=>{const p=[c].concat(s.up().all(c)),y=[i].concat(s.up().all(i)),T=Q=>en(Q,u).fold(()=>Q,Me=>Q.slice(0,Me+1)),E=T(p),H=T(y),z=zt(E,Q=>xo(H,gy(s,Q)));return{firstpath:E,secondpath:H,shared:z}},hy=Wd,Fp=Ci,Gu=Hl(),Pp=(s,c)=>hy(Gu,(i,u)=>s(u),c),ib=(s,c,i)=>Fp(Gu,s,c,i),Vp=s=>Mc(s,"table"),Jg=(s,c,i)=>{const u=p=>y=>i!==void 0&&i(y)||Kt(y,p);return Kt(s,c)?q.some({boxes:q.some([s]),start:s,finish:c}):Vp(s).bind(p=>Vp(c).bind(y=>{if(Kt(p,y))return q.some({boxes:uy(p,s,c),start:s,finish:c});if(Oc(p,y)){const T=Tt(c,"td,th",u(p)),E=T.length>0?T[T.length-1]:c;return q.some({boxes:Ud(p,s,p,c,y),start:s,finish:E})}else if(Oc(y,p)){const T=Tt(s,"td,th",u(y)),E=T.length>0?T[T.length-1]:s;return q.some({boxes:Ud(y,s,p,c,y),start:s,finish:E})}else return ib(s,c).shared.bind(T=>Io(T,"table",i).bind(E=>{const H=Tt(c,"td,th",u(E)),z=H.length>0?H[H.length-1]:c,Q=Tt(s,"td,th",u(E)),fe=Q.length>0?Q[Q.length-1]:s;return q.some({boxes:Ud(E,s,p,c,y),start:fe,finish:z})}))}))},Np=(s,c)=>{const i=Ao(s,c);return i.length>0?q.some(i):q.none()},cu=(s,c)=>zt(s,i=>ft(i,c)),ub=(s,c,i)=>Is(s,c).bind(u=>Is(s,i).bind(p=>Pp(Vp,[u,p]).map(y=>({first:u,last:p,table:y})))),py=(s,c)=>Mc(s,"table").bind(i=>Is(i,c).bind(u=>Jg(u,s).bind(p=>p.boxes.map(y=>({boxes:y,start:p.start,finish:p.finish}))))),fy=(s,c,i,u,p)=>cu(s,p).bind(y=>Bp(y,c,i).bind(T=>py(T,u))),zp=(s,c)=>Np(s,c),Le=(s,c,i)=>ub(s,c,i).bind(u=>{const p=H=>Kt(s,H),y="thead,tfoot,tbody,table",T=Mc(u.first,y,p),E=Mc(u.last,y,p);return T.bind(H=>E.bind(z=>Kt(H,z)?dy(u.table,u.first,u.last):q.none()))}),db=Re,by=s=>{const c=(u,p)=>V(u,p).exists(y=>parseInt(y,10)>1),i=u=>c(u,"rowspan")||c(u,"colspan");return s.length>0&&Ut(s,i)?q.some(s):q.none()},vy=(s,c,i)=>c.length<=1?q.none():Le(s,i.firstSelectedSelector,i.lastSelectedSelector).map(u=>({bounds:u,cells:c})),qm="data-mce-selected",yy="td["+qm+"],th["+qm+"]",Zp="["+qm+"]",ju="data-mce-first-selected",Gd="td["+ju+"],th["+ju+"]",Up="data-mce-last-selected",Qg="td["+Up+"],th["+Up+"]",wy=Zp,qu={selected:qm,selectedSelector:yy,firstSelected:ju,firstSelectedSelector:Gd,lastSelected:Up,lastSelectedSelector:Qg},jd=(s,c,i)=>({element:i,mergable:vy(c,s,qu),unmergable:by(s),selection:db(s)}),Wp=(s,c,i)=>({element:s,clipboard:c,generators:i}),Sy=(s,c,i,u)=>({selection:db(s),clipboard:i,generators:u}),eh=s=>Fs(s).bind(c=>zp(c,qu.firstSelectedSelector)).fold(X(s),c=>c[0]),Gp=s=>(c,i)=>{const u=wo(c),p=u==="col"||u==="colgroup"?eh(c):c;return Io(p,s,i)},xy=Gp("th,td,caption"),th=Gp("th,td"),la=s=>Zu(s.model.table.getSelectedCells()),il=s=>we(la(s),c=>ft(c,qu.selectedSelector)),Gc=s=>Fs(s[0]).map(c=>{const i=gt(c,wy);return Rl(i),[i]}),Cy=(s,c)=>Ue(c,i=>s.selection.serializer.serialize(i.dom,{})).join(""),Ty=s=>Ue(s,c=>c.dom.innerText).join(""),ky=(s,c)=>{s.on("BeforeGetContent",i=>{const u=p=>{i.preventDefault(),Gc(p).each(y=>{i.content=i.format==="text"?Ty(y):Cy(s,y)})};if(i.selection===!0){const p=il(s);p.length>=1&&u(p)}}),s.on("BeforeSetContent",i=>{if(i.selection===!0&&i.paste===!0){const u=la(s);uo(u).each(p=>{Fs(p).each(y=>{const T=we(oy(i.content),H=>wo(H)!=="meta"),E=Tn("table");if(Xg(s)&&T.length===1&&E(T[0])){i.preventDefault();const H=U.fromDom(s.getDoc()),z=tc(H),Q=Wp(p,T[0],z);c.pasteCells(y,Q).each(()=>{s.focus()})}})})}})},qd=(s,c)=>({element:s,offset:c}),ia=(s,c,i)=>s.property().isText(c)&&s.property().getText(c).trim().length===0||s.property().isComment(c)?i(c).bind(u=>ia(s,u,i).orThunk(()=>q.some(u))):q.none(),mb=(s,c)=>s.property().isText(c)?s.property().getText(c).length:s.property().children(c).length,gb=(s,c)=>{const i=ia(s,c,s.query().prevSibling).getOr(c);if(s.property().isText(i))return qd(i,mb(s,i));const u=s.property().children(i);return u.length>0?gb(s,u[u.length-1]):qd(i,mb(s,i))},Oy=gb,_y=Hl(),My=s=>Oy(_y,s),Ey=(s,c)=>{Ls(s)||cl(s).each(u=>{const p=u.value/2;Wg(s,p,u.unit),Wg(c,p,u.unit)})},Kd=s=>Ue(s,X(0)),hb=(s,c,i,u,p)=>p(s.slice(0,c)).concat(u).concat(p(s.slice(i))),pb=s=>(c,i,u,p)=>{if(s(u)){const y=Math.max(p,c[i]-Math.abs(u)),T=Math.abs(y-c[i]);return u>=0?T:-T}else return u},oh=pb(s=>s<0),Ay=pb(wt),fb=()=>{const s=(E,H,z,Q,fe)=>{const Me=oh(E,H,Q,fe);return hb(E,H,z+1,[Me,0],Kd)},c=(E,H,z,Q)=>{const fe=(100+z)/100,Me=Math.max(Q,(E[H]+z)/fe);return Ue(E,(Oe,Te)=>(Te===H?Me:Oe/fe)-Oe)},i=(E,H,z,Q,fe,Me)=>Me?c(E,H,Q,fe):s(E,H,z,Q,fe);return{resizeTable:(E,H)=>E(H),clampTableDelta:oh,calcLeftEdgeDeltas:i,calcMiddleDeltas:(E,H,z,Q,fe,Me,Oe)=>i(E,z,Q,fe,Me,Oe),calcRightEdgeDeltas:(E,H,z,Q,fe,Me)=>{if(Me)return c(E,z,Q,fe);{const Oe=oh(E,z,Q,fe);return Kd(E.slice(0,z)).concat([Oe])}},calcRedestributedWidths:(E,H,z,Q)=>{if(Q){const Me=(H+z)/H,Oe=Ue(E,Te=>Te/Me);return{delta:Me*100-100,newSizes:Oe}}else return{delta:z,newSizes:E}}}},jp=()=>{const s=(T,E,H,z,Q)=>{const fe=z>=0?H:E,Me=Ay(T,fe,z,Q);return hb(T,E,H+1,[Me,-Me],Kd)};return{resizeTable:(T,E,H)=>{H&&T(E)},clampTableDelta:(T,E,H,z,Q)=>{if(Q){if(H>=0)return H;{const fe=ue(T,(Me,Oe)=>Me+Oe-z,0);return Math.max(-fe,H)}}else return oh(T,E,H,z)},calcLeftEdgeDeltas:s,calcMiddleDeltas:(T,E,H,z,Q,fe)=>s(T,H,z,Q,fe),calcRightEdgeDeltas:(T,E,H,z,Q,fe)=>{if(fe)return Kd(T);{const Me=z/T.length;return Ue(T,X(Me))}},calcRedestributedWidths:(T,E,H,z)=>({delta:0,newSizes:T})}},nh=s=>Dt.fromTable(s).grid,sh=Tn("th"),Bl=s=>Ut(s,c=>sh(c.element)),Dy=(s,c)=>s&&c?"sectionCells":s?"section":"cells",bb=s=>{const c=s.section==="thead",i=Qc(qp(s.cells),"th");return s.section==="tfoot"?{type:"footer"}:c||i?{type:"header",subType:Dy(c,i)}:{type:"body"}},qp=s=>{const c=we(s,i=>sh(i.element));return c.length===0?q.some("td"):c.length===s.length?q.some("th"):q.none()},$y=s=>{const c=Ue(s,p=>bb(p).type),i=Wt(c,"header"),u=Wt(c,"footer");if(!i&&!u)return q.some("body");{const p=Wt(c,"body");return i&&!p&&!u?q.some("header"):!i&&!p&&u?q.some("footer"):q.none()}},Ry=s=>tn(s.all,c=>{const i=bb(c);return i.type==="header"?q.from(i.subType):q.none()}),Km=(s,c,i)=>te(i(s.element,c),!0,s.isLocked),Kp=(s,c)=>s.section!==c?be(s.element,s.cells,c,s.isNew):s,vb=()=>({transformRow:Kp,transformCell:(s,c,i)=>{const u=i(s.element,c),p=wo(u)!=="td"?Mr(u,"td"):u;return te(p,s.isNew,s.isLocked)}}),Ku=()=>({transformRow:Kp,transformCell:Km}),rh=()=>({transformRow:(s,c)=>Kp(s,c==="thead"?"tbody":c),transformCell:Km}),Ym={getTableSectionType:(s,c)=>{const i=Dt.fromTable(s);switch(Ry(i).getOr(c)){case"section":return vb();case"sectionCells":return Ku();case"cells":return rh()}},section:vb,sectionCells:Ku,cells:rh,fallback:()=>({transformRow:Re,transformCell:Km})},wn=(s,c,i,u)=>{i===u?F(s,c):on(s,c,i)},Yp=(s,c,i)=>{Et(Ie(s,c)).fold(()=>kn(s,i),u=>Rs(u,i))},Hn=(s,c)=>{const i=jt(s,c).getOrThunk(()=>{const u=U.fromTag(c,ns(s).dom);return c==="thead"?Yp(s,"caption,colgroup",u):c==="colgroup"?Yp(s,"caption",u):bo(s,u),u});return ks(i),i},By=(s,c)=>{const i=[],u=[],p=Oe=>Ue(Oe,Te=>{Te.isNew&&i.push(Te.element);const Fe=Te.element;return ks(Fe),pt(Te.cells,pe=>{pe.isNew&&u.push(pe.element),wn(pe.element,"colspan",pe.colspan,1),wn(pe.element,"rowspan",pe.rowspan,1),bo(Fe,pe.element)}),Fe}),y=Oe=>Jt(Oe,Te=>Ue(Te.cells,Fe=>(wn(Fe.element,"span",Fe.colspan,1),Fe.element))),T=(Oe,Te)=>{const Fe=Hn(s,Te),Ce=(Te==="colgroup"?y:p)(Oe);Nn(Fe,Ce)},E=Oe=>{jt(s,Oe).each(On)},H=(Oe,Te)=>{Oe.length>0?T(Oe,Te):E(Te)},z=[],Q=[],fe=[],Me=[];return pt(c,Oe=>{switch(Oe.section){case"thead":z.push(Oe);break;case"tbody":Q.push(Oe);break;case"tfoot":fe.push(Oe);break;case"colgroup":Me.push(Oe);break}}),H(Me,"colgroup"),H(z,"thead"),H(Q,"tbody"),H(fe,"tfoot"),{newRows:i,newCells:u}},vc=s=>Ue(s,c=>{const i=ss(c.element);return pt(c.cells,u=>{const p=Ur(u.element);wn(p,"colspan",u.colspan,1),wn(p,"rowspan",u.rowspan,1),bo(i,p)}),i}),Yu=(s,c)=>Ue(s,i=>Kr(i,c)),$a=(s,c)=>s[c],yb=(s,c)=>{if(s.length===0)return 0;const i=s[0];return en(s,p=>!c(i.element,p.element)).getOr(s.length)},Ly=(s,c,i,u)=>{const p=$a(s,c),y=p.section==="colgroup",T=yb(p.cells.slice(i),u),E=y?1:yb(Yu(s.slice(c),i),u);return{colspan:T,rowspan:E}},Fy=(s,c)=>{const i=Ue(s,p=>Ue(p.cells,go)),u=(p,y,T,E)=>{for(let H=p;H<p+T;H++)for(let z=y;z<y+E;z++)i[H][z]=!0};return Ue(s,(p,y)=>{const T=Jt(p.cells,(E,H)=>{if(i[y][H]===!1){const z=Ly(s,y,H,c);return u(y,H,z.rowspan,z.colspan),[yl(E.element,z.rowspan,z.colspan,E.isNew)]}else return[]});return K(p.element,T,p.section,p.isNew)})},Yd=(s,c,i)=>{const u=[];pt(s.colgroups,p=>{const y=[];for(let T=0;T<s.grid.columns;T++){const E=Dt.getColumnAt(s,T).map(H=>te(H.element,i,!1)).getOrThunk(()=>te(c.colGap(),!0,!1));y.push(E)}u.push(be(p.element,y,"colgroup",i))});for(let p=0;p<s.grid.rows;p++){const y=[];for(let H=0;H<s.grid.columns;H++){const z=Dt.getAt(s,p,H).map(Q=>te(Q.element,i,Q.isLocked)).getOrThunk(()=>te(c.gap(),!0,!1));y.push(z)}const T=s.all[p],E=be(T.element,y,T.section,i);u.push(E)}return u},Ti=(s,c)=>Yd(s,c,!1),Ll=s=>Fy(s,Kt),Xp=(s,c)=>tn(s.all,i=>zt(i.cells,u=>Kt(c,u.element))),ch=(s,c,i)=>{const u=Ue(c.selection,y=>Cu(y).bind(T=>Xp(s,T)).filter(i)),p=Zo(u);return vd(p.length>0,p)},zs=(s,c,i,u,p)=>(y,T,E,H)=>{const z=Dt.fromTable(y),Q=q.from(H==null?void 0:H.section).getOrThunk(Ym.fallback);return c(z,T).map(Me=>{const Oe=Ti(z,E),Te=s(Oe,Me,Kt,p(E),Q),Fe=Dc(Te.grid),pe=Ll(Te.grid);return{info:Me,grid:pe,cursor:Te.cursor,lockedColumns:Fe}}).bind(Me=>{const Oe=By(y,Me.grid),Te=q.from(H==null?void 0:H.sizing).getOrThunk(()=>b.getTableSize(y)),Fe=q.from(H==null?void 0:H.resize).getOrThunk(jp);return i(y,Me.grid,Me.info,{sizing:Te,resize:Fe,section:Q}),u(y),F(y,mi),Me.lockedColumns.length>0&&on(y,mi,Me.lockedColumns.join(",")),q.some({cursor:Me.cursor,newRows:Oe.newRows,newCells:Oe.newCells})})},wb=(s,c)=>Cu(c.element).bind(i=>Xp(s,i).map(u=>({...u,generators:c.generators,clipboard:c.clipboard}))),Jp=(s,c)=>ch(s,c,wt).map(i=>({cells:i,generators:c.generators,clipboard:c.clipboard})),Py=(s,c)=>c.mergable,Sb=(s,c)=>c.unmergable,ki=(s,c)=>ch(s,c,wt),Oi=(s,c)=>ch(s,c,i=>!i.isLocked),Vy=(s,c)=>Xp(s,c).exists(i=>!i.isLocked),xb=(s,c)=>Ut(c,i=>Vy(s,i)),Ny=(s,c)=>Py(s,c).filter(i=>xb(s,i.cells)),zy=(s,c)=>Sb(s,c).filter(i=>xb(s,i)),Zy=(s,c,i,u)=>{const p=zn(s).rows;if(p.length===0)return s;for(let y=c.startRow;y<=c.finishRow;y++)for(let T=c.startCol;T<=c.finishCol;T++){const E=p[y],H=Kr(E,T).isLocked;di(E,T,te(u(),!1,H))}return s},Cb=(s,c,i,u)=>{const p=zn(s).rows;let y=!0;for(let T=0;T<p.length;T++)for(let E=0;E<$r(p[0]);E++){const H=p[T],z=Kr(H,E),Q=z.element,fe=i(Q,c);fe&&!y?di(H,E,te(u(),!0,z.isLocked)):fe&&(y=!1)}return s},Uy=(s,c)=>ue(s,(i,u)=>xo(i,p=>c(p.element,u.element))?i:i.concat([u]),[]),Wy=(s,c,i,u)=>(c>0&&c<s[0].cells.length&&pt(s,p=>{const y=p.cells[c-1];let T=0;const E=u();for(;p.cells.length>c+T&&i(y.element,p.cells[c+T].element);)di(p,c+T,te(E,!0,p.cells[c+T].isLocked)),T++}),s),Gy=(s,c,i,u)=>{const p=zn(s).rows;if(c>0&&c<p.length){const y=p[c-1].cells,T=Uy(y,i);pt(T,E=>{let H=q.none();for(let z=c;z<p.length;z++)for(let Q=0;Q<$r(p[0]);Q++){const fe=p[z],Me=Kr(fe,Q);i(Me.element,E.element)&&(H.isNone()&&(H=q.some(u())),H.each(Te=>{di(fe,Q,te(Te,!0,Me.isLocked))}))}})}return s},Tb=s=>{const c=y=>y(s),i=X(s),u=()=>p,p={tag:!0,inner:s,fold:(y,T)=>T(s),isValue:wt,isError:go,map:y=>Xm.value(y(s)),mapError:u,bind:c,exists:c,forall:c,getOr:i,or:u,getOrThunk:i,orThunk:u,getOrDie:i,each:y=>{y(s)},toOptional:()=>q.some(s)};return p},kb=s=>{const c=()=>i,i={tag:!1,inner:s,fold:(u,p)=>u(s),isValue:go,isError:wt,map:c,mapError:u=>Xm.error(u(s)),bind:c,exists:go,forall:wt,getOr:Re,or:Re,getOrThunk:Tr,orThunk:Tr,getOrDie:xt(String(s)),each:Ae,toOptional:q.none};return i},Xm={value:Tb,error:kb,fromOption:(s,c)=>s.fold(()=>kb(c),Tb)},jy=(s,c,i)=>{if(s.row>=c.length||s.column>$r(c[0]))return Xm.error("invalid start address out of table bounds, row: "+s.row+", column: "+s.column);const u=c.slice(s.row),p=u[0].cells.slice(s.column),y=$r(i[0]),T=i.length;return Xm.value({rowDelta:u.length-T,colDelta:p.length-y})},Ob=(s,c)=>{const i=$r(s[0]),u=$r(c[0]);return{rowDelta:0,colDelta:i-u}},ah=(s,c)=>{const i=s.length,u=c.length;return{rowDelta:i-u,colDelta:0}},Zs=(s,c,i,u)=>{const p=c.section==="colgroup"?i.col:i.cell;return An(s,y=>te(p(),!0,u(y)))},ua=(s,c,i,u)=>{const p=s[s.length-1];return s.concat(An(c,()=>{const y=p.section==="colgroup"?i.colgroup:i.row,T=pn(p,y,Re),E=Zs(T.cells.length,T,i,H=>ho(u,H.toString()));return Tl(T,E)}))},_b=(s,c,i,u)=>Ue(s,p=>{const y=Zs(c,p,i,go);return Bu(p,u,y)}),Mb=(s,c,i)=>Ue(s,u=>ue(i,(p,y)=>{const T=Zs(1,u,c,wt)[0];return Ji(p,y,T)},u)),Xd=(s,c,i)=>{const u=c.colDelta<0?_b:Re,p=c.rowDelta<0?ua:Re,y=Dc(s),T=$r(s[0]),E=xo(y,Q=>Q===T-1),H=u(s,Math.abs(c.colDelta),i,E?T-1:T),z=Dc(H);return p(H,Math.abs(c.rowDelta),i,Qt(z,wt))},qy=(s,c,i,u)=>{const p=Kr(s[c],i),y=Qo(u,p.element),T=s[c];return s.length>1&&$r(T)>1&&(i>0&&y(vr(T,i-1))||i<T.cells.length-1&&y(vr(T,i+1))||c>0&&y(vr(s[c-1],i))||c<s.length-1&&y(vr(s[c+1],i)))},Eb=(s,c,i,u,p,y)=>{const T=s.row,E=s.column,H=i.length,z=$r(i[0]),Q=T+H,fe=E+z+y.length,Me=Qt(y,wt);for(let Oe=T;Oe<Q;Oe++){let Te=0;for(let Fe=E;Fe<fe;Fe++){if(Me[Fe]){Te++;continue}qy(c,Oe,Fe,p)&&Cb(c,vr(c[Oe],Fe),p,u.cell);const pe=Fe-E-Te,Ce=Kr(i[Oe-T],pe),qe=Ce.element,ot=u.replace(qe);di(c[Oe],Fe,te(ot,!0,Ce.isLocked))}}return c},Ky=(s,c,i)=>{const u=$r(c[0]),p=zn(c).cols.length+s.row,y=An(u-s.column,E=>E+s.column),T=zt(y,E=>Ut(i,H=>H!==E)).getOr(u-1);return{row:p,column:T}},Qp=(s,c,i)=>we(i,u=>u>=s.column&&u<=$r(c[0])+s.column),Yy=(s,c,i,u,p)=>{const y=Dc(c),T=Ky(s,c,y),E=zn(i).rows,H=Qp(T,E,y);return jy(T,c,E).map(Q=>{const fe={...Q,colDelta:Q.colDelta-H.length},Me=Xd(c,fe,u),Oe=Dc(Me),Te=Qp(T,E,Oe);return Eb(T,Me,E,u,p,Te)})},_i=(s,c,i,u,p)=>{Wy(c,s,p,u.cell);const y=ah(i,c),T=Xd(i,y,u),E=ah(c,T),H=Xd(c,E,u);return Ue(H,(z,Q)=>Bu(z,s,T[Q].cells))},Ab=(s,c,i,u,p)=>{Gy(c,s,p,u.cell);const y=Dc(c),T=Ob(c,i),E={...T,colDelta:T.colDelta-y.length},H=Xd(c,E,u),{cols:z,rows:Q}=zn(H),fe=Dc(H),Me=Ob(i,c),Oe={...Me,colDelta:Me.colDelta+fe.length},Te=Mb(i,u,fe),Fe=Xd(Te,Oe,u);return[...z,...Q.slice(0,s),...Fe,...Q.slice(s,Q.length)]},ef=(s,c,i,u)=>pn(s,p=>u(p,i),c),Yo=(s,c,i,u,p)=>{const{rows:y,cols:T}=zn(s),E=y.slice(0,c),H=y.slice(c),z=ef(y[i],(Q,fe)=>c>0&&c<y.length&&u(vr(y[c-1],fe),vr(y[c],fe))?Kr(y[c],fe):te(p(Q.element,u),!0,Q.isLocked),u,p);return[...T,...E,z,...H]},Fl=(s,c,i,u,p,y,T)=>{if(i==="colgroup"||!u){const E=Kr(s,p);return te(T(E.element,y),!0,!1)}else return Kr(s,c)},Jd=(s,c,i,u,p)=>Ue(s,y=>{const T=c>0&&c<$r(y)&&u(vr(y,c-1),vr(y,c)),E=Fl(y,c,y.section,T,i,u,p);return Ji(y,c,E)}),Xy=(s,c)=>Jt(s,i=>{const u=i.cells,p=et(c,(y,T)=>T>=0&&T<y.length?y.slice(0,T).concat(y.slice(T+1)):y,u);return p.length>0?[be(i.element,p,i.section,i.isNew)]:[]}),Db=(s,c,i)=>{const{rows:u,cols:p}=zn(s);return[...p,...u.slice(0,c),...u.slice(i+1)]},Jy=(s,c,i,u)=>vr(s[c],i)!==void 0&&c>0&&u(vr(s[c-1],i),vr(s[c],i)),Xu=(s,c,i)=>c>0&&i(vr(s,c-1),vr(s,c)),tf=(s,c,i,u)=>Jy(s,c,i,u)||Xu(s[c],i,u),Qd=(s,c)=>Ut(c,Re)&&Bl(s.cells)?wt:(u,p,y)=>!(wo(u.element)==="th"&&c[y]),of=(s,c)=>Ut(c,Re)&&Bl(s)?wt:(u,p,y)=>!(wo(u.element)==="th"&&c[p]),$b=(s,c,i,u)=>{const p=T=>T==="row"?xu(c):Ls(c),y=T=>p(T)?`${T}group`:T;return s?sh(c)?y(i):null:u&&sh(c)?y(i==="row"?"col":"row"):null},Qy=(s,c)=>(i,u,p)=>q.some($b(s,i.element,"col",c[p])),ew=(s,c)=>(i,u)=>q.some($b(s,i.element,"row",c[u])),Rb=(s,c,i)=>te(i(s.element,c),!0,s.isLocked),nf=(s,c,i,u,p,y,T)=>{const E=H=>xo(c,z=>i(H.element,z.element));return Ue(s,(H,z)=>Lu(H,(Q,fe)=>{if(E(Q)){const Me=T(Q,z,fe)?p(Q,i,u):Q;return y(Me,z,fe).each(Oe=>{Wa(Me.element,{scope:q.from(Oe)})}),Me}else return Q}))},lh=(s,c,i)=>Jt(s,(u,p)=>tf(s,p,c,i)?[]:[Kr(u,c)]),tw=(s,c,i)=>{const u=s[c];return Jt(u.cells,(p,y)=>tf(s,c,y,i)?[]:[p])},sf=(s,c,i,u,p)=>{const y=zn(s).rows,T=Jt(c,Q=>lh(y,Q,u)),E=Ue(y,Q=>Bl(Q.cells)),H=of(T,E),z=ew(i,E);return nf(s,T,u,p,Rb,z,H)},rf=(s,c,i,u,p,y,T)=>{const{cols:E,rows:H}=zn(s),z=H[c[0]],Q=Jt(c,pe=>tw(H,pe,p)),fe=Ue(z.cells,(pe,Ce)=>Bl(lh(H,Ce,p))),Me=[...H];pt(c,pe=>{Me[pe]=T.transformRow(H[pe],i)});const Oe=[...E,...Me],Te=Qd(z,fe),Fe=Qy(u,fe);return nf(Oe,Q,p,y,T.transformCell,Fe,Te)},Hb=(s,c,i,u)=>{const p=zn(s).rows,y=Ue(c,T=>Kr(p[T.row],T.column));return nf(s,y,i,u,Rb,q.none,wt)},Ju={generate:s=>{if(!At(s))throw new Error("cases must be an array");if(s.length===0)throw new Error("there must be at least one case");const c=[],i={};return pt(s,(u,p)=>{const y=Pn(u);if(y.length!==1)throw new Error("one and only one name per case");const T=y[0],E=u[T];if(i[T]!==void 0)throw new Error("duplicate key detected:"+T);if(T==="cata")throw new Error("cannot have a case named cata (sorry)");if(!At(E))throw new Error("case arguments must be an array");c.push(T),i[T]=(...H)=>{const z=H.length;if(z!==E.length)throw new Error("Wrong number of arguments to case "+T+". Expected "+E.length+" ("+E+"), got "+z);return{fold:(...fe)=>{if(fe.length!==s.length)throw new Error("Wrong number of arguments to fold. Expected "+s.length+", got "+fe.length);return fe[p].apply(null,H)},match:fe=>{const Me=Pn(fe);if(c.length!==Me.length)throw new Error("Wrong number of arguments to match. Expected: "+c.join(",")+`
Actual: `+Me.join(","));if(!Ut(c,Te=>Wt(Me,Te)))throw new Error("Not all branches were specified when using match. Specified: "+Me.join(", ")+`
Required: `+c.join(", "));return fe[T].apply(null,H)},log:fe=>{console.log(fe,{constructors:c,constructor:T,params:H})}}}}),i}},Ra={...Ju.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},ih=(s,c)=>s.length===0?Ra.none():s.length===1?Ra.only(0):c===0?Ra.left(0,1):c===s.length-1?Ra.right(c-1,c):c>0&&c<s.length-1?Ra.middle(c-1,c,c+1):Ra.none(),Zt=(s,c,i,u,p)=>{const y=s.slice(0),T=ih(s,c),E=X(Ue(y,X(0))),H=Me=>u.singleColumnWidth(y[Me],i),z=(Me,Oe)=>p.calcLeftEdgeDeltas(y,Me,Oe,i,u.minCellWidth(),u.isRelative),Q=(Me,Oe,Te)=>p.calcMiddleDeltas(y,Me,Oe,Te,i,u.minCellWidth(),u.isRelative),fe=(Me,Oe)=>p.calcRightEdgeDeltas(y,Me,Oe,i,u.minCellWidth(),u.isRelative);return T.fold(E,H,z,Q,fe)},Ic=(s,c,i)=>{let u=0;for(let p=s;p<c;p++)u+=i[p]!==void 0?i[p]:0;return u},Qu=(s,c)=>{const i=Dt.justCells(s);return Ue(i,u=>{const p=Ic(u.column,u.column+u.colspan,c);return{element:u.element,width:p,colspan:u.colspan}})},af=(s,c)=>{const i=Dt.justColumns(s);return Ue(i,(u,p)=>({element:u.element,width:c[p],colspan:u.colspan}))},Xo=(s,c)=>Ue(s.all,(i,u)=>({element:i.element,height:c[u]})),Ib=s=>et(s,(c,i)=>c+i,0),Bb=(s,c)=>Dt.hasColumns(s)?af(s,c):Qu(s,c),_s=(s,c,i)=>{const u=Bb(s,c);pt(u,p=>{i.setElementWidth(p.element,p.width)})},Mi=(s,c,i,u,p)=>{const y=Dt.fromTable(s),T=p.getCellDelta(c),E=p.getWidths(y,p),H=i===y.grid.columns-1,z=u.clampTableDelta(E,i,T,p.minCellWidth(),H),Q=Zt(E,i,z,p,u),fe=Ue(Q,(Me,Oe)=>Me+E[Oe]);_s(y,fe,p),u.resizeTable(p.adjustTableWidth,z,H)},Lb=(s,c,i)=>{const u=Dt.fromTable(s),p=Vs(u,s),y=Ue(p,(H,z)=>i===z?Math.max(c+H,Zi()):H),T=Xo(u,y);pt(T,H=>{rn(H.element,H.height)}),pt(Dt.justCells(u),H=>{ca(H.element)});const E=Ib(y);rn(s,E)},ow=(s,c,i,u,p)=>{const y=Dt.generate(c),T=u.getWidths(y,u),E=u.pixelWidth(),{newSizes:H,delta:z}=p.calcRedestributedWidths(T,E,i.pixelDelta,u.isRelative);_s(y,H,u),u.adjustTableWidth(z)},nw=(s,c,i,u)=>{const p=Dt.generate(c),y=u.getWidths(p,u);_s(p,y,u)},Ei=s=>ue(s,(i,u)=>xo(i,y=>y.column===u.column)?i:i.concat([u]),[]).sort((i,u)=>i.column-u.column),uh=Tn("col"),dh=Tn("colgroup"),mh=s=>wo(s)==="tr"||dh(s),Fb=s=>{const c=Vc(s,"colspan",1),i=Vc(s,"rowspan",1);return{element:s,colspan:c,rowspan:i}},Pb=(s,c=Fb)=>{const i=E=>uh(E.element)?s.col(E):s.cell(E),u=E=>dh(E.element)?s.colgroup(E):s.row(E),p=E=>{if(mh(E))return u({element:E});{const H=E,z=i(c(H));return y=q.some({item:H,replacement:z}),z}};let y=q.none();return{getOrInit:(E,H)=>y.fold(()=>p(E),z=>H(E,z.item)?z.replacement:p(E))}},Vb=s=>c=>{const i=[],u=(T,E)=>zt(i,H=>E(H.item,T)),p=T=>{const E=s==="td"?{scope:null}:{},H=c.replace(T,s,E);return i.push({item:T,sub:H}),H};return{replaceOrInit:(T,E)=>{if(mh(T)||uh(T))return T;{const H=T;return u(H,E).fold(()=>p(H),z=>E(T,z.item)?z.sub:p(H))}}}},lf=s=>V(s,"scope").map(c=>c.substr(0,3)),In={modification:Pb,transform:Vb,merging:s=>({unmerge:u=>{const p=lf(u);return p.each(y=>on(u,"scope",y)),()=>{const y=s.cell({element:u,colspan:1,rowspan:1});return hr(y,"width"),hr(u,"width"),p.each(T=>on(y,"scope",T)),y}},merge:u=>{const p=()=>{const y=Zo(Ue(u,lf));if(y.length===0)return q.none();{const T=y[0],E=["row","col"];return xo(y,z=>z!==T&&Wt(E,z))?q.none():q.from(T)}};return hr(u[0],"width"),p().fold(()=>F(u[0],"scope"),y=>on(u[0],"scope",y+"group")),X(u[0])}})},sw=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],sr=(s,c)=>{const i=s.property().name(c);return Wt(["ol","ul"],i)},rw=(s,c)=>{const i=s.property().name(c);return Wt(sw,i)},au=(s,c)=>Wt(["br","img","hr","input"],s.property().name(c)),gh=Hl(),hh=s=>rw(gh,s),Nb=s=>sr(gh,s),uf=s=>au(gh,s),df=s=>{const c=Tn("br"),i=H=>Ut(H,z=>c(z)||Ys(z)&&Bo(z).trim().length===0),u=H=>wo(H)==="li"||No(H,Nb).isSome(),p=H=>dc(H).map(z=>hh(z)?!0:uf(z)?wo(z)!=="img":!1).getOr(!1),y=H=>Qn(H).bind(z=>{const Q=p(z);return Xn(z).map(fe=>Q===!0||u(fe)||c(z)||hh(fe)&&!Kt(H,fe)?[]:[U.fromTag("br")])}).getOr([]),E=(()=>{const H=Jt(s,z=>{const Q=Co(z);return i(Q)?[]:Q.concat(y(z))});return H.length===0?[U.fromTag("br")]:H})();ks(s[0]),Nn(s[0],E)},mf=s=>Hc(s,!0),zb=s=>{Ja(s).length===0&&On(s)},ph=(s,c)=>({grid:s,cursor:c}),as=s=>tn(s,c=>tn(c.cells,i=>{const u=i.element;return vd(mf(u),u)})),ls=(s,c,i)=>{var u,p;const y=zn(s).rows;return q.from((p=(u=y[c])===null||u===void 0?void 0:u.cells[i])===null||p===void 0?void 0:p.element).filter(mf).orThunk(()=>as(y))},Fo=(s,c,i)=>{const u=ls(s,c,i);return ph(s,u)},vs=s=>ue(s,(i,u)=>xo(i,y=>y.row===u.row)?i:i.concat([u]),[]).sort((i,u)=>i.row-u.row),Ms=(s,c,i,u)=>{const p=c[0].row,y=vs(c),T=et(y,(E,H)=>({grid:Yo(E.grid,p,H.row+E.delta,i,u.getOrInit),delta:E.delta+1}),{grid:s,delta:0}).grid;return Fo(T,p,c[0].column)},Wn=(s,c,i,u)=>{const p=vs(c),y=p[p.length-1],T=y.row+y.rowspan,E=et(p,(H,z)=>Yo(H,T,z.row,i,u.getOrInit),s);return Fo(E,T,c[0].column)},gf=(s,c,i,u)=>{const p=c.details,y=Ei(p),T=y[0].column,E=et(y,(H,z)=>({grid:Jd(H.grid,T,z.column+H.delta,i,u.getOrInit),delta:H.delta+1}),{grid:s,delta:0}).grid;return Fo(E,p[0].row,T)},hf=(s,c,i,u)=>{const p=c.details,y=p[p.length-1],T=y.column+y.colspan,E=Ei(p),H=et(E,(z,Q)=>Jd(z,T,Q.column,i,u.getOrInit),s);return Fo(H,p[0].row,T)},Zb=(s,c,i,u)=>{const p=Ei(c),y=Ue(p,E=>E.column),T=sf(s,y,!0,i,u.replaceOrInit);return Fo(T,c[0].row,c[0].column)},Ub=(s,c,i,u)=>{const p=Hb(s,c,i,u.replaceOrInit);return Fo(p,c[0].row,c[0].column)},Wb=(s,c,i,u)=>{const p=Ei(c),y=Ue(p,E=>E.column),T=sf(s,y,!1,i,u.replaceOrInit);return Fo(T,c[0].row,c[0].column)},Gb=(s,c,i,u)=>{const p=Hb(s,c,i,u.replaceOrInit);return Fo(p,c[0].row,c[0].column)},Qm=(s,c)=>(i,u,p,y,T)=>{const E=vs(u),H=Ue(E,Q=>Q.row),z=rf(i,H,s,c,p,y.replaceOrInit,T);return Fo(z,u[0].row,u[0].column)},pf=Qm("thead",!0),cw=Qm("tbody",!1),H3=Qm("tfoot",!1),aw=(s,c,i,u)=>{const p=Ei(c.details),y=Xy(s,Ue(p,E=>E.column)),T=y.length>0?y[0].cells.length-1:0;return Fo(y,p[0].row,Math.min(p[0].column,T))},lw=(s,c,i,u)=>{const p=vs(c),y=Db(s,p[0].row,p[p.length-1].row),T=Math.max(zn(y).rows.length-1,0);return Fo(y,Math.min(c[0].row,T),c[0].column)},iw=(s,c,i,u)=>{const p=c.cells;df(p);const y=Zy(s,c.bounds,i,u.merge(p));return ph(y,q.from(p[0]))},ff=(s,c,i,u)=>{const y=et(c,(T,E)=>Cb(T,E,i,u.unmerge(E)),s);return ph(y,q.from(c[0]))},uw=(s,c,i,u)=>{const y=((H,z)=>{const Q=Dt.fromTable(H);return Yd(Q,z,!0)})(c.clipboard,c.generators),T=Jc(c.row,c.column);return Yy(T,s,y,c.generators,i).fold(()=>ph(s,q.some(c.element)),H=>Fo(H,c.row,c.column))},fh=(s,c,i)=>{const u=Ou(s,i.section),p=Dt.generate(u);return Yd(p,c,!0)},dw=(s,c,i,u)=>{const p=zn(s).rows,y=c.cells[0].column,T=p[c.cells[0].row],E=fh(c.clipboard,c.generators,T),H=_i(y,s,E,c.generators,i);return Fo(H,c.cells[0].row,c.cells[0].column)},mw=(s,c,i,u)=>{const p=zn(s).rows,y=c.cells[c.cells.length-1].column+c.cells[c.cells.length-1].colspan,T=p[c.cells[0].row],E=fh(c.clipboard,c.generators,T),H=_i(y,s,E,c.generators,i);return Fo(H,c.cells[0].row,y)},jb=(s,c,i,u)=>{const p=zn(s).rows,y=c.cells[0].row,T=p[y],E=fh(c.clipboard,c.generators,T),H=Ab(y,s,E,c.generators,i);return Fo(H,c.cells[0].row,c.cells[0].column)},xe=(s,c,i,u)=>{const p=zn(s).rows,y=c.cells[c.cells.length-1].row+c.cells[c.cells.length-1].rowspan,T=p[c.cells[0].row],E=fh(c.clipboard,c.generators,T),H=Ab(y,s,E,c.generators,i);return Fo(H,y,c.cells[0].column)},gw=(s,c)=>{const i=Dt.fromTable(s);return ki(i,c).bind(p=>{const y=p[p.length-1],T=p[0].column,E=y.column+y.colspan,H=Ct(Ue(i.all,z=>we(z.cells,Q=>Q.column>=T&&Q.column<E)));return qp(H)}).getOr("")},Us=(s,c)=>{const i=Dt.fromTable(s);return ki(i,c).bind(qp).getOr("")},hw=(s,c)=>{const i=Dt.fromTable(s);return ki(i,c).bind(p=>{const y=p[p.length-1],T=p[0].row,E=y.row+y.rowspan,H=i.all.slice(T,E);return $y(H)}).getOr("")},bh=(s,c,i,u)=>nw(s,c,i,u.sizing),bf=(s,c,i,u)=>ow(s,c,i,u.sizing,u.resize),yc=(s,c)=>xo(c,i=>i.column===0&&i.isLocked),pw=(s,c)=>xo(c,i=>i.column+i.colspan>=s.grid.columns&&i.isLocked),qb=(s,c)=>{const i=hi(s),u=Ei(c);return ue(u,(p,y)=>{const E=i[y.column].map(St).getOr(0);return p+E},0)},da=s=>(c,i)=>ki(c,i).filter(u=>!(s?yc:pw)(c,u)).map(u=>({details:u,pixelDelta:qb(c,u)})),vh=(s,c)=>Oi(s,c).map(i=>({details:i,pixelDelta:-qb(s,i)})),em=s=>(c,i)=>Jp(c,i).filter(u=>!(s?yc:pw)(c,u.cells)),Ha=In.transform("th"),rr=In.transform("td"),vf=zs(Ms,ki,Ae,Ae,In.modification),Ia=zs(Wn,ki,Ae,Ae,In.modification),fw=zs(gf,da(!0),bf,Ae,In.modification),Kb=zs(hf,da(!1),bf,Ae,In.modification),yf=zs(aw,vh,bf,zb,In.modification),Yb=zs(lw,ki,Ae,zb,In.modification),Xb=zs(Zb,Oi,Ae,Ae,Ha),wf=zs(Wb,Oi,Ae,Ae,rr),bw=zs(pf,Oi,Ae,Ae,Ha),Jb=zs(cw,Oi,Ae,Ae,rr),vw=zs(H3,Oi,Ae,Ae,rr),yw=zs(Ub,Oi,Ae,Ae,Ha),ww=zs(Gb,Oi,Ae,Ae,rr),Sw=zs(iw,Ny,bh,Ae,In.merging),xw=zs(ff,zy,bh,Ae,In.merging),Sf=zs(uw,wb,bh,Ae,In.modification),Cw=zs(dw,em(!0),Ae,Ae,In.modification),Qb=zs(mw,em(!1),Ae,Ae,In.modification),Tw=zs(jb,Jp,Ae,Ae,In.modification),yh=zs(xe,Jp,Ae,Ae,In.modification),kw=gw,Ow=Us,_w=hw,e0=(s,c)=>s.dispatch("NewRow",{node:c}),t0=(s,c)=>s.dispatch("NewCell",{node:c}),Ai=(s,c,i)=>{s.dispatch("TableModified",{...i,table:c})},Mw=(s,c,i,u,p)=>{s.dispatch("TableSelectionChange",{cells:c,start:i,finish:u,otherCells:p})},tm=s=>{s.dispatch("TableSelectionClear")},Wo=(s,c,i,u,p)=>{s.dispatch("ObjectResizeStart",{target:c,width:i,height:u,origin:p})},o0=(s,c,i,u,p)=>{s.dispatch("ObjectResized",{target:c,width:i,height:u,origin:p})},cr={structure:!1,style:!0},ys={structure:!0,style:!1},n0={structure:!0,style:!0},xf=(s,c)=>ru(s)?b.percentageSize(c):Al(s)?b.pixelSize(c):b.getTableSize(c),wh=(s,c,i)=>{const u=rc=>wo($l(rc))==="table",p=rc=>!u(s)||nh(rc).rows>1,y=rc=>!u(s)||nh(rc).columns>1,T=Bn(s),E=su(s)?Ae:Ey,H=rc=>{switch(wi(s)){case"section":return Ym.section();case"sectionCells":return Ym.sectionCells();case"cells":return Ym.cells();default:return Ym.getTableSectionType(rc,"section")}},z=(rc,v1)=>v1.cursor.fold(()=>{const gu=Ja(rc);return uo(gu).filter(qo).map(dl=>{i.clearSelectedCells(rc.dom);const Sr=s.dom.createRng();return Sr.selectNode(dl.dom),s.selection.setRng(Sr),on(dl,"data-mce-selected","1"),Sr})},gu=>{const dl=My(gu),Sr=s.dom.createRng();return Sr.setStart(dl.element.dom,dl.offset),Sr.setEnd(dl.element.dom,dl.offset),s.selection.setRng(Sr),i.clearSelectedCells(rc.dom),q.some(Sr)}),Q=(rc,v1,gu,dl)=>(Sr,Tv,kv=!1)=>{Rl(Sr);const Cx=U.fromDom(s.getDoc()),Tx=yi(gu,Cx,T),kx={sizing:xf(s,Sr),resize:su(s)?fb():jp(),section:H(Sr)};return v1(Sr)?rc(Sr,Tv,Tx,kx).bind(y1=>{c.refresh(Sr.dom),pt(y1.newRows,vm=>{e0(s,vm.dom)}),pt(y1.newCells,vm=>{t0(s,vm.dom)});const Ox=z(Sr,y1);return qo(Sr)&&(Rl(Sr),kv||Ai(s,Sr.dom,dl)),Ox.map(vm=>({rng:vm,effect:dl}))}):q.none()},fe=Q(Yb,p,Ae,ys),Me=Q(yf,y,Ae,ys),Oe=Q(vf,wt,Ae,ys),Te=Q(Ia,wt,Ae,ys),Fe=Q(fw,wt,E,ys),pe=Q(Kb,wt,E,ys),Ce=Q(Sw,wt,Ae,ys),qe=Q(xw,wt,Ae,ys),ot=Q(Cw,wt,Ae,ys),so=Q(Qb,wt,Ae,ys),an=Q(Tw,wt,Ae,ys),ln=Q(yh,wt,Ae,ys),lr=Q(Sf,wt,Ae,n0),ga=Q(yw,wt,Ae,ys),mu=Q(ww,wt,Ae,ys),hg=Q(Xb,wt,Ae,ys),qh=Q(wf,wt,Ae,ys),Mo=Q(bw,wt,Ae,ys),nc=Q(Jb,wt,Ae,ys),sc=Q(vw,wt,Ae,ys);return{deleteRow:fe,deleteColumn:Me,insertRowsBefore:Oe,insertRowsAfter:Te,insertColumnsBefore:Fe,insertColumnsAfter:pe,mergeCells:Ce,unmergeCells:qe,pasteColsBefore:ot,pasteColsAfter:so,pasteRowsBefore:an,pasteRowsAfter:ln,pasteCells:lr,makeCellsHeader:ga,unmakeCellsHeader:mu,makeColumnsHeader:hg,unmakeColumnsHeader:qh,makeRowsHeader:Mo,makeRowsBody:nc,makeRowsFooter:sc,getTableRowType:_w,getTableCellType:Ow,getTableColType:kw}},s0=(s,c,i)=>{const u=Vc(s,c,1);i===1||u<=1?F(s,c):on(s,c,Math.min(i,u))},r0=(s,c)=>i=>{const u=i.column+i.colspan-1,p=i.column;return u>=s&&p<c},Ew=(s,c,i)=>{if(Dt.hasColumns(s)){const u=we(Dt.justColumns(s),r0(c,i)),p=Ue(u,T=>{const E=Ur(T.element);return s0(E,"span",i-c),E}),y=U.fromTag("colgroup");return Nn(y,p),[y]}else return[]},Aw=(s,c,i)=>Ue(s.all,u=>{const p=we(u.cells,r0(c,i)),y=Ue(p,E=>{const H=Ur(E.element);return s0(H,"colspan",i-c),H}),T=U.fromTag("tr");return Nn(T,y),T}),Dw=(s,c)=>{const i=Dt.fromTable(s);return Oi(i,c).map(p=>{const y=p[p.length-1],T=p[0].column,E=y.column+y.colspan,H=Ew(i,T,E),z=Aw(i,T,E);return[...H,...z]})},$w=(s,c,i)=>{const u=Dt.fromTable(s);return ki(u,c).bind(y=>{const T=Yd(u,i,!1),H=zn(T).rows.slice(y[0].row,y[y.length-1].row+y[y.length-1].rowspan),z=Jt(H,fe=>{const Me=we(fe.cells,Oe=>!Oe.isLocked);return Me.length>0?[{...fe,cells:Me}]:[]}),Q=Ll(z);return vd(Q.length>0,Q)}).map(y=>vc(y))},eg=Ju.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),c0=(s,c,i)=>{const u=i.substring(0,i.length-s.length),p=parseFloat(u);return u===p.toString()?c(p):eg.invalid(i)},ed={...eg,from:s=>Gr(s,"%")?c0("%",eg.percent,s):Gr(s,"px")?c0("px",eg.pixels,s):eg.invalid(s)},Rw=(s,c)=>Ue(s,i=>ed.from(i).fold(()=>i,p=>p/c*100+"%",p=>p+"%")),Hw=(s,c,i)=>{const u=i/c;return Ue(s,p=>ed.from(p).fold(()=>p,T=>T*u+"px",T=>T/100*i+"px"))},Iw=(s,c)=>{const i=s.fold(()=>X(""),u=>{const p=u/c;return X(p+"px")},()=>{const u=100/c;return X(u+"%")});return An(c,i)},Bw=(s,c,i)=>s.fold(()=>c,u=>Hw(c,i,u),u=>Rw(c,i)),Cf=(s,c,i)=>{const u=ed.from(i),p=Ut(s,y=>y==="0px")?Iw(u,s.length):Bw(u,s,c);return Lw(p)},Tf=(s,c)=>s.length===0?c:et(s,(i,u)=>ed.from(u).fold(X(0),Re,Re)+i,0),om=(s,c)=>{const i=Math.floor(s);return{value:i+c,remainder:s-i}},a0=(s,c)=>ed.from(s).fold(X(s),i=>i+c+"px",i=>i+c+"%"),Lw=s=>{if(s.length===0)return s;const c=et(s,(u,p)=>{const y=ed.from(p).fold(()=>({value:p,remainder:0}),T=>om(T,"px"),T=>({value:T+"%",remainder:0}));return{output:[y.value].concat(u.output),remainder:u.remainder+y.remainder}},{output:[],remainder:0}),i=c.output;return i.slice(0,i.length-1).concat([a0(i[i.length-1],Math.round(c.remainder))])},Fw=ed.from,Pw=(s,c,i)=>{pt(c,u=>{const p=s.slice(u.column,u.colspan+u.column),y=Tf(p,Ka());hs(u.element,"width",y+i)})},Ba=(s,c,i)=>{pt(c,(u,p)=>{const y=Tf([s[p]],Ka());hs(u.element,"width",y+i)})},Sh=(s,c,i)=>{pt(i,u=>{hr(u.element,"height")}),pt(c,(u,p)=>{hs(u.element,"height",s[p])})},xh=s=>Fw(s).fold(X("px"),X("px"),X("%")),tg=(s,c,i)=>{const u=Dt.fromTable(s),p=u.all,y=Dt.justCells(u),T=Dt.justColumns(u);c.each(E=>{const H=xh(E),z=zc(s),Q=Rc(u,s),fe=Cf(Q,z,E);Dt.hasColumns(u)?Ba(fe,T,H):Pw(fe,y,H),hs(s,"width",E)}),i.each(E=>{const H=S(s),z=Un(u,s),Q=Cf(z,H,E);Sh(Q,p,y),hs(s,"height",E)})},l0=Zm,Pl=hc,Ch=no,og=s=>{F(s,"width"),F(s,"height")},La=s=>{const c=al(s);tg(s,q.some(c),q.none()),og(s)},nm=s=>{const c=$c(s);tg(s,q.some(c),q.none()),og(s)},Vw=s=>{const c=Op(s);tg(s,q.none(),q.some(c)),og(s)},i0=s=>{hr(s,"width");const c=Ec(s),i=c.length>0?c:Ja(s);pt(i,u=>{hr(u,"width"),og(u)}),og(s)},Nw={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},zw=()=>U.fromTag("th"),u0=()=>U.fromTag("td"),Zw=()=>U.fromTag("col"),Uw=(s,c,i,u)=>{const p=U.fromTag("tr");for(let y=0;y<s;y++){const T=u<c||y<i?zw():u0();y<i&&on(T,"scope","row"),u<c&&on(T,"scope","col"),bo(T,U.fromTag("br")),bo(p,T)}return p},d0=s=>{const c=U.fromTag("colgroup");return An(s,()=>bo(c,Zw())),c},m0=(s,c,i,u)=>An(s,p=>Uw(c,i,u,p)),g0=(s,c,i,u,p,y=Nw)=>{const T=U.fromTag("table"),E=p!=="cells";si(T,y.styles),Xs(T,y.attributes),y.colGroups&&bo(T,d0(c));const H=Math.min(s,i);if(E&&i>0){const Oe=U.fromTag("thead");bo(T,Oe);const Fe=m0(i,c,p==="sectionCells"?H:0,u);Nn(Oe,Fe)}const z=U.fromTag("tbody");bo(T,z);const Q=E?s-H:s,Me=m0(Q,c,E?0:i,u);return Nn(z,Me),T},Ww=s=>s.dom.innerHTML,Gw=s=>{const c=U.fromTag("div"),i=U.fromDom(s.dom.cloneNode(!0));return bo(c,i),Ww(c)},jw=(s,c)=>{s.selection.select(c.dom,!0),s.selection.collapse(!0)},h0=(s,c)=>{Is(c,"td,th").each(Qo(jw,s))},kf=(s,c)=>{pt(Ao(c,"tr"),i=>{e0(s,i.dom),pt(Ao(i,"th,td"),u=>{t0(s,u.dom)})})},p0=s=>dn(s)&&s.indexOf("%")!==-1,qw=(s,c,i,u,p)=>{const y=ay(s),T={styles:y,attributes:cy(s),colGroups:_p(s)};return s.undoManager.ignore(()=>{const E=g0(i,c,p,u,wi(s),T);on(E,"data-mce-id","__mce");const H=Gw(E);s.insertContent(H),s.addVisual()}),Is($l(s),'table[data-mce-id="__mce"]').map(E=>(Al(s)?nm(E):Gm(s)?i0(E):(ru(s)||p0(y.width))&&La(E),Rl(E),F(E,"data-mce-id"),kf(s,E),h0(s,E),E.dom)).getOrNull()},Kw=(s,c,i,u={})=>{const p=y=>oo(y)&&y>0;if(p(c)&&p(i)){const y=u.headerRows||0,T=u.headerColumns||0;return qw(s,i,c,T,y)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Th=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const f0="x-tinymce/dom-table-",b0=f0+"rows",sm=f0+"columns",kh=s=>{const c=Th.FakeClipboardItem(s);Th.write([c])},Of=s=>{var c;const i=(c=Th.read())!==null&&c!==void 0?c:[];return tn(i,u=>q.from(u.getType(s)))},v0=s=>{Of(s).isSome()&&Th.clear()},y0=s=>{s.fold(Yw,c=>kh({[b0]:c}))},w0=()=>Of(b0),Yw=()=>v0(b0),S0=s=>{s.fold(Xw,c=>kh({[sm]:c}))},ng=()=>Of(sm),Xw=()=>v0(sm),_f=s=>xy(Zd(s),Wu(s)).filter(Si),Jw=s=>th(Zd(s),Wu(s)).filter(Si),Qw=(s,c)=>{const i=Wu(s),u=()=>_f(s).each(pe=>{Fs(pe,i).filter(I(i)).each(Ce=>{const qe=U.fromText("");if(Rs(Ce,qe),On(Ce),s.dom.isEmpty(s.getBody()))s.setContent(""),s.selection.setCursorLocation();else{const ot=s.dom.createRng();ot.setStart(qe.dom,0),ot.setEnd(qe.dom,0),s.selection.setRng(ot),s.nodeChanged()}})}),p=pe=>_f(s).each(Ce=>{Gm(s)||Al(s)||ru(s)||Fs(Ce,i).each(ot=>{pe==="relative"&&!l0(ot)?La(ot):pe==="fixed"&&!Pl(ot)?nm(ot):pe==="responsive"&&!Ch(ot)&&i0(ot),Rl(ot),Ai(s,ot.dom,ys)})}),y=pe=>Fs(pe,i),T=pe=>Jw(s).bind(Ce=>y(Ce).map(qe=>pe(qe,Ce))),E=(pe,Ce)=>{T(qe=>{s.formatter.toggle("tableclass",{value:Ce},qe.dom),Ai(s,qe.dom,cr)})},H=(pe,Ce)=>{T(qe=>{const ot=la(s),an=Ut(ot,ln=>s.formatter.match("tablecellclass",{value:Ce},ln.dom))?s.formatter.remove:s.formatter.apply;pt(ot,ln=>an("tablecellclass",{value:Ce},ln.dom)),Ai(s,qe.dom,cr)})},z=()=>{_f(s).each(pe=>{Fs(pe,i).each(Ce=>{jt(Ce,"caption").fold(()=>{const qe=U.fromTag("caption");bo(qe,U.fromText("Caption")),Ts(Ce,qe,0),s.selection.setCursorLocation(qe.dom,0)},qe=>{Tn("caption")(pe)&&Kn("td",Ce).each(ot=>s.selection.setCursorLocation(ot.dom,0)),On(qe)}),Ai(s,Ce.dom,ys)})})},Q=pe=>{s.focus()},fe=(pe,Ce=!1)=>T((qe,ot)=>{const so=jd(la(s),qe,ot);pe(qe,so,Ce).each(Q)}),Me=()=>T((pe,Ce)=>{const qe=jd(la(s),pe,Ce),ot=yi(Ae,U.fromDom(s.getDoc()),q.none());return $w(pe,qe,ot)}),Oe=()=>T((pe,Ce)=>{const qe=jd(la(s),pe,Ce);return Dw(pe,qe)}),Te=(pe,Ce)=>Ce().each(qe=>{const ot=Ue(qe,so=>Ur(so));T((so,an)=>{const ln=tc(U.fromDom(s.getDoc())),lr=Sy(la(s),an,ot,ln);pe(so,lr).each(Q)})}),Fe=pe=>(Ce,qe)=>lc(qe,"type").each(ot=>{fe(pe(ot),qe.no_events)});mo({mceTableSplitCells:()=>fe(c.unmergeCells),mceTableMergeCells:()=>fe(c.mergeCells),mceTableInsertRowBefore:()=>fe(c.insertRowsBefore),mceTableInsertRowAfter:()=>fe(c.insertRowsAfter),mceTableInsertColBefore:()=>fe(c.insertColumnsBefore),mceTableInsertColAfter:()=>fe(c.insertColumnsAfter),mceTableDeleteCol:()=>fe(c.deleteColumn),mceTableDeleteRow:()=>fe(c.deleteRow),mceTableCutCol:()=>Oe().each(pe=>{S0(pe),fe(c.deleteColumn)}),mceTableCutRow:()=>Me().each(pe=>{y0(pe),fe(c.deleteRow)}),mceTableCopyCol:()=>Oe().each(pe=>S0(pe)),mceTableCopyRow:()=>Me().each(pe=>y0(pe)),mceTablePasteColBefore:()=>Te(c.pasteColsBefore,ng),mceTablePasteColAfter:()=>Te(c.pasteColsAfter,ng),mceTablePasteRowBefore:()=>Te(c.pasteRowsBefore,w0),mceTablePasteRowAfter:()=>Te(c.pasteRowsAfter,w0),mceTableDelete:u,mceTableCellToggleClass:H,mceTableToggleClass:E,mceTableToggleCaption:z,mceTableSizingMode:(pe,Ce)=>p(Ce),mceTableCellType:Fe(pe=>pe==="th"?c.makeCellsHeader:c.unmakeCellsHeader),mceTableColType:Fe(pe=>pe==="th"?c.makeColumnsHeader:c.unmakeColumnsHeader),mceTableRowType:Fe(pe=>{switch(pe){case"header":return c.makeRowsHeader;case"footer":return c.makeRowsFooter;default:return c.makeRowsBody}})},(pe,Ce)=>s.addCommand(Ce,pe)),s.addCommand("mceInsertTable",(pe,Ce)=>{Kw(s,Ce.rows,Ce.columns,Ce.options)}),s.addCommand("mceTableApplyCellStyle",(pe,Ce)=>{const qe=an=>"tablecell"+an.toLowerCase().replace("-","");if(!Xe(Ce))return;const ot=we(la(s),Si);if(ot.length===0)return;const so=Vr(Ce,(an,ln)=>s.formatter.has(qe(ln))&&dn(an));Tc(so)||(mo(so,(an,ln)=>{const lr=qe(ln);pt(ot,ga=>{an===""?s.formatter.remove(lr,{value:null},ga.dom,!0):s.formatter.apply(lr,{value:an},ga.dom)})}),y(ot[0]).each(an=>Ai(s,an.dom,cr)))})},eS=(s,c)=>{const i=Wu(s),u=p=>th(Zd(s)).bind(y=>Fs(y,i).map(T=>{const E=jd(la(s),T,y);return p(T,E)})).getOr("");mo({mceTableRowType:()=>u(c.getTableRowType),mceTableCellType:()=>u(c.getTableCellType),mceTableColType:()=>u(c.getTableColType)},(p,y)=>s.addQueryValueHandler(y,p))},Mf=Ju.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),tS=(s,c,i,u)=>s.fold(c,i,u),sg=s=>s.fold(Re,Re,Re),oS=Mf.before,nS=Mf.on,x0=Mf.after,Br={before:oS,on:nS,after:x0,cata:tS,getStart:sg},rm={create:(s,c)=>({selection:s,kill:c})},rS=(s,c)=>{const i=s.document.createRange();return i.selectNode(c.dom),i},rg=(s,c)=>{const i=s.document.createRange();return C0(i,c),i},C0=(s,c)=>s.selectNodeContents(c.dom),cS=(s,c)=>{c.fold(i=>{s.setStartBefore(i.dom)},(i,u)=>{s.setStart(i.dom,u)},i=>{s.setStartAfter(i.dom)})},aS=(s,c)=>{c.fold(i=>{s.setEndBefore(i.dom)},(i,u)=>{s.setEnd(i.dom,u)},i=>{s.setEndAfter(i.dom)})},T0=(s,c,i)=>{const u=s.document.createRange();return cS(u,c),aS(u,i),u},Oh=(s,c,i,u,p)=>{const y=s.document.createRange();return y.setStart(c.dom,i),y.setEnd(u.dom,p),y},k0=s=>({left:s.left,top:s.top,right:s.right,bottom:s.bottom,width:s.width,height:s.height}),oc=s=>{const c=s.getClientRects(),i=c.length>0?c[0]:s.getBoundingClientRect();return i.width>0||i.height>0?q.some(i).map(k0):q.none()},cg=Ju.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),O0=(s,c,i)=>c(U.fromDom(i.startContainer),i.startOffset,U.fromDom(i.endContainer),i.endOffset),lS=(s,c)=>c.match({domRange:i=>({ltr:X(i),rtl:q.none}),relative:(i,u)=>({ltr:Qa(()=>T0(s,i,u)),rtl:Qa(()=>q.some(T0(s,u,i)))}),exact:(i,u,p,y)=>({ltr:Qa(()=>Oh(s,i,u,p,y)),rtl:Qa(()=>q.some(Oh(s,p,y,i,u)))})}),_0=(s,c)=>{const i=c.ltr();return i.collapsed?c.rtl().filter(p=>p.collapsed===!1).map(p=>cg.rtl(U.fromDom(p.endContainer),p.endOffset,U.fromDom(p.startContainer),p.startOffset)).getOrThunk(()=>O0(s,cg.ltr,i)):O0(s,cg.ltr,i)},M0=(s,c)=>{const i=lS(s,c);return _0(s,i)},Ef=(s,c)=>M0(s,c).match({ltr:(u,p,y,T)=>{const E=s.document.createRange();return E.setStart(u.dom,p),E.setEnd(y.dom,T),E},rtl:(u,p,y,T)=>{const E=s.document.createRange();return E.setStart(y.dom,T),E.setEnd(u.dom,p),E}});cg.ltr,cg.rtl;const ag={create:(s,c,i,u)=>({start:s,soffset:c,finish:i,foffset:u})},E0={create:(s,c,i,u)=>({start:Br.on(s,c),finish:Br.on(i,u)})},A0=(s,c)=>{const i=Ef(s,c);return ag.create(U.fromDom(i.startContainer),i.startOffset,U.fromDom(i.endContainer),i.endOffset)},td=E0.create,uS=(s,c,i,u,p,y,T)=>Kt(i,p)&&u===y?q.none():Io(i,"td,th",c).bind(E=>Io(p,"td,th",c).bind(H=>Af(s,c,E,H,T))),Af=(s,c,i,u,p)=>Kt(i,u)?q.none():Jg(i,u,c).bind(y=>{const T=y.boxes.getOr([]);return T.length>1?(p(s,T,y.start,y.finish),q.some(rm.create(q.some(td(i,0,i,Qr(i))),!0))):q.none()}),Df=(s,c,i,u,p)=>{const y=T=>(p.clearBeforeUpdate(i),p.selectRange(i,T.boxes,T.start,T.finish),T.boxes);return fy(u,s,c,p.firstSelectedSelector,p.lastSelectedSelector).map(y)},_h=(s,c)=>({item:s,mode:c}),D0=(s,c,i,u=cm)=>s.property().parent(c).map(p=>_h(p,u)),cm=(s,c,i,u=lu)=>i.sibling(s,c).map(p=>_h(p,u)),lu=(s,c,i,u=lu)=>{const p=s.property().children(c);return i.first(p).map(T=>_h(T,u))},$0=[{current:D0,next:cm,fallback:q.none()},{current:cm,next:lu,fallback:q.some(D0)},{current:lu,next:lu,fallback:q.some(cm)}],$f=(s,c,i,u,p=$0)=>zt(p,T=>T.current===i).bind(T=>T.current(s,c,u,T.next).orThunk(()=>T.fallback.bind(E=>$f(s,c,E,u)))),Rf={left:()=>({sibling:(i,u)=>i.query().prevSibling(u),first:i=>i.length>0?q.some(i[i.length-1]):q.none()}),right:()=>({sibling:(i,u)=>i.query().nextSibling(u),first:i=>i.length>0?q.some(i[0]):q.none()})},Mh=(s,c,i,u,p,y)=>$f(s,c,u,p).bind(E=>y(E.item)?q.none():i(E.item)?q.some(E.item):Mh(s,E.item,i,E.mode,p,y)),R0=(s,c,i,u)=>Mh(s,c,i,cm,Rf.left(),u),H0=(s,c,i,u)=>Mh(s,c,i,cm,Rf.right(),u),Hf=s=>c=>s.property().children(c).length===0,I0=(s,c,i)=>B0(s,c,Hf(s),i),gS=(s,c,i)=>L0(s,c,Hf(s),i),B0=R0,L0=H0,Eh=Hl(),F0=(s,c)=>I0(Eh,s,c),P0=(s,c)=>gS(Eh,s,c),hS=(s,c,i)=>B0(Eh,s,c,i),pS=(s,c,i)=>L0(Eh,s,c,i),fS=(s,c,i)=>No(s,c,i).isSome(),Ah=Ju.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),V0=(s,c,i)=>{const u=s.getRect(c),p=s.getRect(i);return p.right>u.left&&p.left<u.right},B3=s=>Io(s,"tr"),lg={...Ah,verify:(s,c,i,u,p,y,T)=>Io(u,"td,th",T).bind(E=>Io(c,"td,th",T).map(H=>Kt(E,H)?Kt(u,E)&&Qr(E)===p?y(H):Ah.none("in same cell"):Pp(B3,[E,H]).fold(()=>V0(s,H,E)?Ah.success():y(H),z=>y(H)))).getOr(Ah.none("default")),cata:(s,c,i,u,p)=>s.fold(c,i,u,p)},bS=(s,c,i,u)=>({parent:s,children:c,element:i,index:u}),yr=s=>Xn(s).bind(c=>{const i=Co(c);return If(i,s).map(u=>bS(c,i,s,u))}),If=(s,c)=>en(s,Qo(Kt,c)),od=Tn("br"),nd=(s,c,i)=>c(s,i).bind(u=>Ys(u)&&Bo(u).trim().length===0?nd(u,c,i):q.some(u)),N0=(s,c,i)=>i.traverse(c).orThunk(()=>nd(c,i.gather,s)).map(i.relative),Bf=(s,c)=>Qs(s,c).filter(od).orThunk(()=>Qs(s,c-1).filter(od)),z0=(s,c,i,u)=>Bf(c,i).bind(p=>u.traverse(p).fold(()=>nd(p,u.gather,s).map(u.relative),y=>yr(y).map(T=>Br.on(T.parent,T.index)))),vS=(s,c,i,u)=>(od(c)?N0(s,c,u):z0(s,c,i,u)).map(y=>({start:y,finish:y})),yS=s=>lg.cata(s,c=>q.none(),()=>q.none(),c=>q.some(qd(c,0)),c=>q.some(qd(c,Qr(c)))),Dh=(s,c)=>({left:s.left,top:s.top+c,right:s.right,bottom:s.bottom+c}),Vl=(s,c)=>({left:s.left,top:s.top-c,right:s.right,bottom:s.bottom-c}),Lf=(s,c,i)=>({left:s.left+c,top:s.top+i,right:s.right+c,bottom:s.bottom+i}),Z0=s=>s.top,Di=s=>s.bottom,U0=(s,c,i)=>i>=0&&i<Qr(c)?s.getRangedRect(c,i,c,i+1):i>0?s.getRangedRect(c,i-1,c,i):q.none(),am=s=>({left:s.left,top:s.top,right:s.right,bottom:s.bottom}),ig=(s,c)=>q.some(s.getRect(c)),Ff=(s,c,i)=>qn(c)?ig(s,c).map(am):Ys(c)?U0(s,c,i).map(am):q.none(),W0=(s,c)=>qn(c)?ig(s,c).map(am):Ys(c)?s.getRangedRect(c,0,c,Qr(c)).map(am):q.none(),iu=5,G0=100,Nl=Ju.generate([{none:[]},{retry:["caret"]}]),wS=(s,c)=>s.left<c.left||Math.abs(c.right-s.left)<1||s.left>c.right,Pf=(s,c,i)=>er(c,hh).fold(go,u=>W0(s,u).exists(p=>wS(i,p))),j0=(s,c,i,u,p)=>{const y=Dh(p,iu);return Math.abs(i.bottom-u.bottom)<1||i.top>p.bottom?Nl.retry(y):i.top===p.bottom?Nl.retry(Dh(p,1)):Pf(s,c,p)?Nl.retry(Lf(y,iu,0)):Nl.none()},SS={point:Z0,adjuster:(s,c,i,u,p)=>{const y=Vl(p,iu);return Math.abs(i.top-u.top)<1||i.bottom<p.top?Nl.retry(y):i.bottom===p.top?Nl.retry(Vl(p,1)):Pf(s,c,p)?Nl.retry(Lf(y,iu,0)):Nl.none()},move:Vl,gather:F0},xS={point:Di,adjuster:j0,move:Dh,gather:P0},CS=(s,c,i)=>s.elementFromPoint(c,i).filter(u=>wo(u)==="table").isSome(),q0=(s,c,i,u,p)=>Vf(s,c,i,c.move(u,iu),p),Vf=(s,c,i,u,p)=>p===0?q.some(u):CS(s,u.left,c.point(u))?q0(s,c,i,u,p-1):s.situsFromPoint(u.left,c.point(u)).bind(y=>y.start.fold(q.none,T=>W0(s,T).bind(E=>c.adjuster(s,T,E,i,u).fold(q.none,H=>Vf(s,c,i,H,p-1))).orThunk(()=>q.some(u)),q.none)),K0=(s,c,i)=>s.point(c)>i.getInnerHeight()?q.some(s.point(c)-i.getInnerHeight()):s.point(c)<0?q.some(-s.point(c)):q.none(),Y0=(s,c,i)=>{const u=s.move(i,iu),p=Vf(c,s,i,u,G0).getOr(u);return K0(s,p,c).fold(()=>c.situsFromPoint(p.left,s.point(p)),y=>(c.scrollBy(0,y),c.situsFromPoint(p.left,s.point(p)-y)))},X0={tryUp:Qo(Y0,SS),tryDown:Qo(Y0,xS),getJumpSize:X(iu)},TS=20,kS=(s,c,i)=>s.getSelection().bind(u=>vS(c,u.finish,u.foffset,i).fold(()=>q.some(qd(u.finish,u.foffset)),p=>{const y=s.fromSitus(p),T=lg.verify(s,u.finish,u.foffset,y.finish,y.foffset,i.failure,c);return yS(T)})),J0=(s,c,i,u,p,y)=>y===0?q.none():uu(s,c,i,u,p).bind(T=>{const E=s.fromSitus(T),H=lg.verify(s,i,u,E.finish,E.foffset,p.failure,c);return lg.cata(H,()=>q.none(),()=>q.some(T),z=>Kt(i,z)&&u===0?Q0(s,i,u,Vl,p):J0(s,c,z,0,p,y-1),z=>Kt(i,z)&&u===Qr(z)?Q0(s,i,u,Dh,p):J0(s,c,z,Qr(z),p,y-1))}),Q0=(s,c,i,u,p)=>Ff(s,c,i).bind(y=>Vt(s,p,u(y,X0.getJumpSize()))),Vt=(s,c,i)=>{const u=Dd().browser;return u.isChromium()||u.isSafari()||u.isFirefox()?c.retry(s,i):q.none()},uu=(s,c,i,u,p)=>Ff(s,i,u).bind(y=>Vt(s,p,y)),lm=(s,c,i)=>kS(s,c,i).bind(u=>J0(s,c,u.element,u.offset,i,TS).map(s.fromSitus)),Nf=(s,c)=>fS(s,i=>Xn(i).exists(u=>Kt(u,c))),ev=(s,c,i,u,p)=>Io(u,"td,th",c).bind(y=>Io(y,"table",c).bind(T=>Nf(p,T)?lm(s,c,i).bind(E=>Io(E.finish,"td,th",c).map(H=>({start:y,finish:H,range:E}))):q.none())),$h=(s,c,i,u,p,y)=>y(u,c).orThunk(()=>ev(s,c,i,u,p).map(T=>{const E=T.range;return rm.create(q.some(td(E.start,E.soffset,E.finish,E.foffset)),!0)})),OS=(s,c)=>Io(s,"tr",c).bind(i=>Io(i,"table",c).bind(u=>{const p=Ao(u,"tr");return Kt(i,p[0])?hS(u,y=>Qn(y).isSome(),c).map(y=>{const T=Qr(y);return rm.create(q.some(td(y,T,y,T)),!0)}):q.none()})),zf=(s,c)=>Io(s,"tr",c).bind(i=>Io(i,"table",c).bind(u=>{const p=Ao(u,"tr");return Kt(i,p[p.length-1])?pS(u,y=>ou(y).isSome(),c).map(y=>rm.create(q.some(td(y,0,y,0)),!0)):q.none()})),Rh=(s,c,i,u,p,y,T)=>ev(s,i,u,p,y).bind(E=>Af(c,i,E.start,E.finish,T)),Hh=s=>{let c=s;return{get:()=>c,set:p=>{c=p}}},P3=s=>{const c=Hh(q.none()),i=()=>c.get().each(s);return{clear:()=>{i(),c.set(q.none())},isSet:()=>c.get().isSome(),get:()=>c.get(),set:E=>{i(),c.set(q.some(E))}}},Zf=()=>{const s=P3(Ae);return{...s,on:i=>s.get().each(i)}},_S=(s,c)=>Io(s,"td,th",c),MS=s=>ms(s).exists(Hc),V3=(s,c,i,u)=>{const p=Zf(),y=p.clear,T=Q=>{p.on(fe=>{u.clearBeforeUpdate(c),_S(Q.target,i).each(Me=>{Jg(fe,Me,i).each(Oe=>{const Te=Oe.boxes.getOr([]);if(Te.length===1){const Fe=Te[0],pe=Dl(Fe)==="false",Ce=Qc(jm(Q.target),Fe,Kt);pe&&Ce&&(u.selectRange(c,Te,Fe,Fe),s.selectContents(Fe))}else Te.length>1&&(u.selectRange(c,Te,Oe.start,Oe.finish),s.selectContents(Me))})})})};return{clearstate:y,mousedown:Q=>{u.clear(c),_S(Q.target,i).filter(MS).each(p.set)},mouseover:Q=>{T(Q)},mouseup:Q=>{T(Q),y()}}},tv={traverse:dc,gather:P0,relative:Br.before,retry:X0.tryDown,failure:lg.failedDown},Uf={traverse:Pc,gather:F0,relative:Br.before,retry:X0.tryUp,failure:lg.failedUp},im=s=>c=>c===s,Ih=im(38),Wf=im(40),um=s=>s>=37&&s<=40,ov={isBackward:im(37),isForward:im(39)},ES={isBackward:im(39),isForward:im(37)},AS=s=>{const c=s!==void 0?s.dom:document,i=c.body.scrollLeft||c.documentElement.scrollLeft,u=c.body.scrollTop||c.documentElement.scrollTop;return ge(i,u)},DS=(s,c,i)=>{const p=(i!==void 0?i.dom:document).defaultView;p&&p.scrollBy(s,c)},Bh=Ju.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),$S=s=>Bh.exact(s.start,s.soffset,s.finish,s.foffset),RS=s=>s.match({domRange:c=>U.fromDom(c.startContainer),relative:(c,i)=>Br.getStart(c),exact:(c,i,u,p)=>c}),HS=Bh.domRange,IS=Bh.relative,BS=Bh.exact,LS=s=>{const c=RS(s);return Yn(c)},FS=ag.create,dm={domRange:HS,relative:IS,exact:BS,exactFromRange:$S,getWin:LS,range:FS},PS=(s,c,i)=>{var u,p;return q.from((p=(u=s.dom).caretPositionFromPoint)===null||p===void 0?void 0:p.call(u,c,i)).bind(y=>{if(y.offsetNode===null)return q.none();const T=s.dom.createRange();return T.setStart(y.offsetNode,y.offset),T.collapse(),q.some(T)})},VS=(s,c,i)=>{var u,p;return q.from((p=(u=s.dom).caretRangeFromPoint)===null||p===void 0?void 0:p.call(u,c,i))},Ee=document.caretPositionFromPoint?PS:document.caretRangeFromPoint?VS:q.none,Es=(s,c,i)=>{const u=U.fromDom(s.document);return Ee(u,c,i).map(p=>ag.create(U.fromDom(p.startContainer),p.startOffset,U.fromDom(p.endContainer),p.endOffset))},sd=(s,c)=>{const i=wo(s);return i==="input"?Br.after(s):Wt(["br","img"],i)?c===0?Br.before(s):Br.after(s):Br.on(s,c)},Ws=(s,c)=>{const i=s.fold(Br.before,sd,Br.after),u=c.fold(Br.before,sd,Br.after);return dm.relative(i,u)},Fa=(s,c,i,u)=>{const p=sd(s,c),y=sd(i,u);return dm.relative(p,y)},nv=(s,c,i,u)=>{const y=ns(s).dom.createRange();return y.setStart(s.dom,c),y.setEnd(i.dom,u),y},Lh=(s,c,i,u)=>{const p=nv(s,c,i,u),y=Kt(s,i)&&c===u;return p.collapsed&&!y},mm=s=>q.from(s.getSelection()),sv=(s,c)=>{mm(s).each(i=>{i.removeAllRanges(),i.addRange(c)})},Gf=(s,c,i,u,p)=>{const y=Oh(s,c,i,u,p);sv(s,y)},rv=(s,c,i,u,p,y)=>{c.collapse(i.dom,u),c.extend(p.dom,y)},cv=(s,c)=>M0(s,c).match({ltr:(i,u,p,y)=>{Gf(s,i,u,p,y)},rtl:(i,u,p,y)=>{mm(s).each(T=>{if(T.setBaseAndExtent)T.setBaseAndExtent(i.dom,u,p.dom,y);else if(T.extend)try{rv(s,T,i,u,p,y)}catch{Gf(s,p,y,i,u)}else Gf(s,p,y,i,u)})}}),av=(s,c,i,u,p)=>{const y=Fa(c,i,u,p);cv(s,y)},lv=(s,c,i)=>{const u=Ws(c,i);cv(s,u)},jf=s=>{if(s.rangeCount>0){const c=s.getRangeAt(0),i=s.getRangeAt(s.rangeCount-1);return q.some(ag.create(U.fromDom(c.startContainer),c.startOffset,U.fromDom(i.endContainer),i.endOffset))}else return q.none()},NS=s=>{if(s.anchorNode===null||s.focusNode===null)return jf(s);{const c=U.fromDom(s.anchorNode),i=U.fromDom(s.focusNode);return Lh(c,s.anchorOffset,i,s.focusOffset)?q.some(ag.create(c,s.anchorOffset,i,s.focusOffset)):jf(s)}},qf=(s,c,i=!0)=>{const p=(i?rg:rS)(s,c);sv(s,p)},Fh=s=>mm(s).filter(c=>c.rangeCount>0).bind(NS),ug=s=>Fh(s).map(c=>dm.exact(c.start,c.soffset,c.finish,c.foffset)),Kf=(s,c)=>{const i=Ef(s,c);return oc(i)},Ph=(s,c,i)=>Es(s,c,i),Yf=s=>{mm(s).each(c=>c.removeAllRanges())},Xf=s=>({elementFromPoint:(pe,Ce)=>U.fromPoint(U.fromDom(s.document),pe,Ce),getRect:pe=>pe.dom.getBoundingClientRect(),getRangedRect:(pe,Ce,qe,ot)=>{const so=dm.exact(pe,Ce,qe,ot);return Kf(s,so)},getSelection:()=>ug(s).map(pe=>A0(s,pe)),fromSitus:pe=>{const Ce=dm.relative(pe.start,pe.finish);return A0(s,Ce)},situsFromPoint:(pe,Ce)=>Ph(s,pe,Ce).map(qe=>E0.create(qe.start,qe.soffset,qe.finish,qe.foffset)),clearSelection:()=>{Yf(s)},collapseSelection:(pe=!1)=>{ug(s).each(Ce=>Ce.fold(qe=>qe.collapse(pe),(qe,ot)=>{const so=pe?qe:ot;lv(s,so,so)},(qe,ot,so,an)=>{const ln=pe?qe:so,lr=pe?ot:an;av(s,ln,lr,ln,lr)}))},setSelection:pe=>{av(s,pe.start,pe.soffset,pe.finish,pe.foffset)},setRelativeSelection:(pe,Ce)=>{lv(s,pe,Ce)},selectNode:pe=>{qf(s,pe,!1)},selectContents:pe=>{qf(s,pe)},getInnerHeight:()=>s.innerHeight,getScrollY:()=>AS(U.fromDom(s.document)).top,scrollBy:(pe,Ce)=>{DS(pe,Ce,U.fromDom(s.document))}}),$i=(s,c)=>({rows:s,cols:c}),Vh=(s,c,i,u)=>{const p=Xf(s),y=V3(p,c,i,u);return{clearstate:y.clearstate,mousedown:y.mousedown,mouseover:y.mouseover,mouseup:y.mouseup}},iv=s=>er(s,Cs).exists(Hc),Jf=(s,c)=>iv(s)||iv(c),zS=(s,c,i,u)=>{const p=Xf(s),y=()=>(u.clear(c),q.none());return{keydown:(H,z,Q,fe,Me,Oe)=>{const Te=H.raw,Fe=Te.which,pe=Te.shiftKey===!0;return Np(c,u.selectedSelector).fold(()=>(um(Fe)&&!pe&&u.clearBeforeUpdate(c),um(Fe)&&pe&&!Jf(z,fe)?q.none:Wf(Fe)&&pe?Qo(Rh,p,c,i,tv,fe,z,u.selectRange):Ih(Fe)&&pe?Qo(Rh,p,c,i,Uf,fe,z,u.selectRange):Wf(Fe)?Qo($h,p,i,tv,fe,z,zf):Ih(Fe)?Qo($h,p,i,Uf,fe,z,OS):q.none),qe=>{const ot=so=>()=>tn(so,ln=>Df(ln.rows,ln.cols,c,qe,u)).fold(()=>ub(c,u.firstSelectedSelector,u.lastSelectedSelector).map(ln=>{const lr=Wf(Fe)||Oe.isForward(Fe)?Br.after:Br.before;return p.setRelativeSelection(Br.on(ln.first,0),lr(ln.table)),u.clear(c),rm.create(q.none(),!0)}),ln=>q.some(rm.create(q.none(),!0)));return um(Fe)&&pe&&!Jf(z,fe)?q.none:Wf(Fe)&&pe?ot([$i(1,0)]):Ih(Fe)&&pe?ot([$i(-1,0)]):Oe.isBackward(Fe)&&pe?ot([$i(0,-1),$i(-1,0)]):Oe.isForward(Fe)&&pe?ot([$i(0,1),$i(1,0)]):um(Fe)&&!pe?y:q.none})()},keyup:(H,z,Q,fe,Me)=>Np(c,u.selectedSelector).fold(()=>{const Oe=H.raw,Te=Oe.which;return Oe.shiftKey===!0&&um(Te)&&Jf(z,fe)?uS(c,i,z,Q,fe,Me,u.selectRange):q.none()},q.none)}},ZS=(s,c,i,u)=>{const p=Xf(s);return(y,T)=>{u.clearBeforeUpdate(c),Jg(y,T,i).each(E=>{const H=E.boxes.getOr([]);u.selectRange(c,H,E.start,E.finish),p.selectContents(T),p.collapseSelection()})}},Nh=(s,c)=>{const i=$n(s,c);return i===void 0||i===""?[]:i.split(" ")},uv=(s,c,i)=>{const p=Nh(s,c).concat([i]);return on(s,c,p.join(" ")),!0},US=(s,c,i)=>{const u=we(Nh(s,c),p=>p!==i);return u.length>0?on(s,c,u.join(" ")):F(s,c),!1},rd=s=>s.dom.classList!==void 0,wr=s=>Nh(s,"class"),Pa=(s,c)=>uv(s,"class",c),ma=(s,c)=>US(s,"class",c),Va=(s,c)=>{rd(s)?s.dom.classList.add(c):Pa(s,c)},Qf=s=>{(rd(s)?s.dom.classList:wr(s)).length===0&&F(s,"class")},WS=(s,c)=>{rd(s)?s.dom.classList.remove(c):ma(s,c),Qf(s)},dg=(s,c)=>rd(s)&&s.dom.classList.contains(c),GS=(s,c)=>{pt(c,i=>{WS(s,i)})},e1=s=>c=>{Va(c,s)},jS=s=>c=>{GS(c,s)},mv={byClass:s=>{const c=e1(s.selected),i=jS([s.selected,s.lastSelected,s.firstSelected]),u=y=>{const T=Ao(y,s.selectedSelector);pt(T,i)};return{clearBeforeUpdate:u,clear:u,selectRange:(y,T,E,H)=>{u(y),pt(T,c),Va(E,s.firstSelected),Va(H,s.lastSelected)},selectedSelector:s.selectedSelector,firstSelectedSelector:s.firstSelectedSelector,lastSelectedSelector:s.lastSelectedSelector}},byAttr:(s,c,i)=>{const u=H=>{F(H,s.selected),F(H,s.firstSelected),F(H,s.lastSelected)},p=H=>{on(H,s.selected,"1")},y=H=>{T(H),i()},T=H=>{const z=Ao(H,`${s.selectedSelector},${s.firstSelectedSelector},${s.lastSelectedSelector}`);pt(z,u)};return{clearBeforeUpdate:T,clear:y,selectRange:(H,z,Q,fe)=>{y(H),pt(z,p),on(Q,s.firstSelected,"1"),on(fe,s.lastSelected,"1"),c(z,Q,fe)},selectedSelector:s.selectedSelector,firstSelectedSelector:s.firstSelectedSelector,lastSelectedSelector:s.lastSelectedSelector}}},t1=(s,c,i,u)=>{switch(s.tag){case"none":return c();case"single":return u(s.element);case"multiple":return i(s.elements)}},o1=()=>({tag:"none"}),_o=s=>({tag:"multiple",elements:s}),du=s=>({tag:"single",element:s}),gv=(s,c,i)=>({get:()=>zp(s(),i).fold(()=>c().fold(o1,du),_o)}),hv=(s,c)=>{const i=s.slice(0,c[c.length-1].row+1),u=Ll(i);return Jt(u,p=>{const y=p.cells.slice(0,c[c.length-1].column+1);return Ue(y,T=>T.element)})},pv=(s,c)=>{const i=s.slice(c[0].row+c[0].rowspan-1,s.length),u=Ll(i);return Jt(u,p=>{const y=p.cells.slice(c[0].column+c[0].colspan-1,p.cells.length);return Ue(y,T=>T.element)})},n1=(s,c,i)=>{const u=Dt.fromTable(s);return ki(u,c).map(y=>{const T=Yd(u,i,!1),{rows:E}=zn(T),H=hv(E,y),z=pv(E,y);return{upOrLeftCells:H,downOrRightCells:z}})},fv=(s,c,i,u,p,y,T)=>({target:s,x:c,y:i,stop:u,prevent:p,kill:y,raw:T}),zh=s=>{const c=U.fromDom(at(s).getOr(s.target)),i=()=>s.stopPropagation(),u=()=>s.preventDefault(),p=So(u,i);return fv(c,s.clientX,s.clientY,i,u,p,s)},KS=(s,c)=>i=>{s(i)&&c(zh(i))},YS=(s,c,i,u,p)=>{const y=KS(i,u);return s.dom.addEventListener(c,y,p),{unbind:Qo(XS,s,c,y,p)}},bv=(s,c,i,u)=>YS(s,c,i,u,!1),XS=(s,c,i,u)=>{s.dom.removeEventListener(c,i,u)},s1=wt,gm=(s,c,i)=>bv(s,c,s1,i),hm=zh,r1=s=>!dg(U.fromDom(s.target),"ephox-snooker-resizer-bar"),JS=(s,c)=>{const i=gv(()=>U.fromDom(s.getBody()),()=>th(Zd(s),Wu(s)),qu.selectedSelector),u=(H,z,Q)=>{Fs(z).each(Me=>{const Oe=Ue(H,qe=>qe.dom),Te=Bn(s),Fe=yi(Ae,U.fromDom(s.getDoc()),Te),pe=la(s),Ce=n1(Me,{selection:pe},Fe).map(qe=>ws(qe,ot=>Ue(ot,so=>so.dom))).getOrUndefined();Mw(s,Oe,z.dom,Q.dom,Ce)})},p=()=>tm(s),y=mv.byAttr(qu,u,p);return s.on("init",H=>{const z=s.getWin(),Q=$l(s),fe=Wu(s),Me=()=>{const Mo=s.selection,nc=U.fromDom(Mo.getStart()),sc=U.fromDom(Mo.getEnd());Pp(Fs,[nc,sc]).fold(()=>y.clear(Q),Ae)},Oe=Vh(z,Q,fe,y),Te=zS(z,Q,fe,y),Fe=ZS(z,Q,fe,y),pe=Mo=>Mo.raw.shiftKey===!0;s.on("TableSelectorChange",Mo=>Fe(Mo.start,Mo.finish));const Ce=(Mo,nc)=>{pe(Mo)&&(nc.kill&&Mo.kill(),nc.selection.each(sc=>{const za=dm.relative(sc.start,sc.finish),ha=Ef(z,za);s.selection.setRng(ha)}))},qe=Mo=>{const nc=hm(Mo);if(nc.raw.shiftKey&&um(nc.raw.which)){const sc=s.selection.getRng(),za=U.fromDom(sc.startContainer),ha=U.fromDom(sc.endContainer);Te.keyup(nc,za,sc.startOffset,ha,sc.endOffset).each(bm=>{Ce(nc,bm)})}},ot=Mo=>{const nc=hm(Mo);c.hide();const sc=s.selection.getRng(),za=U.fromDom(sc.startContainer),ha=U.fromDom(sc.endContainer),bm=Ol(ov,ES)(U.fromDom(s.selection.getStart()));Te.keydown(nc,za,sc.startOffset,ha,sc.endOffset,bm).each(rc=>{Ce(nc,rc)}),c.show()},so=Mo=>Mo.button===0,an=Mo=>Mo.buttons===void 0?!0:(Mo.buttons&1)!==0,ln=Mo=>{Oe.clearstate()},lr=Mo=>{so(Mo)&&r1(Mo)&&Oe.mousedown(hm(Mo))},ga=Mo=>{an(Mo)&&r1(Mo)&&Oe.mouseover(hm(Mo))},mu=Mo=>{so(Mo)&&r1(Mo)&&Oe.mouseup(hm(Mo))},qh=(()=>{const Mo=Hh(U.fromDom(Q)),nc=Hh(0);return{touchEnd:za=>{const ha=U.fromDom(za.target);if(Tn("td")(ha)||Tn("th")(ha)){const bm=Mo.get(),rc=nc.get();Kt(bm,ha)&&za.timeStamp-rc<300&&(za.preventDefault(),Fe(ha,ha))}Mo.set(ha),nc.set(za.timeStamp)}}})();s.on("dragstart",ln),s.on("mousedown",lr),s.on("mouseover",ga),s.on("mouseup",mu),s.on("touchend",qh.touchEnd),s.on("keyup",qe),s.on("keydown",ot),s.on("NodeChange",Me)}),s.on("PreInit",()=>{s.serializer.addTempAttr(qu.firstSelected),s.serializer.addTempAttr(qu.lastSelected)}),{getSelectedCells:()=>t1(i.get(),X([]),H=>Ue(H,z=>z.dom),H=>[H.dom]),clearSelectedCells:H=>y.clear(U.fromDom(H))}},Na=s=>{let c=[];return{bind:y=>{if(y===void 0)throw new Error("Event bind error: undefined handler");c.push(y)},unbind:y=>{c=we(c,T=>T!==y)},trigger:(...y)=>{const T={};pt(s,(E,H)=>{T[E]=y[H]}),pt(c,E=>{E(T)})}}},ar=s=>{const c=ws(s,u=>({bind:u.bind,unbind:u.unbind})),i=ws(s,u=>u.trigger);return{registry:c,trigger:i}},Lr=(s,c)=>{let i=null;const u=()=>{Eo(i)||(clearTimeout(i),i=null)};return{cancel:u,throttle:(...y)=>{u(),i=setTimeout(()=>{i=null,s.apply(null,y)},c)}}},zl=s=>s.slice(0).sort(),N3=(s,c)=>{throw new Error("All required keys ("+zl(s).join(", ")+") were not specified. Specified keys were: "+zl(c).join(", ")+".")},QS=s=>{throw new Error("Unsupported keys for object: "+zl(s).join(", "))},ex=(s,c)=>{if(!At(c))throw new Error("The "+s+" fields must be an array. Was: "+c+".");pt(c,i=>{if(!dn(i))throw new Error("The value "+i+" in the "+s+" fields was not a string.")})},It=(s,c)=>{throw new Error("All values need to be of type: "+c+". Keys ("+zl(s).join(", ")+") were not.")},tx=s=>{const c=zl(s);zt(c,(u,p)=>p<c.length-1&&u===c[p+1]).each(u=>{throw new Error("The field: "+u+" occurs more than once in the combined fields: ["+c.join(", ")+"].")})},vv=(s,c)=>c1(s,c,{validate:us,label:"function"}),c1=(s,c,i)=>{if(c.length===0)throw new Error("You must specify at least one required field.");return ex("required",c),tx(c),u=>{const p=Pn(u);Ut(c,E=>Wt(p,E))||N3(c,p),s(c,p);const T=we(c,E=>!i.validate(u[E],E));return T.length>0&&It(T,i.label),u}},ox=(s,c)=>{const i=we(c,u=>!Wt(s,u));i.length>0&&QS(i)},a1=s=>vv(ox,s),nx=a1(["compare","extract","mutate","sink"]),sx=a1(["element","start","stop","destroy"]),rx=a1(["forceDrop","drop","move","delayDrop"]),cx=()=>{let s=q.none();const c=()=>{s=q.none()},i=(y,T)=>{const E=s.map(H=>y.compare(H,T));return s=q.some(T),E},u=(y,T)=>{T.extract(y).each(H=>{i(T,H).each(Q=>{p.trigger.move(Q)})})},p=ar({move:Na(["info"])});return{onEvent:u,reset:c,events:p.registry}},l1=()=>{const s=ar({move:Na(["info"])});return{onEvent:Ae,reset:Ae,events:s.registry}},i1=()=>{const s=l1(),c=cx();let i=s;return{on:()=>{i.reset(),i=c},off:()=>{i.reset(),i=s},isOn:()=>i===c,onEvent:(E,H)=>{i.onEvent(E,H)},events:c.events}},yv=(s,c,i)=>{let u=!1;const p=ar({start:Na([]),stop:Na([])}),y=i1(),T=()=>{Te.stop(),y.isOn()&&(y.off(),p.trigger.stop())},E=Lr(T,200),H=pe=>{Te.start(pe),y.on(),p.trigger.start()},z=pe=>{E.cancel(),y.onEvent(pe,c)};y.events.move.bind(pe=>{c.mutate(s,pe.info)});const Q=()=>{u=!0},fe=()=>{u=!1},Me=()=>u,Oe=pe=>(...Ce)=>{u&&pe.apply(null,Ce)},Te=c.sink(rx({forceDrop:T,drop:Oe(T),move:Oe(z),delayDrop:Oe(E.throttle)}),i),Fe=()=>{Te.destroy()};return{element:Te.element,go:H,on:Q,off:fe,isActive:Me,destroy:Fe,events:p.registry}},ax=s=>{const c=s.replace(/\./g,"-");return{resolve:u=>c+"-"+u}},lx=ax("ephox-dragster").resolve,Z3=s=>{const c={layerClass:lx("blocker"),...s},i=U.fromTag("div");return on(i,"role","presentation"),si(i,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Va(i,lx("blocker")),Va(i,c.layerClass),{element:X(i),destroy:()=>{On(i)}}};var ux=nx({compare:(s,c)=>ge(c.left-s.left,c.top-s.top),extract:s=>q.some(ge(s.x,s.y)),sink:(s,c)=>{const i=Z3(c),u=gm(i.element(),"mousedown",s.forceDrop),p=gm(i.element(),"mouseup",s.drop),y=gm(i.element(),"mousemove",s.move),T=gm(i.element(),"mouseout",s.delayDrop),E=()=>{i.destroy(),p.unbind(),y.unbind(),T.unbind(),u.unbind()},H=Q=>{bo(Q,i.element())},z=()=>{On(i.element())};return sx({element:i.element,start:H,stop:z,destroy:E})},mutate:(s,c)=>{s.mutate(c.left,c.top)}});const dx=(s,c={})=>{var i;const u=(i=c.mode)!==null&&i!==void 0?i:ux;return yv(s,u,c)},Uh=ax("ephox-snooker").resolve,mx=()=>{const s=ar({drag:Na(["xDelta","yDelta"])});return{mutate:(i,u)=>{s.trigger.drag(i,u)},events:s.registry}},gx=()=>{const s=ar({drag:Na(["xDelta","yDelta","target"])});let c=q.none();const i=mx();return i.events.drag.bind(y=>{c.each(T=>{s.trigger.drag(y.xDelta,y.yDelta,T)})}),{assign:y=>{c=q.some(y)},get:()=>c,mutate:i.mutate,events:s.registry}},hx=(s,c,i,u,p)=>{const y=U.fromTag("div");return si(y,{position:"absolute",left:c-u/2+"px",top:i+"px",height:p+"px",width:u+"px"}),Xs(y,{"data-column":s,role:"presentation"}),y},u1=(s,c,i,u,p)=>{const y=U.fromTag("div");return si(y,{position:"absolute",left:c+"px",top:i-p/2+"px",height:p+"px",width:u+"px"}),Xs(y,{"data-row":s,role:"presentation"}),y},d1=Uh("resizer-bar"),wv=Uh("resizer-rows"),m1=Uh("resizer-cols"),g1=7,Sv=(s,c)=>Jt(s.all,(i,u)=>c(i.element)?[u]:[]),px=(s,c)=>{const i=[];return An(s.grid.columns,u=>{Dt.getColumnAt(s,u).map(y=>y.element).forall(c)&&i.push(u)}),we(i,u=>{const p=Dt.filterItems(s,y=>y.column===u);return Ut(p,y=>c(y.element))})},h1=s=>{const c=Ao(s.parent(),"."+d1);pt(c,On)},p1=(s,c,i)=>{const u=s.origin();pt(c,p=>{p.each(y=>{const T=i(u,y);Va(T,d1),bo(s.parent(),T)})})},fx=(s,c,i,u)=>{p1(s,c,(p,y)=>{const T=hx(y.col,y.x-p.left,i.top-p.top,g1,u);return Va(T,m1),T})},bx=(s,c,i,u)=>{p1(s,c,(p,y)=>{const T=u1(y.row,i.left-p.left,y.y-p.top,u,g1);return Va(T,wv),T})},to=(s,c,i,u,p)=>{const y=it(i),T=c.isResizable,E=u.length>0?fi.positions(u,i):[],H=E.length>0?Sv(s,T):[],z=we(E,(Oe,Te)=>xo(H,Fe=>Te===Fe));bx(c,z,y,St(i));const Q=p.length>0?rl.positions(p,i):[],fe=Q.length>0?px(s,T):[],Me=we(Q,(Oe,Te)=>xo(fe,Fe=>Te===Fe));fx(c,Me,y,_(i))},f1=(s,c)=>{if(h1(s),s.isResizable(c)){const i=Dt.fromTable(c),u=Pm(i),p=hi(i);to(i,s,c,u,p)}},Zl=(s,c)=>{const i=Ao(s.parent(),"."+d1);pt(i,c)},Ul=s=>{Zl(s,c=>{hs(c,"display","none")})},Wh=s=>{Zl(s,c=>{hs(c,"display","block")})},Bc=s=>dg(s,wv),Gh=s=>dg(s,m1),mg=Uh("resizer-bar-dragging"),jh=s=>{const c=gx(),i=dx(c,{});let u=q.none();const p=(Te,Fe)=>q.from($n(Te,Fe));c.events.drag.bind(Te=>{p(Te.target,"data-row").each(Fe=>{const pe=jr(Te.target,"top");hs(Te.target,"top",pe+Te.yDelta+"px")}),p(Te.target,"data-column").each(Fe=>{const pe=jr(Te.target,"left");hs(Te.target,"left",pe+Te.xDelta+"px")})});const y=(Te,Fe)=>{const pe=jr(Te,Fe),Ce=Vc(Te,"data-initial-"+Fe,0);return pe-Ce};i.events.stop.bind(()=>{c.get().each(Te=>{u.each(Fe=>{p(Te,"data-row").each(pe=>{const Ce=y(Te,"top");F(Te,"data-initial-top"),Oe.trigger.adjustHeight(Fe,Ce,parseInt(pe,10))}),p(Te,"data-column").each(pe=>{const Ce=y(Te,"left");F(Te,"data-initial-left"),Oe.trigger.adjustWidth(Fe,Ce,parseInt(pe,10))}),f1(s,Fe)})})});const T=(Te,Fe)=>{Oe.trigger.startAdjust(),c.assign(Te),on(Te,"data-initial-"+Fe,jr(Te,Fe)),Va(Te,mg),hs(Te,"opacity","0.2"),i.go(s.parent())},E=gm(s.parent(),"mousedown",Te=>{Bc(Te.target)&&T(Te.target,"top"),Gh(Te.target)&&T(Te.target,"left")}),H=Te=>Kt(Te,s.view()),z=Te=>Io(Te,"table",H).filter(Hc),Q=gm(s.view(),"mouseover",Te=>{z(Te.target).fold(()=>{qo(Te.target)&&h1(s)},Fe=>{i.isActive()&&(u=q.some(Fe),f1(s,Fe))})}),fe=()=>{E.unbind(),Q.unbind(),i.destroy(),h1(s)},Me=Te=>{f1(s,Te)},Oe=ar({adjustHeight:Na(["table","delta","row"]),adjustWidth:Na(["table","delta","column"]),startAdjust:Na([])});return{destroy:fe,refresh:Me,on:i.on,off:i.off,hideBars:Qo(Ul,s),showBars:Qo(Wh,s),events:Oe.registry}},vx={create:(s,c,i)=>{const u=fi,p=rl,y=jh(s),T=ar({beforeResize:Na(["table","type"]),afterResize:Na(["table","type"]),startDrag:Na([])});return y.events.adjustHeight.bind(E=>{const H=E.table;T.trigger.beforeResize(H,"row");const z=u.delta(E.delta,H);Lb(H,z,E.row),T.trigger.afterResize(H,"row")}),y.events.startAdjust.bind(E=>{T.trigger.startDrag()}),y.events.adjustWidth.bind(E=>{const H=E.table;T.trigger.beforeResize(H,"col");const z=p.delta(E.delta,H),Q=i(H);Mi(H,z,E.column,c,Q),T.trigger.afterResize(H,"col")}),{on:y.on,off:y.off,refreshBars:y.refresh,hideBars:y.hideBars,showBars:y.showBars,destroy:y.destroy,events:T.registry}}},Bt={only:(s,c)=>{const i=zr(s)?nn(s):s;return{parent:X(i),view:X(s),origin:X(ge(0,0)),isResizable:c}},detached:(s,c,i)=>{const u=()=>it(c);return{parent:X(c),view:X(s),origin:u,isResizable:i}},body:(s,c,i)=>({parent:X(c),view:X(s),origin:X(ge(0,0)),isResizable:i})},ul=()=>{const s=U.fromTag("div");return si(s,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),bo(C(),s),s},cd=(s,c)=>s.inline?Bt.body(U.fromDom(s.getBody()),ul(),c):Bt.only(U.fromDom(s.getDoc()),c),yx=(s,c)=>{s.inline&&On(c.parent())},pm=s=>Mn(s)&&s.nodeName==="TABLE",Nt="bar-",wx=s=>$n(s,"data-mce-resize")!=="false",xv=s=>{const c=Dt.fromTable(s);Dt.hasColumns(c)||pt(Ja(s),i=>{const u=qa(i,"width");hs(i,"width",u),F(i,"width")})},b1=s=>Bs(s,"corner-"),Sx=s=>ea(s,"corner-"),fm=s=>{const c=Zf(),i=Zf(),u=Zf();let p,y,T,E;const H=Ce=>xf(s,Ce),z=()=>qg(s)?jp():fb(),Q=Ce=>nh(Ce).columns,fe=Ce=>nh(Ce).rows,Me=(Ce,qe,ot,so)=>{const an=Sx(qe),ln=Gr(an,"e"),lr=Bs(an,"n");if(y===""&&La(Ce),E===""&&Vw(Ce),ot!==p&&y!==""){hs(Ce,"width",y);const ga=z(),mu=H(Ce),hg=qg(s)||ln?Q(Ce)-1:0;Mi(Ce,ot-p,hg,ga,mu)}else if(Pt(y)){const ga=parseFloat(y.replace("%","")),mu=ot*ga/p;hs(Ce,"width",mu+"%")}if(je(y)&&xv(Ce),so!==T&&E!==""){hs(Ce,"height",E);const ga=lr?0:fe(Ce)-1;Lb(Ce,so-T,ga)}},Oe=()=>{i.on(Ce=>{Ce.destroy()}),u.on(Ce=>{yx(s,Ce)})};return s.on("init",()=>{const Ce=cd(s,wx);if(u.set(Ce),ry(s)&&Kg(s)){const qe=z(),ot=vx.create(Ce,qe,H);ot.on(),ot.events.startDrag.bind(so=>{c.set(s.selection.getRng())}),ot.events.beforeResize.bind(so=>{const an=so.table.dom;Wo(s,an,Mp(an),Ep(an),Nt+so.type)}),ot.events.afterResize.bind(so=>{const an=so.table,ln=an.dom;Rl(an),c.on(lr=>{s.selection.setRng(lr),s.focus()}),o0(s,ln,Mp(ln),Ep(ln),Nt+so.type),s.undoManager.add()}),i.set(ot)}}),s.on("ObjectResizeStart",Ce=>{const qe=Ce.target;if(pm(qe)){const ot=U.fromDom(qe);pt(s.dom.select(".mce-clonedresizable"),so=>{s.dom.addClass(so,"mce-"+Uu(s)+"-columns")}),!Pl(ot)&&Al(s)?nm(ot):!l0(ot)&&ru(s)&&La(ot),Ch(ot)&&Bs(Ce.origin,Nt)&&La(ot),p=Ce.width,y=Gm(s)?"":Dp(s,qe).getOr(""),T=Ce.height,E=$p(s,qe).getOr("")}}),s.on("ObjectResized",Ce=>{const qe=Ce.target;if(pm(qe)){const ot=U.fromDom(qe),so=Ce.origin;b1(so)&&Me(ot,so,Ce.width,Ce.height),Rl(ot),Ai(s,ot.dom,cr)}}),s.on("SwitchMode",()=>{i.on(Ce=>{s.mode.isReadOnly()?Ce.hideBars():Ce.showBars()})}),s.on("dragstart dragend",Ce=>{i.on(qe=>{Ce.type==="dragstart"?(qe.hideBars(),qe.off()):(qe.on(),qe.showBars())})}),s.on("remove",()=>{Oe()}),{refresh:Ce=>{i.on(qe=>qe.refreshBars(U.fromDom(Ce)))},hide:()=>{i.on(Ce=>Ce.hideBars())},show:()=>{i.on(Ce=>Ce.showBars())}}},ad=s=>{sy(s);const c=fm(s),i=JS(s,c),u=wh(s,c,i);return Qw(s,u),eS(s,u),ky(s,u),{getSelectedCells:i.getSelectedCells,clearSelectedCells:i.clearSelectedCells}},Cv=s=>({table:ad(s)});var xx=()=>{ac.add("dom",Cv)};xx()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>'}});(function(){var ac=tinymce.util.Tools.resolve("tinymce.PluginManager");const qs=(D,N,K)=>{var te;return K(D,N.prototype)?!0:((te=D.constructor)===null||te===void 0?void 0:te.name)===N.name},is=D=>{const N=typeof D;return D===null?"null":N==="object"&&Array.isArray(D)?"array":N==="object"&&qs(D,String,(K,te)=>te.isPrototypeOf(K))?"string":N},xn=D=>N=>is(N)===D,un=D=>N=>typeof N===D,ts=D=>N=>D===N,dn=xn("string"),Xe=xn("object"),At=xn("array"),Eo=ts(null),Vo=un("boolean"),Go=D=>D==null,Jo=D=>!Go(D),Mn=un("function"),us=(D,N)=>{if(At(D)){for(let K=0,te=D.length;K<te;++K)if(!N(D[K]))return!1;return!0}return!1},oo=()=>{},Ae=D=>()=>D,So=(D,N)=>D===N;class st{constructor(N,K){this.tag=N,this.value=K}static some(N){return new st(!0,N)}static none(){return st.singletonNone}fold(N,K){return this.tag?K(this.value):N()}isSome(){return this.tag}isNone(){return!this.tag}map(N){return this.tag?st.some(N(this.value)):st.none()}bind(N){return this.tag?N(this.value):st.none()}exists(N){return this.tag&&N(this.value)}forall(N){return!this.tag||N(this.value)}filter(N){return!this.tag||N(this.value)?this:st.none()}getOr(N){return this.tag?this.value:N}or(N){return this.tag?this:N}getOrThunk(N){return this.tag?this.value:N()}orThunk(N){return this.tag?this:N()}getOrDie(N){if(this.tag)return this.value;throw new Error(N??"Called getOrDie on None")}static from(N){return Jo(N)?st.some(N):st.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(N){this.tag&&N(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}st.singletonNone=new st(!1);const X=Array.prototype.indexOf,Re=Array.prototype.push,ur=(D,N)=>X.call(D,N),Qo=(D,N)=>ur(D,N)>-1,I=(D,N)=>{const K=D.length,te=new Array(K);for(let be=0;be<K;be++){const Je=D[be];te[be]=N(Je,be)}return te},xt=(D,N)=>{for(let K=0,te=D.length;K<te;K++){const be=D[K];N(be,K)}},Tr=(D,N,K)=>(xt(D,(te,be)=>{K=N(K,te,be)}),K),go=D=>{const N=[];for(let K=0,te=D.length;K<te;++K){if(!At(D[K]))throw new Error("Arr.flatten item "+K+" was not an array, input: "+D);Re.apply(N,D[K])}return N},wt=(D,N)=>go(I(D,N)),q=(D,N)=>{for(let K=0;K<D.length;K++){const te=N(D[K],K);if(te.isSome())return te}return st.none()},En=(D,N,K=So)=>D.exists(te=>K(te,N)),Ht=D=>{const N=[],K=te=>{N.push(te)};for(let te=0;te<D.length;te++)D[te].each(K);return N},io=(D,N)=>D?st.some(N):st.none(),v=D=>N=>N.options.get(D),Wt=D=>{const N=D.options.register;N("link_assume_external_targets",{processor:K=>{const te=dn(K)||Vo(K);return te?K===!0?{value:1,valid:te}:K==="http"||K==="https"?{value:K,valid:te}:{value:0,valid:te}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),N("link_context_toolbar",{processor:"boolean",default:!1}),N("link_list",{processor:K=>dn(K)||Mn(K)||us(K,Xe)}),N("link_default_target",{processor:"string"}),N("link_default_protocol",{processor:"string",default:"https"}),N("link_target_list",{processor:K=>Vo(K)||us(K,Xe),default:!0}),N("link_rel_list",{processor:"object[]",default:[]}),N("link_class_list",{processor:"object[]",default:[]}),N("link_title",{processor:"boolean",default:!0}),N("allow_unsafe_link_target",{processor:"boolean",default:!1}),N("link_quicklink",{processor:"boolean",default:!1})},xo=v("link_assume_external_targets"),An=v("link_context_toolbar"),Ue=v("link_list"),pt=v("link_default_target"),Xt=v("link_default_protocol"),fn=v("link_target_list"),we=v("link_rel_list"),et=v("link_class_list"),ue=v("link_title"),ye=v("allow_unsafe_link_target"),zt=v("link_quicklink");var en=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ct=D=>dn(D.value)?D.value:"",Jt=D=>dn(D.text)?D.text:dn(D.title)?D.title:"",Ut=(D,N)=>{const K=[];return en.each(D,te=>{const be=Jt(te);if(te.menu!==void 0){const Je=Ut(te.menu,N);K.push({text:be,items:Je})}else{const Je=N(te);K.push({text:be,value:Je})}}),K},kr=(D=Ct)=>N=>st.from(N).map(K=>Ut(K,D)),Rt={sanitize:D=>kr(Ct)(D),sanitizeWith:kr,createUi:(D,N)=>K=>({name:D,type:"listbox",label:N,items:K}),getValue:Ct},uo=Object.keys,Et=Object.hasOwnProperty,tn=(D,N)=>{const K=uo(D);for(let te=0,be=K.length;te<be;te++){const Je=K[te],ro=D[Je];N(ro,Je)}},Pn=D=>(N,K)=>{D[K]=N},dr=(D,N,K,te)=>{tn(D,(be,Je)=>{(N(be,Je)?K:te)(be,Je)})},mo=(D,N)=>{const K={};return dr(D,N,Pn(K),oo),K},ws=(D,N)=>Et.call(D,N),Ss=(D,N)=>ws(D,N)&&D[N]!==void 0&&D[N]!==null;var bn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Fc=tinymce.util.Tools.resolve("tinymce.util.URI");const Vr=D=>Jo(D)&&D.nodeName.toLowerCase()==="a",Vn=D=>Vr(D)&&!!ho(D),Ro=(D,N)=>{if(D.collapsed)return[];{const K=D.cloneContents(),te=K.firstChild,be=new bn(te,K),Je=[];let ro=te;do N(ro)&&Je.push(ro);while(ro=be.next());return Je}},lc=D=>/^\w+:/i.test(D),ho=D=>{var N,K;return(K=(N=D.getAttribute("data-mce-href"))!==null&&N!==void 0?N:D.getAttribute("href"))!==null&&K!==void 0?K:""},yo=(D,N)=>{const K=["noopener"],te=D?D.split(/\s+/):[],be=co=>en.trim(co.sort().join(" ")),Je=co=>(co=ro(co),co.length>0?co.concat(K):K),ro=co=>co.filter(Ho=>en.inArray(K,Ho)===-1),vn=N?Je(te):ro(te);return vn.length>0?be(vn):""},Tc=D=>D.replace(/\uFEFF/g,""),Gt=(D,N)=>(N=N||ic(D.selection.getRng())[0]||D.selection.getNode(),Ft(N)?st.from(D.dom.select("a[href]",N)[0]):st.from(D.dom.getParent(N,"a[href]"))),jo=(D,N)=>Gt(D,N).isSome(),Or=(D,N)=>{const K=N.fold(()=>D.getContent({format:"text"}),te=>te.innerText||te.textContent||"");return Tc(K)},ic=D=>Ro(D,Vn),Nr=D=>en.grep(D,Vn),Dn=D=>Nr(D).length>0,uc=D=>ic(D).length>0,He=D=>{const N=D.schema.getTextInlineElements(),K=Je=>Je.nodeType===1&&!Vr(Je)&&!ws(N,Je.nodeName.toLowerCase());if(Gt(D).exists(Je=>Je.hasAttribute("data-mce-block")))return!1;const be=D.selection.getRng();return be.collapsed?!0:Ro(be,K).length===0},Ft=D=>Jo(D)&&D.nodeName==="FIGURE"&&/\bimage\b/i.test(D.className),Cn=D=>Tr(["title","rel","class","target"],(K,te)=>(D[te].each(be=>{K[te]=be.length>0?be:null}),K),{href:D.href}),xs=(D,N)=>(N==="http"||N==="https")&&!lc(D)?N+"://"+D:D,mr=(D,N)=>{const K={...N};if(we(D).length===0&&!ye(D)){const te=yo(K.rel,K.target==="_blank");K.rel=te||null}return st.from(K.target).isNone()&&fn(D)===!1&&(K.target=pt(D)),K.href=xs(K.href,xo(D)),K},os=(D,N,K,te)=>{K.each(be=>{ws(N,"innerText")?N.innerText=be:N.textContent=be}),D.dom.setAttribs(N,te),D.selection.select(N)},wo=(D,N,K,te)=>{const be=D.dom;Ft(N)?Tn(be,N,te):K.fold(()=>{D.execCommand("mceInsertLink",!1,te)},Je=>{D.insertContent(be.createHTML("a",te,be.encode(Je)))})},Ks=(D,N,K)=>{const te=D.selection.getNode(),be=Gt(D,te),Je=mr(D,Cn(K));D.undoManager.transact(()=>{K.href===N.href&&N.attach(),be.fold(()=>{wo(D,te,K.text,Je)},ro=>{D.focus(),os(D,ro,K.text,Je)})})},gr=D=>{const N=D.dom,K=D.selection,te=K.getBookmark(),be=K.getRng().cloneRange(),Je=N.getParent(be.startContainer,"a[href]",D.getBody()),ro=N.getParent(be.endContainer,"a[href]",D.getBody());Je&&be.setStartBefore(Je),ro&&be.setEndAfter(ro),K.setRng(be),D.execCommand("unlink"),K.moveToBookmark(te)},Kc=D=>{D.undoManager.transact(()=>{const N=D.selection.getNode();Ft(N)?kc(D,N):gr(D),D.focus()})},Cs=D=>{const{class:N,href:K,rel:te,target:be,text:Je,title:ro}=D;return mo({class:N.getOrNull(),href:K,rel:te.getOrNull(),target:be.getOrNull(),text:Je.getOrNull(),title:ro.getOrNull()},(vn,co)=>Eo(vn)===!1)},qn=(D,N)=>{const K=D.options.get,te={allow_html_data_urls:K("allow_html_data_urls"),allow_script_urls:K("allow_script_urls"),allow_svg_data_urls:K("allow_svg_data_urls")},be=N.href;return{...N,href:Fc.isDomSafe(be,"a",te)?be:""}},Ys=(D,N,K)=>{const te=qn(D,K);D.hasPlugin("rtc",!0)?D.execCommand("createlink",!1,Cs(te)):Ks(D,N,te)},zr=D=>{D.hasPlugin("rtc",!0)?D.execCommand("unlink"):Kc(D)},kc=(D,N)=>{var K;const te=D.dom.select("img",N)[0];if(te){const be=D.dom.getParents(te,"a[href]",N)[0];be&&((K=be.parentNode)===null||K===void 0||K.insertBefore(te,be),D.dom.remove(be))}},Tn=(D,N,K)=>{var te;const be=D.select("img",N)[0];if(be){const Je=D.create("a",K);(te=be.parentNode)===null||te===void 0||te.insertBefore(Je,be),Je.appendChild(be)}},mn=D=>Ss(D,"items"),on=(D,N)=>q(N,K=>mn(K)?on(D,K.items):io(K.value===D,K)),Xs=(D,N,K,te)=>{const be=te[N],Je=D.length>0;return be!==void 0?on(be,K).map(ro=>({url:{value:ro.value,meta:{text:Je?D:ro.text,attach:oo}},text:Je?D:ro.text})):st.none()},Wa=(D,N)=>N==="link"?D.link:N==="anchor"?D.anchor:st.none(),V={init:(D,N)=>{const K={text:D.text,title:D.title},te=co=>{var Ho;return io(K.title.length<=0,st.from((Ho=co.meta)===null||Ho===void 0?void 0:Ho.title).getOr(""))},be=co=>{var Ho;return io(K.text.length<=0,st.from((Ho=co.meta)===null||Ho===void 0?void 0:Ho.text).getOr(co.value))},Je=co=>{const Ho=be(co.url),ao=te(co.url);return Ho.isSome()||ao.isSome()?st.some({...Ho.map(rs=>({text:rs})).getOr({}),...ao.map(rs=>({title:rs})).getOr({})}):st.none()},ro=(co,Ho)=>{const ao=Wa(N,Ho).getOr([]);return Xs(K.text,Ho,ao,co)};return{onChange:(co,Ho)=>{const ao=Ho.name;return ao==="url"?Je(co()):Qo(["anchor","link"],ao)?ro(co(),ao):((ao==="text"||ao==="title")&&(K[ao]=co()[ao]),st.none())}}},getDelta:Xs};var F=tinymce.util.Tools.resolve("tinymce.util.Delay");const ne=(D,N,K)=>{const te=D.selection.getRng();F.setEditorTimeout(D,()=>{D.windowManager.confirm(N,be=>{D.selection.setRng(te),K(be)})})},ce=D=>{const N=D.href;return N.indexOf("@")>0&&N.indexOf("/")===-1&&N.indexOf("mailto:")===-1?st.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:te=>({...te,href:"mailto:"+N})}):st.none()},Ve=(D,N)=>K=>{const te=K.href;return D===1&&!lc(te)||D===0&&/^\s*www(\.|\d\.)/i.test(te)?st.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${N}:// prefix?`,preprocess:Je=>({...Je,href:N+"://"+te})}):st.none()},vt={preprocess:(D,N)=>q([ce,Ve(xo(D),Xt(D))],K=>K(N)).fold(()=>Promise.resolve(N),K=>new Promise(te=>{ne(D,K.message,be=>{te(be?K.preprocess(N):N)})}))},U={getAnchors:D=>{const N=D.dom.select("a:not([href])"),K=wt(N,te=>{const be=te.name||te.id;return be?[{text:be,value:"#"+be}]:[]});return K.length>0?st.some([{text:"None",value:""}].concat(K)):st.none()}},gn={getClasses:D=>{const N=et(D);return N.length>0?Rt.sanitize(N):st.none()}},hn=D=>{try{return st.some(JSON.parse(D))}catch{return st.none()}},Kt={getLinks:D=>{const N=te=>D.convertURL(te.value||te.url||"","href"),K=Ue(D);return new Promise(te=>{dn(K)?fetch(K).then(be=>be.ok?be.text().then(hn):Promise.reject()).then(te,()=>te(st.none())):Mn(K)?K(be=>te(st.some(be))):te(st.from(K))}).then(te=>te.bind(Rt.sanitizeWith(N)).map(be=>be.length>0?[{text:"None",value:""}].concat(be):be))}},Js={getRels:(D,N)=>{const K=we(D);if(K.length>0){const te=En(N,"_blank"),be=ye(D)===!1,Je=vn=>yo(Rt.getValue(vn),te);return(be?Rt.sanitizeWith(Je):Rt.sanitize)(K)}return st.none()}},ns=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],nn={getTargets:D=>{const N=fn(D);return At(N)?Rt.sanitize(N).orThunk(()=>st.some(ns)):N===!1?st.none():st.some(ns)}},Yn=(D,N,K)=>{const te=D.getAttrib(N,K);return te!==null&&te.length>0?st.some(te):st.none()},Xn=(D,N)=>{const K=D.dom,be=He(D)?st.some(Or(D.selection,N)):st.none(),Je=N.bind(ao=>st.from(K.getAttrib(ao,"href"))),ro=N.bind(ao=>st.from(K.getAttrib(ao,"target"))),vn=N.bind(ao=>Yn(K,ao,"rel")),co=N.bind(ao=>Yn(K,ao,"class")),Ho=N.bind(ao=>Yn(K,ao,"title"));return{url:Je,text:be,title:Ho,target:ro,rel:vn,linkClass:co}},Yc={collect:(D,N)=>Kt.getLinks(D).then(K=>{const te=Xn(D,N);return{anchor:te,catalogs:{targets:nn.getTargets(D),rels:Js.getRels(D,te.target),classes:gn.getClasses(D),anchor:U.getAnchors(D),link:K},optNode:N,flags:{titleEnabled:ue(D)}}})},Pc=(D,N)=>K=>{const te=K.getData();if(!te.url.value){zr(D),K.close();return}const be=vn=>st.from(te[vn]).filter(co=>!En(N.anchor[vn],co)),Je={href:te.url.value,text:be("text"),target:be("target"),rel:be("rel"),class:be("linkClass"),title:be("title")},ro={href:te.url.value,attach:te.url.meta!==void 0&&te.url.meta.attach?te.url.meta.attach:oo};vt.preprocess(D,Je).then(vn=>{Ys(D,ro,vn)}),K.close()},dc=D=>{const N=Gt(D);return Yc.collect(D,N)},Co=(D,N)=>{const K=D.anchor,te=K.url.getOr("");return{url:{value:te,meta:{original:{value:te}}},text:K.text.getOr(""),title:K.title.getOr(""),anchor:te,link:te,rel:K.rel.getOr(""),target:K.target.or(N).getOr(""),linkClass:K.linkClass.getOr("")}},Qs=(D,N,K)=>{const te=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],be=D.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Je=D.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],ro=st.from(pt(K)),vn=Co(D,ro),co=D.catalogs,Ho=V.init(vn,co);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:go([te,be,Je,Ht([co.anchor.map(Rt.createUi("anchor","Anchors")),co.rels.map(Rt.createUi("rel","Rel")),co.targets.map(Rt.createUi("target","Open link in...")),co.link.map(Rt.createUi("link","Link list")),co.classes.map(Rt.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:vn,onChange:(rs,{name:mc})=>{Ho.onChange(rs.getData,{name:mc}).each(Ta=>{rs.setData(Ta)})},onSubmit:N}},gs=D=>{dc(D).then(K=>{const te=Pc(D,K);return Qs(K,te,D)}).then(K=>{D.windowManager.open(K)})},Sa=D=>{D.addCommand("mceLink",(N,K)=>{(K==null?void 0:K.dialog)===!0||!zt(D)?gs(D):D.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var Rs=tinymce.util.Tools.resolve("tinymce.util.VK");const kn=(D,N)=>{document.body.appendChild(D),D.dispatchEvent(N),document.body.removeChild(D)},bo=D=>{const N=document.createElement("a");N.target="_blank",N.href=D,N.rel="noreferrer noopener";const K=document.createEvent("MouseEvents");K.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),kn(N,K)},Ts=(D,N)=>D.dom.getParent(N,"a[href]"),Xc=D=>Ts(D,D.selection.getStart()),eo=D=>D.altKey===!0&&D.shiftKey===!1&&D.ctrlKey===!1&&D.metaKey===!1,Nn=(D,N)=>{if(N){const K=ho(N);if(/^#/.test(K)){const te=D.dom.select(K);te.length&&D.selection.scrollIntoView(te[0],!0)}else bo(N.href)}},ks=D=>()=>{D.execCommand("mceLink",!1,{dialog:!0})},On=D=>()=>{Nn(D,Xc(D))},_r=D=>{D.on("click",N=>{const K=Ts(D,N.target);K&&Rs.metaKeyPressed(N)&&(N.preventDefault(),Nn(D,K))}),D.on("keydown",N=>{if(!N.isDefaultPrevented()&&N.keyCode===13&&eo(N)){const K=Xc(D);K&&(N.preventDefault(),Nn(D,K))}})},Zr=(D,N)=>(D.on("NodeChange",N),()=>D.off("NodeChange",N)),ss=D=>N=>{const K=()=>{N.setActive(!D.mode.isReadOnly()&&jo(D,D.selection.getNode())),N.setEnabled(D.selection.isEditable())};return K(),Zr(D,K)},Ur=D=>N=>{const K=()=>{N.setEnabled(D.selection.isEditable())};return K(),Zr(D,K)},Wr=D=>(D.selection.isCollapsed()?Nr(D.dom.getParents(D.selection.getStart())):ic(D.selection.getRng())).length===1,vl=D=>N=>{const K=()=>N.setEnabled(Wr(D));return K(),Zr(D,K)},Mr=D=>N=>{const K=Je=>Dn(Je)||uc(D.selection.getRng()),te=D.dom.getParents(D.selection.getStart()),be=Je=>{N.setEnabled(K(Je)&&D.selection.isEditable())};return be(te),Zr(D,Je=>be(Je.parents))},xa=D=>{D.addShortcut("Meta+K","",()=>{D.execCommand("mceLink")})},Hs=D=>{D.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:ks(D),onSetup:ss(D),shortcut:"Meta+K"}),D.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:On(D),onSetup:vl(D)}),D.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>zr(D),onSetup:Mr(D)})},_c=D=>{D.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:On(D),onSetup:vl(D)}),D.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:Ur(D),onAction:ks(D)}),D.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>zr(D),onSetup:Mr(D)})},Jc=D=>{const N="link unlink openlink",K="link";D.ui.registry.addContextMenu("link",{update:te=>D.dom.isEditable(te)?Dn(D.dom.getParents(te,"a"))?N:K:""})},Ca=D=>{const N=be=>{be.selection.collapse(!1)},K=be=>{const Je=D.selection.getNode();return be.setEnabled(jo(D,Je)),oo},te=be=>{const Je=Gt(D),ro=He(D);if(Je.isNone()&&ro){const vn=Or(D.selection,Je);return io(vn.length===0,be)}else return st.none()};D.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:ss(D)},label:"Link",predicate:be=>An(D)&&jo(D,be),initValue:()=>Gt(D).fold(Ae(""),ho),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:be=>{const Je=D.selection.getNode();return be.setActive(jo(D,Je)),ss(D)(be)},onAction:be=>{const Je=be.getValue(),ro=te(Je);Ys(D,{href:Je,attach:oo},{href:Je,text:ro,title:st.none(),rel:st.none(),target:st.from(pt(D)),class:st.none()}),N(D),be.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:K,onAction:be=>{zr(D),be.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:K,onAction:be=>{On(D)(),be.hide()}}]})};var yl=()=>{ac.add("link",D=>{Wt(D),Hs(D),_c(D),Jc(D),Ca(D),_r(D),Sa(D),xa(D)})};yl()})();(function(){var ac=tinymce.util.Tools.resolve("tinymce.PluginManager");const qs=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,is=we=>et=>et.options.get(we),xn=we=>{const et=we.options.register;et("autolink_pattern",{processor:"regexp",default:new RegExp("^"+qs().source+"$","i")}),et("link_default_target",{processor:"string"}),et("link_default_protocol",{processor:"string",default:"https"})},un=is("autolink_pattern"),ts=is("link_default_target"),dn=is("link_default_protocol"),Xe=is("allow_unsafe_link_target"),At=(we,et,ue)=>{var ye;return ue(we,et.prototype)?!0:((ye=we.constructor)===null||ye===void 0?void 0:ye.name)===et.name},Eo=we=>{const et=typeof we;return we===null?"null":et==="object"&&Array.isArray(we)?"array":et==="object"&&At(we,String,(ue,ye)=>ye.isPrototypeOf(ue))?"string":et},Vo=we=>et=>Eo(et)===we,Go=we=>et=>we===et,Jo=Vo("string"),Mn=Go(void 0),us=we=>we==null,oo=we=>!us(we),Ae=we=>et=>!we(et),So=Object.hasOwnProperty,st=(we,et)=>So.call(we,et),X=(we,et,ue)=>we.length>=et.length&&we.substr(ue,ue+et.length)===et,Re=(we,et,ue=0,ye)=>{const zt=we.indexOf(et,ue);return zt!==-1?Mn(ye)?!0:zt+et.length<=ye:!1},ur=(we,et)=>X(we,et,0),Qo="\uFEFF",I=we=>we===Qo,xt=we=>we.replace(/\uFEFF/g,"");var Tr=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const go=we=>we.nodeType===3,wt=we=>we.nodeType===1,q=we=>/^[(\[{ \u00a0]$/.test(we),En=we=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(we),Ht=we=>/[?!,.;:]/.test(we),io=(we,et,ue)=>{for(let ye=et-1;ye>=0;ye--){const zt=we.charAt(ye);if(!I(zt)&&ue(zt))return ye}return-1},v=(we,et)=>{let ue=we,ye=et;for(;wt(ue)&&ue.childNodes[ye];)ue=ue.childNodes[ye],ye=go(ue)?ue.data.length:ue.childNodes.length;return{container:ue,offset:ye}},Wt=(we,et)=>{var ue;const ye=we.schema.getVoidElements(),zt=un(we),{dom:en,selection:Ct}=we;if(en.getParent(Ct.getNode(),"a[href]")!==null)return null;const Jt=Ct.getRng(),Ut=Tr(en,mo=>en.isBlock(mo)||st(ye,mo.nodeName.toLowerCase())||en.getContentEditable(mo)==="false"),{container:kr,offset:Qt}=v(Jt.endContainer,Jt.endOffset),ds=(ue=en.getParent(kr,en.isBlock))!==null&&ue!==void 0?ue:en.getRoot(),Rt=Ut.backwards(kr,Qt+et,(mo,ws)=>{const Ss=mo.data,bn=io(Ss,ws,Ae(q));return bn===-1||Ht(Ss[bn])?bn:bn+1},ds);if(!Rt)return null;let uo=Rt.container;const Et=Ut.backwards(Rt.container,Rt.offset,(mo,ws)=>{uo=mo;const Ss=io(mo.data,ws,q);return Ss===-1?Ss:Ss+1},ds),tn=en.createRng();Et?tn.setStart(Et.container,Et.offset):tn.setStart(uo,0),tn.setEnd(Rt.container,Rt.offset);const dr=xt(tn.toString()).match(zt);if(dr){let mo=dr[0];return ur(mo,"www.")?mo=dn(we)+"://"+mo:Re(mo,"@")&&!En(mo)&&(mo="mailto:"+mo),{rng:tn,url:mo}}else return null},xo=(we,et)=>{const{dom:ue,selection:ye}=we,{rng:zt,url:en}=et,Ct=ye.getBookmark();ye.setRng(zt);const Jt="createlink",Ut={command:Jt,ui:!1,value:en};if(!we.dispatch("BeforeExecCommand",Ut).isDefaultPrevented()){we.getDoc().execCommand(Jt,!1,en),we.dispatch("ExecCommand",Ut);const Qt=ts(we);if(Jo(Qt)){const ds=ye.getNode();ue.setAttrib(ds,"target",Qt),Qt==="_blank"&&!Xe(we)&&ue.setAttrib(ds,"rel","noopener")}}ye.moveToBookmark(Ct),we.nodeChanged()},An=we=>{const et=Wt(we,-1);oo(et)&&xo(we,et)},Ue=An,pt=we=>{const et=Wt(we,0);oo(et)&&xo(we,et)},Xt=we=>{we.on("keydown",et=>{et.keyCode===13&&!et.isDefaultPrevented()&&pt(we)}),we.on("keyup",et=>{et.keyCode===32?An(we):(et.keyCode===48&&et.shiftKey||et.keyCode===221)&&Ue(we)})};var fn=()=>{ac.add("autolink",we=>{xn(we),Xt(we)})};fn()})();(function(){var ac=tinymce.util.Tools.resolve("tinymce.PluginManager");const qs=Object.getPrototypeOf,is=(C,R,B)=>{var oe;return B(C,R.prototype)?!0:((oe=C.constructor)===null||oe===void 0?void 0:oe.name)===R.name},xn=C=>{const R=typeof C;return C===null?"null":R==="object"&&Array.isArray(C)?"array":R==="object"&&is(C,String,(B,oe)=>oe.isPrototypeOf(B))?"string":R},un=C=>R=>xn(R)===C,ts=C=>R=>typeof R===C,dn=C=>R=>C===R,Xe=(C,R)=>Eo(C)&&is(C,R,(B,oe)=>qs(B)===oe),At=un("string"),Eo=un("object"),Vo=C=>Xe(C,Object),Go=un("array"),Jo=dn(null),Mn=ts("boolean"),us=C=>C==null,oo=C=>!us(C),Ae=ts("function"),So=ts("number"),st=(C,R)=>{if(Go(C)){for(let B=0,oe=C.length;B<oe;++B)if(!R(C[B]))return!1;return!0}return!1},X=()=>{};class Re{constructor(R,B){this.tag=R,this.value=B}static some(R){return new Re(!0,R)}static none(){return Re.singletonNone}fold(R,B){return this.tag?B(this.value):R()}isSome(){return this.tag}isNone(){return!this.tag}map(R){return this.tag?Re.some(R(this.value)):Re.none()}bind(R){return this.tag?R(this.value):Re.none()}exists(R){return this.tag&&R(this.value)}forall(R){return!this.tag||R(this.value)}filter(R){return!this.tag||R(this.value)?this:Re.none()}getOr(R){return this.tag?this.value:R}or(R){return this.tag?this:R}getOrThunk(R){return this.tag?this.value:R()}orThunk(R){return this.tag?this:R()}getOrDie(R){if(this.tag)return this.value;throw new Error(R??"Called getOrDie on None")}static from(R){return oo(R)?Re.some(R):Re.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(R){this.tag&&R(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Re.singletonNone=new Re(!1);const ur=Object.keys,Qo=Object.hasOwnProperty,I=(C,R)=>{const B=ur(C);for(let oe=0,_e=B.length;oe<_e;oe++){const Tt=B[oe],Ie=C[Tt];R(Ie,Tt)}},xt=C=>(R,B)=>{C[B]=R},Tr=(C,R,B,oe)=>{I(C,(_e,Tt)=>{(R(_e,Tt)?B:oe)(_e,Tt)})},go=(C,R)=>{const B={};return Tr(C,R,xt(B),X),B},wt=(C,R)=>Qo.call(C,R),q=(C,R)=>wt(C,R)&&C[R]!==void 0&&C[R]!==null,En=Array.prototype.push,Ht=C=>{const R=[];for(let B=0,oe=C.length;B<oe;++B){if(!Go(C[B]))throw new Error("Arr.flatten item "+B+" was not an array, input: "+C);En.apply(R,C[B])}return R},io=(C,R)=>R>=0&&R<C.length?Re.some(C[R]):Re.none(),v=C=>io(C,0),Wt=(C,R)=>{for(let B=0;B<C.length;B++){const oe=R(C[B],B);if(oe.isSome())return oe}return Re.none()};typeof window<"u"||Function("return this;")();const xo=(C,R,B)=>{if(At(B)||Mn(B)||So(B))C.setAttribute(R,B+"");else throw console.error("Invalid call to Attribute.set. Key ",R,":: Value ",B,":: Element ",C),new Error("Attribute value was not simple")},An=(C,R,B)=>{xo(C.dom,R,B)},Ue=(C,R)=>{C.dom.removeAttribute(R)},pt=(C,R)=>{const oe=(R||document).createElement("div");if(oe.innerHTML=C,!oe.hasChildNodes()||oe.childNodes.length>1){const _e="HTML does not have a single root node";throw console.error(_e,C),new Error(_e)}return we(oe.childNodes[0])},Xt=(C,R)=>{const oe=(R||document).createElement(C);return we(oe)},fn=(C,R)=>{const oe=(R||document).createTextNode(C);return we(oe)},we=C=>{if(C==null)throw new Error("Node cannot be null or undefined");return{dom:C}},ue={fromHtml:pt,fromTag:Xt,fromText:fn,fromDom:we,fromPoint:(C,R,B)=>Re.from(C.dom.elementFromPoint(R,B)).map(we)};var ye=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),zt=tinymce.util.Tools.resolve("tinymce.util.URI");const en=C=>C.length>0,Ct=C=>R=>R.options.get(C),Jt=C=>{const R=C.options.register;R("image_dimensions",{processor:"boolean",default:!0}),R("image_advtab",{processor:"boolean",default:!1}),R("image_uploadtab",{processor:"boolean",default:!0}),R("image_prepend_url",{processor:"string",default:""}),R("image_class_list",{processor:"object[]"}),R("image_description",{processor:"boolean",default:!0}),R("image_title",{processor:"boolean",default:!1}),R("image_caption",{processor:"boolean",default:!1}),R("image_list",{processor:B=>{const oe=B===!1||At(B)||st(B,Eo)||Ae(B);return oe?{value:B,valid:oe}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},Ut=Ct("image_dimensions"),kr=Ct("image_advtab"),Qt=Ct("image_uploadtab"),ds=Ct("image_prepend_url"),Rt=Ct("image_class_list"),uo=Ct("image_description"),Et=Ct("image_title"),tn=Ct("image_caption"),Pn=Ct("image_list"),dr=Ct("a11y_advanced_options"),mo=Ct("automatic_uploads"),ws=C=>en(C.options.get("images_upload_url")),Ss=C=>oo(C.options.get("images_upload_handler")),bn=(C,R)=>Math.max(parseInt(C,10),parseInt(R,10)),Fc=C=>new Promise(R=>{const B=document.createElement("img"),oe=Tt=>{B.onload=B.onerror=null,B.parentNode&&B.parentNode.removeChild(B),R(Tt)};B.onload=()=>{const Tt=bn(B.width,B.clientWidth),Ie=bn(B.height,B.clientHeight),Ao={width:Tt,height:Ie};oe(Promise.resolve(Ao))},B.onerror=()=>{oe(Promise.reject(`Failed to get image dimensions for: ${C}`))};const _e=B.style;_e.visibility="hidden",_e.position="fixed",_e.bottom=_e.left="0px",_e.width=_e.height="auto",document.body.appendChild(B),B.src=C}),Vr=C=>(C&&(C=C.replace(/px$/,"")),C),Vn=C=>(C.length>0&&/^[0-9]+$/.test(C)&&(C+="px"),C),Ro=C=>{if(C.margin){const R=String(C.margin).split(" ");switch(R.length){case 1:C["margin-top"]=C["margin-top"]||R[0],C["margin-right"]=C["margin-right"]||R[0],C["margin-bottom"]=C["margin-bottom"]||R[0],C["margin-left"]=C["margin-left"]||R[0];break;case 2:C["margin-top"]=C["margin-top"]||R[0],C["margin-right"]=C["margin-right"]||R[1],C["margin-bottom"]=C["margin-bottom"]||R[0],C["margin-left"]=C["margin-left"]||R[1];break;case 3:C["margin-top"]=C["margin-top"]||R[0],C["margin-right"]=C["margin-right"]||R[1],C["margin-bottom"]=C["margin-bottom"]||R[2],C["margin-left"]=C["margin-left"]||R[1];break;case 4:C["margin-top"]=C["margin-top"]||R[0],C["margin-right"]=C["margin-right"]||R[1],C["margin-bottom"]=C["margin-bottom"]||R[2],C["margin-left"]=C["margin-left"]||R[3]}delete C.margin}return C},lc=(C,R)=>{const B=Pn(C);At(B)?fetch(B).then(oe=>{oe.ok&&oe.json().then(R)}):Ae(B)?B(R):R(B)},ho=(C,R,B)=>{const oe=()=>{B.onload=B.onerror=null,C.selection&&(C.selection.select(B),C.nodeChanged())};B.onload=()=>{!R.width&&!R.height&&Ut(C)&&C.dom.setAttribs(B,{width:String(B.clientWidth),height:String(B.clientHeight)}),oe()},B.onerror=oe},yo=C=>new Promise((R,B)=>{const oe=new FileReader;oe.onload=()=>{R(oe.result)},oe.onerror=()=>{var _e;B((_e=oe.error)===null||_e===void 0?void 0:_e.message)},oe.readAsDataURL(C)}),Tc=C=>C.nodeName==="IMG"&&(C.hasAttribute("data-mce-object")||C.hasAttribute("data-mce-placeholder")),Gt=(C,R)=>{const B=C.options.get;return zt.isDomSafe(R,"img",{allow_html_data_urls:B("allow_html_data_urls"),allow_script_urls:B("allow_script_urls"),allow_svg_data_urls:B("allow_svg_data_urls")})},jo=ye.DOM,Or=C=>C.style.marginLeft&&C.style.marginRight&&C.style.marginLeft===C.style.marginRight?Vr(C.style.marginLeft):"",ic=C=>C.style.marginTop&&C.style.marginBottom&&C.style.marginTop===C.style.marginBottom?Vr(C.style.marginTop):"",Nr=C=>C.style.borderWidth?Vr(C.style.borderWidth):"",Dn=(C,R)=>{var B;return C.hasAttribute(R)&&(B=C.getAttribute(R))!==null&&B!==void 0?B:""},uc=C=>C.parentNode!==null&&C.parentNode.nodeName==="FIGURE",He=(C,R,B)=>{B===""||B===null?C.removeAttribute(R):C.setAttribute(R,B)},Ft=C=>{const R=jo.create("figure",{class:"image"});jo.insertAfter(R,C),R.appendChild(C),R.appendChild(jo.create("figcaption",{contentEditable:"true"},"Caption")),R.contentEditable="false"},Cn=C=>{const R=C.parentNode;oo(R)&&(jo.insertAfter(C,R),jo.remove(R))},xs=C=>{uc(C)?Cn(C):Ft(C)},mr=(C,R)=>{const B=C.getAttribute("style"),oe=R(B!==null?B:"");oe.length>0?(C.setAttribute("style",oe),C.setAttribute("data-mce-style",oe)):C.removeAttribute("style")},os=(C,R)=>(B,oe,_e)=>{const Tt=B.style;Tt[oe]?(Tt[oe]=Vn(_e),mr(B,R)):He(B,oe,_e)},wo=(C,R)=>C.style[R]?Vr(C.style[R]):Dn(C,R),Ks=(C,R)=>{const B=Vn(R);C.style.marginLeft=B,C.style.marginRight=B},gr=(C,R)=>{const B=Vn(R);C.style.marginTop=B,C.style.marginBottom=B},Kc=(C,R)=>{const B=Vn(R);C.style.borderWidth=B},Cs=(C,R)=>{C.style.borderStyle=R},qn=C=>{var R;return(R=C.style.borderStyle)!==null&&R!==void 0?R:""},Ys=C=>oo(C)&&C.nodeName==="FIGURE",zr=C=>C.nodeName==="IMG",kc=C=>jo.getAttrib(C,"alt").length===0&&jo.getAttrib(C,"role")==="presentation",Tn=C=>kc(C)?"":Dn(C,"alt"),mn=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),on=(C,R)=>{var B;const oe=document.createElement("img");return He(oe,"style",R.style),(Or(oe)||R.hspace!=="")&&Ks(oe,R.hspace),(ic(oe)||R.vspace!=="")&&gr(oe,R.vspace),(Nr(oe)||R.border!=="")&&Kc(oe,R.border),(qn(oe)||R.borderStyle!=="")&&Cs(oe,R.borderStyle),C((B=oe.getAttribute("style"))!==null&&B!==void 0?B:"")},Xs=(C,R)=>{const B=document.createElement("img");if(ce(C,{...R,caption:!1},B),V(B,R.alt,R.isDecorative),R.caption){const oe=jo.create("figure",{class:"image"});return oe.appendChild(B),oe.appendChild(jo.create("figcaption",{contentEditable:"true"},"Caption")),oe.contentEditable="false",oe}else return B},Wa=(C,R)=>({src:Dn(R,"src"),alt:Tn(R),title:Dn(R,"title"),width:wo(R,"width"),height:wo(R,"height"),class:Dn(R,"class"),style:C(Dn(R,"style")),caption:uc(R),hspace:Or(R),vspace:ic(R),border:Nr(R),borderStyle:qn(R),isDecorative:kc(R)}),$n=(C,R,B,oe,_e)=>{B[oe]!==R[oe]&&_e(C,oe,String(B[oe]))},V=(C,R,B)=>{if(B){jo.setAttrib(C,"role","presentation");const oe=ue.fromDom(C);An(oe,"alt","")}else{if(Jo(R)){const oe=ue.fromDom(C);Ue(oe,"alt")}else{const oe=ue.fromDom(C);An(oe,"alt",R)}jo.getAttrib(C,"role")==="presentation"&&jo.setAttrib(C,"role","")}},F=(C,R,B)=>{(B.alt!==R.alt||B.isDecorative!==R.isDecorative)&&V(C,B.alt,B.isDecorative)},ne=(C,R)=>(B,oe,_e)=>{C(B,_e),mr(B,R)},ce=(C,R,B)=>{const oe=Wa(C,B);$n(B,oe,R,"caption",(_e,Tt,Ie)=>xs(_e)),$n(B,oe,R,"src",He),$n(B,oe,R,"title",He),$n(B,oe,R,"width",os("width",C)),$n(B,oe,R,"height",os("height",C)),$n(B,oe,R,"class",He),$n(B,oe,R,"style",ne((_e,Tt)=>He(_e,"style",Tt),C)),$n(B,oe,R,"hspace",ne(Ks,C)),$n(B,oe,R,"vspace",ne(gr,C)),$n(B,oe,R,"border",ne(Kc,C)),$n(B,oe,R,"borderStyle",ne(Cs,C)),F(B,oe,R)},Ve=(C,R)=>{const B=C.dom.styles.parse(R),oe=Ro(B),_e=C.dom.styles.parse(C.dom.styles.serialize(oe));return C.dom.styles.serialize(_e)},Ge=C=>{const R=C.selection.getNode(),B=C.dom.getParent(R,"figure.image");return B?C.dom.select("img",B)[0]:R&&(R.nodeName!=="IMG"||Tc(R))?null:R},vt=(C,R)=>{var B;const oe=C.dom,_e=go(C.schema.getTextBlockElements(),(Ie,Ao)=>!C.schema.isValidChild(Ao,"figure")),Tt=oe.getParent(R.parentNode,Ie=>q(_e,Ie.nodeName),C.getBody());return Tt&&(B=oe.split(Tt,R))!==null&&B!==void 0?B:R},ko=C=>{const R=Ge(C);return R?Wa(B=>Ve(C,B),R):mn()},U=(C,R)=>{const B=Xs(_e=>Ve(C,_e),R);C.dom.setAttrib(B,"data-mce-id","__mcenew"),C.focus(),C.selection.setContent(B.outerHTML);const oe=C.dom.select('*[data-mce-id="__mcenew"]')[0];if(C.dom.setAttrib(oe,"data-mce-id",null),Ys(oe)){const _e=vt(C,oe);C.selection.select(_e)}else C.selection.select(oe)},ft=(C,R)=>{C.dom.setAttrib(R,"src",R.getAttribute("src"))},gn=(C,R)=>{if(R){const B=C.dom.is(R.parentNode,"figure.image")?R.parentNode:R;C.dom.remove(B),C.focus(),C.nodeChanged(),C.dom.isEmpty(C.getBody())&&(C.setContent(""),C.selection.setCursorLocation())}},hn=(C,R)=>{const B=Ge(C);if(B)if(ce(oe=>Ve(C,oe),R,B),ft(C,B),Ys(B.parentNode)){const oe=B.parentNode;vt(C,oe),C.selection.select(B.parentNode)}else C.selection.select(B),ho(C,R,B)},Kn=(C,R)=>{const B=R.src;return{...R,src:Gt(C,B)?B:""}},Kt=(C,R)=>{const B=Ge(C);if(B){const _e={...Wa(Ie=>Ve(C,Ie),B),...R},Tt=Kn(C,_e);_e.src?hn(C,Tt):gn(C,B)}else R.src&&U(C,{...mn(),...R})},ns=(C=>(...R)=>{if(R.length===0)throw new Error("Can't merge zero objects");const B={};for(let oe=0;oe<R.length;oe++){const _e=R[oe];for(const Tt in _e)wt(_e,Tt)&&(B[Tt]=C(B[Tt],_e[Tt]))}return B})((C,R)=>Vo(C)&&Vo(R)?ns(C,R):R);var Rn=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),nn=tinymce.util.Tools.resolve("tinymce.util.Tools");const Yn=C=>At(C.value)?C.value:"",Xn=C=>At(C.text)?C.text:At(C.title)?C.title:"",ms=(C,R)=>{const B=[];return nn.each(C,oe=>{const _e=Xn(oe);if(oe.menu!==void 0){const Tt=ms(oe.menu,R);B.push({text:_e,items:Tt})}else{const Tt=R(oe);B.push({text:_e,value:Tt})}}),B},Yc=(C=Yn)=>R=>R?Re.from(R).map(B=>ms(B,C)):Re.none(),Pc=C=>Yc(Yn)(C),dc=C=>wt(C,"items"),Co=(C,R)=>Wt(C,B=>dc(B)?Co(B.items,R):B.value===R?Re.some(B):Re.none()),gs={sanitizer:Yc,sanitize:Pc,findEntry:(C,R)=>C.bind(B=>Co(B,R))},Rs={makeTab:C=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},kn=C=>{const R=gs.sanitizer(Io=>C.convertURL(Io.value||Io.url||"","src")),B=new Promise(Io=>{lc(C,Qc=>{Io(R(Qc).map(Zo=>Ht([[{text:"None",value:""}],Zo])))})}),oe=gs.sanitize(Rt(C)),_e=kr(C),Tt=Qt(C),Ie=ws(C),Ao=Ss(C),Er=ko(C),No=uo(C),er=Et(C),zo=Ut(C),Ga=tn(C),Mc=dr(C),jt=mo(C),Is=Re.some(ds(C)).filter(Io=>At(Io)&&Io.length>0);return B.then(Io=>({image:Er,imageList:Io,classList:oe,hasAdvTab:_e,hasUploadTab:Tt,hasUploadUrl:Ie,hasUploadHandler:Ao,hasDescription:No,hasImageTitle:er,hasDimensions:zo,hasImageCaption:Ga,prependURL:Is,hasAccessibilityOptions:Mc,automaticUploads:jt}))},bo=C=>{const R={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},B=C.imageList.map(er=>({name:"images",type:"listbox",label:"Image list",items:er})),oe={name:"alt",type:"input",label:"Alternative description",enabled:!(C.hasAccessibilityOptions&&C.image.isDecorative)},_e={name:"title",type:"input",label:"Image title"},Tt={name:"dimensions",type:"sizeinput"},Ie={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Ao=C.classList.map(er=>({name:"classes",type:"listbox",label:"Class",items:er})),Er={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},No=er=>er?{type:"grid",columns:2}:{type:"panel"};return Ht([[R],B.toArray(),C.hasAccessibilityOptions&&C.hasDescription?[Ie]:[],C.hasDescription?[oe]:[],C.hasImageTitle?[_e]:[],C.hasDimensions?[Tt]:[],[{...No(C.classList.isSome()&&C.hasImageCaption),items:Ht([Ao.toArray(),C.hasImageCaption?[Er]:[]])}]])},Xc={makeTab:C=>({title:"General",name:"general",items:bo(C)}),makeItems:bo},Nn={makeTab:C=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},ks=C=>({prevImage:gs.findEntry(C.imageList,C.image.src),prevAlt:C.image.alt,open:!0}),On=C=>({src:{value:C.src,meta:{}},images:C.src,alt:C.alt,title:C.title,dimensions:{width:C.width,height:C.height},classes:C.class,caption:C.caption,style:C.style,vspace:C.vspace,border:C.border,hspace:C.hspace,borderstyle:C.borderStyle,fileinput:[],isDecorative:C.isDecorative}),_r=(C,R)=>({src:C.src.value,alt:(C.alt===null||C.alt.length===0)&&R?null:C.alt,title:C.title,width:C.dimensions.width,height:C.dimensions.height,class:C.classes,style:C.style,caption:C.caption,hspace:C.hspace,vspace:C.vspace,border:C.border,borderStyle:C.borderstyle,isDecorative:C.isDecorative}),Zr=(C,R)=>/^(?:[a-zA-Z]+:)?\/\//.test(R)?Re.none():C.prependURL.bind(B=>R.substring(0,B.length)!==B?Re.some(B+R):Re.none()),ss=(C,R)=>{const B=R.getData();Zr(C,B.src.value).each(oe=>{R.setData({src:{value:oe,meta:B.src.meta}})})},Ur=(C,R,B)=>{C.hasDescription&&At(B.alt)&&(R.alt=B.alt),C.hasAccessibilityOptions&&(R.isDecorative=B.isDecorative||R.isDecorative||!1),C.hasImageTitle&&At(B.title)&&(R.title=B.title),C.hasDimensions&&(At(B.width)&&(R.dimensions.width=B.width),At(B.height)&&(R.dimensions.height=B.height)),At(B.class)&&gs.findEntry(C.classList,B.class).each(oe=>{R.classes=oe.value}),C.hasImageCaption&&Mn(B.caption)&&(R.caption=B.caption),C.hasAdvTab&&(At(B.style)&&(R.style=B.style),At(B.vspace)&&(R.vspace=B.vspace),At(B.border)&&(R.border=B.border),At(B.hspace)&&(R.hspace=B.hspace),At(B.borderstyle)&&(R.borderstyle=B.borderstyle))},Wr=(C,R)=>{const B=R.getData(),oe=B.src.meta;if(oe!==void 0){const _e=ns({},B);Ur(C,_e,oe),R.setData(_e)}},vl=(C,R,B,oe)=>{const _e=oe.getData(),Tt=_e.src.value,Ie=_e.src.meta||{};!Ie.width&&!Ie.height&&R.hasDimensions&&(en(Tt)?C.imageSize(Tt).then(Ao=>{B.open&&oe.setData({dimensions:Ao})}).catch(Ao=>console.error(Ao)):oe.setData({dimensions:{width:"",height:""}}))},Mr=(C,R,B)=>{const oe=B.getData(),_e=gs.findEntry(C.imageList,oe.src.value);R.prevImage=_e,B.setData({images:_e.map(Tt=>Tt.value).getOr("")})},xa=(C,R,B,oe)=>{ss(R,oe),Wr(R,oe),vl(C,R,B,oe),Mr(R,B,oe)},Hs=(C,R,B,oe)=>{const _e=oe.getData(),Tt=gs.findEntry(R.imageList,_e.images);Tt.each(Ie=>{_e.alt===""||B.prevImage.map(Er=>Er.text===_e.alt).getOr(!1)?Ie.value===""?oe.setData({src:Ie,alt:B.prevAlt}):oe.setData({src:Ie,alt:Ie.text}):oe.setData({src:Ie})}),B.prevImage=Tt,xa(C,R,B,oe)},_c=(C,R,B,oe)=>{const _e=oe.getData();oe.block("Uploading image"),v(_e.fileinput).fold(()=>{oe.unblock()},Tt=>{const Ie=URL.createObjectURL(Tt),Ao=()=>{oe.unblock(),URL.revokeObjectURL(Ie)},Er=No=>{oe.setData({src:{value:No,meta:{}}}),oe.showTab("general"),xa(C,R,B,oe)};yo(Tt).then(No=>{const er=C.createBlobCache(Tt,Ie,No);R.automaticUploads?C.uploadImage(er).then(zo=>{Er(zo.url),Ao()}).catch(zo=>{Ao(),C.alertErr(zo)}):(C.addToBlobCache(er),Er(er.blobUri()),oe.unblock())})})},Jc=(C,R,B)=>(oe,_e)=>{_e.name==="src"?xa(C,R,B,oe):_e.name==="images"?Hs(C,R,B,oe):_e.name==="alt"?B.prevAlt=oe.getData().alt:_e.name==="fileinput"?_c(C,R,B,oe):_e.name==="isDecorative"&&oe.setEnabled("alt",!oe.getData().isDecorative)},Ca=C=>()=>{C.open=!1},yl=C=>C.hasAdvTab||C.hasUploadUrl||C.hasUploadHandler?{type:"tabpanel",tabs:Ht([[Xc.makeTab(C)],C.hasAdvTab?[Rs.makeTab(C)]:[],C.hasUploadTab&&(C.hasUploadUrl||C.hasUploadHandler)?[Nn.makeTab(C)]:[]])}:{type:"panel",items:Xc.makeItems(C)},D=(C,R,B)=>oe=>{const _e=ns(On(R.image),oe.getData()),Tt={..._e,style:on(B.normalizeCss,_r(_e,!1))};C.execCommand("mceUpdateImage",!1,_r(Tt,R.hasAccessibilityOptions)),C.editorUpload.uploadImagesAuto(),oe.close()},N=C=>R=>Gt(C,R)?Fc(C.documentBaseURI.toAbsolute(R)).then(B=>({width:String(B.width),height:String(B.height)})):Promise.resolve({width:"",height:""}),K=C=>(R,B,oe)=>{var _e;return C.editorUpload.blobCache.create({blob:R,blobUri:B,name:(_e=R.name)===null||_e===void 0?void 0:_e.replace(/\.[^\.]+$/,""),filename:R.name,base64:oe.split(",")[1]})},te=C=>R=>{C.editorUpload.blobCache.add(R)},be=C=>R=>{C.windowManager.alert(R)},Je=C=>R=>Ve(C,R),ro=C=>R=>C.dom.parseStyle(R),vn=C=>(R,B)=>C.dom.serializeStyle(R,B),co=C=>R=>Rn(C).upload([R],!1).then(B=>{var oe;return B.length===0?Promise.reject("Failed to upload image"):B[0].status===!1?Promise.reject((oe=B[0].error)===null||oe===void 0?void 0:oe.message):B[0]}),Ho=C=>{const R={imageSize:N(C),addToBlobCache:te(C),createBlobCache:K(C),alertErr:be(C),normalizeCss:Je(C),parseStyle:ro(C),serializeStyle:vn(C),uploadImage:co(C)};return{open:()=>{kn(C).then(oe=>{const _e=ks(oe);return{title:"Insert/Edit Image",size:"normal",body:yl(oe),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:On(oe.image),onSubmit:D(C,oe,R),onChange:Jc(R,oe,_e),onClose:Ca(_e)}}).then(C.windowManager.open)}}},ao=C=>{C.addCommand("mceImage",Ho(C).open),C.addCommand("mceUpdateImage",(R,B)=>{C.undoManager.transact(()=>Kt(C,B))})},rs=C=>{const R=C.attr("class");return oo(R)&&/\bimage\b/.test(R)},mc=C=>R=>{let B=R.length;const oe=_e=>{_e.attr("contenteditable",C?"true":null)};for(;B--;){const _e=R[B];rs(_e)&&(_e.attr("contenteditable",C?"false":null),nn.each(_e.getAll("figcaption"),oe))}},Ta=C=>{C.on("PreInit",()=>{C.parser.addNodeFilter("figure",mc(!0)),C.serializer.addNodeFilter("figure",mc(!1))})},at=C=>R=>{const B=()=>{R.setEnabled(C.selection.isEditable())};return C.on("NodeChange",B),B(),()=>{C.off("NodeChange",B)}},Vi=C=>{C.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Ho(C).open,onSetup:R=>{R.setActive(oo(Ge(C)));const B=C.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",R.setActive).unbind,oe=at(C)(R);return()=>{B(),oe()}}}),C.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Ho(C).open,onSetup:at(C)}),C.ui.registry.addContextMenu("image",{update:R=>C.selection.isEditable()&&(Ys(R)||zr(R)&&!Tc(R))?["image"]:[]})};var qo=()=>{ac.add("image",C=>{Jt(C),Ta(C),Vi(C),ao(C)})};qo()})();(function(){var ac=tinymce.util.Tools.resolve("tinymce.PluginManager");const qs=(V,F,ne)=>{var ce;return ne(V,F.prototype)?!0:((ce=V.constructor)===null||ce===void 0?void 0:ce.name)===F.name},is=V=>{const F=typeof V;return V===null?"null":F==="object"&&Array.isArray(V)?"array":F==="object"&&qs(V,String,(ne,ce)=>ce.isPrototypeOf(ne))?"string":F},xn=V=>F=>is(F)===V,un=xn("string"),ts=xn("object"),dn=xn("array"),Xe=V=>V==null,At=V=>!Xe(V);class Eo{constructor(F,ne){this.tag=F,this.value=ne}static some(F){return new Eo(!0,F)}static none(){return Eo.singletonNone}fold(F,ne){return this.tag?ne(this.value):F()}isSome(){return this.tag}isNone(){return!this.tag}map(F){return this.tag?Eo.some(F(this.value)):Eo.none()}bind(F){return this.tag?F(this.value):Eo.none()}exists(F){return this.tag&&F(this.value)}forall(F){return!this.tag||F(this.value)}filter(F){return!this.tag||F(this.value)?this:Eo.none()}getOr(F){return this.tag?this.value:F}or(F){return this.tag?this:F}getOrThunk(F){return this.tag?this.value:F()}orThunk(F){return this.tag?this:F()}getOrDie(F){if(this.tag)return this.value;throw new Error(F??"Called getOrDie on None")}static from(F){return At(F)?Eo.some(F):Eo.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(F){this.tag&&F(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Eo.singletonNone=new Eo(!1);const Vo=Array.prototype.push,Go=(V,F)=>{for(let ne=0,ce=V.length;ne<ce;ne++){const Ve=V[ne];F(Ve,ne)}},Jo=V=>{const F=[];for(let ne=0,ce=V.length;ne<ce;++ne){if(!dn(V[ne]))throw new Error("Arr.flatten item "+ne+" was not an array, input: "+V);Vo.apply(F,V[ne])}return F},Mn=V=>{let F=V;return{get:()=>F,set:Ve=>{F=Ve}}},us=Object.keys,oo=Object.hasOwnProperty,Ae=(V,F)=>{const ne=us(V);for(let ce=0,Ve=ne.length;ce<Ve;ce++){const Ge=ne[ce],vt=V[Ge];F(vt,Ge)}},So=(V,F)=>st(V,F)?Eo.from(V[F]):Eo.none(),st=(V,F)=>oo.call(V,F),X=V=>F=>F.options.get(V),Re=V=>{const F=V.options.register;F("audio_template_callback",{processor:"function"}),F("video_template_callback",{processor:"function"}),F("iframe_template_callback",{processor:"function"}),F("media_live_embeds",{processor:"boolean",default:!0}),F("media_filter_html",{processor:"boolean",default:!0}),F("media_url_resolver",{processor:"function"}),F("media_alt_source",{processor:"boolean",default:!0}),F("media_poster",{processor:"boolean",default:!0}),F("media_dimensions",{processor:"boolean",default:!0})},ur=X("audio_template_callback"),Qo=X("video_template_callback"),I=X("iframe_template_callback"),xt=X("media_live_embeds"),Tr=X("media_filter_html"),go=X("media_url_resolver"),wt=X("media_alt_source"),q=X("media_poster"),En=X("media_dimensions");var Ht=tinymce.util.Tools.resolve("tinymce.util.Tools"),io=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),v=tinymce.util.Tools.resolve("tinymce.html.DomParser");const Wt=io.DOM,xo=V=>V.replace(/px$/,""),An=V=>{const F=V.attr("style"),ne=F?Wt.parseStyle(F):{};return{type:"ephox-embed-iri",source:V.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:So(ne,"max-width").map(xo).getOr(""),height:So(ne,"max-height").map(xo).getOr("")}},Ue=(V,F)=>{let ne={};const Ve=v({validate:!1,forced_root_block:!1},F).parse(V);for(let Ge=Ve;Ge;Ge=Ge.walk())if(Ge.type===1){const vt=Ge.name;if(Ge.attr("data-ephox-embed-iri")){ne=An(Ge);break}else!ne.source&&vt==="param"&&(ne.source=Ge.attr("movie")),(vt==="iframe"||vt==="object"||vt==="embed"||vt==="video"||vt==="audio")&&(ne.type||(ne.type=vt),ne=Ht.extend(Ge.attributes.map,ne)),vt==="source"&&(ne.source?ne.altsource||(ne.altsource=Ge.attr("src")):ne.source=Ge.attr("src")),vt==="img"&&!ne.poster&&(ne.poster=Ge.attr("src"))}return ne.source=ne.source||ne.src||"",ne.altsource=ne.altsource||"",ne.poster=ne.poster||"",ne},pt=V=>{var F;const ne={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},ce=(F=V.toLowerCase().split(".").pop())!==null&&F!==void 0?F:"";return So(ne,ce).getOr("")};var Xt=tinymce.util.Tools.resolve("tinymce.html.Node"),fn=tinymce.util.Tools.resolve("tinymce.html.Serializer");const we=(V,F={})=>v({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...F},V),et=io.DOM,ue=V=>/^[0-9.]+$/.test(V)?V+"px":V,ye=(V,F)=>{const ne=F.attr("style"),ce=ne?et.parseStyle(ne):{};At(V.width)&&(ce["max-width"]=ue(V.width)),At(V.height)&&(ce["max-height"]=ue(V.height)),F.attr("style",et.serializeStyle(ce))},zt=["source","altsource"],en=(V,F,ne,ce)=>{let Ve=0,Ge=0;const vt=we(ce);vt.addNodeFilter("source",U=>Ve=U.length);const ko=vt.parse(V);for(let U=ko;U;U=U.walk())if(U.type===1){const ft=U.name;if(U.attr("data-ephox-embed-iri")){ye(F,U);break}else{switch(ft){case"video":case"object":case"embed":case"img":case"iframe":F.height!==void 0&&F.width!==void 0&&(U.attr("width",F.width),U.attr("height",F.height));break}if(ne)switch(ft){case"video":U.attr("poster",F.poster),U.attr("src",null);for(let hn=Ve;hn<2;hn++)if(F[zt[hn]]){const Kn=new Xt("source",1);Kn.attr("src",F[zt[hn]]),Kn.attr("type",F[zt[hn]+"mime"]||null),U.append(Kn)}break;case"iframe":U.attr("src",F.source);break;case"object":const gn=U.getAll("img").length>0;if(F.poster&&!gn){U.attr("src",F.poster);const hn=new Xt("img",1);hn.attr("src",F.poster),hn.attr("width",F.width),hn.attr("height",F.height),U.append(hn)}break;case"source":if(Ge<2&&(U.attr("src",F[zt[Ge]]),U.attr("type",F[zt[Ge]+"mime"]||null),!F[zt[Ge]])){U.remove();continue}Ge++;break;case"img":F.poster||U.remove();break}}}return fn({},ce).serialize(ko)},Ct=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],Jt=V=>{const F=V.match(/^(https?:\/\/|www\.)(.+)$/i);return F&&F.length>1?F[1]==="www."?"https://":F[1]:"https://"},Ut=(V,F)=>{const ne=Jt(F),ce=V.regex.exec(F);let Ve=ne+V.url;if(At(ce))for(let Ge=0;Ge<ce.length;Ge++)Ve=Ve.replace("$"+Ge,()=>ce[Ge]?ce[Ge]:"");return Ve.replace(/\?$/,"")},kr=V=>{const F=Ct.filter(ne=>ne.regex.test(V));return F.length>0?Ht.extend({},F[0],{url:Ut(F[0],V)}):null},Qt=(V,F)=>{if(F)return F(V);{const ne=V.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+V.source+'" width="'+V.width+'" height="'+V.height+'"'+ne+"></iframe>"}},ds=V=>{let F='<object data="'+V.source+'" width="'+V.width+'" height="'+V.height+'" type="application/x-shockwave-flash">';return V.poster&&(F+='<img src="'+V.poster+'" width="'+V.width+'" height="'+V.height+'" />'),F+="</object>",F},Rt=(V,F)=>F?F(V):'<audio controls="controls" src="'+V.source+'">'+(V.altsource?`
<source src="`+V.altsource+'"'+(V.altsourcemime?' type="'+V.altsourcemime+'"':"")+` />
`:"")+"</audio>",uo=(V,F)=>F?F(V):'<video width="'+V.width+'" height="'+V.height+'"'+(V.poster?' poster="'+V.poster+'"':"")+` controls="controls">
<source src="`+V.source+'"'+(V.sourcemime?' type="'+V.sourcemime+'"':"")+` />
`+(V.altsource?'<source src="'+V.altsource+'"'+(V.altsourcemime?' type="'+V.altsourcemime+'"':"")+` />
`:"")+"</video>",Et=(V,F)=>{var ne;const ce=Ht.extend({},F);if(!ce.source&&(Ht.extend(ce,Ue((ne=ce.embed)!==null&&ne!==void 0?ne:"",V.schema)),!ce.source))return"";ce.altsource||(ce.altsource=""),ce.poster||(ce.poster=""),ce.source=V.convertURL(ce.source,"source"),ce.altsource=V.convertURL(ce.altsource,"source"),ce.sourcemime=pt(ce.source),ce.altsourcemime=pt(ce.altsource),ce.poster=V.convertURL(ce.poster,"poster");const Ve=kr(ce.source);if(Ve&&(ce.source=Ve.url,ce.type=Ve.type,ce.allowfullscreen=Ve.allowFullscreen,ce.width=ce.width||String(Ve.w),ce.height=ce.height||String(Ve.h)),ce.embed)return en(ce.embed,ce,!0,V.schema);{const Ge=ur(V),vt=Qo(V),ko=I(V);return ce.width=ce.width||"300",ce.height=ce.height||"150",Ht.each(ce,(U,ft)=>{ce[ft]=V.dom.encode(""+U)}),ce.type==="iframe"?Qt(ce,ko):ce.sourcemime==="application/x-shockwave-flash"?ds(ce):ce.sourcemime.indexOf("audio")!==-1?Rt(ce,Ge):uo(ce,vt)}},tn=V=>V.hasAttribute("data-mce-object")||V.hasAttribute("data-ephox-embed-iri"),Pn=V=>{V.on("click keyup touchend",()=>{const F=V.selection.getNode();F&&V.dom.hasClass(F,"mce-preview-object")&&V.dom.getAttrib(F,"data-mce-selected")&&F.setAttribute("data-mce-selected","2")}),V.on("ObjectResized",F=>{const ne=F.target;if(ne.getAttribute("data-mce-object")){let ce=ne.getAttribute("data-mce-html");ce&&(ce=unescape(ce),ne.setAttribute("data-mce-html",escape(en(ce,{width:String(F.width),height:String(F.height)},!1,V.schema))))}})},dr={},mo=(V,F,ne)=>new Promise((ce,Ve)=>{const Ge=vt=>(vt.html&&(dr[V.source]=vt),ce({url:V.source,html:vt.html?vt.html:F(V)}));dr[V.source]?Ge(dr[V.source]):ne({url:V.source}).then(Ge).catch(Ve)}),ws=(V,F)=>Promise.resolve({html:F(V),url:V.source}),Ss=V=>F=>Et(V,F),bn=(V,F)=>{const ne=go(V);return ne?mo(F,Ss(V),ne):ws(F,Ss(V))},Fc=V=>st(dr,V),Vr=(V,F)=>So(F,V).bind(ne=>So(ne,"meta")),Vn=(V,F,ne)=>ce=>{const Ve=()=>So(V,ce),Ge=()=>So(F,ce),vt=ft=>So(ft,"value").bind(gn=>gn.length>0?Eo.some(gn):Eo.none()),ko=()=>Ve().bind(ft=>ts(ft)?vt(ft).orThunk(Ge):Ge().orThunk(()=>Eo.from(ft))),U=()=>Ge().orThunk(()=>Ve().bind(ft=>ts(ft)?vt(ft):Eo.from(ft)));return{[ce]:(ce===ne?ko():U()).getOr("")}},Ro=(V,F)=>{const ne={};return So(V,"dimensions").each(ce=>{Go(["width","height"],Ve=>{So(F,Ve).orThunk(()=>So(ce,Ve)).each(Ge=>ne[Ve]=Ge)})}),ne},lc=(V,F)=>{const ne=F&&F!=="dimensions"?Vr(F,V).getOr({}):{},ce=Vn(V,ne,F);return{...ce("source"),...ce("altsource"),...ce("poster"),...ce("embed"),...Ro(V,ne)}},ho=V=>{const F={...V,source:{value:So(V,"source").getOr("")},altsource:{value:So(V,"altsource").getOr("")},poster:{value:So(V,"poster").getOr("")}};return Go(["width","height"],ne=>{So(V,ne).each(ce=>{const Ve=F.dimensions||{};Ve[ne]=ce,F.dimensions=Ve})}),F},yo=V=>F=>{const ne=F&&F.msg?"Media embed handler error: "+F.msg:"Media embed handler threw unknown error.";V.notificationManager.open({type:"error",text:ne})},Tc=V=>{const F=V.selection.getNode(),ne=tn(F)?V.serializer.serialize(F,{selection:!0}):"",ce=Ue(ne,V.schema),Ge=(()=>{if(ic(ce.source,ce.type)){const vt=V.dom.getRect(F);return{width:vt.w.toString().replace(/px$/,""),height:vt.h.toString().replace(/px$/,"")}}else return{}})();return{embed:ne,...ce,...Ge}},Gt=(V,F)=>ne=>{if(un(ne.url)&&ne.url.trim().length>0){const ce=ne.html,Ge={...Ue(ce,F.schema),source:ne.url,embed:ce};V.setData(ho(Ge))}},jo=(V,F)=>{const ne=V.dom.select("*[data-mce-object]");for(let ce=0;ce<F.length;ce++)for(let Ve=ne.length-1;Ve>=0;Ve--)F[ce]===ne[Ve]&&ne.splice(Ve,1);V.selection.select(ne[0])},Or=(V,F)=>{const ne=V.dom.select("*[data-mce-object]");V.insertContent(F),jo(V,ne),V.nodeChanged()},ic=(V,F)=>At(F)&&F==="ephox-embed-iri"&&At(kr(V)),Nr=(V,F)=>((ce,Ve)=>ce.width!==Ve.width||ce.height!==Ve.height)(V,F)&&ic(F.source,V.type),Dn=(V,F,ne)=>{var ce;F.embed=Nr(V,F)&&En(ne)?Et(ne,{...F,embed:""}):en((ce=F.embed)!==null&&ce!==void 0?ce:"",F,!1,ne.schema),F.embed&&(V.source===F.source||Fc(F.source))?Or(ne,F.embed):bn(ne,F).then(Ve=>{Or(ne,Ve.html)}).catch(yo(ne))},uc=V=>{const F=Tc(V),ne=Mn(F),ce=ho(F),Ve=(Rn,nn)=>{const Yn=lc(nn.getData(),"source");Rn.source!==Yn.source&&(Gt(ns,V)({url:Yn.source,html:""}),bn(V,Yn).then(Gt(ns,V)).catch(yo(V)))},Ge=Rn=>{var nn;const Yn=lc(Rn.getData()),Xn=Ue((nn=Yn.embed)!==null&&nn!==void 0?nn:"",V.schema);Rn.setData(ho(Xn))},vt=(Rn,nn,Yn)=>{const Xn=lc(Rn.getData(),nn),ms=Nr(Yn,Xn)&&En(V)?{...Xn,embed:""}:Xn,Yc=Et(V,ms);Rn.setData(ho({...ms,embed:Yc}))},ko=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],U=En(V)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],ft={title:"General",name:"general",items:Jo([ko,U])},hn={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},Kn=[];wt(V)&&Kn.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),q(V)&&Kn.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const Kt={title:"Advanced",name:"advanced",items:Kn},Oc=[ft,hn];Kn.length>0&&Oc.push(Kt);const Js={type:"tabpanel",tabs:Oc},ns=V.windowManager.open({title:"Insert/Edit Media",size:"normal",body:Js,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Rn=>{const nn=lc(Rn.getData());Dn(ne.get(),nn,V),Rn.close()},onChange:(Rn,nn)=>{switch(nn.name){case"source":Ve(ne.get(),Rn);break;case"embed":Ge(Rn);break;case"dimensions":case"altsource":case"poster":vt(Rn,nn.name,ne.get());break}ne.set(lc(Rn.getData()))},initialData:ce})},He=V=>({showDialog:()=>{uc(V)}}),Ft=V=>{const F=()=>{uc(V)};V.addCommand("mceMedia",F)},Cn=(V,F,ne)=>V.length>=F.length&&V.substr(ne,ne+F.length)===F,xs=(V,F)=>Cn(V,F,0);var mr=tinymce.util.Tools.resolve("tinymce.Env");const os=V=>{const F=V.name;return F==="iframe"||F==="video"||F==="audio"},wo=(V,F,ne,ce=null)=>{const Ve=V.attr(ne);return At(Ve)?Ve:st(F,ne)?null:ce},Ks=(V,F,ne)=>{const ce=F.name==="img"||V.name==="video",Ve=ce?"300":null,Ge=V.name==="audio"?"30":"150",vt=ce?Ge:null;F.attr({width:wo(V,ne,"width",Ve),height:wo(V,ne,"height",vt)})},gr=(V,F,ne,ce)=>{const Ve=we(V.schema).parse(ce,{context:F});for(;Ve.firstChild;)ne.append(Ve.firstChild)},Kc=(V,F)=>{const ne=F.name,ce=new Xt("img",1);return qn(V,F,ce),Ks(F,ce,{}),ce.attr({style:F.attr("style"),src:mr.transparentSrc,"data-mce-object":ne,class:"mce-object mce-object-"+ne}),ce},Cs=(V,F)=>{var ne;const ce=F.name,Ve=new Xt("span",1);Ve.attr({contentEditable:"false",style:F.attr("style"),"data-mce-object":ce,class:"mce-preview-object mce-object-"+ce}),qn(V,F,Ve);const Ge=V.dom.parseStyle((ne=F.attr("style"))!==null&&ne!==void 0?ne:""),vt=new Xt(ce,1);if(Ks(F,vt,Ge),vt.attr({src:F.attr("src"),style:F.attr("style"),class:F.attr("class")}),ce==="iframe")vt.attr({allowfullscreen:F.attr("allowfullscreen"),frameborder:"0",sandbox:F.attr("sandbox")});else{Go(["controls","crossorigin","currentTime","loop","muted","poster","preload"],gn=>{vt.attr(gn,F.attr(gn))});const ft=Ve.attr("data-mce-html");At(ft)&&gr(V,ce,vt,unescape(ft))}const ko=new Xt("span",1);return ko.attr("class","mce-shim"),Ve.append(vt),Ve.append(ko),Ve},qn=(V,F,ne)=>{var ce;const Ve=(ce=F.attributes)!==null&&ce!==void 0?ce:[];let Ge=Ve.length;for(;Ge--;){const ft=Ve[Ge].name;let gn=Ve[Ge].value;ft!=="width"&&ft!=="height"&&ft!=="style"&&!xs(ft,"data-mce-")&&((ft==="data"||ft==="src")&&(gn=V.convertURL(gn,ft)),ne.attr("data-mce-p-"+ft,gn))}const vt=fn({inner:!0},V.schema),ko=new Xt("div",1);Go(F.children(),ft=>ko.append(ft));const U=vt.serialize(ko);U&&(ne.attr("data-mce-html",escape(U)),ne.empty())},Ys=V=>{const F=V.attr("class");return un(F)&&/\btiny-pageembed\b/.test(F)},zr=V=>{let F=V;for(;F=F.parent;)if(F.attr("data-ephox-embed-iri")||Ys(F))return!0;return!1},kc=V=>F=>{let ne=F.length,ce;for(;ne--;)ce=F[ne],ce.parent&&(ce.parent.attr("data-mce-object")||(os(ce)&&xt(V)?zr(ce)||ce.replace(Cs(V,ce)):zr(ce)||ce.replace(Kc(V,ce))))},Tn=(V,F,ne)=>{const ce=V.options.get,Ve=ce("xss_sanitization"),Ge=Tr(V);return we(V.schema,{sanitize:Ve,validate:Ge}).parse(ne,{context:F})},mn=V=>{V.on("PreInit",()=>{const{schema:F,serializer:ne,parser:ce}=V,Ve=F.getBoolAttrs();Go("webkitallowfullscreen mozallowfullscreen".split(" "),Ge=>{Ve[Ge]={}}),Ae({embed:["wmode"]},(Ge,vt)=>{const ko=F.getElementRule(vt);ko&&Go(Ge,U=>{ko.attributes[U]={},ko.attributesOrder.push(U)})}),ce.addNodeFilter("iframe,video,audio,object,embed",kc(V)),ne.addAttributeFilter("data-mce-object",(Ge,vt)=>{var ko;let U=Ge.length;for(;U--;){const ft=Ge[U];if(!ft.parent)continue;const gn=ft.attr(vt),hn=new Xt(gn,1);if(gn!=="audio"){const Js=ft.attr("class");Js&&Js.indexOf("mce-preview-object")!==-1&&ft.firstChild?hn.attr({width:ft.firstChild.attr("width"),height:ft.firstChild.attr("height")}):hn.attr({width:ft.attr("width"),height:ft.attr("height")})}hn.attr({style:ft.attr("style")});const Kn=(ko=ft.attributes)!==null&&ko!==void 0?ko:[];let Kt=Kn.length;for(;Kt--;){const Js=Kn[Kt].name;Js.indexOf("data-mce-p-")===0&&hn.attr(Js.substr(11),Kn[Kt].value)}const Oc=ft.attr("data-mce-html");if(Oc){const Js=Tn(V,gn,unescape(Oc));Go(Js.children(),ns=>hn.append(ns))}ft.replace(hn)}})}),V.on("SetContent",()=>{const F=V.dom;Go(F.select("span.mce-preview-object"),ne=>{F.select("span.mce-shim",ne).length===0&&F.add(ne,"span",{class:"mce-shim"})})})},on=V=>{V.on("ResolveName",F=>{let ne;F.target.nodeType===1&&(ne=F.target.getAttribute("data-mce-object"))&&(F.name=ne)})},Xs=V=>F=>{const ne=()=>{F.setEnabled(V.selection.isEditable())};return V.on("NodeChange",ne),ne(),()=>{V.off("NodeChange",ne)}},Wa=V=>{const F=()=>V.execCommand("mceMedia");V.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:F,onSetup:ne=>{const ce=V.selection;ne.setActive(tn(ce.getNode()));const Ve=ce.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",ne.setActive).unbind,Ge=Xs(V)(ne);return()=>{Ve(),Ge()}}}),V.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:F,onSetup:Xs(V)})};var $n=()=>{ac.add("media",V=>(Re(V),Ft(V),Wa(V),on(V),mn(V),Pn(V),He(V)))};$n()})();(function(){var ac=tinymce.util.Tools.resolve("tinymce.PluginManager");const qs=(g,b,k)=>{var $;return k(g,b.prototype)?!0:(($=g.constructor)===null||$===void 0?void 0:$.name)===b.name},is=g=>{const b=typeof g;return g===null?"null":b==="object"&&Array.isArray(g)?"array":b==="object"&&qs(g,String,(k,$)=>$.isPrototypeOf(k))?"string":b},xn=g=>b=>is(b)===g,un=g=>b=>typeof b===g,ts=g=>b=>g===b,dn=xn("string"),Xe=xn("array"),At=un("boolean"),Eo=ts(void 0),Vo=g=>g==null,Go=g=>!Vo(g),Jo=un("function"),Mn=un("number"),us=()=>{},oo=(g,b)=>k=>g(b(k)),Ae=g=>()=>g,So=g=>g,st=(g,b)=>g===b;function X(g,...b){return(...k)=>{const $=b.concat(k);return g.apply(null,$)}}const Re=g=>{g()},ur=Ae(!1),Qo=Ae(!0);class I{constructor(b,k){this.tag=b,this.value=k}static some(b){return new I(!0,b)}static none(){return I.singletonNone}fold(b,k){return this.tag?k(this.value):b()}isSome(){return this.tag}isNone(){return!this.tag}map(b){return this.tag?I.some(b(this.value)):I.none()}bind(b){return this.tag?b(this.value):I.none()}exists(b){return this.tag&&b(this.value)}forall(b){return!this.tag||b(this.value)}filter(b){return!this.tag||b(this.value)?this:I.none()}getOr(b){return this.tag?this.value:b}or(b){return this.tag?this:b}getOrThunk(b){return this.tag?this.value:b()}orThunk(b){return this.tag?this:b()}getOrDie(b){if(this.tag)return this.value;throw new Error(b??"Called getOrDie on None")}static from(b){return Go(b)?I.some(b):I.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(b){this.tag&&b(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}I.singletonNone=new I(!1);const xt=Object.keys,Tr=Object.hasOwnProperty,go=(g,b)=>{const k=xt(g);for(let $=0,G=k.length;$<G;$++){const re=k[$],ve=g[re];b(ve,re)}},wt=g=>(b,k)=>{g[k]=b},q=(g,b,k,$)=>{go(g,(G,re)=>{(b(G,re)?k:$)(G,re)})},En=(g,b)=>{const k={};return q(g,b,wt(k),us),k},Ht=(g,b)=>{const k=[];return go(g,($,G)=>{k.push(b($,G))}),k},io=g=>Ht(g,So),v=g=>xt(g).length,Wt=(g,b)=>xo(g,b)?I.from(g[b]):I.none(),xo=(g,b)=>Tr.call(g,b),An=(g,b)=>xo(g,b)&&g[b]!==void 0&&g[b]!==null,Ue=g=>{for(const b in g)if(Tr.call(g,b))return!1;return!0},pt=Array.prototype.indexOf,Xt=Array.prototype.push,fn=(g,b)=>pt.call(g,b),we=(g,b)=>fn(g,b)>-1,et=(g,b)=>{for(let k=0,$=g.length;k<$;k++){const G=g[k];if(b(G,k))return!0}return!1},ue=(g,b)=>{const k=[];for(let $=0;$<g;$++)k.push(b($));return k},ye=(g,b)=>{const k=g.length,$=new Array(k);for(let G=0;G<k;G++){const re=g[G];$[G]=b(re,G)}return $},zt=(g,b)=>{for(let k=0,$=g.length;k<$;k++){const G=g[k];b(G,k)}},en=(g,b)=>{for(let k=g.length-1;k>=0;k--){const $=g[k];b($,k)}},Ct=(g,b)=>{const k=[],$=[];for(let G=0,re=g.length;G<re;G++){const ve=g[G];(b(ve,G)?k:$).push(ve)}return{pass:k,fail:$}},Jt=(g,b)=>{const k=[];for(let $=0,G=g.length;$<G;$++){const re=g[$];b(re,$)&&k.push(re)}return k},Ut=(g,b,k)=>(en(g,($,G)=>{k=b(k,$,G)}),k),kr=(g,b,k)=>(zt(g,($,G)=>{k=b(k,$,G)}),k),Qt=(g,b,k)=>{for(let $=0,G=g.length;$<G;$++){const re=g[$];if(b(re,$))return I.some(re);if(k(re,$))break}return I.none()},ds=(g,b)=>Qt(g,b,ur),Rt=g=>{const b=[];for(let k=0,$=g.length;k<$;++k){if(!Xe(g[k]))throw new Error("Arr.flatten item "+k+" was not an array, input: "+g);Xt.apply(b,g[k])}return b},uo=(g,b)=>Rt(ye(g,b)),Et=(g,b)=>{for(let k=0,$=g.length;k<$;++k){const G=g[k];if(b(G,k)!==!0)return!1}return!0},tn=(g,b)=>{const k={};for(let $=0,G=g.length;$<G;$++){const re=g[$];k[String(re)]=b(re,$)}return k},Pn=(g,b)=>b>=0&&b<g.length?I.some(g[b]):I.none(),dr=g=>Pn(g,0),mo=g=>Pn(g,g.length-1),ws=(g,b)=>{for(let k=0;k<g.length;k++){const $=b(g[k],k);if($.isSome())return $}return I.none()},Ss=8,bn=9,Fc=11,Vr=1,Vn=3,Ro=(g,b)=>{const $=(b||document).createElement("div");if($.innerHTML=g,!$.hasChildNodes()||$.childNodes.length>1){const G="HTML does not have a single root node";throw console.error(G,g),new Error(G)}return yo($.childNodes[0])},lc=(g,b)=>{const $=(b||document).createElement(g);return yo($)},ho=(g,b)=>{const $=(b||document).createTextNode(g);return yo($)},yo=g=>{if(g==null)throw new Error("Node cannot be null or undefined");return{dom:g}},Gt={fromHtml:Ro,fromTag:lc,fromText:ho,fromDom:yo,fromPoint:(g,b,k)=>I.from(g.dom.elementFromPoint(b,k)).map(yo)},jo=(g,b)=>{const k=g.dom;if(k.nodeType!==Vr)return!1;{const $=k;if($.matches!==void 0)return $.matches(b);if($.msMatchesSelector!==void 0)return $.msMatchesSelector(b);if($.webkitMatchesSelector!==void 0)return $.webkitMatchesSelector(b);if($.mozMatchesSelector!==void 0)return $.mozMatchesSelector(b);throw new Error("Browser lacks native selectors")}},Or=g=>g.nodeType!==Vr&&g.nodeType!==bn&&g.nodeType!==Fc||g.childElementCount===0,ic=(g,b)=>{const k=b===void 0?document:b.dom;return Or(k)?[]:ye(k.querySelectorAll(g),Gt.fromDom)},Nr=(g,b)=>{const k=b===void 0?document:b.dom;return Or(k)?I.none():I.from(k.querySelector(g)).map(Gt.fromDom)},Dn=(g,b)=>g.dom===b.dom,uc=jo;typeof window<"u"||Function("return this;")();const He=g=>g.dom.nodeName.toLowerCase(),Ft=g=>g.dom.nodeType,Cn=g=>b=>Ft(b)===g,xs=g=>Ft(g)===Ss||He(g)==="#comment",mr=Cn(Vr),os=Cn(Vn),wo=Cn(bn),Ks=Cn(Fc),gr=g=>b=>mr(b)&&He(b)===g,Kc=g=>Gt.fromDom(g.dom.ownerDocument),Cs=g=>wo(g)?g:Kc(g),qn=g=>I.from(g.dom.parentNode).map(Gt.fromDom),Ys=(g,b)=>{const k=Jo(b)?b:ur;let $=g.dom;const G=[];for(;$.parentNode!==null&&$.parentNode!==void 0;){const re=$.parentNode,ve=Gt.fromDom(re);if(G.push(ve),k(ve)===!0)break;$=re}return G},zr=g=>I.from(g.dom.previousSibling).map(Gt.fromDom),kc=g=>I.from(g.dom.nextSibling).map(Gt.fromDom),Tn=g=>ye(g.dom.childNodes,Gt.fromDom),mn=(g,b)=>{const k=g.dom.childNodes;return I.from(k[b]).map(Gt.fromDom)},on=g=>mn(g,0),Xs=g=>Ks(g)&&Go(g.dom.host),$n=Jo(Element.prototype.attachShadow)&&Jo(Node.prototype.getRootNode)?g=>Gt.fromDom(g.dom.getRootNode()):Cs,V=g=>{const b=$n(g);return Xs(b)?I.some(b):I.none()},F=g=>Gt.fromDom(g.dom.host),ne=g=>{const b=os(g)?g.dom.parentNode:g.dom;if(b==null||b.ownerDocument===null)return!1;const k=b.ownerDocument;return V(Gt.fromDom(b)).fold(()=>k.body.contains(b),oo(ne,F))};var ce=(g,b,k,$,G)=>g(k,$)?I.some(k):Jo(G)&&G(k)?I.none():b(k,$,G);const Ve=(g,b,k)=>{let $=g.dom;const G=Jo(k)?k:ur;for(;$.parentNode;){$=$.parentNode;const re=Gt.fromDom($);if(b(re))return I.some(re);if(G(re))break}return I.none()},Ge=(g,b,k)=>ce((G,re)=>re(G),Ve,g,b,k),vt=(g,b)=>{const k=G=>b(Gt.fromDom(G));return ds(g.dom.childNodes,k).map(Gt.fromDom)},ko=(g,b,k)=>Ve(g,$=>jo($,b),k),U=(g,b)=>vt(g,k=>jo(k,b)),ft=(g,b)=>Nr(b,g),gn=(g,b,k)=>ce((G,re)=>jo(G,re),ko,g,b,k),hn=g=>gn(g,"[contenteditable]"),Kn=(g,b=!1)=>ne(g)?g.dom.isContentEditable:hn(g).fold(Ae(b),k=>Kt(k)==="true"),Kt=g=>g.dom.contentEditable,Oc=g=>g.nodeName.toLowerCase(),Js=g=>Gt.fromDom(g.getBody()),ns=g=>b=>Dn(b,Js(g)),Rn=g=>g?g.replace(/px$/,""):"",nn=g=>/^\d+(\.\d+)?$/.test(g)?g+"px":g,Yn=g=>Gt.fromDom(g.selection.getStart()),Xn=g=>Gt.fromDom(g.selection.getEnd()),ms=g=>Ge(g,gr("table")).forall(Kn),Yc=(g,b)=>Jt(Tn(g),b),Pc=(g,b)=>{let k=[];return zt(Tn(g),$=>{b($)&&(k=k.concat([$])),k=k.concat(Pc($,b))}),k},dc=(g,b)=>Yc(g,k=>jo(k,b)),Co=(g,b)=>ic(b,g),Qs=(g,b,k)=>{if(dn(k)||At(k)||Mn(k))g.setAttribute(b,k+"");else throw console.error("Invalid call to Attribute.set. Key ",b,":: Value ",k,":: Element ",g),new Error("Attribute value was not simple")},gs=(g,b,k)=>{Qs(g.dom,b,k)},Sa=(g,b)=>{const k=g.dom;go(b,($,G)=>{Qs(k,G,$)})},Rs=(g,b)=>{const k=g.dom.getAttribute(b);return k===null?void 0:k},kn=(g,b)=>I.from(Rs(g,b)),bo=(g,b)=>{g.dom.removeAttribute(b)},Ts=g=>kr(g.dom.attributes,(b,k)=>(b[k.name]=k.value,b),{}),Xc=(g,b,k=st)=>g.exists($=>k($,b)),eo=g=>{const b=[],k=$=>{b.push($)};for(let $=0;$<g.length;$++)g[$].each(k);return b},Nn=(g,b,k)=>g.isSome()&&b.isSome()?I.some(k(g.getOrDie(),b.getOrDie())):I.none(),ks=g=>g.bind(So),On=(g,b)=>g?I.some(b):I.none(),_r=(g,b)=>g.substring(b),Zr=(g,b,k)=>b===""||g.length>=b.length&&g.substr(k,k+b.length)===b,ss=(g,b)=>Ur(g,b)?_r(g,b.length):g,Ur=(g,b)=>Zr(g,b,0),vl=(g=>b=>b.replace(g,""))(/^\s+|\s+$/g),Mr=g=>g.length>0,xa=g=>!Mr(g),Hs=(g,b=10)=>{const k=parseInt(g,b);return isNaN(k)?I.none():I.some(k)},_c=g=>{const b=parseFloat(g);return isNaN(b)?I.none():I.some(b)},Jc=g=>g.style!==void 0&&Jo(g.style.getPropertyValue),Ca=(g,b,k)=>{if(!dn(k))throw console.error("Invalid call to CSS.set. Property ",b,":: Value ",k,":: Element ",g),new Error("CSS value must be a string: "+k);Jc(g)&&g.style.setProperty(b,k)},yl=(g,b)=>{Jc(g)&&g.style.removeProperty(b)},D=(g,b,k)=>{const $=g.dom;Ca($,b,k)},N=(g,b)=>{const k=g.dom,G=window.getComputedStyle(k).getPropertyValue(b);return G===""&&!ne(g)?K(k,b):G},K=(g,b)=>Jc(g)?g.style.getPropertyValue(b):"",te=(g,b)=>{const k=g.dom,$=K(k,b);return I.from($).filter(G=>G.length>0)},be=(g,b)=>{const k=g.dom;yl(k,b),Xc(kn(g,"style").map(vl),"")&&bo(g,"style")},Je=(g,b,k=0)=>kn(g,b).map($=>parseInt($,10)).getOr(k),ro=(g,b)=>vn(g,b,Qo),vn=(g,b,k)=>uo(Tn(g),$=>jo($,b)?k($)?[$]:[]:vn($,b,k)),co=["tfoot","thead","tbody","colgroup"],Ho=g=>we(co,g),ao=(g,b)=>({rows:g,columns:b}),rs=(g,b,k)=>({element:g,rowspan:b,colspan:k}),mc=(g,b,k,$,G,re)=>({element:g,rowspan:b,colspan:k,row:$,column:G,isLocked:re}),Ta=(g,b,k)=>({element:g,cells:b,section:k}),at=(g,b,k,$)=>({startRow:g,startCol:b,finishRow:k,finishCol:$}),Vi=(g,b,k)=>({element:g,colspan:b,column:k}),qo=(g,b)=>({element:g,columns:b}),C=(g,b,k=ur)=>{if(k(b))return I.none();if(we(g,He(b)))return I.some(b);const $=G=>jo(G,"table")||k(G);return ko(b,g.join(","),$)},R=(g,b)=>C(["td","th"],g,b),B=g=>ro(g,"th,td"),oe=g=>jo(g,"colgroup")?dc(g,"col"):uo(Ie(g),b=>dc(b,"col")),_e=(g,b)=>gn(g,"table",b),Tt=g=>ro(g,"tr"),Ie=g=>_e(g).fold(Ae([]),b=>dc(b,"colgroup")),Ao=(g,b)=>ye(g,k=>{if(He(k)==="colgroup"){const $=ye(oe(k),G=>{const re=Je(G,"span",1);return rs(G,1,re)});return Ta(k,$,"colgroup")}else{const $=ye(B(k),G=>{const re=Je(G,"rowspan",1),ve=Je(G,"colspan",1);return rs(G,re,ve)});return Ta(k,$,b(k))}}),Er=g=>qn(g).map(b=>{const k=He(b);return Ho(k)?k:"tbody"}).getOr("tbody"),No=g=>{const b=Tt(g),$=[...Ie(g),...b];return Ao($,Er)},er="data-snooker-locked-cols",zo=g=>kn(g,er).bind(b=>I.from(b.match(/\d+/g))).map(b=>tn(b,Qo)),Ga=(g,b)=>g+","+b,Mc=(g,b,k)=>I.from(g.access[Ga(b,k)]),jt=(g,b,k)=>{const $=Is(g,G=>k(b,G.element));return $.length>0?I.some($[0]):I.none()},Is=(g,b)=>{const k=uo(g.all,$=>$.cells);return Jt(k,b)},Io=g=>{const b={};let k=0;return zt(g.cells,$=>{const G=$.colspan;ue(G,re=>{const ve=k+re;b[ve]=Vi($.element,G,ve)}),k+=G}),b},Qc=g=>{const b={},k=[],G=dr(g).map(nr=>nr.element).bind(_e).bind(zo).getOr({});let re=0,ve=0,De=0;const{pass:gt,fail:kt}=Ct(g,nr=>nr.section==="colgroup");zt(kt,nr=>{const aa=[];zt(nr.cells,Qr=>{let Zc=0;for(;b[Ga(De,Zc)]!==void 0;)Zc++;const Um=An(G,Zc.toString()),Nd=mc(Qr.element,Qr.rowspan,Qr.colspan,De,Zc,Um);for(let tu=0;tu<Qr.colspan;tu++)for(let ou=0;ou<Qr.rowspan;ou++){const Qn=De+ou,Uc=Zc+tu,El=Ga(Qn,Uc);b[El]=Nd,ve=Math.max(ve,Uc+1)}aa.push(Nd)}),re++,k.push(Ta(nr.element,aa,nr.section)),De++});const{columns:Do,colgroups:lo}=mo(gt).map(nr=>{const aa=Io(nr);return{colgroups:[qo(nr.element,io(aa))],columns:aa}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:ao(re,ve),access:b,all:k,columns:Do,colgroups:lo}},ea={fromTable:g=>{const b=No(g);return Qc(b)},generate:Qc,getAt:Mc,findItem:jt,filterItems:Is,justCells:g=>uo(g.all,b=>b.cells),justColumns:g=>io(g.columns),hasColumns:g=>xt(g.columns).length>0,getColumnAt:(g,b)=>I.from(g.columns[b])};var Os=tinymce.util.Tools.resolve("tinymce.util.Tools");const Bs=(g,b,k)=>{const $=g.select("td,th",b);let G;for(let re=0;re<$.length;re++){const ve=g.getStyle($[re],k);if(Eo(G)&&(G=ve),G!==ve)return""}return G},Gr=(g,b,k)=>{Os.each("left center right".split(" "),$=>{$!==k&&g.formatter.remove("align"+$,{},b)}),k&&g.formatter.apply("align"+k,{},b)},wu=(g,b,k)=>{Os.each("top middle bottom".split(" "),$=>{$!==k&&g.formatter.remove("valign"+$,{},b)}),k&&g.formatter.apply("valign"+k,{},b)},Ni=(g,b,k)=>{g.dispatch("TableModified",{...k,table:b})},Ar=(g,b)=>_c(g).getOr(b),Dr=(g,b,k)=>Ar(N(g,b),k),ja=(g,b,k,$)=>{const G=Dr(g,`padding-${k}`,0),re=Dr(g,`padding-${$}`,0),ve=Dr(g,`border-${k}-width`,0),De=Dr(g,`border-${$}-width`,0);return b-G-re-ve-De},ta=(g,b)=>{const k=g.dom,$=k.getBoundingClientRect().width||k.offsetWidth;return b==="border-box"?$:ja(g,$,"left","right")},hs=g=>ta(g,"content-box");var si=tinymce.util.Tools.resolve("tinymce.Env");const qa="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",zi=ue(5,g=>{const b=`${g+1}px`;return{title:b,value:b}}),ri=ye(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],g=>({title:g,value:g.toLowerCase()})),hr="100%",yd=g=>{var b;const k=g.dom,$=(b=k.getParent(g.selection.getStart(),k.isBlock))!==null&&b!==void 0?b:g.getBody();return hs(Gt.fromDom($))+"px"},Vc=(g,b)=>Qa(g)||!Ec(g)?b:Ou(g)?{...b,width:yd(g)}:{...b,width:hr},Su=(g,b)=>Qa(g)||Ec(g)?b:Ou(g)?{...b,width:yd(g)}:{...b,width:hr},Ls=g=>b=>b.options.get(g),xu=g=>{const b=g.options.register;b("table_border_widths",{processor:"object[]",default:zi}),b("table_border_styles",{processor:"object[]",default:ri}),b("table_cell_advtab",{processor:"boolean",default:!0}),b("table_row_advtab",{processor:"boolean",default:!0}),b("table_advtab",{processor:"boolean",default:!0}),b("table_appearance_options",{processor:"boolean",default:!0}),b("table_grid",{processor:"boolean",default:!si.deviceType.isTouch()}),b("table_cell_class_list",{processor:"object[]",default:[]}),b("table_row_class_list",{processor:"object[]",default:[]}),b("table_class_list",{processor:"object[]",default:[]}),b("table_toolbar",{processor:"string",default:qa}),b("table_background_color_map",{processor:"object[]",default:[]}),b("table_border_color_map",{processor:"object[]",default:[]})},jr=Ls("table_sizing_mode"),Ka=Ls("table_border_widths"),Zi=Ls("table_border_styles"),Ya=Ls("table_cell_advtab"),Sl=Ls("table_row_advtab"),Xa=Ls("table_advtab"),Cu=Ls("table_appearance_options"),Ja=Ls("table_grid"),Ec=Ls("table_style_by_css"),Fs=Ls("table_cell_class_list"),Tu=Ls("table_row_class_list"),ci=Ls("table_class_list"),xl=Ls("table_toolbar"),ku=Ls("table_background_color_map"),Ui=Ls("table_border_color_map"),Ou=g=>jr(g)==="fixed",Qa=g=>jr(g)==="responsive",_u=g=>{const b=g.options,k=b.get("table_default_styles");return b.isSet("table_default_styles")?k:Vc(g,k)},Mu=g=>{const b=g.options,k=b.get("table_default_attributes");return b.isSet("table_default_attributes")?k:Su(g,k)},wd=(g,b)=>b.column>=g.startCol&&b.column+b.colspan-1<=g.finishCol&&b.row>=g.startRow&&b.row+b.rowspan-1<=g.finishRow,Sd=(g,b)=>{let k=!0;const $=X(wd,b);for(let G=b.startRow;G<=b.finishRow;G++)for(let re=b.startCol;re<=b.finishCol;re++)k=k&&ea.getAt(g,G,re).exists($);return k?I.some(b):I.none()},Wi=(g,b)=>at(Math.min(g.row,b.row),Math.min(g.column,b.column),Math.max(g.row+g.rowspan-1,b.row+b.rowspan-1),Math.max(g.column+g.colspan-1,b.column+b.colspan-1)),ai=(g,b,k)=>{const $=ea.findItem(g,b,Dn),G=ea.findItem(g,k,Dn);return $.bind(re=>G.map(ve=>Wi(re,ve)))},ka=(g,b,k)=>ai(g,b,k).bind($=>Sd(g,$)),Eu=(g,b,k)=>{const $=xd(g);return ka($,b,k)},xd=ea.fromTable,li=(g,b)=>{qn(g).each($=>{$.dom.insertBefore(b.dom,g.dom)})},Cd=(g,b)=>{kc(g).fold(()=>{qn(g).each(G=>{qr(G,b)})},$=>{li($,b)})},Ac=(g,b)=>{on(g).fold(()=>{qr(g,b)},$=>{g.dom.insertBefore(b.dom,$.dom)})},qr=(g,b)=>{g.dom.appendChild(b.dom)},el=(g,b)=>{li(g,b),qr(b,g)},tl=(g,b)=>{zt(b,(k,$)=>{const G=$===0?g:b[$-1];Cd(G,k)})},Oa=(g,b)=>{zt(b,k=>{qr(g,k)})},_a=g=>{const b=g.dom;b.parentNode!==null&&b.parentNode.removeChild(b)},Td=g=>{const b=Tn(g);b.length>0&&tl(g,b),_a(g)},ol=((g,b)=>{const k=re=>{if(!g(re))throw new Error("Can only get "+b+" value of a "+b+" node");return $(re).getOr("")},$=re=>g(re)?I.from(re.dom.nodeValue):I.none();return{get:k,getOption:$,set:(re,ve)=>{if(!g(re))throw new Error("Can only set raw "+b+" value of a "+b+" node");re.dom.nodeValue=ve}}})(os,"text"),nl=g=>ol.get(g),Od=(g,b)=>ol.set(g,b);var pr=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Gi=()=>{const g=kt=>Gt.fromDom(kt.dom.cloneNode(!1)),b=kt=>Cs(kt).dom,k=kt=>mr(kt)?He(kt)==="body"?!0:we(pr,He(kt)):!1,$=kt=>mr(kt)?we(["br","img","hr","input"],He(kt)):!1,G=kt=>mr(kt)&&Rs(kt,"contenteditable")==="false",re=(kt,Do)=>kt.dom.compareDocumentPosition(Do.dom),ve=(kt,Do)=>{const lo=Ts(kt);Sa(Do,lo)},De=kt=>{const Do=He(kt);return we(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Do)},gt=kt=>mr(kt)?kn(kt,"lang"):I.none();return{up:Ae({selector:ko,closest:gn,predicate:Ve,all:Ys}),down:Ae({selector:Co,predicate:Pc}),styles:Ae({get:N,getRaw:te,set:D,remove:be}),attrs:Ae({get:Rs,set:gs,remove:bo,copyTo:ve}),insert:Ae({before:li,after:Cd,afterAll:tl,append:qr,appendAll:Oa,prepend:Ac,wrap:el}),remove:Ae({unwrap:Td,remove:_a}),create:Ae({nu:Gt.fromTag,clone:g,text:Gt.fromText}),query:Ae({comparePosition:re,prevSibling:zr,nextSibling:kc}),property:Ae({children:Tn,name:He,parent:qn,document:b,isText:os,isComment:xs,isElement:mr,isSpecial:De,getLanguage:gt,getText:nl,setText:Od,isBoundary:k,isEmptyTag:$,isNonEditable:G}),eq:Dn,is:uc}};const Au=(g,b,k,$)=>{const G=k[0],re=k.slice(1);return $(g,b,G,re)},ji=(g,b,k)=>k.length>0?Au(g,b,k,Nc):I.none(),Nc=(g,b,k,$)=>{const G=b(g,k);return Ut($,(re,ve)=>{const De=b(g,ve);return Ps(g,re,De)},G)},Ps=(g,b,k)=>b.bind($=>k.filter(X(g.eq,$))),qi=ji,_d=Gi(),Du=(g,b)=>qi(_d,(k,$)=>g($),b),ii=g=>ko(g,"table"),Cl=(g,b)=>{const k=Co(g,b);return k.length>0?I.some(k):I.none()},Md=(g,b,k)=>ft(g,b).bind($=>ft(g,k).bind(G=>Du(ii,[$,G]).map(re=>({first:$,last:G,table:re})))),Ed=(g,b)=>Cl(g,b),Bm=(g,b,k)=>Md(g,b,k).bind($=>{const G=gt=>Dn(g,gt),re="thead,tfoot,tbody,table",ve=ko($.first,re,G),De=ko($.last,re,G);return ve.bind(gt=>De.bind(kt=>Dn(gt,kt)?Eu($.table,$.first,$.last):I.none()))}),Ad=g=>ye(g,Gt.fromDom),$u="data-mce-selected",ui="td["+$u+"],th["+$u+"]",Ki="data-mce-first-selected",Dd="td["+Ki+"],th["+Ki+"]",yn="data-mce-last-selected",Jn="td["+yn+"],th["+yn+"]",fr={selected:$u,selectedSelector:ui,firstSelected:Ki,firstSelectedSelector:Dd,lastSelected:yn,lastSelectedSelector:Jn},Ru=g=>_e(g).bind(b=>Ed(b,fr.firstSelectedSelector)).fold(Ae(g),b=>b[0]),$d=g=>(b,k)=>{const $=He(b),G=$==="col"||$==="colgroup"?Ru(b):b;return gn(G,g,k)},ps=$d("th,td,caption"),Yi=$d("th,td"),Xi=g=>Ad(g.model.table.getSelectedCells()),Hu=(g,b)=>{const k=Yi(g),$=k.bind(G=>_e(G)).map(G=>Tt(G));return Nn(k,$,(G,re)=>Jt(re,ve=>et(Ad(ve.dom.cells),De=>Rs(De,b)==="1"||Dn(De,G)))).getOr([])},zc=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],St=g=>({value:Ji(g)}),br=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Iu=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Bu=g=>br.test(g)||Iu.test(g),Ji=g=>ss(g,"#").toUpperCase(),di=g=>Bu(g)?I.some({value:Ji(g)}):I.none(),Tl=g=>{const b=g.toString(16);return(b.length===1?"0"+b:b).toUpperCase()},Lu=g=>{const b=Tl(g.red)+Tl(g.green)+Tl(g.blue);return St(b)},Kr=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,vr=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,$r=(g,b,k,$)=>({red:g,green:b,blue:k,alpha:$}),zn=(g,b,k,$)=>{const G=parseInt(g,10),re=parseInt(b,10),ve=parseInt(k,10),De=parseFloat($);return $r(G,re,ve,De)},pn=g=>{if(g==="transparent")return I.some($r(0,0,0,0));const b=Kr.exec(g);if(b!==null)return I.some(zn(b[1],b[2],b[3],"1"));const k=vr.exec(g);return k!==null?I.some(zn(k[1],k[2],k[3],k[4])):I.none()},mi=g=>di(g).orThunk(()=>pn(g).map(Lu)).getOrThunk(()=>{const b=document.createElement("canvas");b.height=1,b.width=1;const k=b.getContext("2d");k.clearRect(0,0,b.width,b.height),k.fillStyle="#FFFFFF",k.fillStyle=g,k.fillRect(0,0,1,1);const $=k.getImageData(0,0,1,1).data,G=$[0],re=$[1],ve=$[2],De=$[3];return Lu($r(G,re,ve,De))}),Lm=g=>pn(g).map(Lu).map(b=>"#"+b.value).getOr(g),Dc=g=>{let b=g;return{get:()=>b,set:G=>{b=G}}},Fu=g=>{const b=Dc(I.none()),k=()=>b.get().each(g);return{clear:()=>{k(),b.set(I.none())},isSet:()=>b.get().isSome(),get:()=>b.get(),set:De=>{k(),b.set(I.some(De))}}},Fm=()=>Fu(g=>g.unbind()),Rd=(g,b,k)=>$=>{const G=Fm(),re=xa(k),ve=()=>{const De=Xi(g),gt=kt=>g.formatter.match(b,{value:k},kt.dom,re);re?($.setActive(!et(De,gt)),G.set(g.formatter.formatChanged(b,kt=>$.setActive(!kt),!0))):($.setActive(Et(De,gt)),G.set(g.formatter.formatChanged(b,$.setActive,!1,{value:k})))};return g.initialized?ve():g.on("init",ve),G.clear},Oo=g=>An(g,"menu"),gi=g=>ye(g,b=>{const k=b.text||b.title||"";return Oo(b)?{text:k,items:gi(b.menu)}:{text:k,value:b.value}}),Rr=g=>g.length?I.some(gi([{text:"Select...",value:"mce-no-match"},...g])):I.none(),oa=(g,b,k,$)=>ye(b,G=>{const re=G.text||G.title;return Oo(G)?{type:"nestedmenuitem",text:re,getSubmenuItems:()=>oa(g,G.menu,k,$)}:{text:re,type:"togglemenuitem",onAction:()=>$(G.value),onSetup:Rd(g,k,G.value)}}),na=(g,b)=>k=>{g.execCommand("mceTableApplyCellStyle",!1,{[b]:k})},sl=g=>uo(g,b=>Oo(b)?[{...b,menu:sl(b.menu)}]:Mr(b.value)?[b]:[]),kl=(g,b,k,$)=>G=>G(oa(g,b,k,$)),Pu=(g,b,k)=>{const $=ye(b,G=>({text:G.title,value:"#"+mi(G.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:$.length>0?$:void 0,allowCustomColors:!1},onAction:G=>{const re=G.value==="remove"?"":G.value;g.execCommand("mceTableApplyCellStyle",!1,{[k]:re})}}]},Dt=g=>()=>{const k=g.queryCommandValue("mceTableRowType")==="header"?"body":"header";g.execCommand("mceTableRowType",!1,{type:k})},hi=g=>()=>{const k=g.queryCommandValue("mceTableColType")==="th"?"td":"th";g.execCommand("mceTableColType",!1,{type:k})},Hd=g=>Rr(Fs(g)).map(b=>({name:"class",type:"listbox",label:"Class",items:b})),Pm=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:zc}],Vu=g=>Pm.concat(Hd(g).toArray()),Ol=(g,b)=>{const $=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(gi(Zi(g)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:b==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat($):$}},h={normal:(g,b)=>{const k=g.dom;return{setAttrib:(ve,De)=>{k.setAttrib(b,ve,De)},setStyle:(ve,De)=>{k.setStyle(b,ve,De)},setFormat:(ve,De)=>{De===""?g.formatter.remove(ve,{value:null},b,!0):g.formatter.apply(ve,{value:De},b)}}}},S=gr("th"),_=(g,b)=>g&&b?"sectionCells":g?"section":"cells",P=g=>{const b=g.section==="thead",k=Xc(Z(g.cells),"th");return g.section==="tfoot"?{type:"footer"}:b||k?{type:"header",subType:_(b,k)}:{type:"body"}},Z=g=>{const b=Jt(g,k=>S(k.element));return b.length===0?I.some("td"):b.length===g.length?I.some("th"):I.none()},ge=g=>{const b=ye(g,G=>P(G).type),k=we(b,"header"),$=we(b,"footer");if(!k&&!$)return I.some("body");{const G=we(b,"body");return k&&!G&&!$?I.some("header"):!k&&!G&&$?I.some("footer"):I.none()}},ze=g=>{let b=!1,k;return(...$)=>(b||(b=!0,k=g.apply(null,$)),k)},lt=(g,b)=>ws(g.all,k=>ds(k.cells,$=>Dn(b,$.element))),it=(g,b,k)=>{const $=ye(b.selection,re=>R(re).bind(ve=>lt(g,ve)).filter(k)),G=eo($);return On(G.length>0,G)},nt=(g,b)=>b.mergable,sn=(g,b)=>b.unmergable,cs=(g,b)=>it(g,b,Qo),Yr=(g,b)=>lt(g,b).exists(k=>!k.isLocked),sa=(g,b)=>Et(b,k=>Yr(g,k)),Vm=(g,b)=>nt(g,b).filter(k=>sa(g,k.cells)),Pg=(g,b)=>sn(g,b).filter(k=>sa(g,k));({...{generate:g=>{if(!Xe(g))throw new Error("cases must be an array");if(g.length===0)throw new Error("there must be at least one case");const b=[],k={};return zt(g,($,G)=>{const re=xt($);if(re.length!==1)throw new Error("one and only one name per case");const ve=re[0],De=$[ve];if(k[ve]!==void 0)throw new Error("duplicate key detected:"+ve);if(ve==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Xe(De))throw new Error("case arguments must be an array");b.push(ve),k[ve]=(...gt)=>{const kt=gt.length;if(kt!==De.length)throw new Error("Wrong number of arguments to case "+ve+". Expected "+De.length+" ("+De+"), got "+kt);return{fold:(...lo)=>{if(lo.length!==g.length)throw new Error("Wrong number of arguments to fold. Expected "+g.length+", got "+lo.length);return lo[G].apply(null,gt)},match:lo=>{const Bo=xt(lo);if(b.length!==Bo.length)throw new Error("Wrong number of arguments to match. Expected: "+b.join(",")+`
Actual: `+Bo.join(","));if(!Et(b,aa=>we(Bo,aa)))throw new Error("Not all branches were specified when using match. Specified: "+Bo.join(", ")+`
Required: `+b.join(", "));return lo[ve].apply(null,gt)},log:lo=>{console.log(lo,{constructors:b,constructor:ve,params:gt})}}}}),k}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const Cp=(g,b)=>{const k=ea.fromTable(g);return cs(k,b).bind(G=>{const re=G[G.length-1],ve=G[0].row,De=re.row+re.rowspan,gt=k.all.slice(ve,De);return ge(gt)}).getOr("")},fi=g=>Ur(g,"rgb")?Lm(g):g,Bd=g=>{const b=Gt.fromDom(g);return{borderwidth:te(b,"border-width").getOr(""),borderstyle:te(b,"border-style").getOr(""),bordercolor:te(b,"border-color").map(fi).getOr(""),backgroundcolor:te(b,"background-color").map(fi).getOr("")}},ra=g=>{const b=g[0],k=g.slice(1);return zt(k,$=>{zt(xt(b),G=>{go($,(re,ve)=>{const De=b[G];De!==""&&G===ve&&De!==re&&(b[G]=G==="class"?"mce-no-match":"")})})}),b},bi=(g,b,k,$)=>ds(g,G=>!Eo(k.formatter.matchNode($,b+G))).getOr(""),rl=X(bi,["left","center","right"],"align"),fs=X(bi,["top","middle","bottom"],"valign"),Nu=(g,b)=>{const k=_u(g),$=Mu(g),G=()=>({borderstyle:Wt(k,"border-style").getOr(""),bordercolor:fi(Wt(k,"border-color").getOr("")),backgroundcolor:fi(Wt(k,"background-color").getOr(""))}),re={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},ve=()=>{const Do=k["border-width"];return Ec(g)&&Do?{border:Do}:Wt($,"border").fold(()=>({}),lo=>({border:lo}))},De=b?G():{},gt=()=>{const Do=Wt(k,"border-spacing").or(Wt($,"cellspacing")).fold(()=>({}),Bo=>({cellspacing:Bo})),lo=Wt(k,"border-padding").or(Wt($,"cellpadding")).fold(()=>({}),Bo=>({cellpadding:Bo}));return{...Do,...lo}};return{...re,...k,...$,...De,...ve(),...gt()}},Nm=g=>_e(Gt.fromDom(g)).map(b=>{const k={selection:Ad(g.cells)};return Cp(b,k)}).getOr(""),Vg=(g,b,k)=>{const $=(De,gt)=>{const kt=te(Gt.fromDom(gt),"border-width");return Ec(g)&&kt.isSome()?kt.getOr(""):De.getAttrib(gt,"border")||Bs(g.dom,gt,"border-width")||Bs(g.dom,gt,"border")||""},G=g.dom,re=Ec(g)?G.getStyle(b,"border-spacing")||G.getAttrib(b,"cellspacing"):G.getAttrib(b,"cellspacing")||G.getStyle(b,"border-spacing"),ve=Ec(g)?Bs(G,b,"padding")||G.getAttrib(b,"cellpadding"):G.getAttrib(b,"cellpadding")||Bs(G,b,"padding");return{width:G.getStyle(b,"width")||G.getAttrib(b,"width"),height:G.getStyle(b,"height")||G.getAttrib(b,"height"),cellspacing:re??"",cellpadding:ve??"",border:$(G,b),caption:!!G.select("caption",b)[0],class:G.getAttrib(b,"class",""),align:rl(g,b),...k?Bd(b):{}}},Ng=(g,b,k)=>{const $=g.dom;return{height:$.getStyle(b,"height")||$.getAttrib(b,"height"),class:$.getAttrib(b,"class",""),type:Nm(b),align:rl(g,b),...k?Bd(b):{}}},Tp=(g,b,k,$)=>{const G=g.dom,re=$.getOr(b);return{width:((De,gt)=>G.getStyle(De,gt)||G.getAttrib(De,gt))(re,"width"),scope:G.getAttrib(b,"scope"),celltype:Oc(b),class:G.getAttrib(b,"class",""),halign:rl(g,b),valign:fs(g,b),...k?Bd(b):{}}},vi=(g,b)=>{const k=ea.fromTable(g),$=ea.justCells(k),G=Jt($,re=>et(b,ve=>Dn(re.element,ve)));return ye(G,re=>({element:re.element.dom,column:ea.getColumnAt(k,re.column).map(ve=>ve.element.dom)}))},kp=(g,b,k,$)=>{$("scope")&&g.setAttrib("scope",k.scope),$("class")&&k.class!=="mce-no-match"&&g.setAttrib("class",k.class),$("width")&&b.setStyle("width",nn(k.width))},Qi=(g,b,k)=>{k("backgroundcolor")&&g.setFormat("tablecellbackgroundcolor",b.backgroundcolor),k("bordercolor")&&g.setFormat("tablecellbordercolor",b.bordercolor),k("borderstyle")&&g.setFormat("tablecellborderstyle",b.borderstyle),k("borderwidth")&&g.setFormat("tablecellborderwidth",nn(b.borderwidth))},zm=(g,b,k,$)=>{const G=b.length===1;zt(b,re=>{const ve=re.element,De=G?Qo:$,gt=h.normal(g,ve),kt=re.column.map(Do=>h.normal(g,Do)).getOr(gt);kp(gt,kt,k,De),Ya(g)&&Qi(gt,k,De),$("halign")&&Gr(g,ve,k.halign),$("valign")&&wu(g,ve,k.valign)})},zg=(g,b)=>{g.execCommand("mceTableCellType",!1,{type:b.celltype,no_events:!0})},rn=(g,b,k,$)=>{const G=En($,(re,ve)=>k[ve]!==re);v(G)>0&&b.length>=1&&_e(b[0]).each(re=>{const ve=vi(re,b),De=v(En(G,(kt,Do)=>Do!=="scope"&&Do!=="celltype"))>0,gt=xo(G,"celltype");(De||xo(G,"scope"))&&zm(g,ve,$,X(xo,G)),gt&&zg(g,$),Ni(g,re.dom,{structure:gt,style:De})})},ca=(g,b,k,$)=>{const G=$.getData();$.close(),g.undoManager.transact(()=>{rn(g,b,k,G),g.focus()})},Hr=(g,b)=>{const k=_e(b[0]).map($=>ye(vi($,b),G=>Tp(g,G.element,Ya(g),G.column)));return ra(k.getOrDie())},eu=g=>{const b=Xi(g);if(b.length===0)return;const k=Hr(g,b),$={type:"tabpanel",tabs:[{title:"General",name:"general",items:Vu(g)},Ol(g,"cell")]},G={type:"panel",items:[{type:"grid",columns:2,items:Vu(g)}]};g.windowManager.open({title:"Cell Properties",size:"normal",body:Ya(g)?$:G,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:k,onSubmit:X(ca,g,b,k)})},Jr=g=>Rr(Tu(g)).map(b=>({name:"class",type:"listbox",label:"Class",items:b})),Zg=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],bs=g=>Zg.concat(Jr(g).toArray()),tr=(g,b,k)=>{k("class")&&b.class!=="mce-no-match"&&g.setAttrib("class",b.class),k("height")&&g.setStyle("height",nn(b.height))},_l=(g,b,k)=>{k("backgroundcolor")&&g.setStyle("background-color",b.backgroundcolor),k("bordercolor")&&g.setStyle("border-color",b.bordercolor),k("borderstyle")&&g.setStyle("border-style",b.borderstyle)},me=(g,b,k,$)=>{const re=b.length===1?Qo:$;zt(b,ve=>{const De=dc(Gt.fromDom(ve),"td,th"),gt=h.normal(g,ve);tr(gt,k,re),Sl(g)&&_l(gt,k,re),$("height")&&zt(De,kt=>{g.dom.setStyle(kt.dom,"height",null)}),$("align")&&Gr(g,ve,k.align)})},gc=(g,b)=>{g.execCommand("mceTableRowType",!1,{type:b.type,no_events:!0})},Ug=(g,b,k,$)=>{const G=En($,(re,ve)=>k[ve]!==re);if(v(G)>0){const re=xo(G,"type"),ve=re?v(G)>1:!0;ve&&me(g,b,$,X(xo,G)),re&&gc(g,$),_e(Gt.fromDom(b[0])).each(De=>Ni(g,De.dom,{structure:re,style:ve}))}},Zn=(g,b,k,$)=>{const G=$.getData();$.close(),g.undoManager.transact(()=>{Ug(g,b,k,G),g.focus()})},cl=g=>{const b=Hu(Yn(g),fr.selected);if(b.length===0)return;const k=ye(b,ve=>Ng(g,ve.dom,Sl(g))),$=ra(k),G={type:"tabpanel",tabs:[{title:"General",name:"general",items:bs(g)},Ol(g,"row")]},re={type:"panel",items:[{type:"grid",columns:2,items:bs(g)}]};g.windowManager.open({title:"Row Properties",size:"normal",body:Sl(g)?G:re,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:$,onSubmit:X(Zn,g,ye(b,ve=>ve.dom),$)})},Wg=(g,b,k)=>{const $=k?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],G=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],re=Cu(g)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],ve=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],De=b.length>0?[{name:"class",type:"listbox",label:"Class",items:b}]:[];return $.concat(G).concat(re).concat(ve).concat(De)},$c=(g,b,k,$)=>{if(b.tagName==="TD"||b.tagName==="TH")dn(k)&&Go($)?g.setStyle(b,k,$):g.setStyles(b,k);else if(b.children)for(let G=0;G<b.children.length;G++)$c(g,b.children[G],k,$)},Op=(g,b,k,$)=>{const G=g.dom,re={},ve={},De=Ec(g),gt=Xa(g),kt=parseFloat(k.border)===0;if(!Eo(k.class)&&k.class!=="mce-no-match"&&(re.class=k.class),ve.height=nn(k.height),De?ve.width=nn(k.width):G.getAttrib(b,"width")&&(re.width=Rn(k.width)),De?(kt?(re.border=0,ve["border-width"]=""):(ve["border-width"]=nn(k.border),re.border=1),ve["border-spacing"]=nn(k.cellspacing)):(re.border=kt?0:k.border,re.cellpadding=k.cellpadding,re.cellspacing=k.cellspacing),De&&b.children){const Do={};if(kt?Do["border-width"]="":$.border&&(Do["border-width"]=nn(k.border)),$.cellpadding&&(Do.padding=nn(k.cellpadding)),gt&&$.bordercolor&&(Do["border-color"]=k.bordercolor),!Ue(Do))for(let lo=0;lo<b.children.length;lo++)$c(G,b.children[lo],Do)}if(gt){const Do=k;ve["background-color"]=Do.backgroundcolor,ve["border-color"]=Do.bordercolor,ve["border-style"]=Do.borderstyle}G.setStyles(b,{..._u(g),...ve}),G.setAttribs(b,{...Mu(g),...re})},al=(g,b,k,$)=>{const G=g.dom,re=$.getData(),ve=En(re,(De,gt)=>k[gt]!==De);$.close(),g.undoManager.transact(()=>{if(!b){const De=Hs(re.cols).getOr(1),gt=Hs(re.rows).getOr(1);g.execCommand("mceInsertTable",!1,{rows:gt,columns:De}),b=Yi(Yn(g),ns(g)).bind(kt=>_e(kt,ns(g))).map(kt=>kt.dom).getOrDie()}if(v(ve)>0){const De={border:xo(ve,"border"),bordercolor:xo(ve,"bordercolor"),cellpadding:xo(ve,"cellpadding")};Op(g,b,re,De);const gt=G.select("caption",b)[0];(gt&&!re.caption||!gt&&re.caption)&&g.execCommand("mceTableToggleCaption"),Gr(g,b,re.align)}if(g.focus(),g.addVisual(),v(ve)>0){const De=xo(ve,"caption"),gt=De?v(ve)>1:!0;Ni(g,b,{structure:De,style:gt})}})},Zm=(g,b)=>{const k=g.dom;let $,G=Nu(g,Xa(g));b?(G.cols="1",G.rows="1",Xa(g)&&(G.borderstyle="",G.bordercolor="",G.backgroundcolor="")):($=k.getParent(g.selection.getStart(),"table",g.getBody()),$?G=Vg(g,$,Xa(g)):Xa(g)&&(G.borderstyle="",G.bordercolor="",G.backgroundcolor=""));const re=Rr(ci(g));re.isSome()&&G.class&&(G.class=G.class.replace(/\s*mce\-item\-table\s*/g,""));const ve={type:"grid",columns:2,items:Wg(g,re.getOr([]),b)},De=()=>({type:"panel",items:[ve]}),gt=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[ve]},Ol(g,"table")]}),kt=Xa(g)?gt():De();g.windowManager.open({title:"Table Properties",size:"normal",body:kt,onSubmit:X(al,g,$,G),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:G})},hc=g=>{const b=k=>{ms(Yn(g))&&k()};go({mceTableProps:X(Zm,g,!1),mceTableRowProps:X(cl,g),mceTableCellProps:X(eu,g),mceInsertTableDialog:X(Zm,g,!0)},(k,$)=>g.addCommand($,()=>b(k)))},no=(g,b)=>U(g,b).isSome(),Ma=So,zu=g=>{const b=($,G)=>kn($,G).exists(re=>parseInt(re,10)>1),k=$=>b($,"rowspan")||b($,"colspan");return g.length>0&&Et(g,k)?I.some(g):I.none()},or=(g,b,k)=>b.length<=1?I.none():Bm(g,k.firstSelectedSelector,k.lastSelectedSelector).map($=>({bounds:$,cells:b})),Gg=g=>({element:g,mergable:I.none(),unmergable:I.none(),selection:[g]}),Ml=(g,b,k)=>({element:k,mergable:or(b,g,fr),unmergable:zu(g),selection:Ma(g)}),jg=g=>{const b=Dc(I.none()),k=Dc([]);let $=I.none();const G=gr("caption"),re=Ot=>$.forall(Uo=>!Uo[Ot]),ve=()=>ps(Yn(g),ns(g)),De=()=>ps(Xn(g),ns(g)),gt=()=>ve().bind(Ot=>ks(Nn(_e(Ot),De().bind(_e),(Uo,Ns)=>Dn(Uo,Ns)?G(Ot)?I.some(Gg(Ot)):I.some(Ml(Xi(g),Uo,Ot)):I.none()))),kt=Ot=>_e(Ot.element).map(Ns=>{const ec=ea.fromTable(Ns),Aa=cs(ec,Ot).getOr([]),Wc=kr(Aa,(yi,tc)=>(tc.isLocked&&(yi.onAny=!0,tc.column===0?yi.onFirst=!0:tc.column+tc.colspan>=ec.grid.columns&&(yi.onLast=!0)),yi),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Vm(ec,Ot).isSome(),unmergeable:Pg(ec,Ot).isSome(),locked:Wc}}),Do=()=>{b.set(ze(gt)()),$=b.get().bind(kt),zt(k.get(),Re)},lo=Ot=>(Ot(),k.set(k.get().concat([Ot])),()=>{k.set(Jt(k.get(),Uo=>Uo!==Ot))}),Bo=(Ot,Uo)=>lo(()=>b.get().fold(()=>{Ot.setEnabled(!1)},Ns=>{Ot.setEnabled(!Uo(Ns)&&g.selection.isEditable())})),nr=(Ot,Uo,Ns)=>lo(()=>b.get().fold(()=>{Ot.setEnabled(!1),Ot.setActive(!1)},ec=>{Ot.setEnabled(!Uo(ec)&&g.selection.isEditable()),Ot.setActive(Ns(ec))})),aa=Ot=>$.exists(Uo=>Uo.locked[Ot]),Qr=Ot=>Bo(Ot,Uo=>!1),Zc=Ot=>Bo(Ot,Uo=>G(Uo.element)),Um=Ot=>Uo=>Bo(Uo,Ns=>G(Ns.element)||aa(Ot)),Nd=Ot=>Uo=>Bo(Uo,Ns=>G(Ns.element)||Ot().isNone()),tu=(Ot,Uo)=>Ns=>Bo(Ns,ec=>G(ec.element)||Ot().isNone()||aa(Uo)),ou=Ot=>Bo(Ot,Uo=>re("mergeable")),Qn=Ot=>Bo(Ot,Uo=>re("unmergeable")),Uc=Ot=>nr(Ot,ur,Uo=>_e(Uo.element,ns(g)).exists(ec=>no(ec,"caption"))),El=(Ot,Uo)=>Ns=>nr(Ns,ec=>G(ec.element),()=>g.queryCommandValue(Ot)===Uo),ll=El("mceTableRowType","header"),zd=El("mceTableColType","th");return g.on("NodeChange ExecCommand TableSelectorChange",Do),{onSetupTable:Qr,onSetupCellOrRow:Zc,onSetupColumn:Um,onSetupPasteable:Nd,onSetupPasteableColumn:tu,onSetupMergeable:ou,onSetupUnmergeable:Qn,resetTargets:Do,onSetupTableWithCaption:Uc,onSetupTableRowHeaders:ll,onSetupTableColumnHeaders:zd,targets:b.get}};var Ir=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Ld="x-tinymce/dom-table-",J=Ld+"rows",Rc=Ld+"columns",Fd=g=>{var b;const k=(b=Ir.read())!==null&&b!==void 0?b:[];return ws(k,$=>I.from($.getType(g)))},pc=()=>Fd(J),fc=()=>Fd(Rc),Vs=g=>b=>{const k=()=>{b.setEnabled(g.selection.isEditable())};return g.on("NodeChange",k),k(),()=>{g.off("NodeChange",k)}},Un=(g,b)=>{g.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Vs(g),fetch:De=>De("inserttable | cell row column | advtablesort | tableprops deletetable")});const k=De=>()=>g.execCommand(De),$=(De,gt)=>{g.queryCommandSupported(gt.command)&&g.ui.registry.addButton(De,{...gt,onAction:Jo(gt.onAction)?gt.onAction:k(gt.command)})},G=(De,gt)=>{g.queryCommandSupported(gt.command)&&g.ui.registry.addToggleButton(De,{...gt,onAction:Jo(gt.onAction)?gt.onAction:k(gt.command)})};$("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:b.onSetupTable}),$("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:b.onSetupTable}),$("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:b.onSetupCellOrRow}),$("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:b.onSetupMergeable}),$("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:b.onSetupUnmergeable}),$("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:b.onSetupCellOrRow}),$("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:b.onSetupCellOrRow}),$("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:b.onSetupCellOrRow}),$("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:b.onSetupCellOrRow}),$("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:b.onSetupColumn("onFirst")}),$("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:b.onSetupColumn("onLast")}),$("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:b.onSetupColumn("onAny")}),$("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:b.onSetupCellOrRow}),$("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:b.onSetupCellOrRow}),$("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:b.onSetupPasteable(pc)}),$("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:b.onSetupPasteable(pc)}),$("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:b.onSetupColumn("onAny")}),$("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:b.onSetupColumn("onAny")}),$("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:b.onSetupPasteableColumn(fc,"onFirst")}),$("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:b.onSetupPasteableColumn(fc,"onLast")}),$("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Vs(g)});const re=sl(ci(g));re.length!==0&&g.queryCommandSupported("mceTableToggleClass")&&g.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:kl(g,re,"tableclass",De=>g.execCommand("mceTableToggleClass",!1,De)),onSetup:b.onSetupTable});const ve=sl(Fs(g));ve.length!==0&&g.queryCommandSupported("mceTableCellToggleClass")&&g.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:kl(g,ve,"tablecellclass",De=>g.execCommand("mceTableCellToggleClass",!1,De)),onSetup:b.onSetupCellOrRow}),g.queryCommandSupported("mceTableApplyCellStyle")&&(g.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:kl(g,zc,"tablecellverticalalign",na(g,"vertical-align")),onSetup:b.onSetupCellOrRow}),g.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:kl(g,Ka(g),"tablecellborderwidth",na(g,"border-width")),onSetup:b.onSetupCellOrRow}),g.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:kl(g,Zi(g),"tablecellborderstyle",na(g,"border-style")),onSetup:b.onSetupCellOrRow}),g.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:De=>De(Pu(g,ku(g),"background-color")),onSetup:b.onSetupCellOrRow}),g.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:De=>De(Pu(g,Ui(g),"border-color")),onSetup:b.onSetupCellOrRow})),G("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:b.onSetupTableWithCaption}),G("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Dt(g),onSetup:b.onSetupTableRowHeaders}),G("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:hi(g),onSetup:b.onSetupTableColumnHeaders})},Pd=g=>{const b=$=>g.dom.is($,"table")&&g.getBody().contains($)&&g.dom.isEditable($.parentNode),k=xl(g);k.length>0&&g.ui.registry.addContextToolbar("table",{predicate:b,items:k,scope:"node",position:"node"})},Ea=g=>b=>{const k=()=>{b.setEnabled(g.selection.isEditable())};return g.on("NodeChange",k),k(),()=>{g.off("NodeChange",k)}},Vd=(g,b)=>{const k=lo=>()=>g.execCommand(lo),$=(lo,Bo)=>g.queryCommandSupported(Bo.command)?(g.ui.registry.addMenuItem(lo,{...Bo,onAction:Jo(Bo.onAction)?Bo.onAction:k(Bo.command)}),!0):!1,G=(lo,Bo)=>{g.queryCommandSupported(Bo.command)&&g.ui.registry.addToggleMenuItem(lo,{...Bo,onAction:Jo(Bo.onAction)?Bo.onAction:k(Bo.command)})},re=lo=>{g.execCommand("mceInsertTable",!1,{rows:lo.numRows,columns:lo.numColumns})},ve=[$("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:b.onSetupCellOrRow}),$("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:b.onSetupCellOrRow}),$("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:b.onSetupCellOrRow}),$("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:b.onSetupCellOrRow}),$("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:b.onSetupCellOrRow}),$("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:b.onSetupCellOrRow}),$("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:b.onSetupPasteable(pc)}),$("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:b.onSetupPasteable(pc)})],De=[$("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:b.onSetupColumn("onFirst")}),$("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:b.onSetupColumn("onLast")}),$("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:b.onSetupColumn("onAny")}),$("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:b.onSetupColumn("onAny")}),$("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:b.onSetupColumn("onAny")}),$("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:b.onSetupPasteableColumn(fc,"onFirst")}),$("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:b.onSetupPasteableColumn(fc,"onLast")})],gt=[$("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:b.onSetupCellOrRow}),$("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:b.onSetupMergeable}),$("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:b.onSetupUnmergeable})];Ja(g)?g.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:re}],onSetup:Ea(g)}):g.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:k("mceInsertTableDialog"),onSetup:Ea(g)}),g.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:k("mceInsertTableDialog"),onSetup:Ea(g)}),$("tableprops",{text:"Table properties",onSetup:b.onSetupTable,command:"mceTableProps"}),$("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:b.onSetupTable,command:"mceTableDelete"}),we(ve,!0)&&g.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Ae("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),we(De,!0)&&g.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Ae("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),we(gt,!0)&&g.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Ae("tablecellprops tablemergecells tablesplitcells")}),g.ui.registry.addContextMenu("table",{update:()=>(b.resetTargets(),b.targets().fold(Ae(""),lo=>He(lo.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const kt=sl(ci(g));kt.length!==0&&g.queryCommandSupported("mceTableToggleClass")&&g.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>oa(g,kt,"tableclass",lo=>g.execCommand("mceTableToggleClass",!1,lo)),onSetup:b.onSetupTable});const Do=sl(Fs(g));Do.length!==0&&g.queryCommandSupported("mceTableCellToggleClass")&&g.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>oa(g,Do,"tablecellclass",lo=>g.execCommand("mceTableCellToggleClass",!1,lo)),onSetup:b.onSetupCellOrRow}),g.queryCommandSupported("mceTableApplyCellStyle")&&(g.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>oa(g,zc,"tablecellverticalalign",na(g,"vertical-align")),onSetup:b.onSetupCellOrRow}),g.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>oa(g,Ka(g),"tablecellborderwidth",na(g,"border-width")),onSetup:b.onSetupCellOrRow}),g.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>oa(g,Zi(g),"tablecellborderstyle",na(g,"border-style")),onSetup:b.onSetupCellOrRow}),g.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Pu(g,ku(g),"background-color"),onSetup:b.onSetupCellOrRow}),g.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Pu(g,Ui(g),"border-color"),onSetup:b.onSetupCellOrRow})),G("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:b.onSetupTableWithCaption}),G("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Dt(g),onSetup:b.onSetupTableRowHeaders}),G("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:hi(g),onSetup:b.onSetupTableRowHeaders})},We=g=>{const b=jg(g);xu(g),hc(g),Vd(g,b),Un(g,b),Pd(g)};var rb=()=>{ac.add("table",We)};rb()})();(function(){var ac=tinymce.util.Tools.resolve("tinymce.PluginManager");const qs=(h,S,_)=>{var P;return _(h,S.prototype)?!0:((P=h.constructor)===null||P===void 0?void 0:P.name)===S.name},is=h=>{const S=typeof h;return h===null?"null":S==="object"&&Array.isArray(h)?"array":S==="object"&&qs(h,String,(_,P)=>P.isPrototypeOf(_))?"string":S},xn=h=>S=>is(S)===h,un=h=>S=>typeof S===h,ts=xn("string"),dn=xn("object"),Xe=xn("array"),At=un("boolean"),Eo=h=>h==null,Vo=h=>!Eo(h),Go=un("function"),Jo=un("number"),Mn=()=>{},us=(h,S)=>_=>h(S(_)),oo=h=>()=>h,Ae=(h,S)=>h===S;function So(h,...S){return(..._)=>{const P=S.concat(_);return h.apply(null,P)}}const st=h=>S=>!h(S),X=oo(!1);class Re{constructor(S,_){this.tag=S,this.value=_}static some(S){return new Re(!0,S)}static none(){return Re.singletonNone}fold(S,_){return this.tag?_(this.value):S()}isSome(){return this.tag}isNone(){return!this.tag}map(S){return this.tag?Re.some(S(this.value)):Re.none()}bind(S){return this.tag?S(this.value):Re.none()}exists(S){return this.tag&&S(this.value)}forall(S){return!this.tag||S(this.value)}filter(S){return!this.tag||S(this.value)?this:Re.none()}getOr(S){return this.tag?this.value:S}or(S){return this.tag?this:S}getOrThunk(S){return this.tag?this.value:S()}orThunk(S){return this.tag?this:S()}getOrDie(S){if(this.tag)return this.value;throw new Error(S??"Called getOrDie on None")}static from(S){return Vo(S)?Re.some(S):Re.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(S){this.tag&&S(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Re.singletonNone=new Re(!1);const ur=Array.prototype.slice,Qo=Array.prototype.indexOf,I=Array.prototype.push,xt=(h,S)=>Qo.call(h,S),Tr=(h,S)=>xt(h,S)>-1,go=(h,S)=>{for(let _=0,P=h.length;_<P;_++){const Z=h[_];if(S(Z,_))return!0}return!1},wt=(h,S)=>{const _=h.length,P=new Array(_);for(let Z=0;Z<_;Z++){const ge=h[Z];P[Z]=S(ge,Z)}return P},q=(h,S)=>{for(let _=0,P=h.length;_<P;_++){const Z=h[_];S(Z,_)}},En=(h,S)=>{const _=[];for(let P=0,Z=h.length;P<Z;P++){const ge=h[P];S(ge,P)&&_.push(ge)}return _},Ht=(h,S)=>{if(h.length===0)return[];{let _=S(h[0]);const P=[];let Z=[];for(let ge=0,ze=h.length;ge<ze;ge++){const lt=h[ge],it=S(lt);it!==_&&(P.push(Z),Z=[]),_=it,Z.push(lt)}return Z.length!==0&&P.push(Z),P}},io=(h,S,_)=>(q(h,(P,Z)=>{_=S(_,P,Z)}),_),v=(h,S,_)=>{for(let P=0,Z=h.length;P<Z;P++){const ge=h[P];if(S(ge,P))return Re.some(ge);if(_(ge,P))break}return Re.none()},Wt=(h,S)=>v(h,S,X),xo=h=>{const S=[];for(let _=0,P=h.length;_<P;++_){if(!Xe(h[_]))throw new Error("Arr.flatten item "+_+" was not an array, input: "+h);I.apply(S,h[_])}return S},An=(h,S)=>xo(wt(h,S)),Ue=h=>{const S=ur.call(h,0);return S.reverse(),S},pt=(h,S)=>S>=0&&S<h.length?Re.some(h[S]):Re.none(),Xt=h=>pt(h,0),fn=h=>pt(h,h.length-1),we=(h,S)=>{const _=[],P=Go(S)?Z=>go(_,ge=>S(ge,Z)):Z=>Tr(_,Z);for(let Z=0,ge=h.length;Z<ge;Z++){const ze=h[Z];P(ze)||_.push(ze)}return _},et=(h,S,_=Ae)=>h.exists(P=>_(P,S)),ue=(h,S,_=Ae)=>ye(h,S,_).getOr(h.isNone()&&S.isNone()),ye=(h,S,_)=>h.isSome()&&S.isSome()?Re.some(_(h.getOrDie(),S.getOrDie())):Re.none(),zt=8,en=9,Ct=11,Jt=1,Ut=3,kr=(h,S)=>{const P=(S||document).createElement("div");if(P.innerHTML=h,!P.hasChildNodes()||P.childNodes.length>1){const Z="HTML does not have a single root node";throw console.error(Z,h),new Error(Z)}return Rt(P.childNodes[0])},Qt=(h,S)=>{const P=(S||document).createElement(h);return Rt(P)},ds=(h,S)=>{const P=(S||document).createTextNode(h);return Rt(P)},Rt=h=>{if(h==null)throw new Error("Node cannot be null or undefined");return{dom:h}},Et={fromHtml:kr,fromTag:Qt,fromText:ds,fromDom:Rt,fromPoint:(h,S,_)=>Re.from(h.dom.elementFromPoint(S,_)).map(Rt)},tn=(h,S)=>{const _=h.dom;if(_.nodeType!==Jt)return!1;{const P=_;if(P.matches!==void 0)return P.matches(S);if(P.msMatchesSelector!==void 0)return P.msMatchesSelector(S);if(P.webkitMatchesSelector!==void 0)return P.webkitMatchesSelector(S);if(P.mozMatchesSelector!==void 0)return P.mozMatchesSelector(S);throw new Error("Browser lacks native selectors")}},Pn=(h,S)=>h.dom===S.dom,dr=(h,S)=>{const _=h.dom,P=S.dom;return _===P?!1:_.contains(P)},mo=tn,ws=typeof window<"u"?window:Function("return this;")(),Ss=(h,S)=>{let _=S??ws;for(let P=0;P<h.length&&_!==void 0&&_!==null;++P)_=_[h[P]];return _},bn=(h,S)=>{const _=h.split(".");return Ss(_,S)},Fc=(h,S)=>bn(h,S),Vr=(h,S)=>{const _=Fc(h,S);if(_==null)throw new Error(h+" not available on this browser");return _},Vn=Object.getPrototypeOf,Ro=h=>Vr("HTMLElement",h),lc=h=>{const S=bn("ownerDocument.defaultView",h);return dn(h)&&(Ro(S).prototype.isPrototypeOf(h)||/^HTML\w*Element$/.test(Vn(h).constructor.name))},ho=h=>h.dom.nodeName.toLowerCase(),yo=h=>h.dom.nodeType,Tc=h=>S=>yo(S)===h,Gt=h=>yo(h)===zt||ho(h)==="#comment",jo=h=>Or(h)&&lc(h.dom),Or=Tc(Jt),ic=Tc(Ut),Nr=Tc(en),Dn=Tc(Ct),uc=h=>S=>Or(S)&&ho(S)===h,He=h=>Et.fromDom(h.dom.ownerDocument),Ft=h=>Nr(h)?h:He(h),Cn=h=>Re.from(h.dom.parentNode).map(Et.fromDom),xs=h=>Re.from(h.dom.parentElement).map(Et.fromDom),mr=h=>Re.from(h.dom.nextSibling).map(Et.fromDom),os=h=>wt(h.dom.childNodes,Et.fromDom),wo=(h,S)=>{const _=h.dom.childNodes;return Re.from(_[S]).map(Et.fromDom)},Ks=h=>wo(h,0),gr=h=>wo(h,h.dom.childNodes.length-1),Kc=h=>Dn(h)&&Vo(h.dom.host),qn=Go(Element.prototype.attachShadow)&&Go(Node.prototype.getRootNode)?h=>Et.fromDom(h.dom.getRootNode()):Ft,Ys=h=>{const S=qn(h);return Kc(S)?Re.some(S):Re.none()},zr=h=>Et.fromDom(h.dom.host),kc=h=>{const S=ic(h)?h.dom.parentNode:h.dom;if(S==null||S.ownerDocument===null)return!1;const _=S.ownerDocument;return Ys(Et.fromDom(S)).fold(()=>_.body.contains(S),us(kc,zr))};var Tn=(h,S,_,P,Z)=>h(_,P)?Re.some(_):Go(Z)&&Z(_)?Re.none():S(_,P,Z);const mn=(h,S,_)=>{let P=h.dom;const Z=Go(_)?_:X;for(;P.parentNode;){P=P.parentNode;const ge=Et.fromDom(P);if(S(ge))return Re.some(ge);if(Z(ge))break}return Re.none()},on=(h,S,_)=>Tn((Z,ge)=>ge(Z),mn,h,S,_),Xs=(h,S,_)=>mn(h,P=>tn(P,S),_),Wa=(h,S,_)=>Tn((Z,ge)=>tn(Z,ge),Xs,h,S,_),$n=h=>Wa(h,"[contenteditable]"),V=(h,S=!1)=>kc(h)?h.dom.isContentEditable:$n(h).fold(oo(S),_=>F(_)==="true"),F=h=>h.dom.contentEditable,ne=(h,S)=>{Cn(h).each(P=>{P.dom.insertBefore(S.dom,h.dom)})},ce=(h,S)=>{mr(h).fold(()=>{Cn(h).each(Z=>{Ge(Z,S)})},P=>{ne(P,S)})},Ve=(h,S)=>{Ks(h).fold(()=>{Ge(h,S)},P=>{h.dom.insertBefore(S.dom,P.dom)})},Ge=(h,S)=>{h.dom.appendChild(S.dom)},vt=(h,S)=>{q(S,_=>{ne(h,_)})},ko=(h,S)=>{q(S,_=>{Ge(h,_)})},U=h=>{h.dom.textContent="",q(os(h),S=>{ft(S)})},ft=h=>{const S=h.dom;S.parentNode!==null&&S.parentNode.removeChild(S)};var gn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),hn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Kn=tinymce.util.Tools.resolve("tinymce.util.VK");const Kt=h=>wt(h,Et.fromDom),Oc=Object.keys,Js=(h,S)=>{const _=Oc(h);for(let P=0,Z=_.length;P<Z;P++){const ge=_[P],ze=h[ge];S(ze,ge)}},ns=h=>(S,_)=>{h[_]=S},Rn=(h,S,_,P)=>{Js(h,(Z,ge)=>{(S(Z,ge)?_:P)(Z,ge)})},nn=(h,S)=>{const _={};return Rn(h,S,ns(_),Mn),_},Yn=(h,S,_)=>{if(ts(_)||At(_)||Jo(_))h.setAttribute(S,_+"");else throw console.error("Invalid call to Attribute.set. Key ",S,":: Value ",_,":: Element ",h),new Error("Attribute value was not simple")},Xn=(h,S)=>{const _=h.dom;Js(S,(P,Z)=>{Yn(_,Z,P)})},ms=h=>io(h.dom.attributes,(S,_)=>(S[_.name]=_.value,S),{}),Yc=(h,S)=>Et.fromDom(h.dom.cloneNode(S)),Pc=h=>Yc(h,!0),dc=(h,S)=>{const _=Et.fromTag(S),P=ms(h);return Xn(_,P),_},Co=(h,S)=>{const _=dc(h,S);ce(h,_);const P=os(h);return ko(_,P),ft(h),_};var Qs=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),gs=tinymce.util.Tools.resolve("tinymce.util.Tools");const Sa=h=>S=>Vo(S)&&S.nodeName.toLowerCase()===h,Rs=h=>S=>Vo(S)&&h.test(S.nodeName),kn=h=>Vo(h)&&h.nodeType===3,bo=h=>Vo(h)&&h.nodeType===1,Ts=Rs(/^(OL|UL|DL)$/),Xc=Rs(/^(OL|UL)$/),eo=Sa("ol"),Nn=Rs(/^(LI|DT|DD)$/),ks=Rs(/^(DT|DD)$/),On=Rs(/^(TH|TD)$/),_r=Sa("br"),Zr=h=>{var S;return((S=h.parentNode)===null||S===void 0?void 0:S.firstChild)===h},ss=(h,S)=>Vo(S)&&S.nodeName in h.schema.getTextBlockElements(),Ur=(h,S)=>Vo(h)&&h.nodeName in S,Wr=(h,S)=>Vo(S)&&S.nodeName in h.schema.getVoidElements(),vl=(h,S)=>_r(S)?h.isBlock(S.nextSibling)&&!_r(S.previousSibling):!1,Mr=(h,S,_)=>{const P=h.isEmpty(S);return _&&h.select("span[data-mce-type=bookmark]",S).length>0?!1:P},xa=(h,S)=>h.isChildOf(S,h.getRoot()),Hs=h=>S=>S.options.get(h),_c=h=>{const S=h.options.register;S("lists_indent_on_tab",{processor:"boolean",default:!0})},Jc=Hs("lists_indent_on_tab"),Ca=Hs("forced_root_block"),yl=Hs("forced_root_block_attrs"),D=(h,S)=>{const _=h.dom,P=h.schema.getBlockElements(),Z=_.createFragment(),ge=Ca(h),ze=yl(h);let lt,it,nt=!1;for(it=_.create(ge,ze),Ur(S.firstChild,P)||Z.appendChild(it);lt=S.firstChild;){const sn=lt.nodeName;!nt&&(sn!=="SPAN"||lt.getAttribute("data-mce-type")!=="bookmark")&&(nt=!0),Ur(lt,P)?(Z.appendChild(lt),it=null):(it||(it=_.create(ge,ze),Z.appendChild(it)),it.appendChild(lt))}return!nt&&it&&it.appendChild(_.create("br",{"data-mce-bogus":"1"})),Z},N=Qs.DOM,K=(h,S,_)=>{const P=nt=>{const sn=nt.parentNode;sn&&gs.each(Z,cs=>{sn.insertBefore(cs,_.parentNode)}),N.remove(nt)},Z=N.select('span[data-mce-type="bookmark"]',S),ge=D(h,_),ze=N.createRng();ze.setStartAfter(_),ze.setEndAfter(S);const lt=ze.extractContents();for(let nt=lt.firstChild;nt;nt=nt.firstChild)if(nt.nodeName==="LI"&&h.dom.isEmpty(nt)){N.remove(nt);break}h.dom.isEmpty(lt)||N.insertAfter(lt,S),N.insertAfter(ge,S);const it=_.parentElement;it&&Mr(h.dom,it)&&P(it),N.remove(_),Mr(h.dom,S)&&N.remove(S)},te=uc("dd"),be=uc("dt"),Je=(h,S)=>{te(S)?Co(S,"dt"):be(S)&&xs(S).each(_=>K(h,_.dom,S.dom))},ro=h=>{be(h)&&Co(h,"dd")},vn=(h,S,_)=>{S==="Indent"?q(_,ro):q(_,P=>Je(h,P))},co=(h,S)=>{if(kn(h))return{container:h,offset:S};const _=gn.getNode(h,S);return kn(_)?{container:_,offset:S>=h.childNodes.length?_.data.length:0}:_.previousSibling&&kn(_.previousSibling)?{container:_.previousSibling,offset:_.previousSibling.data.length}:_.nextSibling&&kn(_.nextSibling)?{container:_.nextSibling,offset:0}:{container:h,offset:S}},Ho=h=>{const S=h.cloneRange(),_=co(h.startContainer,h.startOffset);S.setStart(_.container,_.offset);const P=co(h.endContainer,h.endOffset);return S.setEnd(P.container,P.offset),S},ao=["OL","UL","DL"],rs=ao.join(","),mc=(h,S)=>{const _=S||h.selection.getStart(!0);return h.dom.getParent(_,rs,_e(h,_))},Ta=(h,S)=>Vo(h)&&S.length===1&&S[0]===h,at=h=>En(h.querySelectorAll(rs),Ts),Vi=h=>{const S=mc(h),_=h.selection.getSelectedBlocks();return Ta(S,_)?at(S):En(_,P=>Ts(P)&&S!==P)},qo=(h,S)=>{const _=gs.map(S,P=>{const Z=h.dom.getParent(P,"li,dd,dt",_e(h,P));return Z||P});return we(_)},C=h=>{const S=h.selection.getSelectedBlocks();return En(qo(h,S),Nn)},R=h=>En(C(h),ks),B=(h,S)=>{const _=h.dom.getParents(S,"TD,TH");return _.length>0?_[0]:h.getBody()},oe=(h,S)=>!Ts(S)&&!Nn(S)&&go(ao,_=>h.isValidChild(S.nodeName,_)),_e=(h,S)=>{const _=h.dom.getParents(S,h.dom.isBlock),P=ge=>ge.nodeName.toLowerCase()!==Ca(h);return Wt(_,ge=>P(ge)&&oe(h.schema,ge)).getOr(h.getBody())},Tt=h=>Cn(h).exists(S=>Nn(S.dom)&&Ks(S).exists(_=>!Ts(_.dom))&&gr(S).exists(_=>!Ts(_.dom))),Ie=(h,S)=>{const _=h.dom.getParents(S,"ol,ul",_e(h,S));return fn(_)},Ao=h=>{const S=Ie(h,h.selection.getStart()),_=En(h.selection.getSelectedBlocks(),Xc);return S.toArray().concat(_)},Er=h=>{const S=h.selection.getStart();return h.dom.getParents(S,"ol,ul",_e(h,S))},No=h=>{const S=Ao(h),_=Er(h);return Wt(_,P=>Tt(Et.fromDom(P))).fold(()=>er(h,S),P=>[P])},er=(h,S)=>{const _=wt(S,P=>Ie(h,P).getOr(P));return we(_)},zo=h=>/\btox\-/.test(h.className),Ga=(h,S)=>v(h,Ts,On).exists(_=>_.nodeName===S&&!zo(_)),Mc=(h,S)=>S!==null&&!h.dom.isEditable(S),jt=h=>{const S=mc(h);return Mc(h,S)},Is=(h,S)=>{const _=h.dom.getParent(S,"ol,ul,dl");return Mc(h,_)},Io=(h,S)=>{const _=h.selection.getNode();return S({parents:h.dom.getParents(_),element:_}),h.on("NodeChange",S),()=>h.off("NodeChange",S)},Qc=(h,S)=>{const P=document.createDocumentFragment();return q(h,Z=>{P.appendChild(Z.dom)}),Et.fromDom(P)},Zo=(h,S,_)=>h.dispatch("ListMutation",{action:S,element:_}),vd=(h=>S=>S.replace(h,""))(/^\s+|\s+$/g),Hm=h=>h.length>0,Ko=h=>!Hm(h),ea=h=>h.style!==void 0&&Go(h.style.getPropertyValue),Os=(h,S,_)=>{if(!ts(_))throw console.error("Invalid call to CSS.set. Property ",S,":: Value ",_,":: Element ",h),new Error("CSS value must be a string: "+_);ea(h)&&h.style.setProperty(S,_)},Bs=(h,S,_)=>{const P=h.dom;Os(P,S,_)},Gr=h=>mo(h,"OL,UL"),wu=h=>mo(h,"LI"),Ni=h=>Ks(h).exists(Gr),Ar=h=>gr(h).exists(Gr),Dr=h=>"listAttributes"in h,ja=h=>"isComment"in h,ta=h=>"isFragment"in h,Im=h=>h.depth>0,hs=h=>h.isSelected,si=h=>{const S=os(h),_=Ar(h)?S.slice(0,-1):S;return wt(_,Pc)},qa=(h,S,_)=>Cn(h).filter(Or).map(P=>({depth:S,dirty:!1,isSelected:_,content:si(h),itemAttributes:ms(h),listAttributes:ms(P),listType:ho(P),isInPreviousLi:!1})),zi=(h,S)=>{Ge(h.item,S.list)},ri=h=>{for(let S=1;S<h.length;S++)zi(h[S-1],h[S])},hr=(h,S)=>{ye(fn(h),Xt(S),zi)},yd=(h,S)=>{const _={list:Et.fromTag(S,h),item:Et.fromTag("li",h)};return Ge(_.list,_.item),_},Vc=(h,S,_)=>{const P=[];for(let Z=0;Z<_;Z++)P.push(yd(h,Dr(S)?S.listType:S.parentListType));return P},Su=(h,S)=>{for(let _=0;_<h.length-1;_++)Bs(h[_].item,"list-style-type","none");fn(h).each(_=>{Dr(S)&&(Xn(_.list,S.listAttributes),Xn(_.item,S.itemAttributes)),ko(_.item,S.content)})},Ls=(h,S)=>{ho(h.list)!==S.listType&&(h.list=Co(h.list,S.listType)),Xn(h.list,S.listAttributes)},xu=(h,S,_)=>{const P=Et.fromTag("li",h);return Xn(P,S),ko(P,_),P},jr=(h,S)=>{Ge(h.list,S),h.item=S},Ka=(h,S,_)=>{const P=S.slice(0,_.depth);return fn(P).each(Z=>{if(Dr(_)){const ge=xu(h,_.itemAttributes,_.content);jr(Z,ge),Ls(Z,_)}else if(ta(_))ko(Z.item,_.content);else{const ge=Et.fromHtml(`<!--${_.content}-->`);Ge(Z.list,ge)}}),P},Zi=(h,S,_)=>{const P=Vc(h,_,_.depth-S.length);return ri(P),Su(P,_),hr(S,P),S.concat(P)},Ya=(h,S)=>{let _=Re.none();const P=io(S,(Z,ge,ze)=>ja(ge)?ze===0?(_=Re.some(ge),Z):Ka(h,Z,ge):ge.depth>Z.length?Zi(h,Z,ge):Ka(h,Z,ge),[]);return _.each(Z=>{const ge=Et.fromHtml(`<!--${Z.content}-->`);Xt(P).each(ze=>{Ve(ze.list,ge)})}),Xt(P).map(Z=>Z.list)},Sl=(h,S)=>{switch(h){case"Indent":S.depth++;break;case"Outdent":S.depth--;break;case"Flatten":S.depth=0}S.dirty=!0},Xa=(h,S)=>{Dr(h)&&Dr(S)&&(h.listType=S.listType,h.listAttributes={...S.listAttributes})},Cu=h=>{h.listAttributes=nn(h.listAttributes,(S,_)=>_!=="start")},Ja=(h,S)=>{const _=h[S].depth,P=ge=>ge.depth===_&&!ge.dirty,Z=ge=>ge.depth<_;return v(Ue(h.slice(0,S)),P,Z).orThunk(()=>v(h.slice(S+1),P,Z))},Ec=h=>(q(h,(S,_)=>{Ja(h,_).fold(()=>{S.dirty&&Dr(S)&&Cu(S)},P=>Xa(S,P))}),h),Fs=h=>{let S=h;return{get:()=>S,set:Z=>{S=Z}}},Tu=(h,S,_,P)=>{var Z;if(Gt(P))return[{depth:h+1,content:(Z=P.dom.nodeValue)!==null&&Z!==void 0?Z:"",dirty:!1,isSelected:!1,isComment:!0}];S.each(lt=>{Pn(lt.start,P)&&_.set(!0)});const ge=qa(P,h,_.get());S.each(lt=>{Pn(lt.end,P)&&_.set(!1)});const ze=gr(P).filter(Gr).map(lt=>xl(h,S,_,lt)).getOr([]);return ge.toArray().concat(ze)},ci=(h,S,_,P)=>Ks(P).filter(Gr).fold(()=>Tu(h,S,_,P),Z=>{const ge=io(os(P),(ze,lt,it)=>{if(it===0)return ze;if(wu(lt))return ze.concat(Tu(h,S,_,lt));{const nt={isFragment:!0,depth:h,content:[lt],isSelected:!1,dirty:!1,parentListType:ho(Z)};return ze.concat(nt)}},[]);return xl(h,S,_,Z).concat(ge)}),xl=(h,S,_,P)=>An(os(P),Z=>{const ge=Gr(Z)?xl:ci,ze=h+1;return ge(ze,S,_,Z)}),ku=(h,S)=>{const _=Fs(!1),P=0;return wt(h,Z=>({sourceList:Z,entries:xl(P,S,_,Z)}))},Ui=(h,S)=>{const _=Ec(S);return wt(_,P=>{const Z=ja(P)?Qc([Et.fromHtml(`<!--${P.content}-->`)]):Qc(P.content);return Et.fromDom(D(h,Z.dom))})},Ou=(h,S)=>{const _=Ec(S);return Ya(h.contentDocument,_).toArray()},Qa=(h,S)=>An(Ht(S,Im),_=>Xt(_).exists(Im)?Ou(h,_):Ui(h,_)),_u=(h,S)=>{q(En(h,hs),_=>Sl(S,_))},Mu=h=>{const S=wt(C(h),Et.fromDom);return ye(Wt(S,st(Ni)),Wt(Ue(S),st(Ni)),(_,P)=>({start:_,end:P}))},wd=(h,S,_)=>{const P=ku(S,Mu(h));q(P,Z=>{_u(Z.entries,_);const ge=Qa(h,Z.entries);q(ge,ze=>{Zo(h,_==="Indent"?"IndentList":"OutdentList",ze.dom)}),vt(Z.sourceList,ge),ft(Z.sourceList)})},Sd=(h,S)=>{const _=Kt(No(h)),P=Kt(R(h));let Z=!1;if(_.length||P.length){const ge=h.selection.getBookmark();wd(h,_,S),vn(h,S,P),h.selection.moveToBookmark(ge),h.selection.setRng(Ho(h.selection.getRng())),h.nodeChanged(),Z=!0}return Z},Wi=(h,S)=>!jt(h)&&Sd(h,S),ai=h=>Wi(h,"Indent"),ka=h=>Wi(h,"Outdent"),Eu=h=>Wi(h,"Flatten"),xd="\uFEFF",li=h=>h===xd,Cd=(h,S,_)=>mn(h,S,_).isSome(),Ac=(h,S)=>Cd(h,So(Pn,S));var qr=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const el=Qs.DOM,tl=h=>{const S={},_=P=>{let Z=h[P?"startContainer":"endContainer"],ge=h[P?"startOffset":"endOffset"];if(bo(Z)){const ze=el.create("span",{"data-mce-type":"bookmark"});Z.hasChildNodes()?(ge=Math.min(ge,Z.childNodes.length-1),P?Z.insertBefore(ze,Z.childNodes[ge]):el.insertAfter(ze,Z.childNodes[ge])):Z.appendChild(ze),Z=ze,ge=0}S[P?"startContainer":"endContainer"]=Z,S[P?"startOffset":"endOffset"]=ge};return _(!0),h.collapsed||_(),S},Oa=h=>{const S=P=>{const Z=lt=>{var it;let nt=(it=lt.parentNode)===null||it===void 0?void 0:it.firstChild,sn=0;for(;nt;){if(nt===lt)return sn;(!bo(nt)||nt.getAttribute("data-mce-type")!=="bookmark")&&sn++,nt=nt.nextSibling}return-1};let ge=h[P?"startContainer":"endContainer"],ze=h[P?"startOffset":"endOffset"];if(ge){if(bo(ge)&&ge.parentNode){const lt=ge;ze=Z(ge),ge=ge.parentNode,el.remove(lt),!ge.hasChildNodes()&&el.isBlock(ge)&&ge.appendChild(el.create("br"))}h[P?"startContainer":"endContainer"]=ge,h[P?"startOffset":"endOffset"]=ze}};S(!0),S();const _=el.createRng();return _.setStart(h.startContainer,h.startOffset),h.endContainer&&_.setEnd(h.endContainer,h.endOffset),Ho(_)},_a=h=>{switch(h){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Td=(h,S,_)=>{const P=_["list-style-type"]?_["list-style-type"]:null;h.setStyle(S,"list-style-type",P)},kd=(h,S)=>{gs.each(S,(_,P)=>{h.setAttribute(P,_)})},ol=(h,S,_)=>{kd(S,_["list-attributes"]),gs.each(h.select("li",S),P=>{kd(P,_["list-item-attributes"])})},nl=(h,S,_)=>{Td(h,S,_),ol(h,S,_)},Od=(h,S,_)=>{gs.each(_,P=>h.setStyle(S,P,""))},pr=(h,S)=>Vo(S)&&!Ur(S,h.schema.getBlockElements()),Gi=(h,S,_,P)=>{let Z=S[_?"startContainer":"endContainer"];const ge=S[_?"startOffset":"endOffset"];bo(Z)&&(Z=Z.childNodes[Math.min(ge,Z.childNodes.length-1)]||Z),!_&&_r(Z.nextSibling)&&(Z=Z.nextSibling);const ze=it=>{for(;!h.dom.isBlock(it)&&it.parentNode&&P!==it;)it=it.parentNode;return it},lt=(it,nt)=>{var sn;const cs=new hn(it,ze(it)),Yr=nt?"next":"prev";let sa;for(;sa=cs[Yr]();)if(!(Wr(h,sa)||li(sa.textContent)||((sn=sa.textContent)===null||sn===void 0?void 0:sn.length)===0))return Re.some(sa);return Re.none()};if(_&&kn(Z))if(li(Z.textContent))Z=lt(Z,!1).getOr(Z);else for(Z.parentNode!==null&&pr(h,Z.parentNode)&&(Z=Z.parentNode);Z.previousSibling!==null&&(pr(h,Z.previousSibling)||kn(Z.previousSibling));)Z=Z.previousSibling;if(!_&&kn(Z))if(li(Z.textContent))Z=lt(Z,!0).getOr(Z);else for(Z.parentNode!==null&&pr(h,Z.parentNode)&&(Z=Z.parentNode);Z.nextSibling!==null&&(pr(h,Z.nextSibling)||kn(Z.nextSibling));)Z=Z.nextSibling;for(;Z.parentNode!==P;){const it=Z.parentNode;if(ss(h,Z)||/^(TD|TH)$/.test(it.nodeName))return Z;Z=it}return Z},Au=(h,S,_)=>{const P=[],Z=h.dom,ge=Gi(h,S,!0,_),ze=Gi(h,S,!1,_);let lt;const it=[];for(let nt=ge;nt&&(it.push(nt),nt!==ze);nt=nt.nextSibling);return gs.each(it,nt=>{var sn;if(ss(h,nt)){P.push(nt),lt=null;return}if(Z.isBlock(nt)||_r(nt)){_r(nt)&&Z.remove(nt),lt=null;return}const cs=nt.nextSibling;if(qr.isBookmarkNode(nt)&&(Ts(cs)||ss(h,cs)||!cs&&nt.parentNode===_)){lt=null;return}lt||(lt=Z.create("p"),(sn=nt.parentNode)===null||sn===void 0||sn.insertBefore(lt,nt),P.push(lt)),lt.appendChild(nt)}),P},ji=(h,S,_)=>{const P=h.getStyle(S,"list-style-type");let Z=_?_["list-style-type"]:"";return Z=Z===null?"":Z,P===Z},Nc=(h,S)=>{const _=h.selection.getStart(!0),P=Gi(h,S,!0,h.getBody());return Ac(Et.fromDom(P),Et.fromDom(S.commonAncestorContainer))?S.commonAncestorContainer:_},Ps=(h,S,_)=>{const P=h.selection.getRng();let Z="LI";const ge=_e(h,Nc(h,P)),ze=h.dom;if(ze.getContentEditable(h.selection.getNode())==="false")return;S=S.toUpperCase(),S==="DL"&&(Z="DT");const lt=tl(P),it=En(Au(h,P,ge),h.dom.isEditable);gs.each(it,nt=>{let sn;const cs=nt.previousSibling,Yr=nt.parentNode;Nn(Yr)||(cs&&Ts(cs)&&cs.nodeName===S&&ji(ze,cs,_)?(sn=cs,nt=ze.rename(nt,Z),cs.appendChild(nt)):(sn=ze.create(S),Yr.insertBefore(sn,nt),sn.appendChild(nt),nt=ze.rename(nt,Z)),Od(ze,nt,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),nl(ze,sn,_),Cl(h.dom,sn))}),h.selection.setRng(Oa(lt))},qi=(h,S)=>Ts(h)&&h.nodeName===(S==null?void 0:S.nodeName),_d=(h,S,_)=>{const P=h.getStyle(S,"list-style-type",!0),Z=h.getStyle(_,"list-style-type",!0);return P===Z},Du=(h,S)=>h.className===S.className,ii=(h,S,_)=>qi(S,_)&&_d(h,S,_)&&Du(S,_),Cl=(h,S)=>{let _,P=S.nextSibling;if(ii(h,S,P)){const Z=P;for(;_=Z.firstChild;)S.appendChild(_);h.remove(Z)}if(P=S.previousSibling,ii(h,S,P)){const Z=P;for(;_=Z.lastChild;)S.insertBefore(_,S.firstChild);h.remove(Z)}},Md=(h,S,_,P)=>{if(S.nodeName!==_){const Z=h.dom.rename(S,_);nl(h.dom,Z,P),Zo(h,_a(_),Z)}else nl(h.dom,S,P),Zo(h,_a(_),S)},Ed=(h,S,_,P)=>{if(S.classList.forEach((Z,ge,ze)=>{Z.startsWith("tox-")&&(ze.remove(Z),ze.length===0&&S.removeAttribute("class"))}),S.nodeName!==_){const Z=h.dom.rename(S,_);nl(h.dom,Z,P),Zo(h,_a(_),Z)}else nl(h.dom,S,P),Zo(h,_a(_),S)},Bm=(h,S,_,P,Z)=>{const ge=Ts(S);if(ge&&S.nodeName===P&&!Ad(Z)&&!zo(S))Eu(h);else{Ps(h,P,Z);const ze=tl(h.selection.getRng()),lt=ge?[S,..._]:_,it=ge&&zo(S)?Ed:Md;gs.each(lt,nt=>{it(h,nt,P,Z)}),h.selection.setRng(Oa(ze))}},Ad=h=>"list-style-type"in h,$u=(h,S,_,P)=>{if(S!==h.getBody())if(S)if(S.nodeName===_&&!Ad(P)&&!zo(S))Eu(h);else{const Z=tl(h.selection.getRng());zo(S)&&S.classList.forEach((ze,lt,it)=>{ze.startsWith("tox-")&&(it.remove(ze),it.length===0&&S.removeAttribute("class"))}),nl(h.dom,S,P);const ge=h.dom.rename(S,_);Cl(h.dom,ge),h.selection.setRng(Oa(Z)),Ps(h,_,P),Zo(h,_a(_),ge)}else Ps(h,_,P),Zo(h,_a(_),S)},ui=(h,S,_)=>{const P=mc(h);if(Is(h,P))return;const Z=Vi(h),ge=dn(_)?_:{};Z.length>0?Bm(h,P,Z,S,ge):$u(h,P,S,ge)},Ki=Qs.DOM,Dd=(h,S)=>{const _=S.parentElement;if(_&&_.nodeName==="LI"&&_.firstChild===S){const P=_.previousSibling;P&&P.nodeName==="LI"?(P.appendChild(S),Mr(h,_)&&Ki.remove(_)):Ki.setStyle(_,"listStyleType","none")}if(Ts(_)){const P=_.previousSibling;P&&P.nodeName==="LI"&&P.appendChild(S)}},yn=(h,S)=>{const _=gs.grep(h.select("ol,ul",S));gs.each(_,P=>{Dd(h,P)})},Jn=(h,S,_,P)=>{let Z=S.startContainer;const ge=S.startOffset;if(kn(Z)&&(_?ge<Z.data.length:ge>0))return Z;const ze=h.schema.getNonEmptyElements();bo(Z)&&(Z=gn.getNode(Z,ge));const lt=new hn(Z,P);_&&vl(h.dom,Z)&&lt.next();const it=_?lt.next.bind(lt):lt.prev2.bind(lt);for(;Z=it();)if(Z.nodeName==="LI"&&!Z.hasChildNodes()||ze[Z.nodeName]||kn(Z)&&Z.data.length>0)return Z;return null},fr=(h,S)=>{const _=S.childNodes;return _.length===1&&!Ts(_[0])&&h.isBlock(_[0])},Ru=h=>Re.from(h).map(Et.fromDom).filter(jo).exists(S=>V(S)&&!Tr(["details"],ho(S))),$d=(h,S)=>{fr(h,S)&&Ru(S.firstChild)&&h.remove(S.firstChild,!0)},ps=(h,S,_)=>{let P;const Z=fr(h,_)?_.firstChild:_;if($d(h,S),!Mr(h,S,!0))for(;P=S.firstChild;)Z.appendChild(P)},Yi=(h,S,_)=>{let P;const Z=S.parentNode;if(!xa(h,S)||!xa(h,_))return;Ts(_.lastChild)&&(P=_.lastChild),Z===_.lastChild&&_r(Z.previousSibling)&&h.remove(Z.previousSibling);const ge=_.lastChild;ge&&_r(ge)&&S.hasChildNodes()&&h.remove(ge),Mr(h,_,!0)&&U(Et.fromDom(_)),ps(h,S,_),P&&_.appendChild(P);const lt=dr(Et.fromDom(_),Et.fromDom(S))?h.getParents(S,Ts,_):[];h.remove(S),q(lt,it=>{Mr(h,it)&&it!==h.getRoot()&&h.remove(it)})},Xi=(h,S,_)=>{U(Et.fromDom(_)),Yi(h.dom,S,_),h.selection.setCursorLocation(_,0)},Hu=(h,S,_,P)=>{const Z=h.dom;if(Z.isEmpty(P))Xi(h,_,P);else{const ge=tl(S);Yi(Z,_,P),h.selection.setRng(Oa(ge))}},zc=(h,S,_,P)=>{const Z=tl(S);Yi(h.dom,_,P);const ge=Oa(Z);h.selection.setRng(ge)},St=(h,S)=>{const _=h.dom,P=h.selection,Z=P.getStart(),ge=B(h,Z),ze=_.getParent(P.getStart(),"LI",ge);if(ze){const lt=ze.parentElement;if(lt===h.getBody()&&Mr(_,lt))return!0;const it=Ho(P.getRng()),nt=_.getParent(Jn(h,it,S,ge),"LI",ge),sn=nt&&(S?_.isChildOf(ze,nt):_.isChildOf(nt,ze));if(nt&&nt!==ze&&!sn)return h.undoManager.transact(()=>{S?Hu(h,it,nt,ze):Zr(ze)?ka(h):zc(h,it,ze,nt)}),!0;if(sn&&!S&&nt!==ze)return h.undoManager.transact(()=>{if(it.commonAncestorContainer.parentElement){const cs=tl(it),Yr=it.commonAncestorContainer.parentElement;ps(_,it.commonAncestorContainer.parentElement,nt),Yr.remove();const sa=Oa(cs);h.selection.setRng(sa)}}),!0;if(!nt&&!S&&it.startOffset===0&&it.endOffset===0)return h.undoManager.transact(()=>{Eu(h)}),!0}return!1},br=(h,S,_)=>{const P=h.getParent(S.parentNode,h.isBlock,_);h.remove(S),P&&h.isEmpty(P)&&h.remove(P)},Iu=(h,S)=>{const _=h.dom,P=h.selection.getStart(),Z=B(h,P),ge=_.getParent(P,_.isBlock,Z);if(ge&&_.isEmpty(ge,void 0,{checkRootAsContent:!0})){const ze=Ho(h.selection.getRng()),lt=_.getParent(Jn(h,ze,S,Z),"LI",Z);if(lt){const it=Yr=>Tr(["td","th","caption"],ho(Yr)),nt=Yr=>Yr.dom===Z,sn=on(Et.fromDom(lt),it,nt),cs=on(Et.fromDom(ze.startContainer),it,nt);return ue(sn,cs,Pn)?(h.undoManager.transact(()=>{const Yr=lt.parentNode;br(_,ge,Z),Cl(_,Yr),h.selection.select(lt,!0),h.selection.collapse(S)}),!0):!1}}return!1},Bu=(h,S)=>St(h,S)||Iu(h,S),Ji=h=>{const S=h.selection.getStart(),_=B(h,S);return h.dom.getParent(S,"LI,DT,DD",_)||C(h).length>0},di=h=>Ji(h)?(h.undoManager.transact(()=>{h.execCommand("Delete"),yn(h.dom,h.getBody())}),!0):!1,Tl=(h,S)=>{const _=h.selection;return!Is(h,_.getNode())&&(_.isCollapsed()?Bu(h,S):di(h))},Lu=h=>{h.on("ExecCommand",S=>{const _=S.command.toLowerCase();(_==="delete"||_==="forwarddelete")&&Ji(h)&&yn(h.dom,h.getBody())}),h.on("keydown",S=>{S.keyCode===Kn.BACKSPACE?Tl(h,!1)&&S.preventDefault():S.keyCode===Kn.DELETE&&Tl(h,!0)&&S.preventDefault()})},Kr=h=>({backspaceDelete:S=>{Tl(h,S)}}),vr=(h,S)=>{const _=mc(h);_===null||Is(h,_)||h.undoManager.transact(()=>{dn(S.styles)&&h.dom.setStyles(_,S.styles),dn(S.attrs)&&Js(S.attrs,(P,Z)=>h.dom.setAttrib(_,Z,P))})},$r=h=>{const S=Ue(vd(h).split("")),_=wt(S,(P,Z)=>{const ge=P.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,Z)*ge});return io(_,(P,Z)=>P+Z,0)},zn=h=>{if(h--,h<0)return"";{const S=h%26,_=Math.floor(h/26),P=zn(_),Z=String.fromCharCode(65+S);return P+Z}},pn=h=>/^[A-Z]+$/.test(h),mi=h=>/^[a-z]+$/.test(h),Lm=h=>/^[0-9]+$/.test(h),Dc=h=>Lm(h)?2:pn(h)?0:mi(h)?1:Ko(h)?3:4,Fu=h=>{switch(Dc(h)){case 2:return Re.some({listStyleType:Re.none(),start:h});case 0:return Re.some({listStyleType:Re.some("upper-alpha"),start:$r(h).toString()});case 1:return Re.some({listStyleType:Re.some("lower-alpha"),start:$r(h).toString()});case 3:return Re.some({listStyleType:Re.none(),start:""});case 4:return Re.none()}},Fm=h=>{const S=parseInt(h.start,10);return et(h.listStyleType,"upper-alpha")?zn(S):et(h.listStyleType,"lower-alpha")?zn(S).toLowerCase():h.start},Rd=h=>{const S=mc(h);!eo(S)||Is(h,S)||h.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Fm({start:h.dom.getAttrib(S,"start","1"),listStyleType:Re.from(h.dom.getStyle(S,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:_=>{const P=_.getData();Fu(P.start).each(Z=>{h.execCommand("mceListUpdate",!1,{attrs:{start:Z.start==="1"?"":Z.start},styles:{"list-style-type":Z.listStyleType.getOr("")}})}),_.close()}})},Oo=(h,S)=>()=>{const _=mc(h);return Vo(_)&&_.nodeName===S},gi=h=>{h.addCommand("mceListProps",()=>{Rd(h)})},Rr=h=>{h.on("BeforeExecCommand",S=>{const _=S.command.toLowerCase();_==="indent"?ai(h):_==="outdent"&&ka(h)}),h.addCommand("InsertUnorderedList",(S,_)=>{ui(h,"UL",_)}),h.addCommand("InsertOrderedList",(S,_)=>{ui(h,"OL",_)}),h.addCommand("InsertDefinitionList",(S,_)=>{ui(h,"DL",_)}),h.addCommand("RemoveList",()=>{Eu(h)}),gi(h),h.addCommand("mceListUpdate",(S,_)=>{dn(_)&&vr(h,_)}),h.addQueryStateHandler("InsertUnorderedList",Oo(h,"UL")),h.addQueryStateHandler("InsertOrderedList",Oo(h,"OL")),h.addQueryStateHandler("InsertDefinitionList",Oo(h,"DL"))};var oa=tinymce.util.Tools.resolve("tinymce.html.Node");const na=h=>h.type===3,sl=h=>h.length===0,kl=h=>{const S=(Z,ge)=>{const ze=oa.create("li");q(Z,lt=>ze.append(lt)),ge?h.insert(ze,ge,!0):h.append(ze)},_=(Z,ge)=>na(ge)?[...Z,ge]:!sl(Z)&&!na(ge)?(S(Z,ge),[]):Z,P=io(h.children(),_,[]);sl(P)||S(P)},Pu=h=>{h.on("PreInit",()=>{const{parser:S}=h;S.addNodeFilter("ul,ol",_=>q(_,kl))})},Dt=h=>{h.on("keydown",S=>{S.keyCode!==Kn.TAB||Kn.metaKeyPressed(S)||h.undoManager.transact(()=>{(S.shiftKey?ka(h):ai(h))&&S.preventDefault()})})},hi=h=>{Jc(h)&&Dt(h),Lu(h)},Hd=(h,S)=>_=>{const P=Z=>{_.setActive(Ga(Z.parents,S)),_.setEnabled(!Is(h,Z.element)&&h.selection.isEditable())};return _.setEnabled(h.selection.isEditable()),Io(h,P)},Pm=h=>{const S=_=>()=>h.execCommand(_);h.hasPlugin("advlist")||(h.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:S("InsertOrderedList"),onSetup:Hd(h,"OL")}),h.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:S("InsertUnorderedList"),onSetup:Hd(h,"UL")}))},Vu=(h,S)=>_=>Io(h,Z=>_.setEnabled(Ga(Z.parents,S)&&!Is(h,Z.element))),Ol=h=>{const S={text:"List properties...",icon:"ordered-list",onAction:()=>h.execCommand("mceListProps"),onSetup:Vu(h,"OL")};h.ui.registry.addMenuItem("listprops",S),h.ui.registry.addContextMenu("lists",{update:_=>{const P=mc(h,_);return eo(P)?["listprops"]:[]}})};var Fg=()=>{ac.add("lists",h=>(_c(h),Pu(h),h.hasPlugin("rtc",!0)?gi(h):(hi(h),Rr(h)),Pm(h),Ol(h),Kr(h)))};Fg()})();(function(){var ac=tinymce.util.Tools.resolve("tinymce.PluginManager");const qs=(Xe,At)=>{Xe.focus(),Xe.undoManager.transact(()=>{Xe.setContent(At)}),Xe.selection.setCursorLocation(),Xe.nodeChanged()},is=Xe=>Xe.getContent({source_view:!0}),xn=Xe=>{const At=is(Xe);Xe.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:At},onSubmit:Eo=>{qs(Xe,Eo.getData().code),Eo.close()}})},un=Xe=>{Xe.addCommand("mceCodeEditor",()=>{xn(Xe)})},ts=Xe=>{const At=()=>Xe.execCommand("mceCodeEditor");Xe.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:At}),Xe.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:At})};var dn=()=>{ac.add("code",Xe=>(un(Xe),ts(Xe),{}))};dn()})();const kG=["id"],rq=vG({__name:"pageMain",setup(ac){const{layout:qs,lang:is}=yG(),xn=wG("tinymce"),un=(ts={})=>({selector:`#${xn}`,statusbar:!1,menubar:!1,placeholder:"placeholder...",language_url:is.defaultLang==="en"?null:"/admin-diy/tinymce/langs/zh-Hans.js",language:is.defaultLang==="en"?null:"zh-Hans",plugins:["table","image","link","autolink"],skin_url:`/admin-diy/tinymce/skins/ui/oxide${qs.isDark?"-dark":""}`,content_css:`/admin-diy/tinymce/skins/content/oxide${qs.isDark?"-dark":""}/content.min.css`,height:200,...ts});return cD(()=>is.defaultLang,()=>{sb.remove(),sb.init(un())}),cD(()=>qs.isDark,()=>{sb.remove(),sb.init(un())}),SG(()=>{sb.init(un())}),(ts,dn)=>(xG(),CG("div",{id:TG(xn)},null,8,kG))}});export{rq as default};
