const __vite__fileDeps=["assets/index-BsQzPGQI.js","assets/element-plus-7Vlk8dbZ.js","assets/@vue-BFtwODxB.js","assets/lodash-es-ByZL8CPd.js","assets/async-validator-DKvM95Vc.js","assets/@vueuse-DQwSfm13.js","assets/@element-plus-DHzED8UM.js","assets/@ctrl-r5W6hzzQ.js","assets/@sxzz-D9SI2xQl.js","assets/normalize-wheel-es-B6fDCfyv.js","assets/element-plus-Dk5dSYq4.css","assets/close-DhbsgNMo.js","assets/index-4vTwd3nK.js","assets/pinia-BdGwRZaI.js","assets/vue-demi-Dq6ymT-8.js","assets/vue-i18n-v7gGpLht.js","assets/@intlify-7FzvKZLA.js","assets/vue-h5XNpCLg.js","assets/vue-router-BtlUgo1z.js","assets/pinia-plugin-persistedstate-RV7uh3T-.js","assets/index-Dr-XV83F.css","assets/plugin-vueexport-helper-DlAUqK2U.js","assets/index-7WKDZ5c0.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{u as V,i as j,f as n,l as x,_ as z}from"./index-4vTwd3nK.js";import{b as H,e as O,f as W,g as X,h as Y,i as G}from"./element-plus-7Vlk8dbZ.js";import{_ as J,a as Q}from"./lock-CfAbhhfK.js";import{_ as Z,a as ee}from"./index-DwkJ6uTP.js";import{d as oe,bp as L,Y as ae,B as I,s as E,F as te,X as se,c as ne,a as B,b as o,L as r,u as a,ah as le,o as ie,R as re,S as ce,aN as pe}from"./@vue-BFtwODxB.js";import{_ as me}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./pinia-BdGwRZaI.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-i18n-v7gGpLht.js";import"./@intlify-7FzvKZLA.js";import"./vue-h5XNpCLg.js";import"./vue-router-BtlUgo1z.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./lodash-es-ByZL8CPd.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-DQwSfm13.js";import"./@element-plus-DHzED8UM.js";import"./@ctrl-r5W6hzzQ.js";import"./@sxzz-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";const de={class:"v100 flex ac"},_e={class:"qv-tool flex ac pd-base"},ue={class:"flex jc f1 pr no-evt"},fe=oe({__name:"index",setup(ge){const{setLogout:C,staticUser:S}=V(),U=pe(()=>z(()=>import("./index-BsQzPGQI.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),{t:l}=j.global,{setToken:R,setDynamicUser:T,userInfo:$,showWelcome:q}=V(),m=L({loginLoading:!1}),t=L({username:"admin",password:"123456",keep:!1,captchaId:"",captchaInfo:""}),D=ae({username:[{required:!0,message:I(()=>l("login.请输入账号"))}],password:[{required:!0,message:I(()=>l("login.请输入密码"))}]}),f=E(),g=E();let h,i,c;const _=async()=>{n.show(l("加载中"));try{await T(!0),S.welcomeHasEnter=!0,$.id&&q()}catch{n.hide()}},w=async(e="",s="")=>{n.show(l("login.登录中")),t.captchaInfo=e,t.captchaId=s;try{const{data:d}=await x("post",t);R(d.userInfo.token),await _()}catch{n.hide()}},y=async()=>{var e;h?(n.hide(),(e=g.value)==null||e.show()):await w()},v=async()=>{try{const{data:e}=await x("get");h=e.captcha,c&&await y(),i="success"}catch(e){e.code===303?(c&&n.hide(),!c&&window.app_entry.split("?redirectPath=")[0]==="/login"?(i=void 0,await _()):H.confirm(`${e.msg}${l("login.确认将继续登录, 取消将退出登录")}`,l("温馨提示")).then(async()=>{i=void 0,await _()}).catch(async()=>{i="fail",await C(!1)})):(i="fail",n.hide()),c=!1}},b=async()=>{var e;m.loginLoading=!0;try{await((e=f.value)==null?void 0:e.validate()),i!=="success"?(c=!0,n.show(l("login.确认中")),i==="fail"&&await v()):await y()}catch{}m.loginLoading=!1};return te(()=>{v()}),se(()=>{n.hide()}),(e,s)=>{const d=Z,F=ee,M=J,k=W,u=X,N=Q,P=Y,A=G,K=O;return ie(),ne("div",de,[B("div",_e,[o(d),o(F,{class:"ml-base"})]),B("div",ue,[o(K,{ref_key:"ref_form",ref:f,rules:a(D),model:a(t),class:"qv-form",size:"large",onKeyup:le(b,["enter"])},{default:r(()=>[o(u,{prop:"username"},{default:r(()=>[o(k,{modelValue:a(t).username,"onUpdate:modelValue":s[0]||(s[0]=p=>a(t).username=p),modelModifiers:{trim:!0},clearable:"",placeholder:e.$t("login.请输入账号"),maxlength:"30"},{prefix:r(()=>[o(M)]),_:1},8,["modelValue","placeholder"])]),_:1}),o(u,{prop:"password"},{default:r(()=>[o(k,{modelValue:a(t).password,"onUpdate:modelValue":s[1]||(s[1]=p=>a(t).password=p),modelModifiers:{trim:!0},type:"password",placeholder:e.$t("login.请输入密码"),"show-password":"",maxlength:"30"},{prefix:r(()=>[o(N)]),_:1},8,["modelValue","placeholder"])]),_:1}),o(P,{modelValue:a(t).keep,"onUpdate:modelValue":s[2]||(s[2]=p=>a(t).keep=p),label:e.$t("login.保持会话")},null,8,["modelValue","label"]),o(u,null,{default:r(()=>[o(A,{round:"",class:"w100",type:"primary","auto-insert-space":"",loading:a(m).loginLoading,onClick:b},{default:r(()=>[re(ce(e.$t(a(m).loginLoading?"login.登录中":"login.登录")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["rules","model"])]),o(a(U),{ref_key:"ref_tap_captcha",ref:g,onSucceed:w},null,512)])}}}),Fe=me(fe,[["__scopeId","data-v-32e5f8d5"]]);export{Fe as default};
